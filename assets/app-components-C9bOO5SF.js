import{u as ue,r as m,a as de,d as ae,w as xe,o as be,b as ge,c as s,e as A,f as L,g as t,h as e,i as R,j as X,k as h,t as v,l as pe,m as Pe,n as je,p as ve,F as H,q as te,s as G,T as ye,v as ne,x as we,y as D,z as K,A as ke,B as Je,C as Me,D as Be,E as Ze,G as Oe,H as He,I as Ge}from"./vue-BxQSfKeV.js";import{d as Ne}from"./pinia-DcjnPr0a.js";import{a as Fe}from"./axios-Dq7h7Pqt.js";const Xe="/assets/logoOrangeweb-C9Cko1mf.webp",Ye=()=>{const T=window.location.hostname;return T==="localhost"||T==="127.0.0.1"?"http://localhost:8000/api/v1":"https://espacecameroun.devfack.com/api/v1"};Fe.defaults.withCredentials=!0;Fe.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Fe.defaults.withXSRFToken=!0;const W=Fe.create({withCredentials:!0,baseURL:Ye(),headers:{Accept:"application/json","Content-Type":"application/json"}}),he=Ne("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(T){const n=await W.post("/login",T);this.user=n.data.user,this.token=n.data.token,localStorage.setItem("token",this.token??""),W.defaults.headers.common.Authorization=`Bearer ${this.token}`},async register(T){const n=await W.post("/register",T);this.user=n.data.user,this.token=n.data.token,localStorage.setItem("token",this.token??""),W.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{W.defaults.headers.common.Authorization=`Bearer ${this.token}`;const T=await W.get("/user");return this.user=T.data.user,!0}catch(T){return console.error("utilisateur non:",T),this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{this.token&&await W.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete W.defaults.headers.common.Authorization}}}),We=ue(),Ie=Ne("userState",()=>{const T=m(0),n=m(0),x=de(),f=()=>{const l=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");T.value=l.length;const u=localStorage.getItem("unread_messages");n.value=u?parseInt(u,10):0},p=l=>{localStorage.setItem("pending_collaborations",JSON.stringify(l)),T.value=l.length},r=l=>{localStorage.setItem("unread_messages",l.toString()),n.value=l},a=async l=>{var S,w,k;const u=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");u.push({produit_id:l.produit_id,prix_revente:l.prix_revente,status:"pending",created_at:new Date().toISOString()}),p(u);try{return await W.post("/collaborations",{produit_id:l.produit_id,prix_revente:l.prix_revente}),await i(),x.success("Demande de collaboration envoy√©e !"),!0}catch(b){((w=(S=b.response)==null?void 0:S.data)==null?void 0:w.message)=="Unauthenticated."&&We.push("login");const o=u.filter(d=>!(d.produit_id===l.produit_id&&d.prix_revente===l.prix_revente));return p(o),x.error(((k=b.response)==null?void 0:k.data.message)||"Erreur lors de la demande de collaboration"),!1}},i=async()=>{var l,u;try{const S=await W.get("/user/badges");T.value=S.data.collaborations_pending,r(S.data.unread_messages||0)}catch(S){((u=(l=S.response)==null?void 0:l.data)==null?void 0:u.message)=="Unauthenticated."&&We.push("login"),console.error("Erreur lors de la synchronisation des badges:",S)}};return{collaborationsPending:T,unreadMessages:n,initializeState:f,addCollaboration:a,syncCollaborationsWithBackend:i,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),T.value=0,n.value=0},saveCollaborationsToLocalStorage:p,saveUnreadMessagesToLocalStorage:r}}),qe=ue(),Ve=Ne("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:T=>he().user},actions:{async fetchProducts(T={},n=!1){var x,f,p,r;if(!(this.isLoading||!n&&!this.hasMore)){this.isLoading=!0,n&&(this.products=[],this.page=1,this.hasMore=!0);try{const a=await W.get("/produits",{params:{...T,page:this.page,sort:this.sort}});if(console.log(a.data),T.per_page==="all")this.products=n?a.data:[...this.products,...a.data];else{const i=a.data.data;this.products=n?i:[...this.products,...i],this.hasMore=a.data.current_page<a.data.last_page,this.page=a.data.current_page+1}}catch(a){throw((f=(x=a.response)==null?void 0:x.data)==null?void 0:f.message)=="Unauthenticated."&&qe.push("login"),((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.message)||"Erreur lors du chargement des produits"}finally{this.isLoading=!1}}},async toggleFavorite(T){var p,r;const n=he();if(!n.user&&(await n.checkAuth(),!n.user)){console.warn("Utilisateur non connect√©, redirection ou action n√©cessaire");return}const x=this.products.find(a=>a.id===T);let f=!1;x&&(x.is_favorited_by=!x.is_favorited_by,x.counts.favorites_count=x.is_favorited_by?x.counts.favorites_count+1:x.counts.favorites_count-1,f=!0),this.product&&this.product.id===T&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,f=!0);try{const a=await W.post(`/produits/${T}/favorite`),i=a.data.produit;if(f){const c=this.products.findIndex(l=>l.id===T);c!==-1&&(this.products[c]={...this.products[c],...i}),this.product&&this.product.id===T&&(this.product={...this.product,...i})}return a.data.message}catch(a){if(((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.message)=="Unauthenticated."&&qe.push("login"),console.log(a),f){const i=this.products.find(c=>c.id===T);i&&(i.is_favorited_by=!i.is_favorited_by,i.counts.favorites_count=i.is_favorited_by?i.counts.favorites_count-1:i.counts.favorites_count+1),this.product&&this.product.id===T&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct(T){var n,x,f,p;try{const r=await W.get(`/produits/${T}`);this.product=r.data.produit;const a=this.products.findIndex(i=>i.id===T);a!==-1?this.products[a]={...this.products[a],...this.product}:this.products.push(this.product)}catch(r){throw((x=(n=r.response)==null?void 0:n.data)==null?void 0:x.message)=="Unauthenticated."&&qe.push("login"),((p=(f=r.response)==null?void 0:f.data)==null?void 0:p.message)||"Erreur lors du chargement du produit"}},setSort(T){this.sort=T,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(T){this.userId=T}}}),et={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},tt={class:"text-sm font-semibold text-[var(--espace-vert)]"},st={class:"text-gray-800"},ot=ae({__name:"SoldeUser",setup(T){ue();const n=he(),x=m(0),f=async()=>{if(n.user)try{x.value=n.user.jetons}catch(p){console.error("Erreur lors de la r√©cup√©ration des jetons:",p)}};return xe(()=>n.user,()=>{f()}),be(()=>{f()}),(p,r)=>{const a=ge("router-link");return L(n).user?(t(),s("div",et,[r[1]||(r[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",tt,[R(a,{to:"/jeton-history"},{default:X(()=>[r[0]||(r[0]=h(" Jetons : ")),e("span",st,v(x.value),1)]),_:1,__:[0]})])])):A("",!0)}}}),re=(T,n)=>{const x=T.__vccOpts||T;for(const[f,p]of n)x[f]=p;return x},Ke=re(ot,[["__scopeId","data-v-a9413d7d"]]),at={class:"relative bg-[var(--espace-vert)] w-full h-full"},rt={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 z-50 shadow-md h-full"},lt={class:"px-2 w-full sm:px-3 py-2 flex justify-between items-center gap-4 mb-4"},nt={class:"flex items-center gap-1 sm:gap-3"},it={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},ut=["aria-label"],dt={class:"flex items-center gap-2"},ct=["src"],pt={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},vt={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},mt=ae({__name:"HeaderBar",setup(T){const n=()=>{const o=window.location.hostname;return o==="localhost"||o==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},x=pe(()=>n()),f=he(),p=Ie();ue();const r=pe(()=>f.user);Pe();const a=m(!1),i=m(!1);m(""),Ve();const c=m(!1),l=m(null),u=m(!1),S=pe(()=>[...r.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:p.unreadMessages},...r.value.commercant?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:p.collaborationsPending},{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),w=async()=>{if(r.value)try{await p.syncCollaborationsWithBackend()}catch(o){console.error("Erreur lors du chargement des badges:",o)}},k=async()=>{if(!r.value&&f.token)try{await f.checkAuth()}catch(o){console.error("Erreur lors de la r√©cup√©ration de l'utilisateur:",o),f.logout()}r.value&&await w()};xe(()=>p.collaborationsPending,o=>{o>-1&&(a.value=!0,setTimeout(()=>a.value=!1,300))}),xe(()=>p.unreadMessages,o=>{o>-1&&(i.value=!0,setTimeout(()=>i.value=!1,300))});const b=o=>{if(u.value){u.value=!1;return}l.value&&!l.value.contains(o.target)&&(c.value=!1)};return be(async()=>{var o;await k(),document.addEventListener("click",b),(o=f.user)!=null&&o.id&&window.Echo.channel(`chat.${f.user.id}`).listen("MessageSent",d=>{var y;((y=f.user)==null?void 0:y.id)===d.receiver_id&&p.saveUnreadMessagesToLocalStorage(d.unread_messages)})}),je(()=>{var o;document.removeEventListener("click",b),(o=f.user)!=null&&o.id&&window.Echo.leave(`chat.${f.user.id}`)}),(o,d)=>{const y=ge("RouterLink"),P=ge("router-link");return t(),s("div",at,[e("header",rt,[e("div",lt,[e("div",nt,[R(y,{to:"/","aria-label":"Retour √† l'accueil"},{default:X(()=>d[0]||(d[0]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Xe,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[0]}),d[1]||(d[1]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"}," Espace Cameroun ",-1))]),e("nav",it,[(t(!0),s(H,null,te(S.value,U=>(t(),ve(y,{key:U.to,to:U.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:X(()=>[e("i",{class:G(["fas",U.icon])},null,2),h(" "+v(U.label)+" ",1),U!=null&&U.badge&&U.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":U.to==="/collaborations"&&a.value||U.to==="/messages"&&i.value}]),"aria-label":U.to==="/collaborations"?"Collaborations en attente":U.to==="/messages"?"Messages non lus":""},v(U.badge),11,ut)):A("",!0)]),_:2},1032,["to"]))),128))]),R(Ke),e("div",dt,[r.value?(t(),ve(y,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:X(()=>[d[2]||(d[2]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),L(p).unreadMessages>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":i.value}]),"aria-label":"Messages non lus"},v(L(p).unreadMessages),3)):A("",!0)]),_:1,__:[2]})):A("",!0),r.value?(t(),ve(y,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:X(()=>{var U;return[(U=r.value)!=null&&U.photo?(t(),s("img",{key:0,src:x.value+r.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,ct)):(t(),s("div",pt,d[3]||(d[3]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):A("",!0)]),r.value?(t(),ve(P,{key:0,to:"/jetonMarket","aria-label":"Aller au march√©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:X(()=>d[4]||(d[4]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[4]})):A("",!0),e("div",vt,[R(P,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:X(()=>d[5]||(d[5]=[h(" ? ")])),_:1,__:[5]})])])])])}}}),mc=re(mt,[["__scopeId","data-v-4292dde3"]]),ft={class:"relative"},gt={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},bt={class:"flex justify-around items-center py-2"},xt=["aria-label"],ht=ae({__name:"FooterBar",setup(T){const n=he(),x=Ie();ue();const f=m(!1),p=m(!1),r=pe(()=>[...n.user?[{to:"/",label:"Accueil",icon:"fa-home"},...n.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:x.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]);return xe(()=>x.collaborationsPending,a=>{a>0&&(f.value=!0,setTimeout(()=>f.value=!1,300))}),xe(()=>x.unreadMessages,a=>{a>0&&(p.value=!0,setTimeout(()=>p.value=!1,300))}),(a,i)=>{const c=ge("RouterLink");return t(),s("div",ft,[R(ye,{name:"slide-up"},{default:X(()=>[e("nav",gt,[e("div",bt,[(t(!0),s(H,null,te(r.value,l=>(t(),ve(c,{key:l.to,to:l.to,"aria-label":l.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:X(()=>[e("i",{class:G(["fas text-lg",l.icon])},null,2),l!=null&&l.badge&&l.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":l.to==="/collaborations"&&f.value||l.to==="/messages"&&p.value}]),"aria-label":l.to==="/collaborations"?"Collaborations en attente":l.to==="/messages"?"Messages non lus":""},v(l.badge),11,xt)):A("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),fc=re(ht,[["__scopeId","data-v-8779b672"]]),yt={class:"mb-4"},_t={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},wt={class:"relative"},kt={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},$t=["type","value","required","placeholder"],Ct={key:0,class:"text-red-500 text-sm mt-1"},_e=ae({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(T){return(n,x)=>(t(),s("div",yt,[e("label",_t,v(T.label),1),e("div",wt,[e("span",kt,[e("i",{class:G(`fas ${T.icon}`)},null,2)]),e("input",{type:T.type,value:T.modelValue,onInput:x[0]||(x[0]=f=>n.$emit("update:modelValue",f.target.value)),required:T.required,placeholder:T.placeholder,class:G(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",T.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,$t)]),T.error?(t(),s("p",Ct,v(T.error),1)):A("",!0)]))}}),At={class:"overflow-y-scroll flex items-center justify-center px-4 py-4"},Pt={class:"w-full max-w-lg bg-gray-30 rounded-2xl shadow-xl p-6 sm:p-10"},jt=["disabled"],St={key:0,class:"fas fa-spinner fa-spin mr-2"},Mt={key:1,class:"fas fa-sign-in-alt mr-2"},Vt={class:"text-center text-sm text-gray-600 mt-6"},Et=ae({__name:"Login",setup(T){const n=m({login:"",mot_de_passe:""}),x=m({}),f=ue(),p=de(),r=he(),a=m(!1),i=async()=>{var c;try{a.value=!0,await r.login({login:n.value.login,mot_de_passe:n.value.mot_de_passe}),p.success("Connexion r√©ussie !"),f.push({name:"home"})}catch(l){console.error("Erreur lors de la connexion:",l);const u=l.message||"Erreur lors de la connexion. Veuillez v√©rifier vos informations.";p.error(u),((c=l.response)==null?void 0:c.status)===422&&(x.value=l.response.data.errors||{})}finally{a.value=!1}};return(c,l)=>{const u=ge("router-link");return t(),s("div",At,[e("div",Pt,[l[4]||(l[4]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-sign-in-alt mr-2 text-[var(--espace-or)]"}),h(" Connexion ")],-1)),l[5]||(l[5]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[h(" Connectez-vous √† "),e("strong",null,"Espace Cameroun"),h(" pour acc√©der √† vos achats et votre espace commer√ßant. ")],-1)),e("form",{onSubmit:ne(i,["prevent"]),class:"space-y-5"},[R(_e,{label:"Email ou T√©l√©phone",icon:"fa-envelope",modelValue:n.value.login,"onUpdate:modelValue":l[0]||(l[0]=S=>n.value.login=S),type:"text",required:"",error:x.value.login},null,8,["modelValue","error"]),R(_e,{label:"Mot de passe",icon:"fa-lock",modelValue:n.value.mot_de_passe,"onUpdate:modelValue":l[1]||(l[1]=S=>n.value.mot_de_passe=S),type:"password",required:"",error:x.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[a.value?(t(),s("i",St)):(t(),s("i",Mt)),e("span",null,v(a.value?"Connexion...":"Se connecter"),1)],8,jt)],32),e("p",Vt,[l[3]||(l[3]=h(" Pas de compte ? ")),R(u,{to:"/register",class:"text-[var(--espace-vert)] font-medium hover:text-[var(--espace-or)] hover:underline"},{default:X(()=>l[2]||(l[2]=[h(" Inscrivez-vous ici ")])),_:1,__:[2]})])])])}}}),gc=re(Et,[["__scopeId","data-v-cc090487"]]),zt="/assets/logo-ba4eAQQi.png",Ut={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},It=ae({__name:"Loader",props:{isLoading:{type:Boolean}},setup(T){return(n,x)=>(t(),ve(ye,{name:"fade"},{default:X(()=>[n.isLoading?(t(),s("div",Ut,x[0]||(x[0]=[e("div",{class:"relative p-6"},[e("img",{src:zt,alt:"Logo Espace Cameroun",class:"h-12 w-12 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-or)] border-t-transparent animate-spin"})],-1)]))):A("",!0)]),_:1}))}}),Se=re(It,[["__scopeId","data-v-f60cc94a"]]),Ft={class:"h-full bg-gray-100 pt-5 px-4 sm:px-2"},Tt={class:"h-full w-full overflow-y-scroll"},Lt={key:0},qt={key:1,class:"grid grid-cols-1 pt-4 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Ot={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},Nt={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Rt=["src"],Dt=["onClick"],Wt=["onClick"],Jt={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Bt={class:"p-2"},Ht={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},Gt=["onClick"],Xt={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},Kt={class:"text-md font-bold text-[var(--espace-or)] mt-2"},Qt={class:"text-sm text-[var(--espace-gris)]"},Zt={class:"text-sm text-[var(--espace-gris)] mt-2"},Yt={class:"ml-4"},es={key:2,class:"text-center text-[var(--espace-gris)]"},ts={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},ss={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},os={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},as={key:0,class:"grid grid-cols-3 gap-2 mb-2"},rs=["src"],ls=["onClick"],ns=["value"],is={key:0,class:"flex items-center gap-2"},us={class:"flex gap-4 pt-2"},ds=["disabled"],cs={key:0,class:"fas fa-spinner fa-spin mr-2"},ps=ae({__name:"CommercantProduits",setup(T){const n=Ve(),x=he(),f=ue(),p=de(),r=m(!1),a=m(!1),i=m([]),c=m([]),l=m(!1),u=m(!1),S=m(null),w=m({}),k=m({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),b=m([]),o=m([]),d=m(null),y=pe(()=>[...b.value,...o.value.map(M=>URL.createObjectURL(M))]),P=async()=>{r.value=!0;try{const M=await W.get("/commercant/produits");i.value=M.data.produits.map(g=>({...g,photo_url:g.photos&&g.photos.length>0?g.photos[0]:"https://via.placeholder.com/150"})),i.value.forEach(g=>{w.value[g.id]||(w.value[g.id]=0)})}catch{p.error("Erreur lors du chargement des produits")}finally{r.value=!1}},U=async()=>{r.value=!0;try{const M=await W.get("/categories");c.value=M.data.categories}catch{p.error("Erreur lors du chargement des cat√©gories")}finally{r.value=!1}},V=()=>{k.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},b.value=[],o.value=[],l.value=!0},I=M=>{S.value=M,k.value={nom:M.nom,description:M.description||"",prix:M.prix,stock:M.quantite,category_id:M.category_id,collaboratif:!!M.collaboratif,marge_min:M.marge_min||0},b.value=M.photos?[...M.photos]:[],o.value=[],w.value[M.id]||(w.value[M.id]=0),u.value=!0},J=M=>{const g=M.target;if(g.files){const $=Array.from(g.files);o.value.push(...$),d.value&&(d.value.value="")}},q=M=>{if(M<b.value.length)b.value.splice(M,1);else{const g=M-b.value.length;o.value.splice(g,1)}},le=async()=>{var g,$,E,z;a.value=!0;const M=new FormData;M.append("nom",k.value.nom),M.append("description",k.value.description),M.append("prix",k.value.prix.toString()),M.append("stock",k.value.stock.toString()),M.append("category_id",k.value.category_id),M.append("collaboratif",k.value.collaboratif?"1":"0"),M.append("marge_min",k.value.marge_min.toString()),b.value.forEach(j=>M.append("old_photos[]",j)),o.value.forEach(j=>M.append("photos[]",j));try{if(l.value)await W.post("/commercant/produits",M,{headers:{"Content-Type":"multipart/form-data"}}),p.success("Produit ajout√© avec succ√®s");else{const j=await W.post(`/commercant/produits/${(g=S.value)==null?void 0:g.id}`,M,{headers:{"Content-Type":"multipart/form-data"}});console.log(j.data),p.success("Produit modifi√© avec succ√®s")}await P(),n.fetchProducts(),oe()}catch(j){((E=($=j.response)==null?void 0:$.data)==null?void 0:E.message)=="Unauthenticated."&&f.push("login"),p.error(((z=j.response)==null?void 0:z.data.message)||"Erreur lors de la sauvegarde du produit")}finally{a.value=!1}},oe=()=>{l.value=!1,u.value=!1,S.value=null,b.value=[],o.value=[]},Q=pe(()=>M=>w.value[M]||0),F=M=>{var E;const g=i.value.find(z=>z.id===M),$=(E=g==null?void 0:g.photos)!=null&&E.length?g.photos.length-1:0;w.value[M]=Math.min((w.value[M]||0)+1,$)},B=M=>{w.value[M]=Math.max((w.value[M]||0)-1,0)};return be(()=>{var M;if(!((M=x.user)!=null&&M.commercant)){p.error("Acc√®s r√©serv√© aux commer√ßants"),f.push("/");return}P(),U()}),(M,g)=>{const $=ge("router-link");return t(),s(H,null,[R(Se,{isLoading:r.value},null,8,["isLoading"]),e("div",Ft,[e("div",Tt,[e("div",{class:"flex justify-between items-center"},[g[9]||(g[9]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),h(" Mes Produits ")],-1)),e("button",{onClick:V,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},g[8]||(g[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Ajouter un produit ")]))]),r.value?(t(),s("div",Lt,g[10]||(g[10]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):i.value.length?(t(),s("div",qt,[(t(!0),s(H,null,te(i.value,E=>(t(),s("div",{key:E.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",Ot,[E.collaboratif?(t(),s("span",Nt," Collaboratif ")):A("",!0),R($,{to:`/produits/${E.id}`,class:"block relative"},{default:X(()=>[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${Q.value(E.id)*100}%)`})},[(t(!0),s(H,null,te(E.photos,(z,j)=>(t(),s("img",{key:j,src:z,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,Rt))),128))],4)]),_:2},1032,["to"]),E.photos&&E.photos.length>1?(t(),s("button",{key:1,onClick:z=>B(E.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},g[11]||(g[11]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Dt)):A("",!0),E.photos&&E.photos.length>1?(t(),s("button",{key:2,onClick:z=>F(E.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},g[12]||(g[12]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Wt)):A("",!0),E.photos&&E.photos.length>1?(t(),s("div",Jt,[(t(!0),s(H,null,te(E.photos,(z,j)=>(t(),s("span",{key:j,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":j===Q.value(E.id)}])},null,2))),128))])):A("",!0)]),e("div",Bt,[e("h2",Ht,[R($,{to:`/produits/${E.id}`,class:"block relative"},{default:X(()=>[h(v(E.nom),1)]),_:2},1032,["to"]),e("button",{onClick:z=>I(E),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},g[13]||(g[13]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,Gt)]),e("p",Xt,v(E.description||"Aucune"),1),e("p",Kt,v(E.prix)+" FCFA",1),e("p",Qt,"Stock: "+v(E.quantite),1),e("div",Zt,[e("span",null,[g[14]||(g[14]=e("i",{class:"fas fa-eye mr-1"},null,-1)),h(" "+v(E.raw_views_count||0)+" vues",1)]),e("span",Yt,[g[15]||(g[15]=e("i",{class:"fas fa-heart mr-1"},null,-1)),h(" "+v(E.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",es,"Aucun produit pour le moment."))]),R(ye,{name:"fade"},{default:X(()=>{var E;return[l.value||u.value?(t(),s("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ne(oe,["self"])},[e("div",ts,[e("h2",ss,v(l.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:ne(le,["prevent"]),class:"space-y-4 pt-12"},[e("div",null,[g[19]||(g[19]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",os,[y.value.length?(t(),s("div",as,[(t(!0),s(H,null,te(y.value,(z,j)=>(t(),s("div",{key:j,class:"relative w-full h-20"},[e("img",{src:z,class:"w-full h-full object-cover rounded-lg",alt:"Pr√©visualisation"},null,8,rs),e("button",{onClick:ne(C=>q(j),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},g[16]||(g[16]=[e("i",{class:"fas fa-times"},null,-1)]),8,ls)]))),128))])):A("",!0),e("input",{ref_key:"fileInput",ref:d,type:"file",multiple:"",onChange:J,class:"hidden",accept:"image/*"},null,544),y.value.length?(t(),s("button",{key:2,type:"button",onClick:g[1]||(g[1]=z=>{var j;return(j=d.value)==null?void 0:j.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},g[18]||(g[18]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:g[0]||(g[0]=z=>{var j;return(j=d.value)==null?void 0:j.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},g[17]||(g[17]=[e("i",{class:"fas fa-camera mr-2"},null,-1),h(" Ajouter une photo ")])))])]),e("div",null,[g[20]||(g[20]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),D(e("input",{"onUpdate:modelValue":g[2]||(g[2]=z=>k.value.nom=z),type:"text",required:"",class:"input-style"},null,512),[[K,k.value.nom]])]),e("div",null,[g[21]||(g[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":g[3]||(g[3]=z=>k.value.description=z),rows:"3",class:"input-style"},null,512),[[K,k.value.description]])]),e("div",null,[g[22]||(g[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":g[4]||(g[4]=z=>k.value.prix=z),type:"number",min:"0",required:"",class:"input-style"},null,512),[[K,k.value.prix,void 0,{number:!0}]])]),e("div",null,[g[23]||(g[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),D(e("input",{"onUpdate:modelValue":g[5]||(g[5]=z=>k.value.stock=z),type:"number",min:"0",required:"",class:"input-style"},null,512),[[K,k.value.stock,void 0,{number:!0}]])]),e("div",null,[g[25]||(g[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Cat√©gorie",-1)),D(e("select",{"onUpdate:modelValue":g[6]||(g[6]=z=>k.value.category_id=z),required:"",class:"input-style"},[g[24]||(g[24]=e("option",{value:""},"S√©lectionner une cat√©gorie",-1)),(t(!0),s(H,null,te(c.value,z=>(t(),s("option",{key:z.id,value:z.id},v(z.nom),9,ns))),128))],512),[[ke,k.value.category_id]])]),l.value||!((E=S.value)!=null&&E.collaboratif)?(t(),s("div",is,[D(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":g[7]||(g[7]=z=>k.value.collaboratif=z)},null,512),[[Je,k.value.collaboratif]]),g[26]||(g[26]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):A("",!0),e("div",us,[e("button",{type:"submit",disabled:a.value,class:G(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",a.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[a.value?(t(),s("i",cs)):A("",!0),h(" "+v(l.value?"Ajouter":"Modifier"),1)],10,ds),e("button",{type:"button",onClick:oe,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):A("",!0)]}),_:1})])],64)}}}),bc=re(ps,[["__scopeId","data-v-d6f7fd62"]]),vs={class:"overflow-y-scroll bg-white flex justify-center px-4 pt-8"},ms={class:"flex flex-col w-full max-w-lg rounded-2xl sm:p-10"},fs=["disabled"],gs={class:"text-center text-sm text-gray-600 mt-6"},bs=ae({__name:"Register",setup(T){const n=m({nom:"",telephone:"",email:"",ville:"",mot_de_passe:"",parrain_code:""}),x=m({}),f=ue(),p=Pe(),r=de(),a=he();be(()=>{const l=p.params.code;l&&(n.value.parrain_code=l)});const i=m(!1),c=async()=>{var l,u,S;try{i.value=!0,await a.register(n.value),r.success("Inscription r√©ussie !"),f.push({name:"home"})}catch(w){console.error("Erreur lors de l'inscription:",w);const k=((u=(l=w.response)==null?void 0:l.data)==null?void 0:u.message)||"Erreur lors de l'inscription. Veuillez v√©rifier vos informations.";r.error(k),((S=w.response)==null?void 0:S.status)===422&&(x.value=w.response.data.errors)}finally{i.value=!1}};return(l,u)=>{const S=ge("router-link");return t(),s("div",vs,[e("div",ms,[u[8]||(u[8]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),h(" Cr√©ez votre compte ")],-1)),u[9]||(u[9]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[h(" Rejoignez "),e("strong",null,"Espace Cameroun"),h(" et profitez d‚Äôune exp√©rience d‚Äôachat unique. Vos informations resteront confidentielles. ")],-1)),e("form",{onSubmit:ne(c,["prevent"]),class:"space-y-5"},[R(_e,{label:"Nom",icon:"fa-user",modelValue:n.value.nom,"onUpdate:modelValue":u[0]||(u[0]=w=>n.value.nom=w),type:"text",required:"",error:x.value.nom},null,8,["modelValue","error"]),R(_e,{label:"T√©l√©phone",icon:"fa-phone",modelValue:n.value.telephone,"onUpdate:modelValue":u[1]||(u[1]=w=>n.value.telephone=w),type:"tel",required:"",error:x.value.telephone},null,8,["modelValue","error"]),R(_e,{label:"Email (optionnel)",icon:"fa-envelope",modelValue:n.value.email,"onUpdate:modelValue":u[2]||(u[2]=w=>n.value.email=w),type:"email",error:x.value.email},null,8,["modelValue","error"]),R(_e,{label:"Ville",icon:"fa-city",modelValue:n.value.ville,"onUpdate:modelValue":u[3]||(u[3]=w=>n.value.ville=w),type:"text",required:"",error:x.value.ville},null,8,["modelValue","error"]),R(_e,{label:"Mot de passe",icon:"fa-lock",modelValue:n.value.mot_de_passe,"onUpdate:modelValue":u[4]||(u[4]=w=>n.value.mot_de_passe=w),type:"password",required:"",error:x.value.mot_de_passe},null,8,["modelValue","error"]),R(_e,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:n.value.parrain_code,"onUpdate:modelValue":u[5]||(u[5]=w=>n.value.parrain_code=w),type:"text",error:x.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:i.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[e("i",{class:G([i.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,v(i.value?"Inscription...":"S'inscrire"),1)],8,fs)],32),e("p",gs,[u[7]||(u[7]=h(" Vous avez d√©j√† un compte ? ")),R(S,{to:"/login",class:"text-[var(--espace-vert)] font-medium hover:underline"},{default:X(()=>u[6]||(u[6]=[h(" Connectez-vous ici ")])),_:1,__:[6]})]),u[10]||(u[10]=e("p",{class:"text-center text-xs text-gray-400 mt-2 pb-24"},[h(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"},"politique de confidentialit√©"),h(". ")],-1))])])}}}),xc=re(bs,[["__scopeId","data-v-845ed51e"]]),xs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},hs={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},ys={class:"p-6"},_s={key:0,class:"grid md:grid-cols-3 gap-6"},ws={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},ks={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},$s={class:"font-extrabold text-lg mb-2"},Cs={class:"mb-2 text-sm opacity-90"},As={class:"text-3xl font-extrabold"},Ps={class:"flex flex-col text-sm font-medium text-gray-700"},js={key:0,class:"text-xs text-red-600 mt-1"},Ss={class:"flex gap-4"},Ms=["value"],Vs=["src"],Es={key:0,class:"text-xs text-red-600 mt-1 block"},zs=["disabled"],Us={class:"text-xs text-gray-400 mt-4 text-center"},Is=ae({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(T,{emit:n}){const x=ue(),f=n,p=de(),r=m(""),a=m(""),i=m(""),c=m(!1),l=m(!1),u=m(!1),S=b=>{r.value=b,c.value=!1,l.value=!1,a.value="",i.value=""},w=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],k=async()=>{var b,o;if(c.value=!i.value,l.value=!a.value,c.value||l.value){p.error("Veuillez remplir tous les champs correctement.");return}u.value=!0;try{const d=await W.post("/upgrade-to-premium",{subscription_type:r.value,payment_service:a.value,phone_number:i.value});u.value=!1,p.success(d.data.message),f("upgraded"),f("close")}catch(d){((o=(b=d.response)==null?void 0:b.data)==null?void 0:o.message)=="Unauthenticated."&&x.push("login"),d.response&&d.response.data?(d.response.data,p.error("Paiement √©chou√© :Verifiez vos informations et r√©essayer")):p.error("Verifiez vos informations et r√©essayer."),console.error(d)}finally{u.value=!1}};return(b,o)=>{const d=ge("router-link");return b.isOpen?(t(),s("div",xs,[e("div",hs,[o[18]||(o[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"üöÄ Passez √† Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",ys,[r.value?(t(),s("div",ws,[e("div",ks,[o[12]||(o[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:G([{"bg-green-600 text-white":r.value==="monthly","bg-yellow-400 text-gray-900":r.value==="yearly"},"rounded-lg p-4"])},[e("h4",$s,v(r.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Cs,v(r.value==="monthly"?"Acc√®s complet √† toutes les fonctionnalit√©s.":"Payez moins, profitez plus avec 16% d‚Äô√©conomie !"),1),e("div",As,v(r.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:ne(k,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[o[16]||(o[16]=e("h3",{class:"text-xl font-bold mb-2"},"D√©tails du paiement",-1)),e("label",Ps,[o[13]||(o[13]=h(" Num√©ro de t√©l√©phone ")),D(e("input",{"onUpdate:modelValue":o[4]||(o[4]=y=>i.value=y),type:"tel",placeholder:"Ex: 696428651",class:G(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":c.value}]),onInput:o[5]||(o[5]=y=>c.value=!i.value),required:""},null,34),[[K,i.value]]),c.value?(t(),s("span",js,"Veuillez entrer un num√©ro valide.")):A("",!0)]),o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Ss,[(t(),s(H,null,te(w,y=>e("label",{key:y.value,class:G(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":a.value===y.value,"border-gray-300 bg-white":a.value!==y.value,"border-red-500":l.value&&!a.value}])},[D(e("input",{type:"radio",value:y.value,"onUpdate:modelValue":o[6]||(o[6]=P=>a.value=P),class:"hidden"},null,8,Ms),[[Be,a.value]]),e("img",{src:y.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Vs),e("span",{class:G([{"text-[var(--espace-vert)]":a.value===y.value,"text-gray-700":a.value!==y.value},"font-semibold select-none"])},v(y.label),3)],2)),64))]),l.value&&!a.value?(t(),s("span",Es," Veuillez s√©lectionner un service. ")):A("",!0),e("button",{type:"submit",disabled:u.value||!i.value||!a.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[u.value?(t(),s(H,{key:0},[o[14]||(o[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),o[15]||(o[15]=h(" Veuillez patienter... "))],64)):(t(),s(H,{key:1},[h(" Payer & Souscrire ")],64))],8,zs),e("button",{type:"button",onClick:o[7]||(o[7]=y=>r.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," ‚Üê Retour aux plans "),e("p",Us," üîí Paiement s√©curis√© via "+v(a.value||"votre service"),1)],32)])):(t(),s("div",_s,[o[11]||(o[11]=Me('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-bb1956fd><div data-v-bb1956fd><h3 class="text-xl font-bold text-gray-800" data-v-bb1956fd>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-bb1956fd>Pour d√©buter sans frais</p><ul class="space-y-2 text-sm" data-v-bb1956fd><li class="flex items-center gap-2 text-gray-700" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-bb1956fd><span data-v-bb1956fd>‚ùå</span> Pas de statistiques d√©taill√©es </li><li class="flex items-center gap-2 text-gray-400" data-v-bb1956fd><span data-v-bb1956fd>‚ùå</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-bb1956fd><span data-v-bb1956fd>‚ùå</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-bb1956fd> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:o[1]||(o[1]=y=>S("monthly"))},[o[8]||(o[8]=Me('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-bb1956fd>‚≠ê Populaire</span><div data-v-bb1956fd><h3 class="text-xl font-bold" data-v-bb1956fd>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-bb1956fd> Acc√®s complet √† toutes les fonctionnalit√©s </p><div class="text-3xl font-extrabold mb-2" data-v-bb1956fd>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-bb1956fd><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:o[0]||(o[0]=ne(y=>S("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:o[3]||(o[3]=y=>S("yearly"))},[o[9]||(o[9]=Me('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-bb1956fd>-16% √âconomie</span><div data-v-bb1956fd><h3 class="text-xl font-bold" data-v-bb1956fd>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-bb1956fd>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-bb1956fd>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-bb1956fd><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-bb1956fd><span data-v-bb1956fd>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:o[2]||(o[2]=ne(y=>S("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),R(d,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:X(()=>o[10]||(o[10]=[h(" ‚Üê Retour ")])),_:1,__:[10]})]))])])])):A("",!0)}}}),Fs=re(Is,[["__scopeId","data-v-bb1956fd"]]),Ts={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Ls={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},qs={class:"flex justify-center gap-3 mb-4"},Os=["onClick"],Ns={key:0,class:"text-xs text-red-600 mt-1"},Rs={class:"flex gap-4"},Ds=["value"],Ws=["src"],Js={key:1,class:"text-xs text-red-600 mt-1"},Bs={class:"text-center text-lg font-bold mt-6"},Hs={class:"text-[var(--espace-vert)]"},Gs=["disabled"],Xs={key:0},Ks={key:1},Qs={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zs={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},Ys=ae({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(T,{emit:n}){const x=n,f=de(),p=m(10),r=m(""),a=m(""),i=m(p.value*25),c=m(!1),l=m(!1),u=m(!1),S=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],w=[10,20,50,100],k=pe(()=>p.value>=10&&r.value.trim().length===9&&/^6\d{8}$/.test(r.value)&&a.value!==""),b=()=>{i.value=p.value*25},o=U=>{p.value=U,b()},d=()=>{b()},y=()=>{u.value=!(r.value.trim().length===9&&/^6\d{8}$/.test(r.value))},P=async()=>{if(l.value=!a.value,!k.value){f.error("Veuillez remplir tous les champs correctement.");return}c.value=!0;try{const U=await W.post("/acheter-jetons",{nombre_jetons:p.value,payment_service:a.value,phone_number:r.value});f.success(U.data.message),x("purchased",p.value),x("close")}catch(U){if(U.response&&U.response.data){const V=U.response.data;f.error(`Erreur: ${V.error_message||"Achat √©chou√©"}. D√©tails: ${V.details||"Aucun d√©tail."}`)}else f.error("Erreur lors de l'achat. Veuillez r√©essayer.");console.error(U)}finally{c.value=!1}};return xe(r,()=>{y()}),(U,V)=>{const I=ge("router-link");return t(),s("div",Ts,[e("div",Ls,[V[7]||(V[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," üé´ Acheter des Jetons ",-1)),V[8]||(V[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 25 FCFA",-1)),e("div",qs,[(t(),s(H,null,te(w,J=>e("button",{key:J,type:"button",onClick:q=>o(J),class:G(["rounded-full px-4 py-2 border font-semibold transition",p.value===J?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},v(J),11,Os)),64))]),V[9]||(V[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[h(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),D(e("input",{id:"jetonQuantity","onUpdate:modelValue":V[0]||(V[0]=J=>p.value=J),type:"number",min:"10",placeholder:"Ex: 10",onInput:d,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[K,p.value,void 0,{number:!0}]]),V[10]||(V[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[h(" Num√©ro de t√©l√©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),D(e("input",{id:"phoneNumber","onUpdate:modelValue":V[1]||(V[1]=J=>r.value=J),type:"tel",placeholder:"Ex: 696428651",onInput:y,class:G(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",u.value?"border-red-500":"border-gray-300"])},null,34),[[K,r.value]]),u.value?(t(),s("p",Ns," Veuillez entrer un num√©ro valide (9 chiffres, commen√ßant par 6). ")):A("",!0),V[11]||(V[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",Rs,[(t(),s(H,null,te(S,J=>e("label",{key:J.value,class:G(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":a.value===J.value,"border-gray-300 bg-white":a.value!==J.value}])},[D(e("input",{type:"radio",value:J.value,"onUpdate:modelValue":V[2]||(V[2]=q=>a.value=q),class:"hidden"},null,8,Ds),[[Be,a.value]]),e("img",{src:J.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Ws),e("span",{class:G({"text-[var(--espace-vert)] font-bold":a.value===J.value,"text-gray-700":a.value!==J.value})},v(J.label),3)],2)),64))]),l.value&&!a.value?(t(),s("p",Js," Veuillez s√©lectionner un service. ")):A("",!0),e("div",Bs,[V[4]||(V[4]=h(" Montant total : ")),e("span",Hs,v(i.value)+" FCFA",1)]),e("button",{onClick:P,disabled:!k.value||c.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[c.value?(t(),s("span",Ks,"veuillez patientez")):(t(),s("span",Xs,"Acheter")),c.value?(t(),s("svg",Qs,V[5]||(V[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):A("",!0)],8,Gs),e("button",Zs,[R(I,{to:"/jeton-history",onClick:V[3]||(V[3]=J=>x("close"))},{default:X(()=>V[6]||(V[6]=[h("Annuler")])),_:1,__:[6]})])])])}}}),eo=re(Ys,[["__scopeId","data-v-dd242c69"]]),to={class:"space-y-6 pb-16"},so={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},oo={key:0,class:"space-y-2 text-[var(--espace-gris)]"},ao={class:"flex gap-2"},ro=["disabled"],lo={key:0,class:"fas fa-spinner fa-spin mr-2"},no={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},io={key:0,class:"space-y-2 text-[var(--espace-gris)]"},uo={key:0,class:"w-24 h-24"},co=["src"],po={key:0,class:"mt-2 w-24 h-24"},vo=["src"],mo={class:"flex gap-2"},fo=["disabled"],go={key:0,class:"fas fa-spinner fa-spin mr-2"},bo=ae({__name:"userProfile",props:{user:Object},setup(T){var b,o,d,y,P,U,V,I,J,q,le,oe,Q,F,B,M;const n=ue(),x=he(),f=de(),p=m(!1),r=m(x.user),a=m(!1),i=m(!1),c=m({nom:((b=r.value)==null?void 0:b.nom)||"",telephone:((o=r.value)==null?void 0:o.telephone)||"",email:((d=r.value)==null?void 0:d.email)||"",ville:((y=r.value)==null?void 0:y.ville)||""}),l=m(!1),u=m({nom:((U=(P=r.value)==null?void 0:P.commercant)==null?void 0:U.nom)||"",description:((I=(V=r.value)==null?void 0:V.commercant)==null?void 0:I.description)||"",email:((q=(J=r.value)==null?void 0:J.commercant)==null?void 0:q.email)||"",telephone:((oe=(le=r.value)==null?void 0:le.commercant)==null?void 0:oe.telephone)||"",ville:((F=(Q=r.value)==null?void 0:Q.commercant)==null?void 0:F.ville)||"",logo:null,logoPreview:(M=(B=r.value)==null?void 0:B.commercant)!=null&&M.logo?`http://localhost:8000/storage/${r.value.commercant.logo}`:null}),S=g=>{var E;const $=(E=g.target.files)==null?void 0:E[0];if($){if(!$.type.startsWith("image/")){f.error("Veuillez s√©lectionner une image.");return}if($.size>2*1024*1024){f.error("Image trop volumineuse (max 2Mo).");return}u.value.logo=$,u.value.logoPreview=URL.createObjectURL($)}},w=async()=>{var g,$,E;a.value=!0;try{const z=await W.post("/updateProfile",c.value);r.value&&(r.value.nom=z.data.user.nom||"",r.value.telephone=z.data.user.telephone||"",r.value.email=z.data.user.email||"",r.value.ville=z.data.user.ville||""),x.user=z.data.user,p.value=!1,f.success("Profil mis √† jour avec succ√®s.")}catch(z){(($=(g=z.response)==null?void 0:g.data)==null?void 0:$.message)=="Unauthenticated."&&n.push("login"),f.error(((E=z.response)==null?void 0:E.data.message)||"Erreur lors de la mise √† jour.")}finally{a.value=!1}},k=async()=>{var g,$,E,z,j;i.value=!0;try{const C=new FormData;C.append("nom",u.value.nom),C.append("description",u.value.description),C.append("email",u.value.email),C.append("telephone",u.value.telephone),C.append("ville",u.value.ville),u.value.logo&&C.append("logo",u.value.logo);const Z=await W.post("/commercant/update",C,{headers:{"Content-Type":"multipart/form-data"}});(g=r.value)!=null&&g.commercant&&(r.value.commercant.nom=Z.data.commercant.nom,r.value.commercant.description=Z.data.commercant.description,r.value.commercant.email=Z.data.commercant.email,r.value.commercant.telephone=Z.data.commercant.telephone,r.value.commercant.ville=Z.data.commercant.ville,r.value.commercant.logo=Z.data.commercant.logo),x.user=r.value,u.value.logoPreview=Z.data.commercant.logo?`http://localhost:8000/storage/${Z.data.commercant.logo}`:null,l.value=!1,f.success("Commerce mis √† jour avec succ√®s.")}catch(C){((E=($=C.response)==null?void 0:$.data)==null?void 0:E.message)=="Unauthenticated."&&n.push("login"),f.error(((j=(z=C.response)==null?void 0:z.data)==null?void 0:j.message)||"Erreur lors de la mise √† jour du commerce.")}finally{i.value=!1}};return xe(()=>x.user,g=>{var $,E,z,j,C,Z;r.value=g||null,c.value={nom:(g==null?void 0:g.nom)||"",telephone:(g==null?void 0:g.telephone)||"",email:(g==null?void 0:g.email)||"",ville:(g==null?void 0:g.ville)||""},u.value={nom:(($=g==null?void 0:g.commercant)==null?void 0:$.nom)||"",description:((E=g==null?void 0:g.commercant)==null?void 0:E.description)||"",email:((z=g==null?void 0:g.commercant)==null?void 0:z.email)||"",telephone:((j=g==null?void 0:g.commercant)==null?void 0:j.telephone)||"",ville:((C=g==null?void 0:g.commercant)==null?void 0:C.ville)||"",logo:null,logoPreview:(Z=g==null?void 0:g.commercant)!=null&&Z.logo?`http://localhost:8000/storage/${g.commercant.logo}`:null}},{immediate:!0}),(g,$)=>{var E,z,j,C,Z,N;return t(),s("div",to,[e("section",so,[$[23]||($[23]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),p.value?(t(),s("form",{key:1,onSubmit:ne(w,["prevent"]),class:"space-y-4"},[e("div",null,[$[18]||($[18]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),D(e("input",{"onUpdate:modelValue":$[1]||($[1]=Y=>c.value.nom=Y),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[K,c.value.nom]])]),e("div",null,[$[19]||($[19]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"T√©l√©phone",-1)),D(e("input",{"onUpdate:modelValue":$[2]||($[2]=Y=>c.value.telephone=Y),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre t√©l√©phone"},null,512),[[K,c.value.telephone]])]),e("div",null,[$[20]||($[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),D(e("input",{"onUpdate:modelValue":$[3]||($[3]=Y=>c.value.email=Y),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[K,c.value.email]])]),e("div",null,[$[21]||($[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),D(e("input",{"onUpdate:modelValue":$[4]||($[4]=Y=>c.value.ville=Y),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[K,c.value.ville]])]),e("div",ao,[e("button",{type:"submit",disabled:a.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",a.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[a.value?(t(),s("i",lo)):A("",!0),$[22]||($[22]=h(" Enregistrer "))],10,ro),e("button",{onClick:$[5]||($[5]=Y=>p.value=!1),class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",oo,[e("p",null,[$[13]||($[13]=e("strong",null,"Nom :",-1)),h(" "+v((E=r.value)==null?void 0:E.nom),1)]),e("p",null,[$[14]||($[14]=e("strong",null,"T√©l√©phone :",-1)),h(" "+v((z=r.value)==null?void 0:z.telephone),1)]),e("p",null,[$[15]||($[15]=e("strong",null,"Email :",-1)),h(" "+v(((j=r.value)==null?void 0:j.email)||"Non d√©fini"),1)]),e("p",null,[$[16]||($[16]=e("strong",null,"Ville :",-1)),h(" "+v((C=r.value)==null?void 0:C.ville),1)]),e("p",null,[$[17]||($[17]=e("strong",null,"Statut Premium :",-1)),h(" "+v((Z=r.value)!=null&&Z.premium?"Actif":"Inactif"),1)]),e("button",{onClick:$[0]||($[0]=Y=>p.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(N=r.value)!=null&&N.commercant?(t(),s("section",no,[$[36]||($[36]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),l.value?(t(),s("form",{key:1,onSubmit:ne(k,["prevent"]),class:"space-y-4"},[e("div",null,[$[29]||($[29]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),D(e("input",{"onUpdate:modelValue":$[7]||($[7]=Y=>u.value.nom=Y),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[K,u.value.nom]])]),e("div",null,[$[30]||($[30]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":$[8]||($[8]=Y=>u.value.description=Y),id:"description_commerce",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[K,u.value.description]])]),e("div",null,[$[31]||($[31]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),D(e("input",{"onUpdate:modelValue":$[9]||($[9]=Y=>u.value.email=Y),id:"email_commerce",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce (optionnel)"},null,512),[[K,u.value.email]])]),e("div",null,[$[32]||($[32]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"T√©l√©phone",-1)),D(e("input",{"onUpdate:modelValue":$[10]||($[10]=Y=>u.value.telephone=Y),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"T√©l√©phone du commerce"},null,512),[[K,u.value.telephone]])]),e("div",null,[$[33]||($[33]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),D(e("input",{"onUpdate:modelValue":$[11]||($[11]=Y=>u.value.ville=Y),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[K,u.value.ville]])]),e("div",null,[$[34]||($[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:S,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),u.value.logoPreview?(t(),s("div",po,[e("img",{src:u.value.logoPreview,alt:"Aper√ßu logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,vo)])):A("",!0)]),e("div",mo,[e("button",{type:"submit",disabled:i.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",i.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[i.value?(t(),s("i",go)):A("",!0),$[35]||($[35]=h(" Enregistrer "))],10,fo),e("button",{onClick:$[12]||($[12]=Y=>l.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",io,[r.value.commercant.logo?(t(),s("div",uo,[e("img",{src:`http://localhost:8000/storage/${r.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,co)])):A("",!0),e("p",null,[$[24]||($[24]=e("strong",null,"Nom du commerce :",-1)),h(" "+v(r.value.commercant.nom),1)]),e("p",null,[$[25]||($[25]=e("strong",null,"Description :",-1)),h(" "+v(r.value.commercant.description||"Non d√©finie"),1)]),e("p",null,[$[26]||($[26]=e("strong",null,"Email :",-1)),h(" "+v(r.value.commercant.email||"Non d√©fini"),1)]),e("p",null,[$[27]||($[27]=e("strong",null,"T√©l√©phone :",-1)),h(" "+v(r.value.commercant.telephone),1)]),e("p",null,[$[28]||($[28]=e("strong",null,"Ville :",-1)),h(" "+v(r.value.commercant.ville),1)]),e("button",{onClick:$[6]||($[6]=Y=>l.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Modifier ")]))])):A("",!0)])}}}),xo=re(bo,[["__scopeId","data-v-d704430c"]]),ho=ae({__name:"MerchantProfile",props:{user:Object},setup(T){const n=de(),x=m(null),f=m([]);return be(async()=>{try{const p=await W.get("/commercant/profil");x.value=p.data.commercant,f.value=p.data.produits||[]}catch(p){n.error("Erreur lors du chargement des donn√©es du commer√ßant: "+(p.message||p))}}),(p,r)=>null}}),yo=re(ho,[["__scopeId","data-v-ce205108"]]),_o={class:"overflow-y-scroll min-h-screen relative bg-gray-100 py-8 sm:px-6"},wo={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},ko={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},$o={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},Co={class:"relative"},Ao=["src"],Po={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},jo={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},So={class:"space-y-1"},Mo={key:0,class:"text-sm text-gray-500"},Vo={key:0,class:"ml-4 flex items-center gap-2"},Eo=["src"],zo=["disabled"],Uo={class:"flex flex-col sm:flex-row gap-2 items-center"},Io={class:"container mx-auto max-w-4xl"},Fo={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},To={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},Lo=ae({__name:"Profile",setup(T){const n=()=>{const B=window.location.hostname;return B==="localhost"||B==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},x=pe(()=>n()),f=ue(),p=de(),r=he();r.checkAuth();const a=m(r.user),i=m(!1),c=m(!1),l=m(null),u=m(null),S=m(!1),w=m(!1),k=m(!1),b=pe(()=>w.value?yo:xo),o=m(null),d=m(null),y=m(!1);let P=null;const U=()=>{var B;(B=o.value)==null||B.click(),i.value=!1},V=B=>{const M=B.target;if(M.files&&M.files[0]){const g=M.files[0];if(!g.type.startsWith("image/")){p.error("Veuillez s√©lectionner une image.");return}if(g.size>2*1024*1024){p.error("Image trop volumineuse (max 2Mo).");return}u.value=g,l.value=URL.createObjectURL(g)}},I=async()=>{try{P=await navigator.mediaDevices.getUserMedia({video:!0}),y.value=!0,i.value=!1,setTimeout(()=>{d.value&&(d.value.srcObject=P)},100)}catch(B){p.error("Impossible d'acc√©der √† la cam√©ra."),console.error(B)}},J=()=>{if(!d.value)return;const B=d.value,M=document.createElement("canvas");M.width=B.videoWidth,M.height=B.videoHeight;const g=M.getContext("2d");g&&(g.drawImage(B,0,0,M.width,M.height),M.toBlob($=>{$&&(u.value=new File([$],"photo.jpg",{type:"image/jpeg"}),l.value=URL.createObjectURL(u.value),q())},"image/jpeg"))},q=()=>{P&&(P.getTracks().forEach(B=>B.stop()),P=null),y.value=!1},le=()=>{u.value=null,l.value=null},oe=async()=>{var B,M,g,$;if(u.value){c.value=!0;try{const E=new FormData;E.append("photo",u.value);const z=await W.post("/profile/photo",E,{headers:{"Content-Type":"multipart/form-data"}});z.data.photo&&(a.value&&(a.value.photo=z.data.photo,r.user=a.value),p.success("Photo mise √† jour."),le())}catch(E){((M=(B=E.response)==null?void 0:B.data)==null?void 0:M.message)=="Unauthenticated."&&f.push("login"),p.error((($=(g=E.response)==null?void 0:g.data)==null?void 0:$.message)||"Erreur lors de l'envoi.")}finally{c.value=!1}}},Q=async()=>{S.value=!1},F=B=>{p.success(`Vous avez achet√© ${B} jetons !`)};return xe(()=>r.user,B=>{a.value=B||null},{immediate:!0}),be(()=>{}),je(()=>{l.value&&URL.revokeObjectURL(l.value),P&&P.getTracks().forEach(B=>B.stop())}),(B,M)=>{var g,$,E,z,j,C,Z,N,Y,ie,ce,me,ee,_,se,O,fe,$e,Ce,Ee,ze;return t(),s("div",_o,[e("div",wo,[e("div",ko,[e("div",$o,[e("div",Co,[(g=a.value)!=null&&g.photo?(t(),s("img",{key:0,src:x.value+(($=a.value)==null?void 0:$.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Ao)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:we({background:`${((C=(j=(z=(E=a.value)==null?void 0:E.niveaux_users)==null?void 0:z.at(-1))==null?void 0:j.parrainage_niveau)==null?void 0:C.couleur)||"#0af"}`})},M[5]||(M[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(Z=a.value)!=null&&Z.premium?(t(),s("i",Po)):A("",!0),e("button",{onClick:M[0]||(M[0]=Ae=>i.value=!i.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},M[6]||(M[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),i.value?(t(),s("div",jo,[e("button",{onClick:I,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," Cam√©ra "),e("button",{onClick:U,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):A("",!0)]),e("input",{ref_key:"galleryInput",ref:o,type:"file",accept:"image/*",class:"hidden",onChange:V},null,544),e("div",So,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:we({color:`${((ce=(ie=(Y=(N=a.value)==null?void 0:N.niveaux_users)==null?void 0:Y.at(-1))==null?void 0:ie.parrainage_niveau)==null?void 0:ce.couleur)||"#0af"}`})},[h(v((me=a.value)==null?void 0:me.nom)+" ",1),(ee=a.value)!=null&&ee.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:we({background:`${((fe=(O=(se=(_=a.value)==null?void 0:_.niveaux_users)==null?void 0:se.at(-1))==null?void 0:O.parrainage_niveau)==null?void 0:fe.couleur)||"#0af"}`})}," Premium ",4)):A("",!0)],4),($e=a.value)!=null&&$e.subscription_ends_at?(t(),s("span",Mo," Jusqu'au "+v(new Date((Ce=a.value)==null?void 0:Ce.subscription_ends_at).toLocaleDateString()),1)):A("",!0)])]),l.value?(t(),s("div",Vo,[e("img",{src:l.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,Eo),e("button",{onClick:oe,disabled:c.value,class:G(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":c.value}])},v(c.value?"Upload...":"Confirmer"),11,zo),e("button",{onClick:le,class:"text-red-500 hover:text-red-700"}," Annuler ")])):A("",!0)]),e("div",Uo,[(Ee=a.value)!=null&&Ee.commercant?A("",!0):(t(),s("button",{key:0,onClick:M[1]||(M[1]=Ae=>L(f).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commer√ßant ")),(ze=a.value)!=null&&ze.premium?A("",!0):(t(),s("button",{key:1,onClick:M[2]||(M[2]=Ae=>S.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",Io,[(t(),ve(Ze(b.value)))]),S.value?(t(),ve(Fs,{key:0,"is-open":S.value,onClose:M[3]||(M[3]=Ae=>S.value=!1),onUpgraded:Q},null,8,["is-open"])):A("",!0),k.value?(t(),ve(eo,{key:1,"is-open":k.value,onClose:M[4]||(M[4]=Ae=>k.value=!1),onPurchased:F},null,8,["is-open"])):A("",!0),y.value?(t(),s("div",Fo,[e("div",To,[e("video",{ref_key:"videoRef",ref:d,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:J,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:q,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):A("",!0)])}}}),hc=re(Lo,[["__scopeId","data-v-b59c9490"]]),qo={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},Oo={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},No={class:"space-y-2"},Ro=["onClick"],Do={class:"font-poppins"},Wo={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Jo={class:"lg:hidden mb-4"},Bo={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Ho=["onClick"],Go={key:0,class:"space-y-6"},Xo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ko={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Qo={class:"flex items-center gap-4 mb-4"},Zo=["src"],Yo={class:"text-[var(--espace-vert)] font-semibold"},ea={class:"text-sm text-[var(--espace-gris)]"},ta={class:"text-sm text-[var(--espace-gris)]"},sa={class:"text-sm text-[var(--espace-gris)]"},oa={key:0,class:"space-y-6"},aa={key:0,class:"space-y-6"},ra={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},la={class:"text-base font-medium font-poppins"},na={class:"text-sm text-[var(--espace-gris)]"},ia=ae({__name:"Parametres",setup(T){const n=m(!1),x=he(),f=ue(),p=de(),r=x.user,a=m("profile"),i=m({id:(r==null?void 0:r.id)??0,nom:(r==null?void 0:r.nom)??"",email:(r==null?void 0:r.email)??"",telephone:(r==null?void 0:r.telephone)??"",ville:(r==null?void 0:r.ville)??""});x.user={...x.user,...i.value};const c=m({current_password:"",new_password:"",confirm_new_password:""});m({});const l=m(""),u=pe(()=>[...r!=null&&r.commercant?[{to:"/commercant/produits",label:"Espace Commer√ßant",icon:"fa-store-alt",description:"G√©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des r√©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"G√©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"G√©rez vos collaborations sur des produits"}]),S=async()=>{var o,d,y,P;n.value=!0;try{await W.post("/updateProfile",i.value),localStorage.setItem("user",JSON.stringify(x.user)),p.success("Profil mis √† jour avec succ√®s",{timeout:3e3})}catch(U){((d=(o=U.response)==null?void 0:o.data)==null?void 0:d.message)=="Unauthenticated."&&f.push("login"),p.error(((P=(y=U.response)==null?void 0:y.data)==null?void 0:P.message)||"Erreur lors de la mise √† jour du profil")}finally{n.value=!1}},w=async()=>{var o,d,y,P;n.value=!0;try{if(c.value.new_password!==c.value.confirm_new_password){p.error("Les mots de passe ne correspondent pas");return}await W.post("/updatePassword",c.value),p.success("Mot de passe mis √† jour avec succ√®s",{timeout:3e3}),c.value={current_password:"",new_password:"",confirm_new_password:""},l.value=""}catch(U){((d=(o=U.response)==null?void 0:o.data)==null?void 0:d.message)=="Unauthenticated."&&f.push("login"),p.error(((P=(y=U.response)==null?void 0:y.data)==null?void 0:P.message)||"Erreur lors de la mise √† jour du mot de passe")}finally{n.value=!1}},k=()=>{x.logout(),f.push({name:"login"})},b=()=>{const o=c.value.new_password;o.length===0?l.value="":o.length<8||!/[A-Za-z]/.test(o)||!/[0-9]/.test(o)?l.value="weak":/[!@#$%^&*]/.test(o)?l.value="strong":l.value="medium"};return xe(()=>c.value.new_password,b),(o,d)=>{const y=ge("RouterLink");return t(),s(H,null,[R(Se,{isLoading:n.value},null,8,["isLoading"]),e("div",qo,[e("aside",Oo,[d[7]||(d[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"Param√®tres",-1)),e("nav",No,[(t(),s(H,null,te([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],P=>e("button",{key:P.id,onClick:U=>P.id==="logout"?k():a.value=P.id,class:G(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":a.value===P.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":a.value!==P.id}])},[e("i",{class:G(["fas",P.icon])},null,2),e("span",Do,v(P.label),1)],10,Ro)),64))])]),e("main",Wo,[e("div",Jo,[e("div",Bo,[(t(),s(H,null,te([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],P=>e("button",{key:P.id,onClick:U=>P.id==="logout"?k():a.value=P.id,class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":a.value===P.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":a.value!==P.id}])},[e("i",{class:G(["fas",P.icon])},null,2),h(" "+v(P.label),1)],10,Ho)),64))])]),R(ye,{name:"slide"},{default:X(()=>{var P,U;return[a.value==="profile"?(t(),s("section",Go,[d[10]||(d[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",Xo,[e("form",{onSubmit:ne(S,["prevent"]),class:"space-y-4"},[R(_e,{label:"Nom",icon:"fa-user",modelValue:i.value.nom,"onUpdate:modelValue":d[0]||(d[0]=V=>i.value.nom=V),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),R(_e,{label:"Email",icon:"fa-envelope",modelValue:i.value.email,"onUpdate:modelValue":d[1]||(d[1]=V=>i.value.email=V),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),R(_e,{label:"T√©l√©phone",icon:"fa-phone",modelValue:i.value.telephone,"onUpdate:modelValue":d[2]||(d[2]=V=>i.value.telephone=V),type:"tel",required:"",placeholder:"Votre num√©ro de t√©l√©phone"},null,8,["modelValue"]),R(_e,{label:"Ville",icon:"fa-city",modelValue:i.value.ville,"onUpdate:modelValue":d[3]||(d[3]=V=>i.value.ville=V),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),d[8]||(d[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre √† jour ",-1))],32),e("div",Ko,[d[9]||(d[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"Aper√ßu",-1)),e("div",Qo,[e("img",{src:((U=(P=L(r))==null?void 0:P.commercant)==null?void 0:U.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,Zo),e("div",null,[e("p",Yo,v(i.value.nom||"Nonni"),1),e("p",ea,v(i.value.email||"Non d√©fini"),1)])]),e("p",ta,"T√©l√©phone: "+v(i.value.telephone||"Nonni"),1),e("p",sa,"Ville: "+v(i.value.ville||"Non d√©fini"),1)])])])):A("",!0)]}),_:1}),R(ye,{name:"slide"},{default:X(()=>[a.value==="security"?(t(),s("section",oa,[d[12]||(d[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"S√©curit√©",-1)),e("form",{onSubmit:ne(w,["prevent"]),class:"space-y-4"},[R(_e,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:c.value.current_password,"onUpdate:modelValue":d[4]||(d[4]=P=>c.value.current_password=P),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),R(_e,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:c.value.new_password,"onUpdate:modelValue":d[5]||(d[5]=P=>c.value.new_password=P),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:b},null,8,["modelValue"]),l.value?(t(),s("div",{key:0,class:G(["text-sm",{"text-red-500":l.value==="weak","text-yellow-500":l.value==="medium","text-green-500":l.value==="strong"}])}," Force du mot de passe : "+v(l.value==="weak"?"Faible":l.value==="medium"?"Moyen":"Fort"),3)):A("",!0),R(_e,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:c.value.confirm_new_password,"onUpdate:modelValue":d[6]||(d[6]=P=>c.value.confirm_new_password=P),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),d[11]||(d[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):A("",!0)]),_:1}),R(ye,{name:"slide"},{default:X(()=>[a.value==="links"?(t(),s("section",aa,[d[13]||(d[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",ra,[(t(!0),s(H,null,te(u.value,P=>(t(),ve(y,{key:P.to,to:P.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:X(()=>[e("i",{class:G(["fas",P.icon])},null,2),e("div",null,[e("h3",la,v(P.label),1),e("p",na,v(P.description),1)])]),_:2},1032,["to"]))),128))])])):A("",!0)]),_:1})])])],64)}}}),yc=re(ia,[["__scopeId","data-v-ce56f428"]]),ua={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},da={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},ca=["src","alt"],pa={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},va={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},ma={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},fa={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},ga={class:"text-xs text-[var(--espace-gris)] truncate"},ba={class:"text-sm font-medium text-[var(--espace-or)]"},xa={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},ha={class:"flex items-center gap-1"},ya={class:"flex items-center gap-1"},_a=["aria-label"],wa=ae({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(T,{emit:n}){const x=T,f=n,p=de(),r=Ve(),a=l=>{if(l==null||isNaN(l)||l===0)return"0";const u=Math.abs(l);return u<1e3?l.toString():u<1e4?(l/1e3).toFixed(1).replace(/\.0$/,"")+"k":u<1e6?Math.floor(l/1e3)+"k":u<1e9?(l/1e6).toFixed(1).replace(/\.0$/,"")+"M":(l/1e9).toFixed(1).replace(/\.0$/,"")+"B"},i=m(0),c=async()=>{var l,u;try{await r.toggleFavorite(x.produit.id),f("toggle-favorite",x.produit.id)}catch(S){p.error(((u=(l=S.response)==null?void 0:l.data)==null?void 0:u.message)||"Erreur lors de la mise √† jour des favori.")}};return(l,u)=>{var w,k;const S=ge("router-link");return t(),s("div",ua,[R(S,{to:`/produits/${l.produit.id}`,class:"block relative"},{default:X(()=>[e("div",da,[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${i.value*100}%)`})},[(t(!0),s(H,null,te(l.produit.photos||[l.produit.photo_url||"https://via.placeholder.com/150"],(b,o)=>(t(),s("img",{key:o,src:b,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${l.produit.nom} - ${o+1}`},null,8,ca))),128))],4),l.produit.photos&&l.produit.photos.length>1?(t(),s("div",pa,[(t(!0),s(H,null,te(l.produit.photos,(b,o)=>(t(),s("span",{key:o,class:G(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":o===i.value}])},null,2))),128))])):A("",!0)]),l.produit.collaboratif?(t(),s("span",va," Collaboratif ")):A("",!0),l.produit.boosted_until&&new Date(l.produit.boosted_until)>new Date?(t(),s("span",ma," Boost√© ")):A("",!0),e("h3",fa,v(l.produit.nom),1),e("p",ga,v(l.produit.description||"Aucune description"),1),e("p",ba,v(l.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",xa,[e("div",ha,[u[0]||(u[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,v(a((w=l.produit.counts)==null?void 0:w.views_count)),1)]),e("div",ya,[e("button",{onClick:c,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":l.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":l.produit.is_favorited_by}])},null,2)],8,_a),e("span",null,v(a((k=l.produit.counts)==null?void 0:k.favorites_count)),1)])])])}}}),Te=re(wa,[["__scopeId","data-v-cd62888d"]]),ka={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},$a={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},Ca={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},Aa=["onClick","aria-label","aria-current"],Pa=["aria-label","aria-expanded"],ja={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},Sa={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},Ma={class:"flex-1 min-w-[120px]"},Va={class:"flex-1 min-w-[120px]"},Ea=["value"],za={class:"flex-1 min-w-[100px]"},Ua={class:"flex-1 min-w-[100px]"},Ia={class:"flex-1 min-w-[120px]"},Fa=["value"],Ta={class:"flex-1 min-w-[100px]"},La=["aria-busy"],qa={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Oa=ae({__name:"Home",setup(T){const n=ue(),x=Ve(),f=he(),p=m([]),r=de(),a=m(!1),i=m({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),c=m(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),l=m(null),u=m(null),S=async()=>{try{const U=await W.get("/categories");p.value=U.data.categories}catch(U){console.error("Erreur lors du chargement des cat√©gories:",U),r.error("Erreur lors du chargement des cat√©gories.")}},w=()=>{if(i.value.prix_min&&i.value.prix_max&&parseFloat(i.value.prix_min)>parseFloat(i.value.prix_max)){r.error("Le prix minimum doit √™tre inf√©rieur au prix maximum.");return}x.fetchProducts(i.value,!0),a.value=!1},k=()=>{i.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},a.value=!1},b=U=>{x.setSort(U)},o=()=>Object.values(i.value).filter(U=>U!=="").length,d=U=>{P(U)},y=U=>{P(U)},P=async U=>{var le,oe,Q;const V=(le=f.user)==null?void 0:le.id,I=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),J=new Date().toISOString().split("T")[0],q=localStorage.getItem("lastResetDate");if((!q||q!==J)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",J)),!await I[U])try{setTimeout(async()=>{const F=await W.post("/record_view",{product_id:U,user_id:V??null})},1e3),I[U]=!0,localStorage.setItem("viewedProducts",JSON.stringify(I))}catch(F){console.error("Erreur lors de l'enregistrement de la vue:",F),r.error(((Q=(oe=F.response)==null?void 0:oe.data)==null?void 0:Q.message)||"Erreur lors de l'enregistrement de la vue.")}};return be(async()=>{try{await x.fetchProducts(),await S()}catch(U){console.error("Erreur lors du chargement des produits ou cat√©gories:",U),U=="Unauthenticated."&&n.push("login"),r.error("Erreur lors du chargement des produits. Veuillez r√©essayer.")}l.value=new IntersectionObserver(U=>{U[0].isIntersecting&&!x.isLoading&&x.hasMore&&x.fetchProducts(i.value)},{threshold:.1}),u.value&&l.value.observe(u.value)}),je(()=>{l.value&&u.value&&l.value.unobserve(u.value)}),(U,V)=>(t(),s("div",ka,[R(Se,{isLoading:L(x).isLoading},null,8,["isLoading"]),e("div",$a,[e("div",Ca,[(t(),s(H,null,te([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-heart"}],I=>e("button",{key:I.id,onClick:J=>b(I.id),class:G(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":L(x).sort===I.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":L(x).sort!==I.id}]),"aria-label":`Trier par ${I.label}`,"aria-current":L(x).sort===I.id?"true":void 0},[e("i",{class:G(["fas",I.icon])},null,2),h(" "+v(I.label),1)],10,Aa)),64)),e("button",{onClick:V[0]||(V[0]=I=>a.value=!a.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":a.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":a.value},[V[7]||(V[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),o()>0?(t(),s("span",ja,v(o()),1)):A("",!0)],8,Pa)]),R(ye,{name:"slide-up"},{default:X(()=>[a.value?(t(),s("div",Sa,[e("form",{onSubmit:ne(w,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",Ma,[D(e("input",{"onUpdate:modelValue":V[1]||(V[1]=I=>i.value.search=I),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[K,i.value.search]])]),e("div",Va,[D(e("select",{"onUpdate:modelValue":V[2]||(V[2]=I=>i.value.category=I),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[V[8]||(V[8]=e("option",{value:""},"Toutes les Cat√©gories",-1)),(t(!0),s(H,null,te(p.value,I=>(t(),s("option",{key:I.id,value:I.id},v(I.nom),9,Ea))),128))],512),[[ke,i.value.category]])]),e("div",za,[D(e("input",{"onUpdate:modelValue":V[3]||(V[3]=I=>i.value.prix_min=I),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[K,i.value.prix_min]])]),e("div",Ua,[D(e("input",{"onUpdate:modelValue":V[4]||(V[4]=I=>i.value.prix_max=I),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[K,i.value.prix_max]])]),e("div",Ia,[D(e("select",{"onUpdate:modelValue":V[5]||(V[5]=I=>i.value.ville=I),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[V[9]||(V[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(H,null,te(c.value,I=>(t(),s("option",{key:I,value:I},v(I),9,Fa))),128))],512),[[ke,i.value.ville]])]),e("div",Ta,[D(e("select",{"onUpdate:modelValue":V[6]||(V[6]=I=>i.value.collaboratif=I),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},V[10]||(V[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[ke,i.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[V[12]||(V[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:k,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"R√©initialiser les filtres"},V[11]||(V[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):A("",!0)]),_:1}),R(Oe,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:X(()=>[(t(!0),s(H,null,te(L(x).products,I=>(t(),ve(Te,{key:I.id,produit:I,onMouseover:J=>d(I.id),onTouchstart:J=>y(I.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:u,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":L(x).isLoading},[L(x).hasMore?A("",!0):(t(),s("p",qa," Aucun produit suppl√©mentaire "))],8,La)])]))}}),_c=re(Oa,[["__scopeId","data-v-de8e3b7b"]]),Na={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},Ra={class:"container mx-auto max-w-5xl"},Da={key:0,class:"text-center text-[var(--espace-gris)]"},Wa={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Ja={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},Ba={class:"w-full lg:w-1/2 relative"},Ha={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},Ga=["src","alt"],Xa={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Ka={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},Qa={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Za={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Commer√ßant Pro"},Ya={class:"w-full lg:w-1/2"},er={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},tr={class:"text-sm text-[var(--espace-gris)] mb-3"},sr={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},or={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},ar={class:"flex items-center gap-3"},rr={class:"flex items-center gap-1"},lr={class:"flex items-center gap-1"},nr=["aria-label"],ir={class:"border-t pt-3 mt-3"},ur={class:"text-xs text-[var(--espace-gris)] mb-1"},dr={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"Commer√ßant v√©rifi√©",title:"Commer√ßant v√©rifi√©"},cr={class:"text-xs text-[var(--espace-gris)] mb-1"},pr={class:"text-xs text-[var(--espace-gris)] mb-1"},vr={class:"text-xs text-[var(--espace-gris)] mb-2"},mr={class:"flex flex-col sm:flex-row gap-3 mt-4"},fr=["disabled","aria-label"],gr={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},br={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},xr={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},hr={class:"text-xs text-[var(--espace-gris)] mb-3"},yr=["aria-label"],_r={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},wr={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},kr={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},$r={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Cr={class:"text-sm text-[var(--espace-gris)]"},Ar={class:"text-[var(--espace-or)]"},Pr={class:"flex gap-4"},jr={key:0,class:"mt-6"},Sr=["aria-busy"],Mr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Vr=ae({__name:"Produit",setup(T){const n=Ve(),x=Pe(),f=ue(),p=he(),r=Ie(),a=de();m([]);const i=m(!1),c=m(null),l=m(null),u=m(null),S=m(!1),w=m(1),k=m(0),b=m(5),o=[100,500,1e3,5e3,1e4],d=[5,15,25,50,75],y=j=>{if(j==null||isNaN(j)||j===0)return"0";const C=Math.abs(j);return C<1e3?j.toString():C<1e4?(j/1e3).toFixed(1).replace(/\.0$/,"")+"k":C<1e6?Math.floor(j/1e3)+"k":C<1e9?(j/1e6).toFixed(1).replace(/\.0$/,"")+"M":(j/1e9).toFixed(1).replace(/\.0$/,"")+"B"},P=async()=>{try{n.isLoading=!0,await n.viewProduct(x.params.id),n.isLoading=!1,n.product.photos&&!n.product.photo_url&&(n.product.photo_url=n.product.photos[0]),await n.fetchProducts({category:n.product.category_id,per_page:8},!0)}catch(j){a.error(j||"Erreur lors du chargement du produit"),f.push({name:"home"})}finally{n.isLoading=!1}},U=()=>{var j;if(!p.user){a.error("Veuillez vous connecter pour collaborer"),f.push({name:"login"});return}if(((j=p.user.commercant)==null?void 0:j.id)===n.product.commercant_id){a.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!n.product.collaboratif){a.error("Ce produit n‚Äôest pas ouvert √† la collaboration");return}c.value=n.product.prix+(n.product.marge_min||500),i.value=!0},V=async()=>{if(!c.value||c.value<n.product.prix+(n.product.marge_min||0)){a.error(`Le prix de revente doit √™tre sup√©rieur ou √©gal √† ${n.product.prix+(n.product.marge_min||0)} XAF`);return}await r.addCollaboration({produit_id:n.product.id,prix_revente:c.value})&&(a.success("Demande de collaboration envoy√©e",{timeout:3e3}),i.value=!1,c.value=null)},I=()=>{i.value=!1,c.value=null},J=()=>{f.push({path:`/commercant/produits/${n.product.id}/edit`})},q=async()=>{var j,C,Z;if(!p.user||((j=p.user.commercant)==null?void 0:j.id)!==n.product.commercant_id){a.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}if(p.user.jetons<b.value){a.error(`Pas assez de Jetons. Il vous faut ${b.value} Jetons pour ce boost.`);return}try{const N=await W.post(`/produits/${n.product.id}/boost`,{duration_days:w.value,target_views:o[k.value]});p.user.jetons-=b.value,n.product.boosted_until=N.data.data.end_date,a.success(N.data.message||"Produit boost√© avec succ√®s !"),S.value=!1}catch(N){a.error(((Z=(C=N.response)==null?void 0:C.data)==null?void 0:Z.message)||"Erreur lors du boostage du produit")}},le=()=>{var j;if(!p.user||((j=p.user.commercant)==null?void 0:j.id)!==n.product.commercant_id){a.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}S.value=!0,oe()},oe=()=>{const j=w.value*5,C=d[k.value];b.value=Math.max(5,j+C)};xe([w,k],()=>{oe()});const Q=j=>{B(j)},F=j=>{B(j)},B=async j=>{var ie,ce,me;const C=(ie=p.user)==null?void 0:ie.id;if(!C){a.error("Connexion requise pour enregistrer la vue.");return}const Z=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),N=new Date().toISOString().split("T")[0],Y=localStorage.getItem("lastResetDate");if((!Y||Y!==N)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",N)),!Z[j])try{setTimeout(async()=>{const ee=await W.post("/record_view",{product_id:j,user_id:C})},1e3),Z[j]=!0,localStorage.setItem("viewedProducts",JSON.stringify(Z))}catch(ee){console.error("Erreur lors de l'enregistrement de la vue:",ee),a.error(((me=(ce=ee.response)==null?void 0:ce.data)==null?void 0:me.message)||"Erreur lors de l'enregistrement de la vue.")}},M=async()=>{var j,C;try{await n.toggleFavorite(n.product.id)}catch(Z){a.error(((C=(j=Z.response)==null?void 0:j.data)==null?void 0:C.message)||"Erreur lors de la mise √† jour des favoris.")}},g=(j,C,Z)=>{var Y;if(!p.user){a.error("Veuillez vous connecter pour d√©marrer une conversation"),f.push({name:"login"});return}const N={id:j,name:C,commercant_id:n.product.commercant_id,name_user:((Y=p.user)==null?void 0:Y.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(N)),f.push(`/messages/${Z}`)},$=m(0),E=()=>{var C;const j=(((C=n.product.photos)==null?void 0:C.length)||1)-1;$.value=Math.min($.value+1,j)},z=()=>{$.value=Math.max($.value-1,0)};return be(()=>{P(),r.initializeState(),l.value=new IntersectionObserver(j=>{j[0].isIntersecting&&!n.isLoading&&n.hasMore&&n.fetchProducts({category:n.product.category_id,per_page:8},!1)},{threshold:.1}),u.value&&l.value.observe(u.value)}),je(()=>{l.value&&u.value&&l.value.unobserve(u.value)}),xe(()=>x.params.id,j=>{j&&(P(),$.value=0)}),xe(n.product,j=>{j&&(n.page=1,n.fetchProducts({category:j.category_id,per_page:4},!0),$.value=0)}),(j,C)=>{const Z=ge("router-link");return t(),s(H,null,[R(Se,{isLoading:L(n).isLoading},null,8,["isLoading"]),e("div",Na,[e("div",Ra,[L(n).isLoading?(t(),s("div",Da)):L(n).product?(t(),s("div",Wa,[R(ye,{name:"slide-up"},{default:X(()=>{var N,Y,ie,ce,me,ee,_,se,O,fe,$e,Ce,Ee,ze,Ae,Re,De;return[e("div",Ja,[e("div",Ba,[e("div",Ha,[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${$.value*100}%)`})},[(t(!0),s(H,null,te(L(n).product.photos||[L(n).product.photo_url||"https://via.placeholder.com/300"],(Le,Ue)=>(t(),s("img",{key:Ue,src:Le,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${L(n).product.nom} - ${Ue+1}`},null,8,Ga))),128))],4),L(n).product.photos&&L(n).product.photos.length>1?(t(),s("button",{key:0,onClick:z,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image pr√©c√©dente"},C[6]||(C[6]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):A("",!0),L(n).product.photos&&L(n).product.photos.length>1?(t(),s("button",{key:1,onClick:E,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},C[7]||(C[7]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):A("",!0),L(n).product.photos&&L(n).product.photos.length>1?(t(),s("div",Xa,[(t(!0),s(H,null,te(L(n).product.photos,(Le,Ue)=>(t(),s("span",{key:Ue,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Ue===$.value}])},null,2))),128))])):A("",!0)]),L(n).product.boosted_until&&new Date(L(n).product.boosted_until)>new Date?(t(),s("span",Ka," Boost√© ")):A("",!0),L(n).product.collaboratif?(t(),s("span",Qa," Collaboratif ")):A("",!0),(N=L(p).user)!=null&&N.premium?(t(),s("span",Za," Premium ")):A("",!0)]),e("div",Ya,[e("h1",er,v(L(n).product.nom),1),e("p",tr,v(L(n).product.description||"Aucune description disponible"),1),e("p",sr,v(L(n).product.prix)+" XAF ",1),e("div",or,[e("p",null,[C[8]||(C[8]=e("strong",null,"Cat√©gorie :",-1)),h(" "+v(((Y=L(n).product.category)==null?void 0:Y.nom)||"Non sp√©cifi√©e"),1)]),e("p",null,[C[9]||(C[9]=e("strong",null,"Quantit√© :",-1)),h(" "+v(L(n).product.quantite),1)]),e("p",null,[C[10]||(C[10]=e("strong",null,"Ville :",-1)),h(" "+v(L(n).product.ville||"Non sp√©cifi√©e"),1)]),e("p",null,[C[11]||(C[11]=e("strong",null,"Ajout√© le :",-1)),h(" "+v(new Date(L(n).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",ar,[e("div",rr,[C[12]||(C[12]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,v(y((ie=L(n).product.counts)==null?void 0:ie.views_count))+" vues",1)]),e("div",lr,[e("i",{class:G(["fas fa-heart text-[10px]",{"text-[var(--espace-or)]":L(n).product.is_favorited_by}])},null,2),e("span",null,v(y((ce=L(n).product.counts)==null?void 0:ce.favorites_count))+" favoris",1)])])]),e("button",{onClick:M,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":L(n).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-heart mr-2 text-sm",{"text-[var(--espace-or)]":L(n).product.is_favorited_by}])},null,2),h(" "+v(L(n).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,nr),e("div",ir,[C[17]||(C[17]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," √Ä propos du commer√ßant ",-1)),e("p",ur,[e("strong",null,v((me=L(n).product.commercant)==null?void 0:me.nom),1),(ee=L(n).product.commercant)!=null&&ee.verified?(t(),s("span",dr,C[13]||(C[13]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):A("",!0)]),e("p",cr,v(((_=L(n).product.commercant)==null?void 0:_.description)||"Aucune description disponible"),1),e("p",pr,[C[14]||(C[14]=e("strong",null,"Ville :",-1)),h(" "+v(((se=L(n).product.commercant)==null?void 0:se.ville)||"Nonsp√©cifi√©e"),1)]),e("p",vr,[C[15]||(C[15]=e("strong",null,"Note :",-1)),h(" "+v(Number((O=L(n).product.commercant)==null?void 0:O.rating).toFixed(1)||"Non √©valu√©")+" / 5 ",1)]),R(Z,{to:`/commercants/${L(n).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commer√ßant"},{default:X(()=>C[16]||(C[16]=[h(" Voir le profil du commer√ßant ")])),_:1,__:[16]},8,["to"])]),e("div",mr,[L(n).product.collaboratif&&(($e=(fe=L(p).user)==null?void 0:fe.commercant)==null?void 0:$e.id)!==L(n).product.commercant_id?(t(),s("button",{key:0,onClick:U,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},C[18]||(C[18]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),h(" Collaborer ")]))):A("",!0),((Ee=(Ce=L(p).user)==null?void 0:Ce.commercant)==null?void 0:Ee.id)===L(n).product.commercant_id?(t(),s("button",{key:1,onClick:J,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},C[19]||(C[19]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),h(" Modifier le produit ")]))):A("",!0),((Ae=(ze=L(p).user)==null?void 0:ze.commercant)==null?void 0:Ae.id)===L(n).product.commercant_id?(t(),s("button",{key:2,onClick:le,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!L(n).product.boosted_until&&new Date(L(n).product.boosted_until)>new Date,"aria-label":L(n).product.boosted_until&&new Date(L(n).product.boosted_until)>new Date?"Boost d√©j√† actif":"Personnaliser le boost"},C[20]||(C[20]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,fr)):A("",!0),((De=(Re=L(p).user)==null?void 0:Re.commercant)==null?void 0:De.id)!==L(n).product.commercant_id?(t(),s("button",{key:3,onClick:C[0]||(C[0]=Le=>g(L(n).product.id,L(n).product.nom,L(n).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},C[21]||(C[21]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),h(" Envoyer un message ")]))):A("",!0)])])])]}),_:1})])):(t(),s("div",gr," Produit non trouv√©. ")),R(ye,{name:"fade"},{default:X(()=>[i.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ne(I,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",br,[e("h2",xr," Collaborer sur "+v(L(n).product.nom),1),e("p",hr," Proposez un prix de revente (minimum : "+v(L(n).product.prix+(L(n).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:ne(V,["prevent"]),class:"space-y-3"},[e("div",null,[C[22]||(C[22]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),D(e("input",{id:"prix_revente","onUpdate:modelValue":C[1]||(C[1]=N=>c.value=N),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${L(n).product.nom}`,required:""},null,8,yr),[[K,c.value,void 0,{number:!0}]]),c.value?(t(),s("p",_r," Marge potentielle : "+v(c.value-L(n).product.prix)+" XAF ",1)):A("",!0)]),e("div",{class:"flex gap-3"},[C[23]||(C[23]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:I,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):A("",!0)]),_:1}),R(ye,{name:"fade"},{default:X(()=>[S.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:C[5]||(C[5]=ne(N=>S.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",wr,[C[29]||(C[29]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:ne(q,["prevent"]),class:"space-y-6"},[e("div",null,[C[24]||(C[24]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Dur√©e (jours)",-1)),D(e("input",{type:"range","onUpdate:modelValue":C[2]||(C[2]=N=>w.value=N),min:"1",max:"20",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:oe},null,544),[[K,w.value,void 0,{number:!0}]]),e("p",kr,v(w.value)+" jours ",1)]),e("div",null,[C[25]||(C[25]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),D(e("input",{type:"range","onUpdate:modelValue":C[3]||(C[3]=N=>k.value=N),min:"0",max:"4",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:oe},null,544),[[K,k.value,void 0,{number:!0}]]),e("p",$r,v(o[k.value])+" vues ",1)]),e("p",Cr,[C[26]||(C[26]=h("Co√ªt estim√© : ")),e("strong",Ar,v(b.value),1),C[27]||(C[27]=h(" Jetons"))]),e("div",Pr,[C[28]||(C[28]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:C[4]||(C[4]=N=>S.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):A("",!0)]),_:1})]),L(n).products?(t(),s("div",jr,[C[30]||(C[30]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),R(Oe,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:X(()=>[(t(!0),s(H,null,te(L(n).products,N=>(t(),ve(Te,{key:N.id,produit:N,onMouseover:Y=>Q(N.id),onTouchstart:Y=>F(N.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:u,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":L(n).isLoading},[L(n).hasMore?A("",!0):(t(),s("p",Mr," Aucun produit suppl√©mentaire "))],8,Sr)])):A("",!0)])],64)}}}),wc=re(Vr,[["__scopeId","data-v-707bda8b"]]),Er={class:"relative bg-green-500"},zr={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},Ur={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},Ir={class:"flex items-center gap-1 sm:gap-3"},Fr={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},Tr=["aria-label"],Lr={class:"flex items-center gap-2"},qr=["src"],Or={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},Nr={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},Rr={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Dr={class:"flex justify-around items-center py-2"},Wr=["aria-label"],Jr=ae({__name:"AppHeader",setup(T){var U;const n=he(),x=Ie(),f=ue(),p=n.user;Pe();const r=m(!1),a=m(!1),i=m(!1),c=m(""),l=Ve(),u=m(!1),S=m(null),w=m(!1),k=pe(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...n.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...n.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:x.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),b=async()=>{var V,I;if(n.user)try{const J=await W.get("/user/badges");x.saveCollaborationsToLocalStorage(J.data.collaborations_pending.map(q=>({produit_id:q.produit_id,prix_revente:q.prix_revente,status:q.status,created_at:q.created_at})))}catch(J){((I=(V=J.response)==null?void 0:V.data)==null?void 0:I.message)=="Unauthenticated."&&f.push("login"),console.error("Erreur lors du chargement des badges:",J)}};xe(()=>n.user,V=>{V&&(b(),x.initializeState())},{immediate:!0}),xe(()=>x.collaborationsPending,()=>{x.collaborationsPending>0&&(a.value=!0,setTimeout(()=>a.value=!1,300))});const o=async()=>{if(c.value.trim())try{await l.fetchProducts({search:c.value.trim()},!0),c.value="",u.value=!1}catch(V){console.error("Erreur lors de la recherche:",V)}},d=V=>{if(w.value){w.value=!1;return}S.value&&!S.value.contains(V.target)&&(u.value=!1)},y=async()=>{u.value=!u.value,u.value&&(w.value=!0,await Ge())},P=()=>{f.push("/messages")};return(U=n.user)!=null&&U.id&&window.Echo.channel(`chat.${n.user.id}`).listen("MessageSent",V=>{var I;((I=n.user)==null?void 0:I.id)===V.receiver_id&&x.saveUnreadMessagesToLocalStorage(V.unread_messages)}),be(()=>{n.user&&(b(),x.initializeState()),document.addEventListener("click",d)}),je(()=>{document.removeEventListener("click",d)}),(V,I)=>{const J=ge("RouterLink");return t(),s("div",Er,[e("header",zr,[e("div",Ur,[e("div",Ir,[R(J,{to:"/","aria-label":"Retour √† l'accueil"},{default:X(()=>I[2]||(I[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Xe,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),I[3]||(I[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",Fr,[(t(!0),s(H,null,te(k.value,q=>(t(),ve(J,{key:q.to,to:q.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:X(()=>[e("i",{class:G(["fas",q.icon])},null,2),h(" "+v(q.label)+" ",1),q.badge>0?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/panier"&&r.value||q.to==="/collaborations"&&a.value||q.to==="/commandes"&&i.value}]),"aria-label":q.to==="/panier"?"Nombre d'articles dans le panier":q.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},v(q.badge),11,Tr)):A("",!0)]),_:2},1032,["to"]))),128))]),R(Ke),e("div",Lr,[e("button",{onClick:y,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},I[4]||(I[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:P,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},I[5]||(I[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(H,null,te(k.value.filter(q=>L(n).user?q.to==="/profil":["/login","/register"].includes(q.to)),q=>(t(),ve(J,{key:q.to,to:q.to,class:"relative flex items-center justify-center","aria-label":q.label},{default:X(()=>{var le;return[(le=L(p))!=null&&le.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${L(p).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,qr)):(t(),s("div",Or,[e("i",{class:G([`fas ${q.icon}`,"text-2xl text-gray-100"])},null,2)])),q.badge>0&&q.to==="/collaborations"?(t(),s("span",{key:2,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/collaborations"&&a.value}]),"aria-label":"Collaborations en attente"},v(q.badge),3)):A("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),u.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:S,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",Nr,[D(e("input",{"onUpdate:modelValue":I[0]||(I[0]=q=>c.value=q),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:He(o,["enter"])},null,544),[[K,c.value]]),e("button",{onClick:o,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},I[6]||(I[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:I[1]||(I[1]=q=>u.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},I[7]||(I[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):A("",!0)]),R(ye,{name:"slide-up"},{default:X(()=>[e("nav",Rr,[e("div",Dr,[(t(!0),s(H,null,te(k.value,q=>(t(),ve(J,{key:q.to,to:q.to,"aria-label":q.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:X(()=>[e("i",{class:G(["fas text-lg",q.icon])},null,2),q.badge>0?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/panier"&&r.value||q.to==="/collaborations"&&a.value||q.to==="/commandes"&&i.value}]),"aria-label":q.to==="/panier"?"Nombre d'articles dans le panier":q.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},v(q.badge),11,Wr)):A("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),Qe=re(Jr,[["__scopeId","data-v-c232437a"]]),Br={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},Hr={class:"container mx-auto px-4 sm:px-6 py-6"},Gr={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Xr={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Kr={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Qr={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Zr={key:2,class:"text-sm text-[var(--espace-gris)] italic"},Yr={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},el=["value"],tl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},sl=["value"],ol={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},al=["value"],rl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},ll={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},nl={key:1,class:"text-base text-[var(--espace-gris)] italic"},il={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ul=["onClick"],dl=ae({__name:"CommercantDashboard",setup(T){const n=ue(),x=de(),f=m([]),p=m([]),r=m(null),a=m(!1),i=m({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),c=m({nom:"",description:"",ville:""}),l=m(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),u=async()=>{a.value=!0;try{const[b,o,d]=await Promise.all([W.get("/commercant/produits"),W.get("/categories"),W.get("/commercant/profil")]);a.value=!1,f.value=b.data.produits.map(y=>{var P;return{...y,commercant_id:((P=r.value)==null?void 0:P.id)||""}}),p.value=o.data.categories,r.value=d.data.commercant,c.value={nom:r.value.nom,description:r.value.description||"",ville:r.value.ville||""}}catch{x.error("Erreur lors du chargement des donn√©es."),a.value=!1}},S=async()=>{try{const b=await W.post("/commercant/produits",i.value);x.success("Produit ajout√© avec succ√®s."),u(),i.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{x.error("Erreur lors de l‚Äôajout du produit.")}},w=async b=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await W.delete(`/commercant/produits/${b}`),x.success("Produit supprim√© avec succ√®s."),u()}catch{x.error("Erreur lors de la suppression du produit.")}},k=async()=>{var b,o;try{await W.put("/commercant/profil",c.value),x.success("Profil mis √† jour avec succ√®s."),u()}catch(d){((o=(b=d.response)==null?void 0:b.data)==null?void 0:o.message)=="Unauthenticated."&&n.push("login"),x.error("Erreur lors de la mise √† jour du profil.")}};return be(()=>{u()}),(b,o)=>(t(),s("div",Br,[R(Qe),e("div",Hr,[o[26]||(o[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),h(" Espace Commer√ßant ")],-1)),e("div",Gr,[o[14]||(o[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",Xr,[r.value?(t(),s("p",Kr,[o[12]||(o[12]=e("span",{class:"font-medium"},"Revenus :",-1)),h(" "+v(r.value.revenus)+" FCFA ",1)])):A("",!0),r.value?(t(),s("p",Qr,[o[13]||(o[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),h(" "+v(r.value.produits_vendus),1)])):(t(),s("p",Zr,"Chargement..."))])]),e("div",Yr,[o[17]||(o[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil Commer√ßant",-1)),e("form",{onSubmit:ne(k,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[D(e("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>c.value.nom=d),type:"text",placeholder:"Nom du commer√ßant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[K,c.value.nom]]),D(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=d=>c.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[K,c.value.description]]),D(e("select",{"onUpdate:modelValue":o[2]||(o[2]=d=>c.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[o[15]||(o[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(H,null,te(l.value,d=>(t(),s("option",{key:d,value:d},v(d),9,el))),128))],512),[[ke,c.value.ville]]),o[16]||(o[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",tl,[o[22]||(o[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:ne(S,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[D(e("input",{"onUpdate:modelValue":o[3]||(o[3]=d=>i.value.nom=d),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[K,i.value.nom]]),D(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=d=>i.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[K,i.value.description]]),D(e("input",{"onUpdate:modelValue":o[5]||(o[5]=d=>i.value.prix=d),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[K,i.value.prix]]),D(e("input",{"onUpdate:modelValue":o[6]||(o[6]=d=>i.value.photo_url=d),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[K,i.value.photo_url]]),D(e("select",{"onUpdate:modelValue":o[7]||(o[7]=d=>i.value.category_id=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[o[18]||(o[18]=e("option",{value:""},"Cat√©gorie",-1)),(t(!0),s(H,null,te(p.value,d=>(t(),s("option",{key:d.id,value:d.id},v(d.nom),9,sl))),128))],512),[[ke,i.value.category_id]]),e("label",ol,[D(e("input",{"onUpdate:modelValue":o[8]||(o[8]=d=>i.value.collaboratif=d),type:"checkbox"},null,512),[[Je,i.value.collaboratif]]),o[19]||(o[19]=h(" Collaboratif "))]),D(e("input",{"onUpdate:modelValue":o[9]||(o[9]=d=>i.value.marge_min=d),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[K,i.value.marge_min]]),D(e("input",{"onUpdate:modelValue":o[10]||(o[10]=d=>i.value.stock=d),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[K,i.value.stock]]),D(e("select",{"onUpdate:modelValue":o[11]||(o[11]=d=>i.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[o[20]||(o[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(H,null,te(l.value,d=>(t(),s("option",{key:d,value:d},v(d),9,al))),128))],512),[[ke,i.value.ville]]),o[21]||(o[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",rl,[o[25]||(o[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),a.value?(t(),s("div",ll,o[23]||(o[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):f.value.length===0?(t(),s("div",nl," Aucun produit disponible. ")):(t(),s("div",il,[(t(!0),s(H,null,te(f.value,d=>(t(),s("div",{key:d.id,class:"relative"},[R(Te,{produit:d},null,8,["produit"]),e("button",{onClick:y=>w(d.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},o[24]||(o[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,ul)]))),128))]))])])]))}}),kc=re(dl,[["__scopeId","data-v-62cb30a8"]]),cl={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},pl={class:"container mx-auto max-w-4xl"},vl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},ml={key:0,class:"ml-2"},fl={class:"w-full bg-gray-200 rounded-full h-4"},gl={class:"text-[var(--espace-gris)] text-xs mt-2"},bl={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},xl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},hl={key:0,class:"mb-4"},yl={class:"text-sm text-[var(--espace-gris)]"},_l={class:"font-bold text-[var(--espace-or)]"},wl={class:"text-sm text-[var(--espace-gris)] truncate"},kl=["href"],$l={key:1,class:"mb-4"},Cl=["placeholder"],Al={class:"flex flex-col sm:flex-row gap-2"},Pl=["disabled"],jl={key:0},Sl={key:1},Ml=["disabled"],Vl={key:0},El={key:1},zl={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},Ul={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Il={class:"mb-4"},Fl={key:0,class:"overflow-x-auto"},Tl={class:"w-full text-sm text-left text-[var(--espace-gris)]"},Ll=["onClick"],ql={class:"px-4 py-2"},Ol={class:"px-4 py-2"},Nl={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Rl={class:"bg-white rounded-lg shadow-md p-6 text-center"},Dl={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},Wl={class:"text-[var(--espace-gris)] mt-2"},Jl=ae({__name:"Parrainage",setup(T){const n=he(),x=ue(),f=de(),p=()=>{const Q=window.location.hostname;return Q==="localhost"||Q==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.devfack.com/register"},r=m(""),a=m(""),i=m([]),c=m(0),l=m(""),u=m(""),S=m(!1),w=m(!1),k=m({}),b=m(null),o=m(0),d=m(0),y=m(0),P=m("all"),U=pe(()=>{var Q;return((Q=k.value)==null?void 0:Q.couleur)||"#6b7280"}),V=pe(()=>P.value==="commercants"?i.value.filter(Q=>Q.est_commercant):P.value==="nonCommercants"?i.value.filter(Q=>!Q.est_commercant):i.value),I=async()=>{var Q,F;if(!n.user){f.error("Veuillez vous connecter pour acc√©der √† cette page"),x.push("/login");return}try{const M=(await W.get("/parrainages/dashboard")).data;r.value=M.code||"",a.value=r.value?`${p()}/${r.value}`:"",i.value=M.parrainages||[],c.value=M.total_gains||0,k.value=M.niveau_actuel,b.value=M.niveau_suivant,o.value=M.progression,d.value=M.total_parrainages||0,y.value=M.total_parrainages_commercants||0}catch(B){((F=(Q=B.response)==null?void 0:Q.data)==null?void 0:F.message)=="Unauthenticated."&&x.push("login"),f.error("Erreur lors de la r√©cup√©ration des donn√©es de parrainage"),console.error(B)}},J=async()=>{var Q,F;if(!n.user){f.error("Veuillez vous connecter");return}S.value=!0;try{const B=await W.post("/parrainages/generateCode");l.value=B.data.suggested_code,u.value=l.value,f.success("Nouveau code sugg√©r√© avec succ√®s !"),r.value&&(a.value=`${p()}/${r.value}`)}catch(B){((F=(Q=B.response)==null?void 0:Q.data)==null?void 0:F.message)=="Unauthenticated."&&x.push("login"),f.error("Erreur lors de la g√©n√©ration du code"),console.error(B)}finally{S.value=!1}},q=async()=>{var Q,F,B,M;if(!n.user){f.error("Veuillez vous connecter");return}if(!u.value.trim()){f.error("Veuillez entrer un code valide");return}w.value=!0;try{const g=await W.post("/parrainages/createCode",{code:u.value.trim()});r.value=g.data.code,a.value=g.data.link||`${p()}/${g.data.code}`,f.success(g.data.message||"Code cr√©√© avec succ√®s !"),await I()}catch(g){((F=(Q=g.response)==null?void 0:Q.data)==null?void 0:F.message)=="Unauthenticated."&&x.push("login"),f.error(((M=(B=g.response)==null?void 0:B.data)==null?void 0:M.message)||"Erreur lors de la cr√©ation du code"),console.error(g)}finally{w.value=!1}},le=Q=>{if(!a.value){f.error("Aucun lien disponible pour le partage");return}let F="";const B=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${a.value}`);switch(Q){case"whatsapp":F=`https://api.whatsapp.com/send?text=${B}`;break;case"facebook":F=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a.value)}`;break;default:f.error("Plateforme non prise en charge");return}window.open(F,"_blank")},oe=Q=>{Q.est_commercant?x.push(`/commercants/${Q.id}`):x.push({name:"public-profile",params:{id:Q.id}})};return be(()=>{I()}),(Q,F)=>{var B,M,g,$,E;return t(),s("div",cl,[e("div",pl,[e("div",vl,[e("h2",{class:"text-lg font-semibold mb-4",style:we({color:U.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:we({color:U.value})},[e("div",null,[F[5]||(F[5]=h(" niveau : ")),e("strong",null,[h(v(k.value?k.value.nom:"Pas de niveau")+" "+v((B=k.value)==null?void 0:B.emoji)+" ",1),e("div",null," ("+v(y.value)+"/"+v(b.value?b.value.filleuls_requis:(M=k.value)==null?void 0:M.filleuls_requis)+" commer√ßants) ",1)])]),((g=b.value)==null?void 0:g.jetons_bonus)>0?(t(),s("span",ml,"+"+v(($=b.value)==null?void 0:$.jetons_bonus)+" jetons ",1)):A("",!0)],4),e("div",fl,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:we({width:`${o.value}%`,background:`${U.value}`})},null,4)]),e("p",gl," Prochain niveau : "+v(b.value?b.value.nom:"L√©gende üèÜ")+" √† "+v(b.value?b.value.filleuls_requis:"1000+")+" commer√ßants ",1),(E=k.value.avantages)!=null&&E.length?(t(),s("p",bl," Avantages : "+v(k.value.avantages.join(", ")),1)):A("",!0),e("button",{onClick:F[0]||(F[0]=z=>L(x).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},F[6]||(F[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),h(" En savoir plus ")]))]),F[24]||(F[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des r√©compenses ! Atteignez des niveaux sup√©rieurs pour d√©bloquer des jetons et des avantages. ")],-1)),e("div",xl,[F[15]||(F[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),r.value?(t(),s("div",hl,[e("p",yl,[F[7]||(F[7]=h(" Code : ")),e("span",_l,v(r.value),1)]),e("p",wl,[F[8]||(F[8]=h(" Lien : ")),e("a",{href:a.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},v(a.value),9,kl)])])):(t(),s("div",$l,[D(e("input",{"onUpdate:modelValue":F[1]||(F[1]=z=>u.value=z),type:"text",placeholder:l.value||"Entrez ou g√©n√©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,Cl),[[K,u.value]]),e("div",Al,[e("button",{onClick:J,disabled:S.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[S.value?(t(),s("span",jl,F[9]||(F[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" G√©n√©ration... ")]))):(t(),s("span",Sl,F[10]||(F[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),h(" G√©n√©rer un code ")])))],8,Pl),e("button",{onClick:q,disabled:w.value||!u.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[w.value?(t(),s("span",Vl,F[11]||(F[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" Cr√©ation... ")]))):(t(),s("span",El,F[12]||(F[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),h(" Cr√©er le code ")])))],8,Ml)])])),r.value?(t(),s("div",zl,[e("button",{onClick:F[2]||(F[2]=z=>le("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},F[13]||(F[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),h(" Partager sur WhatsApp ")])),e("button",{onClick:F[3]||(F[3]=z=>le("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},F[14]||(F[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),h(" Partager sur Facebook ")]))])):A("",!0)]),e("div",Ul,[F[18]||(F[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs Parrain√©s",-1)),e("div",Il,[D(e("select",{"onUpdate:modelValue":F[4]||(F[4]=z=>P.value=z),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},F[16]||(F[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"Commer√ßants",-1),e("option",{value:"nonCommercants"},"Non Commer√ßants",-1)]),512),[[ke,P.value]])]),V.value.length?(t(),s("div",Fl,[e("table",Tl,[F[17]||(F[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commer√ßant")])],-1)),e("tbody",null,[(t(!0),s(H,null,te(V.value,z=>(t(),s("tr",{key:z.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:j=>oe(z)},v(z.filleul_nom||"Anonyme"),9,Ll),e("td",ql,v(new Date(z.date_inscription).toLocaleDateString("fr-FR")),1),e("td",Ol,v(z.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",Nl," Aucun utilisateur parrain√© correspondant au filtre. Commencez √† inviter d√®s maintenant ! "))]),e("div",Rl,[F[22]||(F[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",Dl,v(c.value)+" jetons ",1),e("p",Wl,[F[19]||(F[19]=h(" üéâ Vous avez invit√© ")),e("strong",null,v(d.value),1),F[20]||(F[20]=h(" utilisateurs, dont ")),e("strong",null,v(y.value),1),F[21]||(F[21]=h(" sont commer√ßants ! "))]),F[23]||(F[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," D√©bloquez plus de jetons et d'avantages en atteignant les niveaux sup√©rieurs. ",-1))])])])}}}),$c=re(Jl,[["__scopeId","data-v-5eb6b696"]]),Bl={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Hl={class:"container mx-auto max-w-4xl"},Gl={class:"flex border-b border-gray-300 mb-6"},Xl={key:0},Kl={key:0,class:"grid grid-cols-1 gap-4"},Ql={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Zl=["onClick"],Yl={class:"text-sm text-[var(--espace-gris)]"},en={class:"text-sm text-[var(--espace-gris)]"},tn=["onClick"],sn={class:"flex flex gap-2"},on=["onClick"],an=["onClick"],rn=["onClick"],ln={key:1,class:"text-center text-[var(--espace-gris)]"},nn={key:1},un={key:0,class:"grid grid-cols-1 gap-4"},dn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},cn=["onClick"],pn={class:"text-sm text-[var(--espace-gris)]"},vn={class:"text-sm text-[var(--espace-gris)]"},mn=["onClick"],fn=["onClick"],gn={key:1,class:"text-center text-[var(--espace-gris)]"},bn=ae({__name:"Collaborations",setup(T){const n=S=>{localStorage.setItem("pending_collaborations",JSON.stringify(S))},x=de(),f=ue(),p=m({sent_collaborations:[],received_collaborations:[]}),r=m(!0),a=m("received"),i=async()=>{var S,w,k,b;try{const o=await W.get("/collaborations");p.value=o.data;const d=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(d.length>0){const y=new Set(p.value.sent_collaborations.map(U=>U.produit_id)),P=d.filter(U=>!y.has(U.produit_id));P.length!==d.length&&n(P)}}catch(o){console.log((w=(S=o.response)==null?void 0:S.data)==null?void 0:w.message),x.error("Erreur lors du chargement des collaborations"),((b=(k=o.response)==null?void 0:k.data)==null?void 0:b.message)=="Unauthenticated."&&f.push("login")}finally{r.value=!1}},c=S=>{f.push({path:`/produits/${S}`})},l=S=>{var k,b,o;const w=((k=S.commercant)==null?void 0:k.id)||((o=(b=S.produit)==null?void 0:b.commercant)==null?void 0:o.id);w?f.push({path:`/commercants/${w}`}):x.error("Profil du commer√ßant non disponible")},u=async(S,w)=>{var k;try{const b=await W.post(`/collaborations/${S}`,{statut:w});x.success(b.data.message),await i()}catch(b){x.error(`Erreur lors de la mise √† jour de la collaboration${(k=b.response)==null?void 0:k.data.message}`)}};return be(()=>{r.value=!0,i()}),(S,w)=>{var k,b,o,d;return t(),s(H,null,[R(Se,{isLoading:r.value},null,8,["isLoading"]),e("div",Bl,[e("div",Hl,[w[4]||(w[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),h(" Mes Collaborations ")],-1)),e("div",Gl,[e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":a.value==="received","text-[var(--espace-gris)]":a.value!=="received"}]),onClick:w[0]||(w[0]=y=>a.value="received")}," Collaborations re√ßues ",2),e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":a.value==="sent","text-[var(--espace-gris)]":a.value!=="sent"}]),onClick:w[1]||(w[1]=y=>a.value="sent")}," Collaborations envoy√©es ",2)]),a.value==="received"?(t(),s("div",Xl,[(b=(k=p.value)==null?void 0:k.received_collaborations)!=null&&b.length?(t(),s("div",Kl,[(t(!0),s(H,null,te(p.value.received_collaborations,y=>(t(),s("div",{key:y.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Ql,[e("div",null,[e("h2",{onClick:P=>c(y.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},v(y.produit.nom),9,Zl),e("p",Yl," Prix de revente propos√© : "+v(y.prix_revente)+" FCFA ",1),e("p",en,[w[2]||(w[2]=h(" Statut : ")),e("span",{class:G({"text-green-600":y.statut==="valider","text-yellow-600":y.statut==="en_attente","text-red-600":y.statut==="refuser"})},v(y.statut==="en_attente"?"En attente":y.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:P=>l(y),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,tn)]),e("div",sn,[y.statut==="en_attente"?(t(),s("button",{key:0,onClick:P=>u(y.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,on)):A("",!0),y.statut==="en_attente"?(t(),s("button",{key:1,onClick:P=>u(y.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,an)):A("",!0),e("button",{onClick:P=>c(y.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,rn)])])]))),128))])):(t(),s("p",ln," Aucune collaboration re√ßue pour le moment. "))])):A("",!0),a.value==="sent"?(t(),s("div",nn,[(d=(o=p.value)==null?void 0:o.sent_collaborations)!=null&&d.length?(t(),s("div",un,[(t(!0),s(H,null,te(p.value.sent_collaborations,y=>(t(),s("div",{key:y.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",dn,[e("div",null,[e("h2",{onClick:P=>c(y.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},v(y.produit.nom),9,cn),e("p",pn," Prix de revente propos√© : "+v(y.prix_revente)+" FCFA ",1),e("p",vn,[w[3]||(w[3]=h(" Statut : ")),e("span",{class:G({"text-green-600":y.statut==="valider","text-yellow-600":y.statut==="en_attente","text-red-600":y.statut==="refuser"})},v(y.statut==="en_attente"?"En attente":y.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:P=>l(y),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,mn)]),e("button",{onClick:P=>c(y.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,fn)])]))),128))])):(t(),s("p",gn," Aucune collaboration envoy√©e pour le moment. "))])):A("",!0)])])],64)}}}),Cc=re(bn,[["__scopeId","data-v-cac76a42"]]),xn={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},hn={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},yn={key:0,class:"mb-8"},_n={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},wn=["disabled"],kn={key:0,class:"fas fa-spinner fa-spin mr-2"},$n={key:1,class:"space-y-4 mb-6"},Cn={class:"flex items-center gap-3"},An={class:"text-[var(--espace-vert)] font-medium"},Pn={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},jn={class:"flex items-center gap-2"},Sn=["onClick"],Mn=["onClick"],Vn={key:2,class:"text-center text-gray-500"},En=ae({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(T,{emit:n}){const x=ue(),f=n,p=de(),r=m(!1),a=m(!1),i=m({id:null,phone_number:"",payment_service:""}),c=()=>{a.value=!0,i.value={id:null,phone_number:"",payment_service:""}},l=k=>{a.value=!0,i.value={id:k.id,phone_number:k.phone_number,payment_service:k.payment_service}},u=()=>{a.value=!1,i.value={id:null,phone_number:"",payment_service:""}},S=async()=>{var b,o,d,y;if(!/^6[0-9]{8}$/.test(i.value.phone_number)){p.error("Le num√©ro de t√©l√©phone doit commencer par 6 et contenir 9 chiffres.");return}r.value=!0;try{i.value.id?(await W.put(`/wallets/${i.value.id}`,i.value),p.success("Portefeuille mis √† jour avec succ√®s !")):(await W.post("/wallets",i.value),p.success("Portefeuille cr√©√© avec succ√®s !")),f("refresh-wallets"),u()}catch(P){((o=(b=P.response)==null?void 0:b.data)==null?void 0:o.message)=="Unauthenticated."&&x.push("login"),p.error(((y=(d=P.response)==null?void 0:d.data)==null?void 0:y.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",P)}finally{r.value=!1}},w=async k=>{var b,o,d,y;if(confirm("√ätes-vous s√ªr de vouloir supprimer ce portefeuille ?")){r.value=!0;try{await W.delete(`/wallets/${k}`),p.success("Portefeuille supprim√© avec succ√®s !"),f("refresh-wallets")}catch(P){((o=(b=P.response)==null?void 0:b.data)==null?void 0:o.message)=="Unauthenticated."&&x.push("login"),p.error(((y=(d=P.response)==null?void 0:d.data)==null?void 0:y.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",P)}finally{r.value=!1}}};return(k,b)=>k.show?(t(),s("div",xn,[e("div",hn,[e("button",{onClick:b[0]||(b[0]=o=>k.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),b[9]||(b[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ G√©rer Mes Portefeuilles",-1)),a.value?(t(),s("div",yn,[e("form",{onSubmit:ne(S,["prevent"]),class:G(["space-y-5",{"bg-green-50 p-4 rounded-lg":!i.value.id,"bg-yellow-50 p-4 rounded-lg":i.value.id}])},[e("h3",_n,v(i.value.id?"Modifier le Portefeuille":"Cr√©er un Nouveau Portefeuille"),1),e("div",null,[b[3]||(b[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),D(e("input",{"onUpdate:modelValue":b[1]||(b[1]=o=>i.value.phone_number=o),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[K,i.value.phone_number]])]),e("div",null,[b[5]||(b[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),D(e("select",{"onUpdate:modelValue":b[2]||(b[2]=o=>i.value.payment_service=o),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},b[4]||(b[4]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[ke,i.value.payment_service]])]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[r.value?(t(),s("i",kn)):A("",!0),h(" "+v(i.value.id?"Mettre √† jour":"Cr√©er"),1)],8,wn),e("button",{onClick:u,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):A("",!0),k.wallets&&k.wallets.length>0?(t(),s("div",$n,[(t(!0),s(H,null,te(k.wallets,o=>(t(),s("div",{key:o.id||o.phone_number,class:G(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":o.payment_service==="ORANGE","bg-purple-50":o.payment_service==="MTN"}])},[e("div",Cn,[e("span",An,v(o.phone_number)+" ("+v(o.payment_service)+") ",1),o.is_active!==!1?(t(),s("span",Pn,"Actif")):A("",!0)]),e("div",jn,[e("button",{onClick:d=>l(o),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},b[6]||(b[6]=[e("i",{class:"fas fa-edit"},null,-1),h(" Modifier ")]),8,Sn),e("button",{onClick:d=>w(o.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},b[7]||(b[7]=[e("i",{class:"fas fa-trash"},null,-1),h(" Supprimer ")]),8,Mn)])],2))),128))])):(t(),s("p",Vn,"Aucun portefeuille cr√©√©.")),a.value?A("",!0):(t(),s("button",{key:3,onClick:c,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},b[8]||(b[8]=[e("i",{class:"fas fa-plus"},null,-1),h(" Ajouter un portefeuille ")])))])])):A("",!0)}}),zn=re(En,[["__scopeId","data-v-04e487e6"]]),Un={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},In={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},Fn={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},Tn={key:0,class:"space-y-4"},Ln={class:"flex flex-col"},qn={class:"text-[var(--espace-vert)] font-medium"},On={class:"text-xs text-gray-500"},Nn={class:"text-gray-700 text-sm sm:text-base"},Rn={class:"flex items-center gap-2"},Dn=["onClick"],Wn=["onClick"],Jn={key:1,class:"text-center text-gray-500"},Bn={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},Hn={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Gn=["value"],Xn=["disabled"],Kn={key:0,class:"fas fa-spinner fa-spin mr-2"},Qn={key:1,class:"border-t pt-4 mt-2"},Zn=ae({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(T,{emit:n}){const x=T,f=n,p=de(),r=m(!1),a=m([...x.offers]);xe(()=>x.offers,b=>{a.value=[...b]},{deep:!0});const i=m(!1),c=m({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),l=()=>{i.value=!0,c.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},u=b=>{i.value=!0,c.value={id:b.id,nombre_jetons:b.nombre_jetons,prix_unitaire:b.prix_unitaire,description:b.description||"",wallet_id:b.wallet_id}},S=()=>{i.value=!1,c.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},w=async()=>{var b,o;r.value=!0;try{if(c.value.id){const d=await W.put(`/jeton_market/updateOffer/${c.value.id}`,c.value);p.success("Offre mise √† jour avec succ√®s !");const y=a.value.findIndex(P=>P.id===c.value.id);y!==-1&&(a.value[y]={...a.value[y],...c.value})}else{const d=await W.post("/jeton_market/offer",c.value);p.success("Offre cr√©√©e avec succ√®s !"),a.value.push(d.data)}f("refresh-offers"),S()}catch(d){p.error(((o=(b=d.response)==null?void 0:b.data)==null?void 0:o.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",d)}finally{r.value=!1}},k=async b=>{var o,d;if(confirm("√ätes-vous s√ªr de vouloir supprimer cette offre ?")){r.value=!0;try{await W.delete(`/jeton_market/deleteOffer/${b}`),p.success("Offre supprim√©e avec succ√®s !"),a.value=a.value.filter(y=>y.id!==b),f("refresh-offers")}catch(y){p.error(((d=(o=y.response)==null?void 0:o.data)==null?void 0:d.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",y)}finally{r.value=!1}}};return(b,o)=>b.show?(t(),s("div",Un,[e("div",In,[e("button",{onClick:o[0]||(o[0]=d=>b.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),o[12]||(o[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìã Mes Offres",-1)),e("div",Fn,[a.value.length>0?(t(),s("div",Tn,[(t(!0),s(H,null,te(a.value,d=>{var y,P;return t(),s("div",{key:d.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",Ln,[e("span",qn,v(d.nombre_jetons)+" jetons ‚Ä¢ "+v(d.total_prix)+" FCFA ",1),e("span",On,"PU : "+v(d.prix_unitaire)+" FCFA",1),e("p",Nn,[o[4]||(o[4]=e("strong",null,"üí≥ ",-1)),h(" "+v((y=d.wallet)==null?void 0:y.phone_number)+" ("+v((P=d.wallet)==null?void 0:P.payment_service)+") ",1)])]),e("div",Rn,[e("button",{onClick:U=>u(d),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},o[5]||(o[5]=[e("i",{class:"fas fa-edit"},null,-1),h(" Modifier ")]),8,Dn),e("button",{onClick:U=>k(d.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},o[6]||(o[6]=[e("i",{class:"fas fa-trash"},null,-1),h(" Supprimer ")]),8,Wn)])])}),128))])):(t(),s("p",Jn,"Aucune offre cr√©√©e."))]),i.value?(t(),s("div",Bn,[e("form",{onSubmit:ne(w,["prevent"]),class:G(["space-y-4",{"bg-green-50 p-4 rounded-lg":!c.value.id,"bg-yellow-50 p-4 rounded-lg":c.value.id}])},[e("h3",Hn,v(c.value.id?"Modifier l'offre":"Cr√©er une nouvelle offre"),1),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),D(e("input",{"onUpdate:modelValue":o[1]||(o[1]=d=>c.value.nombre_jetons=d),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[K,c.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[o[8]||(o[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":o[2]||(o[2]=d=>c.value.prix_unitaire=d),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[K,c.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[o[10]||(o[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),D(e("select",{"onUpdate:modelValue":o[3]||(o[3]=d=>c.value.wallet_id=d),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[o[9]||(o[9]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(H,null,te(b.wallets,d=>(t(),s("option",{key:d.id,value:d.id},v(d.phone_number)+" ("+v(d.payment_service)+") ",9,Gn))),128))],512),[[ke,c.value.wallet_id]])]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[r.value?(t(),s("i",Kn)):A("",!0),h(" "+v(c.value.id?"Mettre √† jour":"Cr√©er"),1)],8,Xn),e("button",{onClick:S,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",Qn,[e("button",{onClick:l,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},o[11]||(o[11]=[e("i",{class:"fas fa-plus"},null,-1),h(" Nouvelle offre ")]))]))])])):A("",!0)}}),Yn=re(Zn,[["__scopeId","data-v-03e4f804"]]),ei={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},ti={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},si={class:"flex items-center justify-between mb-4"},oi={class:"flex items-center gap-3"},ai=["src"],ri={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},li={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},ni={class:"text-gray-700 text-sm sm:text-base"},ii={class:"text-gray-700 text-sm sm:text-base"},ui={class:"text-xs text-gray-500 mt-3"},di=["onClick"],ci={key:0,class:"col-span-full text-center py-4"},pi={key:1,class:"text-center text-gray-600 py-24"},vi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},mi={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},fi=["value"],gi={class:"text-sm text-gray-500"},bi={class:"font-bold"},xi={class:"font-bold"},hi=["disabled"],yi={key:0,class:"fas fa-spinner fa-spin mr-2"},_i={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},wi={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},ki={class:"space-y-4"},$i={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Ci={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Ai=["value"],Pi={class:"text-sm text-[var(--espace-gris)]"},ji={class:"font-bold"},Si=["disabled"],Mi={key:0,class:"fas fa-spinner fa-spin mr-2"},Vi={key:1,class:""},Ei={key:2,class:""},zi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Ui={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Ii=["disabled"],Fi={key:0,class:"fas fa-spinner fa-spin mr-2"},Ti={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},Li=ae({__name:"JetonMarket",setup(T){const n=()=>{const ee=window.location.hostname;return ee==="localhost"||ee==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},x=pe(()=>n()),f=ue(),p=m([]),r=m([]),a=m({quantityMin:""}),i=m(!1),c=m(!1),l=m({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),u=m(!1),S=m(1),w=m(1),k=m(!1),b=m(!0),o=m(!1),d=m(!1),y=m({walletId:""}),P=m(null),U=m(0),V=m([]),I=m(!1),J=m({id:0,phone_number:"",payment_service:""}),q=m(!1),le=m(!1),oe=de(),Q=()=>{i.value=!1,c.value=!1,d.value=!1,I.value=!1,q.value=!1,le.value=!1},F=async()=>{try{const ee=await W.get("/wallets");V.value=ee.data.data||[]}catch(ee){console.error("Erreur lors du chargement des portefeuilles:",ee),V.value=[]}},B=async()=>{var ee,_;try{const se=await W.get("/jeton_market/my-offers");r.value=se.data.data||[]}catch(se){((_=(ee=se.response)==null?void 0:ee.data)==null?void 0:_.message)=="Unauthenticated."&&f.push("login"),console.error("Erreur lors du chargement des offres de l'utilisateur:",se),r.value=[]}},M=async()=>{await F(),Q(),V.value.length===0?I.value=!0:i.value=!0},g=async()=>{var ee,_,se,O;u.value=!0;try{Q();const fe=await W.post("/wallets",J.value);oe.success(fe.data.message||"Portefeuille cr√©√© avec succ√®s !"),I.value=!1,await F(),i.value=!0}catch(fe){((_=(ee=fe.response)==null?void 0:ee.data)==null?void 0:_.message)=="Unauthenticated."&&f.push("login"),oe.error(((O=(se=fe.response)==null?void 0:se.data)==null?void 0:O.message)||"Erreur lors de la cr√©ation du portefeuille"),console.error("Erreur:",fe)}finally{u.value=!1,J.value={id:0,phone_number:"",payment_service:""}}},$=()=>{c.value=!1,S.value=1,p.value=[],Z()},E=async()=>{o.value=!0,S.value=1,p.value=[],await Z(),o.value=!1},z=pe(()=>p.value.filter(ee=>!a.value.quantityMin||ee.nombre_jetons>=parseInt(a.value.quantityMin,10))),j=pe(()=>l.value.nombre_jetons*l.value.prix_unitaire),C=pe(()=>j.value*.05),Z=async()=>{var ee,_;if(!(k.value||S.value>w.value)){k.value=!0;try{const se={page:S.value,quantity_min:a.value.quantityMin||void 0},O=await W.get("/jeton_market/offers",{params:se});p.value=[...p.value,...O.data.data],w.value=O.data.last_page,S.value+=1}catch(se){((_=(ee=se.response)==null?void 0:ee.data)==null?void 0:_.message)=="Unauthenticated."&&f.push("login"),console.error("Erreur lors du chargement des offres:",se)}finally{k.value=!1,b.value=!1}}},N=()=>{const ee=document.querySelector(".grid");if(ee){const{scrollTop:_,clientHeight:se,scrollHeight:O}=ee;_+se>=O-300&&!k.value&&Z()}},Y=async()=>{var ee,_,se;if(!l.value.walletId){oe.error("Veuillez s√©lectionner un portefeuille.");return}u.value=!0;try{const O=await W.post("/jeton_market/offer",{...l.value,wallet_id:l.value.walletId,total_price:j.value});i.value=!1,oe.success(((ee=O==null?void 0:O.data)==null?void 0:ee.message)||"Offre cr√©√©e avec succ√®s !"),Z()}catch(O){oe.error(((se=(_=O.response)==null?void 0:_.data)==null?void 0:se.message)||"Erreur lors de la cr√©ation de l'offre"),console.error("Erreur lors de la cr√©ation de l'offre:",O.response)}finally{u.value=!1}},ie=(ee,_,se)=>{Q();const O=p.value.find(fe=>fe.id===ee);O&&(P.value=ee,U.value=O.total_prix,y.value.walletId="",d.value=!0)},ce=async()=>{var ee,_;if(!P.value||!y.value.walletId){oe.error("Veuillez s√©lectionner un portefeuille.");return}u.value=!0;try{const se=await W.post(`/jeton_market/buy/${P.value}`,{wallet_id:y.value.walletId});d.value=!1,Z(),oe.success(se.data.message||"Achat effectu√© avec succ√®s !")}catch(se){console.error("Erreur lors de l'achat:",se.response.data.message),oe.error(((_=(ee=se.response)==null?void 0:ee.data)==null?void 0:_.message)||"Erreur lors de l'achat")}finally{u.value=!1,P.value=null,U.value=0}},me=ee=>{var _;return(_=ee.user)!=null&&_.commercant?`/commercants/${ee.user.commercant.id}`:`/profile/public/${ee.user_id}`};return be(()=>{b.value=!0,Z(),F(),B(),window.addEventListener("scroll",N)}),je(()=>{window.removeEventListener("scroll",N)}),(ee,_)=>{const se=ge("router-link");return t(),s(H,null,[R(Se,{isLoading:b.value},null,8,["isLoading"]),e("div",ei,[e("div",ti,[R(se,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:X(()=>_[16]||(_[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),_[17]||(_[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"üåç March√©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute s√©curit√© üöÄ")],-1)),_[18]||(_[18]=e("div",{class:"w-10"},null,-1))]),p.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:N},[(t(!0),s(H,null,te(z.value,O=>(t(),s("div",{key:O.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",si,[e("div",oi,[R(se,{to:me(O),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:X(()=>[O.user.photo?(t(),s("img",{key:0,src:x.value+O.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,ai)):(t(),s("i",ri))]),_:2},1032,["to"]),R(se,{to:me(O),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:X(()=>[h(v(O.user.nom),1)]),_:2},1032,["to"])]),e("span",li,[h(v(O.nombre_jetons)+" ",1),_[19]||(_[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",ni,[_[20]||(_[20]=e("strong",null,"üíµ Prix :",-1)),h(" "+v(O.prix_unitaire)+" FCFA/jeton",1)]),e("p",ii,[_[21]||(_[21]=e("strong",null,"üí∞ Total :",-1)),h(" "+v(O.total_prix)+" FCFA ",1)]),e("p",ui,"üìÖ Publi√©e le "+v(new Date(O.date_creation).toLocaleDateString()),1),e("button",{onClick:fe=>{var $e,Ce;return ie(O.id,($e=O.wallet)==null?void 0:$e.phone_number,(Ce=O.wallet)==null?void 0:Ce.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," ‚ö° Acheter ",8,di)]))),128)),u.value?(t(),s("div",ci,_[22]||(_[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):A("",!0)],32)):(t(),s("div",pi,[_[25]||(_[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),_[26]||(_[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[_[23]||(_[23]=h("Soyez le premier √† ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:M},"poster une offre"),_[24]||(_[24]=h(" üéâ"))])])),R(ye,{name:"fade"},{default:X(()=>[i.value?(t(),s("div",vi,[e("div",mi,[e("button",{onClick:_[0]||(_[0]=O=>i.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),_[35]||(_[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìù Nouvelle Offre",-1)),e("form",{onSubmit:ne(Y,["prevent"]),class:"space-y-5"},[e("div",null,[_[27]||(_[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),D(e("input",{"onUpdate:modelValue":_[1]||(_[1]=O=>l.value.nombre_jetons=O),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[K,l.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[_[28]||(_[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":_[2]||(_[2]=O=>l.value.prix_unitaire=O),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[K,l.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[_[30]||(_[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille √† utiliser",-1)),D(e("select",{"onUpdate:modelValue":_[3]||(_[3]=O=>l.value.walletId=O),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[_[29]||(_[29]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(H,null,te(V.value,O=>(t(),s("option",{key:O.id,value:O.id},v(O.phone_number)+" ("+v(O.payment_service)+") ",9,fi))),128))],512),[[ke,l.value.walletId]])]),e("p",gi,[_[31]||(_[31]=h("üí∞ Total: ")),e("span",bi,v(j.value),1),_[32]||(_[32]=h(" FCFA | üè¶ Commission (5%): ")),e("span",xi,v(C.value),1),_[33]||(_[33]=h(" FCFA"))]),e("button",{type:"submit",disabled:u.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[u.value?(t(),s("i",yi)):A("",!0),_[34]||(_[34]=h(" Publier "))],8,hi)],32)])])):A("",!0)]),_:1}),R(ye,{name:"fade"},{default:X(()=>[c.value?(t(),s("div",_i,[e("div",wi,[e("button",{onClick:_[4]||(_[4]=O=>c.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"‚úñ"),_[36]||(_[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"üéõÔ∏è Filtres",-1)),e("div",ki,[D(e("input",{"onUpdate:modelValue":_[5]||(_[5]=O=>a.value.quantityMin=O),type:"number",placeholder:"Quantit√© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[K,a.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:$,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," üîç Appliquer ")])])):A("",!0)]),_:1}),R(ye,{name:"fade"},{default:X(()=>[d.value?(t(),s("div",$i,[e("div",Ci,[e("button",{onClick:_[6]||(_[6]=O=>d.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),_[41]||(_[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üì≤ Paiement",-1)),e("form",{onSubmit:ne(ce,["prevent"]),class:"space-y-5"},[e("div",null,[_[38]||(_[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"S√©lectionnez votre portefeuille",-1)),D(e("select",{"onUpdate:modelValue":_[7]||(_[7]=O=>y.value.walletId=O),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[_[37]||(_[37]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(H,null,te(V.value,O=>(t(),s("option",{key:O.id,value:O.id},v(O.phone_number)+" ("+v(O.payment_service)+") ",9,Ai))),128))],512),[[ke,y.value.walletId]])]),e("p",Pi,[_[39]||(_[39]=h("Montant total : ")),e("span",ji,v(U.value),1),_[40]||(_[40]=h(" FCFA"))]),e("button",{type:"submit",disabled:u.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[u.value?(t(),s("i",Mi)):A("",!0),u.value?(t(),s("span",Vi,"Veuillez patienter")):(t(),s("span",Ei,"Confirmer le paiement"))],8,Si)],32)])])):A("",!0)]),_:1}),R(ye,{name:"fade"},{default:X(()=>[I.value?(t(),s("div",zi,[e("div",Ui,[e("button",{onClick:_[8]||(_[8]=O=>I.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),_[46]||(_[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ Cr√©er un Portefeuille ",-1)),e("form",{onSubmit:ne(g,["prevent"]),class:"space-y-5"},[e("div",null,[_[42]||(_[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),D(e("input",{"onUpdate:modelValue":_[9]||(_[9]=O=>J.value.phone_number=O),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[K,J.value.phone_number]])]),e("div",null,[_[44]||(_[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),D(e("select",{"onUpdate:modelValue":_[10]||(_[10]=O=>J.value.payment_service=O),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},_[43]||(_[43]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[ke,J.value.payment_service]])]),e("button",{type:"submit",disabled:u.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[u.value?(t(),s("i",Fi)):A("",!0),_[45]||(_[45]=h(" Cr√©er "))],8,Ii)],32)])])):A("",!0)]),_:1}),q.value?(t(),ve(zn,{key:2,show:q.value,wallets:V.value,onClose:_[11]||(_[11]=O=>q.value=!1),onRefreshWallets:F},null,8,["show","wallets"])):A("",!0),le.value?(t(),ve(Yn,{key:3,show:le.value,wallets:V.value,offers:r.value,onClose:_[12]||(_[12]=O=>le.value=!1),onRefreshOffers:Z},null,8,["show","wallets","offers"])):A("",!0),e("div",Ti,[e("button",{onClick:_[13]||(_[13]=O=>{Q(),c.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},_[47]||(_[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:E,class:G(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":o.value}])},[e("i",{class:G(["fas fa-sync-alt text-xl",{"fa-spin":o.value}])},null,2),_[48]||(_[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:_[14]||(_[14]=O=>{Q(),q.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},_[49]||(_[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:M,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},_[50]||(_[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:_[15]||(_[15]=O=>{Q(),le.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},_[51]||(_[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),Ac=re(Li,[["__scopeId","data-v-2edd3e6b"]]),qi={class:"overflow-y-scroll bg-gray-100"},Oi={class:"container mx-auto px-4 sm:px-6 py-8"},Ni={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},Ri={class:"flex flex-col sm:flex-row items-center gap-6"},Di={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Wi=["src"],Ji={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Bi={class:"flex-1"},Hi={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Gi={class:"text-sm text-[var(--espace-gris)] mb-1"},Xi={class:"text-sm text-[var(--espace-gris)] mb-1"},Ki={class:"text-sm text-[var(--espace-gris)]"},Qi={key:0,class:"text-sm text-[var(--espace-gris)]"},Zi={class:"mt-2 flex space-x-2 flex-col"},Yi={class:"text-sm text-[var(--espace-gris)]"},eu={class:"text-xs text-[var(--espace-gris)]"},tu={class:"mt-4 flex flex-col sm:flex-row gap-4"},su={class:"mt-4 flex flex-wrap gap-4"},ou={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},au={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},ru={key:1,class:"text-base text-[var(--espace-gris)] italic"},lu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},nu={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},iu={class:"flex items-center space-x-2"},uu={key:3},du={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},cu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},pu={key:5,class:"text-base text-[var(--espace-gris)] italic"},vu={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},mu={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},fu={class:"text-sm text-[var(--espace-gris)]"},gu={class:"text-sm text-[var(--espace-gris)]"},bu=ae({__name:"CommercantDetails",setup(T){const n=Pe(),x=ue(),f=de(),p=m(!1),r=m(null),a=m(null),i=m(0),c=m(0),l=m(!1),u=async()=>{p.value=!0;try{const b=await W.get(`/commercant/${n.params.commercantId}`);r.value=b.data.commercant,i.value=b.data.average_rating||0,c.value=b.data.vote_count||0,r.value.produits||console.warn("Aucun produit trouv√© dans la r√©ponse de l'API pour ce commer√ßant.")}catch{f.error("Erreur lors du chargement des d√©tails du commer√ßant.")}finally{p.value=!1}},S=async()=>{var b,o,d,y;if(a.value===null||a.value<1||a.value>5){f.error("Veuillez s√©lectionner une note entre 1 et 5.");return}try{const P=await W.post(`/commercant/${n.params.commercantId}/rate`,{rating:a.value});i.value=P.data.average_rating||0,f.success("Merci pour votre note !"),a.value=null,l.value=!1,c.value=P.data.vote_count||c.value+1}catch(P){((o=(b=P.response)==null?void 0:b.data)==null?void 0:o.message)=="Unauthenticated."&&x.push("login"),f.error(((y=(d=P.response)==null?void 0:d.data)==null?void 0:y.message)||"Erreur lors de la notation.")}},w=pe(()=>{var b;return((b=r.value)==null?void 0:b.produits)||[]}),k=()=>{l.value=!0};return be(async()=>{u()}),(b,o)=>{const d=ge("router-link");return t(),s(H,null,[R(Se,{isLoading:p.value},null,8,["isLoading"]),e("div",qi,[R(Qe),e("div",Oi,[r.value?(t(),s("div",Ni,[e("div",Ri,[e("div",Di,[r.value.photo_url?(t(),s("img",{key:0,src:r.value.photo_url,alt:"Photo du commer√ßant",class:"w-full h-full object-cover"},null,8,Wi)):(t(),s("i",Ji))]),e("div",Bi,[e("h1",Hi," Commer√ßant : "+v(r.value.nom),1),e("p",Gi,[o[2]||(o[2]=e("strong",null,"Ville :",-1)),h(" "+v(r.value.ville),1)]),e("p",Xi,[o[3]||(o[3]=e("strong",null,"Inscrit depuis :",-1)),h(" "+v(new Date(r.value.created_at).toLocaleDateString()),1)]),e("p",Ki,[o[4]||(o[4]=e("strong",null,"Contact :",-1)),h(" "+v(r.value.email||"Non disponible"),1)]),r.value.telephone?(t(),s("p",Qi,[o[5]||(o[5]=e("strong",null,"T√©l√©phone :",-1)),h(" "+v(r.value.telephone),1)])):A("",!0),e("div",Zi,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:k},[(t(),s(H,null,te(5,y=>e("span",{key:y,class:"relative text-yellow-400 w-5 h-5"},[o[6]||(o[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:we({width:y<=Math.floor(i.value)?"100%":y===Math.ceil(i.value)&&i.value%1!==0?`${i.value%1*100}%`:"0%"})},null,4)])),64)),e("p",Yi,v(Number(i.value).toFixed(1))+"/5 ",1)]),e("span",eu,"("+v(c.value)+" votes)",1)])])]),e("div",tu,[R(d,{to:`/chat/${r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:X(()=>o[7]||(o[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),h(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),R(d,{to:`/public-profile/${r.value.user_id||r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:X(()=>o[8]||(o[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),h(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",su,[e("span",ou,"Produits : "+v(w.value.length),1),r.value.revenus?(t(),s("span",au,"Revenus : "+v(r.value.revenus)+" FCFA",1)):A("",!0)])])):p.value?A("",!0):(t(),s("div",ru,"Commer√ßant non trouv√©.")),l.value?(t(),s("div",lu,[e("div",nu,[o[9]||(o[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce Commer√ßant",-1)),e("div",iu,[D(e("input",{"onUpdate:modelValue":o[0]||(o[0]=y=>a.value=y),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[K,a.value,void 0,{number:!0}]]),e("button",{onClick:S,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:o[1]||(o[1]=y=>l.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):A("",!0),p.value?(t(),s("div",uu)):w.value.length>0?(t(),s("div",du,[o[10]||(o[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du Commer√ßant",-1)),e("div",cu,[(t(!0),s(H,null,te(w.value,y=>(t(),ve(Te,{key:y.id,produit:y},null,8,["produit"]))),128))])])):r.value&&w.value.length===0?(t(),s("div",pu,"Aucun produit disponible pour ce commer√ßant.")):A("",!0),r.value&&r.value.statistiques?(t(),s("div",vu,[o[13]||(o[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",mu,[e("p",fu,[o[11]||(o[11]=e("strong",null,"Vues totales :",-1)),h(" "+v(r.value.statistiques.total_views),1)]),e("p",gu,[o[12]||(o[12]=e("strong",null,"Produits populaires :",-1)),h(" "+v(r.value.statistiques.popular_products),1)])])])):A("",!0)])])],64)}}}),Pc=re(bu,[["__scopeId","data-v-28e3885d"]]),xu={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},hu={class:"container mx-auto max-w-2xl"},yu={class:"bg-white rounded-lg shadow-md p-6"},_u={key:0,class:"text-red-500 text-xs"},wu={key:0,class:"text-red-500 text-xs"},ku={key:0,class:"text-red-500 text-xs"},$u={key:0,class:"text-red-500 text-xs"},Cu={key:0,class:"text-red-500 text-xs"},Au=["disabled"],Pu={key:0},ju={key:1},Su=ae({__name:"CommercantCreate",setup(T){const n=ue(),x=de(),f=m({nom:"",ville:"",email:"",telephone:"",photo:null}),p=m(!1),r=m({}),a=c=>{const l=c.target;l.files&&l.files[0]&&(f.value.photo=l.files[0])},i=async()=>{var c,l,u,S;p.value=!0,r.value={};try{const w=new FormData;w.append("nom",f.value.nom),w.append("ville",f.value.ville),w.append("email",f.value.email),w.append("telephone",f.value.telephone),f.value.photo&&w.append("photo",f.value.photo);const k=await W.post("/commercants",w,{headers:{"Content-Type":"multipart/form-data"}});x.success("Commer√ßant cr√©√© avec succ√®s !"),n.push("/profil")}catch(w){((l=(c=w.response)==null?void 0:c.data)==null?void 0:l.message)=="Unauthenticated."&&n.push("login"),(S=(u=w.response)==null?void 0:u.data)!=null&&S.errors?r.value=w.response.data.errors:x.error("Erreur lors de la cr√©ation du commer√ßant"),console.error(w)}finally{p.value=!1}};return(c,l)=>(t(),s("div",xu,[e("div",hu,[l[11]||(l[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),h(" Cr√©er un Commer√ßant ")],-1)),e("div",yu,[e("form",{onSubmit:ne(i,["prevent"]),class:"space-y-6"},[e("div",null,[l[4]||(l[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>f.value.nom=u),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commer√ßant",required:""},null,512),[[K,f.value.nom]]),r.value.nom?(t(),s("span",_u,v(r.value.nom),1)):A("",!0)]),e("div",null,[l[5]||(l[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),D(e("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>f.value.ville=u),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[K,f.value.ville]]),r.value.ville?(t(),s("span",wu,v(r.value.ville),1)):A("",!0)]),e("div",null,[l[6]||(l[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),D(e("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>f.value.email=u),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[K,f.value.email]]),r.value.email?(t(),s("span",ku,v(r.value.email),1)):A("",!0)]),e("div",null,[l[7]||(l[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"T√©l√©phone",-1)),D(e("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>f.value.telephone=u),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[K,f.value.telephone]]),r.value.telephone?(t(),s("span",$u,v(r.value.telephone),1)):A("",!0)]),e("div",null,[l[8]||(l[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:a,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),r.value.photo?(t(),s("span",Cu,v(r.value.photo),1)):A("",!0)]),e("div",null,[e("button",{type:"submit",disabled:p.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[p.value?(t(),s("span",Pu,l[9]||(l[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" Cr√©ation en cours... ")]))):(t(),s("span",ju,l[10]||(l[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Cr√©er le commer√ßant ")])))],8,Au)])],32)])])]))}}),jc=re(Su,[["__scopeId","data-v-50d6542f"]]),Mu={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Vu={class:"container mx-auto max-w-4xl"},Eu={class:"text-md font-semibold text-white flex items-center"},zu={class:"ml-2 text-sm text-white/80"},Uu={class:"text-white/90 text-sm mt-2"},Iu={key:0,class:"text-white/90 text-sm mt-1"},Fu={class:"list-disc list-inside ml-4"},Tu=ae({__name:"ParrainageInfo",setup(T){const n=ue(),x=de(),f=m([]),p=async()=>{try{const a=await W.get("/parrainages/niveaux");f.value=a.data.niveaux}catch(a){x.error("Erreur lors de la r√©cup√©ration des niveaux de parrainage"),console.error(a)}},r=()=>{n.go(-1)};return be(()=>{p()}),(a,i)=>(t(),s("div",Mu,[e("div",Vu,[i[4]||(i[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),h(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:r,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},i[0]||(i[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),h(" Retour ")])),i[5]||(i[5]=Me('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-9d89fe08> Le syst√®me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Vos gains d√©pendent des <strong data-v-9d89fe08>niveaux de parrainage</strong>, d√©bloqu√©s par le nombre de commer√ßants parrain√©s, avec des bonus en jetons cumulatifs. Plus vous parrainez, plus vous montez de niveau ! D√©couvrez les d√©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Comment √ßa fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-9d89fe08><li data-v-9d89fe08><strong data-v-9d89fe08>Obtenez votre code unique :</strong> G√©n√©rez ou cr√©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis √† s&#39;inscrire.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Attirez des commer√ßants :</strong> Encouragez vos filleuls √† devenir des commer√ßants actifs sur la plateforme. Seuls les commer√ßants parrain√©s comptent pour d√©bloquer les niveaux.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Montez de niveau :</strong> Chaque niveau n√©cessite un nombre sp√©cifique de commer√ßants parrain√©s. Une fois le seuil atteint, vous d√©bloquez un bonus en jetons correspondant √† ce niveau, en plus des bonus des niveaux pr√©c√©dents.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Suivez vos progr√®s :</strong> Consultez votre niveau actuel, vos jetons bonus et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-9d89fe08><strong data-v-9d89fe08>Note importante :</strong> Les jetons bonus sont cumulatifs et attribu√©s en fonction des niveaux atteints, pas directement par parrainage individuel. Par exemple, si vous atteignez le niveau 2 avec 5 commer√ßants, vous recevez les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(H,null,te(f.value,c=>(t(),s("div",{key:c.id,class:"mb-6 p-4 border rounded-lg",style:we({backgroundColor:c.couleur||"#f0f0f0"})},[e("h3",Eu,[h(v(c.nom)+" "+v(c.emoji)+" ",1),e("span",zu,"("+v(c.filleuls_requis)+" commer√ßants requis)",1)]),e("p",Uu,[i[1]||(i[1]=e("strong",null,"Bonus en jetons :",-1)),h(" "+v(c.jetons_bonus)+" jetons ",1)]),c.avantages.length?(t(),s("p",Iu,[i[2]||(i[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",Fu,[(t(!0),s(H,null,te(c.avantages,l=>(t(),s("li",{key:l},v(l),1))),128))])])):A("",!0),i[3]||(i[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont cr√©dit√©s une fois le niveau atteint et cumul√©s avec les niveaux pr√©c√©dents. ",-1))],4))),128))])]))}}),Sc=re(Tu,[["__scopeId","data-v-9d89fe08"]]),Lu={class:"w-full flex relative px-0"},qu=["onClick"],Ou={class:"flex items-center"},Nu=["onClick"],Ru=["src"],Du={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Wu={class:"min-w-0"},Ju={class:"font-semibold text-[var(--espace-vert)] truncate"},Bu={class:"text-xs text-[var(--espace-gris)] truncate"},Hu={class:"flex items-center"},Gu={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Xu={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Ku={class:"w-full grid grid-rows-[10%_86%]"},Qu={class:"flex border-b"},Zu={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},Yu={key:0,class:"h-full flex flex-col"},ed={class:"block text-[var(--espace-vert)]"},td={class:"text-gray-800"},sd={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},od={key:0,class:"text-center text-[var(--espace-gris)]"},ad={class:"px-2 md:px-4 z-20"},rd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},ld={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},nd={key:1,class:"flex items-center justify-center h-full"},id=ae({__name:"Messages",setup(T){const n=()=>{const E=window.location.hostname;return E==="localhost"||E==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},x=pe(()=>n()),f=ue(),p=Pe(),r=he(),a=de(),i=Ie(),c=m([]),l=m([]),u=m(null),S=m(""),w=m(!0),k=m(0),b=m(!1),o=m(!1),d=m(null),y=m(null),P=m(window.innerWidth<768);let U=null;const V=()=>{Ge(()=>{var E;(E=d.value)==null||E.scrollTo({top:d.value.scrollHeight,behavior:"smooth"})})},I=()=>{y.value=null,localStorage.removeItem("chatProduct")},J=async()=>{var E,z;try{const j=await W.get("/conversations");c.value=j.data.conversations}catch(j){((z=(E=j.response)==null?void 0:E.data)==null?void 0:z.message)=="Unauthenticated."&&f.push("login"),a.error("Erreur lors de la r√©cup√©ration des conversations"),console.error(j)}},q=async(E,z=!0)=>{var j,C,Z;if(!o.value){o.value=!0;try{z&&(k.value=0,l.value=[]),w.value=!1;const N=await W.get(`/chat/${E}?offset=${k.value}`);l.value=[...N.data.messages],b.value=N.data.hasMore;const Y=localStorage.getItem("chatProduct"),ie=c.value.find(ee=>ee.user_id===E);let ce="",me="/default-avatar.png";ie?(ce=ie.is_commercant?ie.name:((j=N.data.user)==null?void 0:j.nom)||"",me=ie.profile_photo||"/default-avatar.png"):Y?(ce=JSON.parse(Y).commercant_name||((C=N.data.user)==null?void 0:C.nom)||"",me=(ie==null?void 0:ie.profile_photo)||"/default-avatar.png"):ce=((Z=N.data.user)==null?void 0:Z.nom)||"",u.value={user_id:E,name:ce,is_commercant:(ie==null?void 0:ie.is_commercant)||!1,profile_photo:me},Y&&(y.value=JSON.parse(Y)),await B(E),V()}catch(N){a.error("Erreur lors du chargement des messages"),console.error(N)}finally{o.value=!1}}},le=E=>{f.push({name:"messages",params:{receiverId:E}}),P.value&&(w.value=!1)},oe=async()=>{var j,C,Z,N,Y,ie,ce,me,ee,_,se,O;if(!S.value.trim()||!u.value){a.error("Veuillez s√©lectionner une conversation et √©crire un message");return}const E=S.value.trim(),z={id:-Date.now(),sender_id:(j=r.user)==null?void 0:j.id,receiver_id:u.value.user_id,content:E,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((C=y.value)==null?void 0:C.id)||null,sender:{id:((Z=r.user)==null?void 0:Z.id)??0,nom:((N=r.user)==null?void 0:N.nom)??"",email:((Y=r.user)==null?void 0:Y.email)??"",telephone:((ie=r.user)==null?void 0:ie.telephone)??"",ville:((ce=r.user)==null?void 0:ce.ville)??"",premium:((me=r.user)==null?void 0:me.premium)??!1,parrain_id:((ee=r.user)==null?void 0:ee.parrain_id)??0},receiver:{id:u.value.user_id,nom:u.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:y.value||null};l.value.push(z),S.value="",V();try{const fe=await W.post(`/chat/${u.value.user_id}`,{content:E,product_id:(_=y.value)==null?void 0:_.id});y.value&&I()}catch(fe){((O=(se=fe.response)==null?void 0:se.data)==null?void 0:O.message)=="Unauthenticated."&&f.push("login"),a.error("√âchec d'envoi"),console.error(fe),l.value=l.value.filter($e=>$e.id!==z.id)}},Q=()=>{!d.value||!b.value||o.value||d.value.scrollTop<=100&&(k.value+=30,q(u.value.user_id,!1))},F=()=>{P.value=window.innerWidth<768,w.value=window.innerWidth>=768},B=async E=>{var z,j;try{const C=await W.put("/messages/mark-all-as-read");i.saveUnreadMessagesToLocalStorage(C.data.unread_messages)}catch(C){((j=(z=C.response)==null?void 0:z.data)==null?void 0:j.message)=="Unauthenticated."&&f.push("login"),console.error("Erreur lors du marquage des messages comme lus:",C),a.error("Erreur lors de la mise √† jour des messages lus")}},M=()=>{w.value=!w.value},g=(E,z)=>{const j=z?`/commercants/${E}`:`/users/${E}`;f.push(j)},$=E=>{var z;U&&(U.stopListening("MessageSent"),window.Echo.leave(`chat.${U.params.receiverId}`)),E&&((z=r.user)!=null&&z.id)&&(U=window.Echo.channel("public-channel").listen("message.sent",j=>{var C,Z;if(((C=u.value)==null?void 0:C.user_id)===E&&j.sender_id!==((Z=r.user)==null?void 0:Z.id)){const N={id:j.message.id,sender_id:j.sender_id,receiver_id:j.receiver_id,content:j.message.content,created_at:j.message.created_at,updated_at:j.message.updated_at,is_read:j.message.is_read,product_id:j.message.product_id||null,sender:j.sender,receiver:j.receiver,product:j.message.product||null};l.value.push(N),V(),i.saveUnreadMessagesToLocalStorage(j.unread_messages)}}),U.params={receiverId:E})};return be(()=>{J(),p.params.receiverId&&q(parseInt(p.params.receiverId)),window.addEventListener("resize",F)}),je(()=>{U&&(U.stopListening("MessageSent"),window.Echo.leave(`chat.${U.params.receiverId}`)),window.removeEventListener("resize",F)}),xe(()=>{var E;return(E=u.value)==null?void 0:E.user_id},E=>{E&&$(E)}),xe(()=>p.params.receiverId,async E=>{E&&await q(parseInt(E))}),(E,z)=>{var C,Z;const j=ge("router-link");return t(),s("div",Lu,[R(ye,{name:"slide-fade"},{default:X(()=>[w.value||!P.value?(t(),s("div",{key:0,class:G(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",P.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[z[1]||(z[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(H,null,te(c.value,N=>(t(),s("div",{key:N.user_id,onClick:Y=>le(N.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",Ou,[e("div",{onClick:ne(Y=>g(N.user_id,N.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[N.profile_photo?(t(),s("img",{key:0,src:x.value+N.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Ru)):(t(),s("i",Du))],8,Nu),e("div",Wu,[e("p",Ju,v(N.name),1),e("p",Bu,v(N.last_message),1)])]),e("div",Hu,[N.unread_count>0?(t(),s("div",Gu,v(N.unread_count),1)):A("",!0),e("div",Xu,v(new Date(N.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,qu))),128))],2)):A("",!0)]),_:1}),e("div",Ku,[e("div",Qu,[!w.value&&P.value&&u.value?(t(),s("button",{key:0,onClick:M,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},z[2]||(z[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):A("",!0),u.value?(t(),s("h2",Zu,v(u.value.name),1)):A("",!0)]),e("div",{class:G(["bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full",w.value&&!P.value?"":"rounded-r-lg"]),onScroll:Q},[u.value?(t(),s("div",Yu,[e("div",{ref_key:"messagesContainer",ref:d,class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 messages-container"},[(t(!0),s(H,null,te(l.value,N=>{var Y,ie,ce;return t(),s("div",{key:N.id,class:G(["p-3 rounded-full break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":N.sender_id===((Y=L(r).user)==null?void 0:Y.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":N.sender_id!==((ie=L(r).user)==null?void 0:ie.id)}])},[e("strong",ed,v(N.sender.nom)+" :",1),e("p",td,[(ce=N.product)!=null&&ce.id?(t(),ve(j,{key:0,to:{name:"produit",params:{id:N.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:X(()=>[h("[Produit "+v(N.product.nom)+"]",1)]),_:2},1032,["to"])):A("",!0),h(" "+v(N.content),1)]),e("p",sd,v(new Date(N.created_at).toLocaleTimeString()),1)],2)}),128)),o.value?(t(),s("div",od,"Chargement...")):A("",!0)],512),e("div",ad,[e("div",rd,[(C=y.value)!=null&&C.id?(t(),s("span",ld,[h(" Produit "+v((Z=y.value)==null?void 0:Z.nom)+" ",1),e("button",{onClick:I,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," √ó ")])):A("",!0),D(e("input",{"onUpdate:modelValue":z[0]||(z[0]=N=>S.value=N),onKeyup:He(oe,["enter"]),type:"text",placeholder:"√âcrivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w[200px]"},null,544),[[K,S.value]]),e("button",{onClick:oe,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},z[3]||(z[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",nd,z[4]||(z[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"S√©lectionnez une conversation pour commencer.",-1)])))],34)])])}}}),Mc=re(id,[["__scopeId","data-v-dba69dc5"]]),ud={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},dd={key:0,class:"overflow-y-scroll space-y-4"},cd={class:"flex justify-between items-center"},pd={class:"text-lg font-semibold"},vd={class:"text-gray-600"},md={class:"text-gray-600"},fd={class:"text-gray-600"},gd={class:"text-gray-600"},bd={class:"text-gray-600"},xd={key:0,class:"text-gray-600"},hd={class:"text-right"},yd=["onClick"],_d={key:1,class:"text-gray-500"},wd={class:"mt-6 flex gap-4"},kd={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$d=ae({__name:"JetonHistory",setup(T){const n=ue(),f=he().user,p=m([]),r=m(!1),a=de(),i=async()=>{try{const u=await W.get(`/jeton-transactions/${f==null?void 0:f.id}`);p.value=u.data}catch(u){console.error("Erreur lors du chargement des transactions:",u)}},c=u=>new Date(u).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=async u=>{var S,w,k,b;if(confirm(`Refaire l'achat de ${u.nombre_jetons} jetons avec le m√™me service (${u.methode_paiement}) ?`)){r.value=!0;try{const o=await W.post("/acheter-jetons",{nombre_jetons:u.nombre_jetons,payment_service:u.methode_paiement,phone_number:u.phone_number});a.success(o.data.message),i()}catch(o){((w=(S=o.response)==null?void 0:S.data)==null?void 0:w.message)=="Unauthenticated."&&n.push("login"),a.error(((b=(k=o.response)==null?void 0:k.data)==null?void 0:b.message)||"Erreur lors de l'achat."),console.error(o)}finally{r.value=!1}}};return be(()=>{f&&i()}),(u,S)=>{const w=ge("router-link");return t(),s("div",ud,[S[4]||(S[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),p.value.length>0?(t(),s("div",dd,[(t(!0),s(H,null,te(p.value,k=>(t(),s("div",{key:k.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",cd,[e("div",null,[e("p",pd,"Achat de "+v(k.nombre_jetons)+" jetons",1),e("p",vd,"Montant: "+v(k.montant)+" FCFA",1),e("p",md,"M√©thode: "+v(k.methode_paiement),1),e("p",fd,"Num√©ro: "+v(k.phone_number),1),e("p",gd,"Statut: "+v(k.statut),1),e("p",bd,"Date: "+v(c(k.date_transaction)),1),k.transaction_id_mesomb?(t(),s("p",xd," ID Transaction: "+v(k.transaction_id_mesomb),1)):A("",!0)]),e("div",hd,[e("button",{onClick:b=>l(k),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},S[0]||(S[0]=[e("i",{class:"fas fa-redo"},null,-1),h(" Refaire ")]),8,yd)])])]))),128))])):(t(),s("p",_d,"Aucune transaction trouv√©e.")),e("div",wd,[R(w,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:X(()=>S[1]||(S[1]=[h(" Acheter des Jetons ")])),_:1,__:[1]}),R(w,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:X(()=>S[2]||(S[2]=[h(" Booster un Produit ")])),_:1,__:[2]})]),r.value?(t(),s("div",kd,S[3]||(S[3]=[Me('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-5312e1a5><p class="text-lg text-[var(--espace-vert)]" data-v-5312e1a5>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-5312e1a5><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-5312e1a5></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-5312e1a5></path></svg></div>',1)]))):A("",!0)])}}}),Vc=re($d,[["__scopeId","data-v-5312e1a5"]]),Cd={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},Ad={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},Pd={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},jd={class:"relative"},Sd=["src"],Md={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},Vd={class:"flex-1"},Ed={class:"text-gray-600"},zd={key:0,class:"text-sm text-gray-500"},Ud={class:"text-gray-600"},Id={class:"text-gray-600"},Fd=ae({__name:"ProfilePublic",setup(T){const n=Pe(),x=ue(),f=de(),p=m(null),r=async()=>{var i,c;try{const l=await W.get(`/profile/public/${n.params.id}`);p.value=l.data}catch(l){((c=(i=l.response)==null?void 0:i.data)==null?void 0:c.message)=="Unauthenticated."&&x.push("login"),f.error("Erreur lors de la r√©cup√©ration du profil."),console.error(l)}},a=()=>{var i;(i=p.value)!=null&&i.id?x.push({name:"messages",params:{receiverId:p.value.id}}):f.error("Impossible d'acc√©der au chat. Profil invalide.")};return be(()=>{r()}),(i,c)=>{var l,u,S,w,k,b,o,d,y,P,U,V,I,J,q,le,oe,Q,F,B,M,g;return t(),s("div",Cd,[e("div",Ad,[e("div",Pd,[e("div",jd,[(l=p.value)!=null&&l.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(u=p.value)==null?void 0:u.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Sd)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:we({background:`${((b=(k=(w=(S=p.value)==null?void 0:S.niveaux_users)==null?void 0:w.at(-1))==null?void 0:k.parrainage_niveau)==null?void 0:b.couleur)||"#0af"}`})},c[0]||(c[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(o=p.value)!=null&&o.premium?(t(),s("i",Md)):A("",!0)]),e("div",Vd,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:we({color:`${((U=(P=(y=(d=p.value)==null?void 0:d.niveaux_users)==null?void 0:y.at(-1))==null?void 0:P.parrainage_niveau)==null?void 0:U.couleur)||"#0af"}`})},[h(v((V=p.value)==null?void 0:V.nom)+" ",1),(I=p.value)!=null&&I.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:we({background:`${((oe=(le=(q=(J=p.value)==null?void 0:J.niveaux_users)==null?void 0:q.at(-1))==null?void 0:le.parrainage_niveau)==null?void 0:oe.couleur)||"#0af"}`})}," Premium ",4)):A("",!0)],4),e("p",Ed,"Statut : "+v((Q=p.value)!=null&&Q.commercant?"Commer√ßant":"Utilisateur"),1),(F=p.value)!=null&&F.subscription_ends_at?(t(),s("p",zd," Abonnement Premium jusqu'au "+v(new Date((B=p.value)==null?void 0:B.subscription_ends_at).toLocaleDateString()),1)):A("",!0),e("p",Ud,"Ville : "+v((M=p.value)==null?void 0:M.ville),1),e("p",Id,"T√©l√©phone : "+v((g=p.value)==null?void 0:g.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:a,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},c[1]||(c[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),h(" Discuter ")]))])]),c[2]||(c[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),Ec=re(Fd,[["__scopeId","data-v-e1d303b7"]]),Td={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},Ld={class:"bg-white p-6 rounded-lg shadow-md mb-6"},qd={class:"space-y-4"},Od={class:"text-gray-700"},Nd={class:"text-gray-700"},Rd={class:"text-gray-700"},Dd={class:"text-gray-700"},Wd={class:"text-gray-700"},Jd={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Bd=["disabled"],Hd={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Gd={key:0,class:"mt-4 text-green-600 text-center"},Xd=ae({__name:"Doc",setup(T){ue();const n=m(!1),x=m(!1),f=m({name:"",email:"",message:""}),p=async()=>{n.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.value)})).ok)x.value=!0,f.value={name:"",email:"",message:""},setTimeout(()=>{x.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(r){console.error("Erreur lors de la soumission:",r)}finally{n.value=!1}};return(r,a)=>{const i=ge("router-link");return t(),s("div",Td,[a[33]||(a[33]=Me('<div class="text-center mb-8" data-v-4e7dc548><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-4e7dc548>üìò Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-4e7dc548>Votre espace pour faciliter le commerce au Cameroun</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-4e7dc548><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-4e7dc548>√Ä Propos d‚ÄôEspace Cameroun</h2><p class="text-gray-700" data-v-4e7dc548> Espace Cameroun est une plateforme de marketplace con√ßue pour connecter commer√ßants, acheteurs et revendeurs. Son objectif principal est de cr√©er un espace num√©rique o√π les transactions commerciales peuvent se d√©rouler facilement et en toute s√©curit√©. Notre mission est de faciliter l‚Äôactivit√© commerciale au Cameroun en offrant des outils simples et accessibles √† tous. </p></section>',2)),e("section",Ld,[a[27]||(a[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Fonctionnalit√©s Cl√©s",-1)),e("div",qd,[e("div",null,[a[6]||(a[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",Od,[a[4]||(a[4]=h(" Communiquez directement avec vos partenaires commerciaux pour n√©gocier ou confirmer des transactions via la section ")),R(i,{to:"/messages",class:"text-blue-500 underline"},{default:X(()=>a[3]||(a[3]=[h("Chat")])),_:1,__:[3]}),a[5]||(a[5]=h(". "))])]),a[23]||(a[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," Cr√©ez et g√©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute s√©curit√©. ")],-1)),e("div",null,[a[10]||(a[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",Nd,[a[8]||(a[8]=h(" Participez au march√© des jetons via ")),R(i,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:X(()=>a[7]||(a[7]=[h("March√© des Jetons")])),_:1,__:[7]}),a[9]||(a[9]=h(" pour vendre vos jetons ou en acheter, g√©n√©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[a[14]||(a[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Rd,[a[12]||(a[12]=h(" Devenez commer√ßant en cr√©ant un compte via ")),R(i,{to:"/profil",class:"text-blue-500 underline"},{default:X(()=>a[11]||(a[11]=[h("Profil")])),_:1,__:[11]}),a[13]||(a[13]=h(", puis publiez vos produits (ex. t√©l√©phones, v√™tements) ou services (ex. r√©parations, cours) en remplissant les d√©tails (nom, prix, description, photos), s√©lectionnant un portefeuille, et soumettant votre annonce. "))])]),a[24]||(a[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagn√©s pour booster vos produits ou services, augmentant leur visibilit√© aupr√®s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[a[18]||(a[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Dd,[a[16]||(a[16]=h(" Travaillez avec d‚Äôautres commer√ßants pour proposer des produits ou services en collaboration via ")),R(i,{to:"/collaborations",class:"text-blue-500 underline"},{default:X(()=>a[15]||(a[15]=[h("Collaborations")])),_:1,__:[15]}),a[17]||(a[17]=h(". "))])]),e("div",null,[a[22]||(a[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Syst√®me de Parrainage",-1)),e("p",Wd,[a[20]||(a[20]=h(" Invitez d‚Äôautres utilisateurs √† cr√©er un compte commer√ßant via ")),R(i,{to:"/parrainage",class:"text-blue-500 underline"},{default:X(()=>a[19]||(a[19]=[h("√âquipe")])),_:1,__:[19]}),a[21]||(a[21]=h(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commer√ßants parrain√©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les √©changer sur le march√© des jetons. "))])]),a[25]||(a[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez √† un abonnement premium pour acc√©der √† des privil√®ges exclusifs, comme une visibilit√© accrue, des fonctionnalit√©s avanc√©es, et des avantages sp√©ciaux (d√©tails √† venir). ")],-1)),a[26]||(a[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," D√©couvrez d‚Äôautres fonctionnalit√©s au fil de votre utilisation pour optimiser votre exp√©rience commerciale. ")],-1))])]),e("section",Jd,[a[31]||(a[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),a[32]||(a[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester √† l‚Äô√©coute pour les mises √† jour et les nouvelles fonctionnalit√©s √† venir. ",-1)),e("form",{onSubmit:ne(p,["prevent"]),class:"space-y-4"},[e("div",null,[a[28]||(a[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),D(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":a[0]||(a[0]=c=>f.value.name=c),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[K,f.value.name]])]),e("div",null,[a[29]||(a[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),D(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":a[1]||(a[1]=c=>f.value.email=c),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[K,f.value.email]])]),e("div",null,[a[30]||(a[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),D(e("textarea",{id:"message",name:"message","onUpdate:modelValue":a[2]||(a[2]=c=>f.value.message=c),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[K,f.value.message]])]),e("button",{type:"submit",disabled:n.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":n.value}])},[n.value?(t(),s("span",Hd)):A("",!0),e("span",null,v(n.value?"Envoi...":"Envoyer"),1)],10,Bd)],32),x.value?(t(),s("p",Gd,"Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):A("",!0)]),a[34]||(a[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines √âtapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour am√©liorer Espace Cameroun. Restez connect√©s pour d√©couvrir de nouvelles fonctionnalit√©s et opportunit√©s commerciales dans un avenir proche. ")],-1))])}}}),zc=re(Xd,[["__scopeId","data-v-4e7dc548"]]),Kd={class:"overflow-y-scroll bg-gray-50 flex flex-col"},Qd={class:"bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white py-16 shadow-lg"},Zd={class:"max-w-4xl mx-auto text-center px-6"},Yd={class:"text-sm mt-4 italic text-green-200"},ec={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},tc={class:"flex items-center mb-4"},sc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},oc={class:"ml-4 text-lg font-semibold text-gray-800"},ac={key:0,class:"text-gray-700 mb-2 leading-relaxed"},rc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},lc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},nc=["disabled"],ic={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},uc={key:0,class:"mt-4 text-green-600 text-center"},dc=ae({__name:"Politique",setup(T){const n=new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),x=m([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons √† prot√©ger vos informations personnelles et √† respecter votre vie priv√©e."},{id:"collecte",title:"Donn√©es collect√©es",icon:"fas fa-database",list:["Nom, email, t√©l√©phone","Produits publi√©s","Messages √©chang√©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donn√©es",icon:"fas fa-cogs",list:["Gestion des comptes","Am√©lioration du service","S√©curit√© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donn√©es. Elles ne sont partag√©es qu‚Äôavec nos prestataires ou si la loi l‚Äôexige."},{id:"securite",title:"S√©curit√©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des acc√®s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["Acc√®s et rectification","Suppression du compte","Opposition et portabilit√©"]}]),f=m(!1),p=m(!1),r=m({name:"",email:"",message:""}),a=async()=>{f.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.value)})).ok)p.value=!0,r.value={name:"",email:"",message:""},setTimeout(()=>{p.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(i){console.error("Erreur envoi :",i)}finally{f.value=!1}};return(i,c)=>(t(),s("div",Kd,[e("section",Qd,[e("div",Zd,[c[3]||(c[3]=e("h1",{class:"text-4xl sm:text-5xl font-bold mb-4"},"Politique de Confidentialit√©",-1)),c[4]||(c[4]=e("p",{class:"text-lg text-green-100 max-w-2xl mx-auto"},[h(" D√©couvrez comment "),e("strong",null,"Espace Cameroun"),h(" prot√®ge vos donn√©es et respecte votre vie priv√©e. ")],-1)),e("p",Yd," Derni√®re mise √† jour : "+v(L(n)),1)])]),e("section",ec,[R(Oe,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:X(()=>[(t(!0),s(H,null,te(x.value,l=>(t(),s("div",{key:l.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",tc,[e("div",sc,[e("i",{class:G([l.icon,"text-xl"])},null,2)]),e("h2",oc,v(l.title),1)]),l.text?(t(),s("p",ac,v(l.text),1)):A("",!0),l.list?(t(),s("ul",rc,[(t(!0),s(H,null,te(l.list,u=>(t(),s("li",{key:u},v(u),1))),128))])):A("",!0)]))),128))]),_:1})]),e("section",lc,[c[8]||(c[8]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," üíå Une question sur vos donn√©es ? ",-1)),c[9]||(c[9]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous r√©pondrons dans les plus brefs d√©lais. ",-1)),e("form",{onSubmit:ne(a,["prevent"]),class:"space-y-4"},[e("div",null,[c[5]||(c[5]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),D(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":c[0]||(c[0]=l=>r.value.name=l),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[K,r.value.name]])]),e("div",null,[c[6]||(c[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),D(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":c[1]||(c[1]=l=>r.value.email=l),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[K,r.value.email]])]),e("div",null,[c[7]||(c[7]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),D(e("textarea",{id:"message",name:"message","onUpdate:modelValue":c[2]||(c[2]=l=>r.value.message=l),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[K,r.value.message]])]),e("button",{type:"submit",disabled:f.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":f.value}])},[f.value?(t(),s("span",ic)):A("",!0),e("span",null,v(f.value?"Envoi...":"Envoyer"),1)],10,nc)],32),p.value?(t(),s("p",uc," ‚úÖ Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):A("",!0)])]))}}),Uc=re(dc,[["__scopeId","data-v-e20adc0f"]]);export{eo as A,bc as C,zc as D,fc as F,mc as H,Vc as J,gc as L,Mc as M,hc as P,xc as R,_c as a,Pc as b,jc as c,kc as d,yc as e,$c as f,Sc as g,wc as h,Cc as i,Ec as j,Ac as k,Uc as l};
