import{u as ie,r as g,a as pe,d as le,w as xe,o as be,b as he,c as s,e as S,f as F,g as t,h as e,i as R,j as K,k as C,t as b,l as fe,m as Me,n as Ve,p as me,F as B,q as Y,s as G,T as _e,v as de,x as $e,y as I,z as X,A as Xe,B as je,C as Qe,D as dt,E as ct,G as pt,H as Ae,I as De,J as Ye,K as Oe}from"./vue-D22jj4LC.js";import{d as We}from"./pinia-yzfThc-V.js";import{a as Ie}from"./axios-Dq7h7Pqt.js";const Ze="/assets/logoOrangeweb-C9Cko1mf.webp",vt=()=>{const $=window.location.hostname;return $==="localhost"||$==="127.0.0.1"?"http://localhost:8000":"https://api.espacecameroun.com"};Ie.defaults.withCredentials=!0;Ie.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Ie.defaults.withXSRFToken=!0;const N=Ie.create({withCredentials:!0,baseURL:vt(),headers:{Accept:"application/json","Content-Type":"application/json"}}),Be=ie(),ge=We("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login($){const a=await N.post("/login",$);this.user=a.data.user,this.token=a.data.token,localStorage.setItem("token",this.token??""),N.defaults.headers.common.Authorization=`Bearer ${this.token}`},async register($){const a=await N.post("/register",$);this.user=a.data.user,this.token=a.data.token,localStorage.setItem("token",this.token??""),N.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{N.defaults.headers.common.Authorization=`Bearer ${this.token}`;const $=await N.get("/user");return this.user=$.data.user,!0}catch($){return console.error("utilisateur non:",$),Be.push("/login"),this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{Be.push("/login"),this.token&&await N.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete N.defaults.headers.common.Authorization,["pending_collaborations","pending_orders","cart","token","unread_messages","viewedProducts"].forEach(a=>localStorage.removeItem(a))}}}),Ge=ie(),Ue=We("userState",()=>{const $=g(0),a=g(0),v=pe(),x=()=>{const r=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");$.value=r.length;const m=localStorage.getItem("unread_messages");a.value=m?parseInt(m,10):0},d=r=>{localStorage.setItem("pending_collaborations",JSON.stringify(r)),$.value=r.length},i=r=>{localStorage.setItem("unread_messages",r.toString()),a.value=r},o=async r=>{var y,P,A;const m=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");m.push({produit_id:r.produit_id,prix_revente:r.prix_revente,status:"pending",created_at:new Date().toISOString()}),d(m);try{return await N.post("/collaborations",{produit_id:r.produit_id,prix_revente:r.prix_revente}),await l(),v.success("Demande de collaboration envoy√©e !"),!0}catch(w){((P=(y=w.response)==null?void 0:y.data)==null?void 0:P.message)=="Unauthenticated."&&Ge.push("login");const n=m.filter(u=>!(u.produit_id===r.produit_id&&u.prix_revente===r.prix_revente));return d(n),v.error(((A=w.response)==null?void 0:A.data.message)||"Erreur lors de la demande de collaboration"),!1}},l=async()=>{var r,m;try{const y=await N.get("/user/badges");$.value=y.data.collaborations_pending,i(y.data.unread_messages||0)}catch(y){((m=(r=y.response)==null?void 0:r.data)==null?void 0:m.message)=="Unauthenticated."&&Ge.push("login"),console.error("Erreur lors de la synchronisation des badges:",y)}};return{collaborationsPending:$,unreadMessages:a,initializeState:x,addCollaboration:o,syncCollaborationsWithBackend:l,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),$.value=0,a.value=0},saveCollaborationsToLocalStorage:d,saveUnreadMessagesToLocalStorage:i}}),Ee=We("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:$=>ge().user},actions:{async fetchProducts($={},a=!1,v=!1){var x,d;if(!(this.isLoading||!a&&!this.hasMore&&!v)){this.isLoading=!0,(a||v)&&(this.products=[],this.page=1,this.hasMore=!0);try{const i=await N.get("/produits",{params:{...$,page:this.page,sort:this.sort}});console.log("R√©ponse de l'API:",i.data),console.log("R√©ponse de l'API:",i.data.data);const o=i.data.data||[];if(!Array.isArray(o))throw new Error("Les donn√©es des produits ne sont pas un tableau");a||v||$.per_page==="all"?this.products=o:this.products=[...this.products,...o],this.hasMore=i.data.current_page<(i.data.last_page||1),this.page=i.data.current_page+1}catch(i){const o=ie();console.error("Erreur lors du fetch:",i),o.push("login"),(d=(x=i.response)==null?void 0:x.data)==null||d.message}finally{this.isLoading=!1}}},async toggleFavorite($){var d,i;const a=ge();if(!a.user&&(await a.checkAuth(),!a.user)){console.warn("Utilisateur non connect√©, redirection ou action n√©cessaire");return}const v=this.products.find(o=>o.id===$);let x=!1;v&&(v.is_favorited_by=!v.is_favorited_by,v.counts.favorites_count=v.is_favorited_by?v.counts.favorites_count+1:v.counts.favorites_count-1,x=!0),this.product&&this.product.id===$&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,x=!0);try{const o=await N.post(`/produits/${$}/favorite`),l=o.data.produit;if(x){const p=this.products.findIndex(r=>r.id===$);p!==-1&&(this.products[p]={...this.products[p],...l}),this.product&&this.product.id===$&&(this.product={...this.product,...l})}return o.data.message}catch(o){const l=ie();if(((i=(d=o.response)==null?void 0:d.data)==null?void 0:i.message)==="Unauthenticated."&&l.push("login"),console.error("Erreur toggleFavorite:",o),x){const p=this.products.find(r=>r.id===$);p&&(p.is_favorited_by=!p.is_favorited_by,p.counts.favorites_count=p.is_favorited_by?p.counts.favorites_count-1:p.counts.favorites_count+1),this.product&&this.product.id===$&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct($){var a,v,x,d;try{const i=await N.get(`/produits/${$}`);this.product=i.data.produit;const o=this.products.findIndex(l=>l.id===$);o!==-1?this.products[o]={...this.products[o],...this.product}:this.products.push(this.product)}catch(i){const o=ie();throw((v=(a=i.response)==null?void 0:a.data)==null?void 0:v.message)==="Unauthenticated."&&o.push("login"),((d=(x=i.response)==null?void 0:x.data)==null?void 0:d.message)||"Erreur lors du chargement du produit"}},setSort($){this.sort=$,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId($){this.userId=$}}}),mt={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},ft={class:"text-sm font-semibold text-[var(--espace-vert)]"},gt={class:"text-gray-800"},bt=le({__name:"SoldeUser",setup($){ie();const a=ge(),v=g(0),x=async()=>{if(a.user)try{v.value=a.user.jetons}catch(d){console.error("Erreur lors de la r√©cup√©ration des jetons:",d)}};return xe(()=>a.user,()=>{x()}),be(()=>{x()}),(d,i)=>{const o=he("router-link");return F(a).user?(t(),s("div",mt,[i[1]||(i[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",ft,[R(o,{to:"/jeton-history"},{default:K(()=>[i[0]||(i[0]=C(" Jetons : ")),e("span",gt,b(v.value),1)]),_:1,__:[0]})])])):S("",!0)}}}),ne=($,a)=>{const v=$.__vccOpts||$;for(const[x,d]of a)v[x]=d;return v},et=ne(bt,[["__scopeId","data-v-a9413d7d"]]),xt={class:"relative bg-[var(--espace-vert)] w-full"},ht={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 z-50 shadow-md h-full"},yt={class:"px-2 w-full sm:px-3 py-2 flex justify-between items-center gap-4 mb-4"},_t={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},wt=["aria-label"],kt={class:"flex items-center gap-2"},$t=["src"],Ct={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},At={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},Pt=le({__name:"HeaderBar",setup($){const a=()=>{const _=window.location.hostname;return _==="localhost"||_==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},v=fe(()=>a()),x=ge(),d=Ue();ie();const i=fe(()=>x.user);Me();const o=g(!1),l=g(!1);g(""),Ee();const p=g(!1),r=g(null),m=g(!1);let y=null;const P=()=>{var _;(_=x.user)!=null&&_.id&&(y&&(y.stopListening("MessageSent"),window.Echo.leave("private-chat")),console.log("üîî Abonnement au canal priv√© private-chat"),y=window.Echo.private("chat").listen("MessageSent",k=>{var D;((D=i.value)==null?void 0:D.id)==k.message.receiver_id&&(console.log("lalalla :",k),d.saveUnreadMessagesToLocalStorage(k.unread_messages))}).error(k=>{console.error("‚ùå Erreur d'abonnement au canal priv√©:",k)}),y.params={channelId:"chat"})},A=fe(()=>{var _,k;return[...i.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:d.unreadMessages},...(k=(_=i.value)==null?void 0:_.commercant)!=null&&k.email_verified_at?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:d.collaborationsPending},{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]}),w=async()=>{if(i.value)try{await d.syncCollaborationsWithBackend()}catch(_){console.error("Erreur lors du chargement des badges:",_)}},n=async()=>{if(!i.value&&x.token)try{await x.checkAuth()}catch(_){console.error("Erreur lors de la r√©cup√©ration de l'utilisateur:",_),x.logout()}i.value&&w()};xe(()=>d.collaborationsPending,_=>{_>-1&&(o.value=!0,setTimeout(()=>o.value=!1,300))}),xe(()=>d.unreadMessages,_=>{_>-1&&(l.value=!0,setTimeout(()=>l.value=!1,300))});const u=_=>{if(m.value){m.value=!1;return}r.value&&!r.value.contains(_.target)&&(p.value=!1)};return be(async()=>{var _;await n(),document.addEventListener("click",u),(_=x.user)!=null&&_.id&&P()}),Ve(()=>{var _;document.removeEventListener("click",u),(_=x.user)!=null&&_.id&&window.Echo.leave(`chat.${x.user.id}`)}),(_,k)=>{const D=he("RouterLink"),O=he("router-link");return t(),s("div",xt,[e("header",ht,[e("div",yt,[R(D,{to:"/","aria-label":"Retour √† l'accueil"},{default:K(()=>k[0]||(k[0]=[e("div",{class:"flex items-center gap-1 sm:gap-3"},[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ze,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})]),e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"}," Espace Cameroun ")],-1)])),_:1,__:[0]}),e("nav",_t,[(t(!0),s(B,null,Y(A.value,E=>(t(),me(D,{key:E.to,to:E.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas",E.icon])},null,2),C(" "+b(E.label)+" ",1),E!=null&&E.badge&&E.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":E.to==="/collaborations"&&o.value||E.to==="/messages"&&l.value}]),"aria-label":E.to==="/collaborations"?"Collaborations en attente":E.to==="/messages"?"Messages non lus":""},b(E.badge),11,wt)):S("",!0)]),_:2},1032,["to"]))),128))]),R(et),e("div",kt,[i.value?(t(),me(D,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:K(()=>[k[1]||(k[1]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),F(d).unreadMessages>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":l.value}]),"aria-label":"Messages non lus"},b(F(d).unreadMessages),3)):S("",!0)]),_:1,__:[1]})):S("",!0),i.value?(t(),me(D,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:K(()=>{var E;return[(E=i.value)!=null&&E.photo?(t(),s("img",{key:0,src:v.value+i.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,$t)):(t(),s("div",Ct,k[2]||(k[2]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):S("",!0)]),i.value?(t(),me(O,{key:0,to:"/jetonMarket","aria-label":"Aller au march√©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:K(()=>k[3]||(k[3]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[3]})):S("",!0),e("div",At,[R(O,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:K(()=>k[4]||(k[4]=[C(" ? ")])),_:1,__:[4]})])])])])}}}),Gc=ne(Pt,[["__scopeId","data-v-2648aa5e"]]),jt={class:"relative"},St={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Mt={class:"flex justify-around items-center py-2"},Vt=["aria-label"],Et=le({__name:"FooterBar",setup($){const a=ge(),v=Ue();ie();const x=g(!1),d=g(!1),i=fe(()=>{var o;return[...a.user?[{to:"/",label:"Accueil",icon:"fa-home"},...(o=a.user.commercant)!=null&&o.email_verified_at?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:v.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]});return xe(()=>v.collaborationsPending,o=>{o>0&&(x.value=!0,setTimeout(()=>x.value=!1,300))}),xe(()=>v.unreadMessages,o=>{o>0&&(d.value=!0,setTimeout(()=>d.value=!1,300))}),(o,l)=>{const p=he("RouterLink");return t(),s("div",jt,[R(_e,{name:"slide-up"},{default:K(()=>[e("nav",St,[e("div",Mt,[(t(!0),s(B,null,Y(i.value,r=>(t(),me(p,{key:r.to,to:r.to,"aria-label":r.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas text-lg",r.icon])},null,2),r!=null&&r.badge&&r.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":r.to==="/collaborations"&&x.value||r.to==="/messages"&&d.value}]),"aria-label":r.to==="/collaborations"?"Collaborations en attente":r.to==="/messages"?"Messages non lus":""},b(r.badge),11,Vt)):S("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),Kc=ne(Et,[["__scopeId","data-v-39c0c38a"]]),zt={class:"mb-4"},Tt={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},Lt={class:"relative"},Ut={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},Ft=["type","value","required","placeholder"],It={key:0,class:"text-red-500 text-sm mt-1"},ke=le({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup($){return(a,v)=>(t(),s("div",zt,[e("label",Tt,b($.label),1),e("div",Lt,[e("span",Ut,[e("i",{class:G(`fas ${$.icon}`)},null,2)]),e("input",{type:$.type,value:$.modelValue,onInput:v[0]||(v[0]=x=>a.$emit("update:modelValue",x.target.value)),required:$.required,placeholder:$.placeholder,class:G(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",$.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,Ft)]),$.error?(t(),s("p",It,b($.error),1)):S("",!0)]))}}),qt={class:"overflow-y-scroll flex items-center justify-center px-4 py-4 pb-24"},Rt={class:"w-full max-w-lg bg-gray-30 rounded-2xl shadow-xl p-6 sm:p-10"},Ot=["disabled"],Nt={key:0,class:"fas fa-spinner fa-spin mr-2"},Dt={key:1,class:"fas fa-sign-in-alt mr-2"},Wt={class:"text-center text-sm text-gray-600 mt-6"},Ht=le({__name:"Login",setup($){const a=g({login:"",mot_de_passe:""}),v=g({}),x=ie(),d=pe(),i=ge(),o=g(!1),l=async()=>{var p;try{o.value=!0,await i.login({login:a.value.login,mot_de_passe:a.value.mot_de_passe}),d.success("Connexion r√©ussie !"),x.push({name:"home"})}catch(r){console.error("Erreur lors de la connexion:",r);const m=r.message||"Erreur lors de la connexion. Veuillez v√©rifier vos informations.";d.error(m),((p=r.response)==null?void 0:p.status)===422&&(v.value=r.response.data.errors||{})}finally{o.value=!1}};return be(async()=>{i.user&&x.push({name:"home"})}),(p,r)=>{const m=he("router-link");return t(),s("div",qt,[e("div",Rt,[r[4]||(r[4]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-sign-in-alt mr-2 text-[var(--espace-or)]"}),C(" Connexion ")],-1)),r[5]||(r[5]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[C(" Connectez-vous √† "),e("strong",null,"Espace Cameroun"),C(" pour acc√©der √† vos achats et votre espace commer√ßant. ")],-1)),e("form",{onSubmit:de(l,["prevent"]),class:"space-y-5"},[R(ke,{label:"Email ou T√©l√©phone",icon:"fa-envelope",modelValue:a.value.login,"onUpdate:modelValue":r[0]||(r[0]=y=>a.value.login=y),type:"text",required:"",error:v.value.login},null,8,["modelValue","error"]),R(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe,"onUpdate:modelValue":r[1]||(r[1]=y=>a.value.mot_de_passe=y),type:"password",required:"",error:v.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:o.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[o.value?(t(),s("i",Nt)):(t(),s("i",Dt)),e("span",null,b(o.value?"Connexion...":"Se connecter"),1)],8,Ot)],32),e("p",Wt,[r[3]||(r[3]=C(" Pas de compte ? ")),R(m,{to:"/register",class:"text-[var(--espace-vert)] font-medium hover:text-[var(--espace-or)] hover:underline"},{default:K(()=>r[2]||(r[2]=[C(" Inscrivez-vous ici ")])),_:1,__:[2]})])])])}}}),Xc=ne(Ht,[["__scopeId","data-v-b1c5b1a0"]]),Jt="/assets/logo-ba4eAQQi.png",Bt={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},Gt=le({__name:"Loader",props:{isLoading:{type:Boolean}},setup($){return(a,v)=>(t(),me(_e,{name:"fade"},{default:K(()=>[a.isLoading?(t(),s("div",Bt,v[0]||(v[0]=[e("div",{class:"relative p-6"},[e("img",{src:Jt,alt:"Logo Espace Cameroun",class:"h-12 w-12 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-or)] border-t-transparent animate-spin"})],-1)]))):S("",!0)]),_:1}))}}),ze=ne(Gt,[["__scopeId","data-v-f60cc94a"]]),Kt={class:"h-full bg-gray-100 pt-10 px-4 sm:px-2 pb-16"},Xt={class:"h-full w-full overflow-y-scroll"},Qt={key:0},Yt={key:1,class:"grid grid-cols-1 pt-15 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Zt={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},es={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},ts=["src"],ss=["onClick"],os=["onClick"],as={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},rs={class:"p-2"},ls={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},ns=["onClick"],is={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},us={class:"text-md font-bold text-[var(--espace-or)] mt-2"},ds={class:"text-sm text-[var(--espace-gris)]"},cs={class:"text-sm text-[var(--espace-gris)] mt-2"},ps={class:"ml-4"},vs={key:2,class:"text-center text-[var(--espace-gris)]"},ms={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},fs={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},gs={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},bs={key:0,class:"grid grid-cols-3 gap-2 mb-2"},xs=["src"],hs=["onClick"],ys={class:"relative"},_s={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto"},ws=["onClick"],ks={key:0,class:"flex items-center gap-2"},$s={class:"flex gap-4 pt-2"},Cs=["disabled"],As={key:0,class:"fas fa-spinner fa-spin mr-2"},Ps=le({__name:"CommercantProduits",setup($){const a=Ee(),v=ge(),x=ie(),d=pe(),i=g(!1),o=g(!1),l=g([]),p=g([]),r=g(!1),m=g(!1),y=g(null),P=g({}),A=g({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),w=g(!1),n=g(""),u=fe(()=>p.value.filter(z=>z.nom.toLowerCase().includes(n.value.toLowerCase()))),_=g([]),k=g([]),D=g(null),O=fe(()=>[..._.value,...k.value.map(z=>URL.createObjectURL(z))]),E=async()=>{i.value=!0;try{const z=await N.get("/commercant/produits");i.value=!1,l.value=z.data.produits.map(c=>({...c,photo_url:c.photos&&c.photos.length>0?c.photos[0]:"https://via.placeholder.com/150"})),l.value.forEach(c=>{P.value[c.id]||(P.value[c.id]=0)})}catch{d.error("Erreur lors du chargement des produits")}finally{i.value=!1}},W=async()=>{try{const z=await N.get("/categories");p.value=z.data.categories}catch{d.error("Erreur lors du chargement des cat√©gories")}finally{}},j=()=>{A.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},_.value=[],k.value=[],r.value=!0},oe=z=>{y.value=z,A.value={nom:z.nom,description:z.description||"",prix:z.prix,stock:z.quantite,category_id:z.category_id,collaboratif:!!z.collaboratif,marge_min:z.marge_min||0},_.value=z.photos?[...z.photos]:[],k.value=[],P.value[z.id]||(P.value[z.id]=0),m.value=!0},ce=z=>{const c=z.target;if(c.files){const M=Array.from(c.files);k.value.push(...M),D.value&&(D.value.value="")}},Q=z=>{if(z<_.value.length)_.value.splice(z,1);else{const c=z-_.value.length;k.value.splice(c,1)}},L=async()=>{var c,M,V,f;o.value=!0;const z=new FormData;z.append("nom",A.value.nom),z.append("description",A.value.description),z.append("prix",A.value.prix.toString()),z.append("stock",A.value.stock.toString()),z.append("category_id",A.value.category_id),z.append("collaboratif",A.value.collaboratif?"1":"0"),z.append("marge_min",A.value.marge_min.toString()),_.value.forEach(T=>z.append("old_photos[]",T)),k.value.forEach(T=>z.append("photos[]",T));try{if(r.value)await N.post("/commercant/produits",z,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Produit ajout√© avec succ√®s");else{const T=await N.post(`/commercant/produits/${(c=y.value)==null?void 0:c.id}`,z,{headers:{"Content-Type":"multipart/form-data"}});console.log(T.data),d.success("Produit modifi√© avec succ√®s")}await E(),a.fetchProducts(),J()}catch(T){((V=(M=T.response)==null?void 0:M.data)==null?void 0:V.message)=="Unauthenticated."&&x.push("login"),d.error(((f=T.response)==null?void 0:f.data.message)||"Erreur lors de la sauvegarde du produit")}finally{o.value=!1}},J=()=>{r.value=!1,m.value=!1,y.value=null,_.value=[],k.value=[]},H=fe(()=>z=>P.value[z]||0),Z=z=>{var V;const c=l.value.find(f=>f.id===z),M=(V=c==null?void 0:c.photos)!=null&&V.length?c.photos.length-1:0;P.value[z]=Math.min((P.value[z]||0)+1,M)},ve=z=>{P.value[z]=Math.max((P.value[z]||0)-1,0)};return be(async()=>{await E(),W(),setTimeout(()=>{var z;if(!((z=v.user)!=null&&z.commercant)){d.error("Acc√®s r√©serv√© aux commer√ßants"),x.push("/");return}},2e3)}),(z,c)=>{const M=he("router-link");return t(),s(B,null,[R(ze,{isLoading:i.value},null,8,["isLoading"]),e("div",Kt,[e("div",Xt,[e("div",{class:"flex justify-between items-center fixed z-10 w-full pr-7"},[c[11]||(c[11]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),C(" Mes Produits ")],-1)),e("button",{onClick:j,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},c[10]||(c[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),C(" Ajouter un produit ")]))]),i.value?(t(),s("div",Qt,c[12]||(c[12]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):l.value.length?(t(),s("div",Yt,[(t(!0),s(B,null,Y(l.value,V=>(t(),s("div",{key:V.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",Zt,[V.collaboratif?(t(),s("span",es," Collaboratif ")):S("",!0),R(M,{to:`/produits/${V.id}`,class:"block relative"},{default:K(()=>[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${H.value(V.id)*100}%)`})},[(t(!0),s(B,null,Y(V.photos,(f,T)=>(t(),s("img",{key:T,src:f,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,ts))),128))],4)]),_:2},1032,["to"]),V.photos&&V.photos.length>1?(t(),s("button",{key:1,onClick:f=>ve(V.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},c[13]||(c[13]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,ss)):S("",!0),V.photos&&V.photos.length>1?(t(),s("button",{key:2,onClick:f=>Z(V.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},c[14]||(c[14]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,os)):S("",!0),V.photos&&V.photos.length>1?(t(),s("div",as,[(t(!0),s(B,null,Y(V.photos,(f,T)=>(t(),s("span",{key:T,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":T===H.value(V.id)}])},null,2))),128))])):S("",!0)]),e("div",rs,[e("h2",ls,[R(M,{to:`/produits/${V.id}`,class:"block relative"},{default:K(()=>[C(b(V.nom),1)]),_:2},1032,["to"]),e("button",{onClick:f=>oe(V),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},c[15]||(c[15]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,ns)]),e("p",is,b(V.description||"Aucune"),1),e("p",us,b(V.prix)+" FCFA",1),e("p",ds,"Stock: "+b(V.quantite),1),e("div",cs,[e("span",null,[c[16]||(c[16]=e("i",{class:"fas fa-eye mr-1"},null,-1)),C(" "+b(V.raw_views_count||0)+" vues",1)]),e("span",ps,[c[17]||(c[17]=e("i",{class:"fas fa-bookmark mr-1"},null,-1)),C(" "+b(V.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",vs,"Aucun produit pour le moment."))]),R(_e,{name:"fade"},{default:K(()=>{var V;return[r.value||m.value?(t(),s("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(J,["self"])},[e("div",ms,[e("h2",fs,b(r.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:de(L,["prevent"]),class:"space-y-4 pt-12"},[e("div",null,[c[21]||(c[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",gs,[O.value.length?(t(),s("div",bs,[(t(!0),s(B,null,Y(O.value,(f,T)=>(t(),s("div",{key:T,class:"relative w-full h-20"},[e("img",{src:f,class:"w-full h-full object-cover rounded-lg",alt:"Pr√©visualisation"},null,8,xs),e("button",{onClick:de(ee=>Q(T),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},c[18]||(c[18]=[e("i",{class:"fas fa-times"},null,-1)]),8,hs)]))),128))])):S("",!0),e("input",{ref_key:"fileInput",ref:D,type:"file",multiple:"",onChange:ce,class:"hidden",accept:"image/*"},null,544),O.value.length?(t(),s("button",{key:2,type:"button",onClick:c[1]||(c[1]=f=>{var T;return(T=D.value)==null?void 0:T.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},c[20]||(c[20]=[e("i",{class:"fas fa-plus mr-2"},null,-1),C(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:c[0]||(c[0]=f=>{var T;return(T=D.value)==null?void 0:T.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},c[19]||(c[19]=[e("i",{class:"fas fa-camera mr-2"},null,-1),C(" Ajouter une photo ")])))])]),e("div",null,[c[22]||(c[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),I(e("input",{"onUpdate:modelValue":c[2]||(c[2]=f=>A.value.nom=f),type:"text",required:"",class:"input-style"},null,512),[[X,A.value.nom]])]),e("div",null,[c[23]||(c[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),I(e("textarea",{"onUpdate:modelValue":c[3]||(c[3]=f=>A.value.description=f),rows:"3",class:"input-style"},null,512),[[X,A.value.description]])]),e("div",null,[c[24]||(c[24]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),I(e("input",{"onUpdate:modelValue":c[4]||(c[4]=f=>A.value.prix=f),type:"number",min:"0",required:"",class:"input-style"},null,512),[[X,A.value.prix,void 0,{number:!0}]])]),e("div",null,[c[25]||(c[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),I(e("input",{"onUpdate:modelValue":c[5]||(c[5]=f=>A.value.stock=f),type:"number",min:"0",required:"",class:"input-style"},null,512),[[X,A.value.stock,void 0,{number:!0}]])]),e("div",ys,[c[26]||(c[26]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Cat√©gorie",-1)),I(e("input",{"onUpdate:modelValue":c[6]||(c[6]=f=>n.value=f),type:"text",placeholder:"Rechercher une cat√©gorie",class:"input-style",onFocus:c[7]||(c[7]=f=>w.value=!0),onBlur:c[8]||(c[8]=f=>z.setTimeout(()=>w.value=!1,150))},null,544),[[X,n.value]]),w.value&&u.value.length?(t(),s("ul",_s,[(t(!0),s(B,null,Y(u.value,f=>(t(),s("li",{key:f.id,onClick:T=>{A.value.category_id=f.id,n.value=f.nom},class:"px-2 py-1 hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] cursor-pointer"},b(f.nom),9,ws))),128))])):S("",!0)]),r.value||!((V=y.value)!=null&&V.collaboratif)?(t(),s("div",ks,[I(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":c[9]||(c[9]=f=>A.value.collaboratif=f)},null,512),[[Xe,A.value.collaboratif]]),c[27]||(c[27]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):S("",!0),e("div",$s,[e("button",{type:"submit",disabled:o.value,class:G(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[o.value?(t(),s("i",As)):S("",!0),C(" "+b(r.value?"Ajouter":"Modifier"),1)],10,Cs),e("button",{type:"button",onClick:J,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):S("",!0)]}),_:1})])],64)}}}),Qc=ne(Ps,[["__scopeId","data-v-1d92796d"]]),js={class:"overflow-y-scroll bg-white flex justify-center px-4 pt-8"},Ss={class:"flex flex-col w-full max-w-lg rounded-2xl sm:p-10"},Ms={class:"relative"},Vs={class:"relative"},Es=["disabled"],zs={class:"text-center text-sm text-gray-600 mt-6"},Ts=le({__name:"Register",setup($){const a=g({nom:"",telephone:"",mot_de_passe:"",mot_de_passe_confirmation:"",parrain_code:""}),v=g({}),x=ie(),d=Me(),i=pe(),o=ge();be(()=>{const y=d.params.code;y&&(a.value.parrain_code=y)});const l=g(!1),p=g(!1),r=g(!1),m=async()=>{var y,P,A;try{r.value=!0,await o.register(a.value),i.success("Inscription r√©ussie !"),x.push({name:"home"})}catch(w){console.error("Erreur lors de l'inscription:",w);const n=((P=(y=w.response)==null?void 0:y.data)==null?void 0:P.message)||"Erreur lors de l'inscription. Veuillez v√©rifier vos informations.";i.error(n),((A=w.response)==null?void 0:A.status)===422&&(v.value=w.response.data.errors)}finally{r.value=!1}};return(y,P)=>{const A=he("router-link");return t(),s("div",js,[e("div",Ss,[P[9]||(P[9]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),C(" Cr√©ez votre compte ")],-1)),P[10]||(P[10]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[C(" Rejoignez "),e("strong",null,"Espace Cameroun"),C(" et profitez d‚Äôune exp√©rience d‚Äôachat unique. Vos informations resteront confidentielles. ")],-1)),e("form",{onSubmit:de(m,["prevent"]),class:"space-y-5"},[R(ke,{label:"Nom",icon:"fa-user",modelValue:a.value.nom,"onUpdate:modelValue":P[0]||(P[0]=w=>a.value.nom=w),type:"text",required:"",error:v.value.nom},null,8,["modelValue","error"]),R(ke,{label:"T√©l√©phone",icon:"fa-phone",modelValue:a.value.telephone,"onUpdate:modelValue":P[1]||(P[1]=w=>a.value.telephone=w),type:"tel",required:"",error:v.value.telephone},null,8,["modelValue","error"]),e("div",Ms,[R(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe,"onUpdate:modelValue":P[2]||(P[2]=w=>a.value.mot_de_passe=w),type:l.value?"text":"password",required:"",error:v.value.mot_de_passe},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:P[3]||(P[3]=w=>l.value=!l.value)},[e("i",{class:G(l.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e("div",Vs,[R(ke,{label:"Confirmer le mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe_confirmation,"onUpdate:modelValue":P[4]||(P[4]=w=>a.value.mot_de_passe_confirmation=w),type:p.value?"text":"password",required:"",error:v.value.mot_de_passe_confirmation},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:P[5]||(P[5]=w=>p.value=!p.value)},[e("i",{class:G(p.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),R(ke,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:a.value.parrain_code,"onUpdate:modelValue":P[6]||(P[6]=w=>a.value.parrain_code=w),type:"text",error:v.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[e("i",{class:G([r.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,b(r.value?"Inscription...":"S'inscrire"),1)],8,Es)],32),e("p",zs,[P[8]||(P[8]=C(" Vous avez d√©j√† un compte ? ")),R(A,{to:"/login",class:"text-[var(--espace-vert)] font-medium hover:underline"},{default:K(()=>P[7]||(P[7]=[C(" Connectez-vous ici ")])),_:1,__:[7]})]),P[11]||(P[11]=e("p",{class:"text-center text-xs text-gray-400 mt-2 pb-24"},[C(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"},"politique de confidentialit√©"),C(". ")],-1))])])}}}),Yc=ne(Ts,[["__scopeId","data-v-f8def22a"]]),Ls={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},Us={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},Fs={class:"p-6"},Is={key:0,class:"grid md:grid-cols-3 gap-6"},qs={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},Rs={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Os={class:"font-extrabold text-lg mb-2"},Ns={class:"mb-2 text-sm opacity-90"},Ds={class:"text-3xl font-extrabold"},Ws={class:"flex flex-col text-sm font-medium text-gray-700"},Hs={key:0,class:"text-xs text-red-600 mt-1"},Js={class:"flex gap-4"},Bs=["value"],Gs=["src"],Ks={key:0,class:"text-xs text-red-600 mt-1 block"},Xs=["disabled"],Qs={class:"text-xs text-gray-400 mt-4 text-center"},Ys=le({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup($,{emit:a}){const v=ge().user,x=ie(),d=a,i=pe(),o=g(""),l=g(""),p=g(""),r=g(!1),m=g(!1),y=g(!1),P=n=>{o.value=n,r.value=!1,m.value=!1,l.value="",p.value=""},A=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],w=async()=>{var n,u;if(r.value=!p.value,m.value=!l.value,r.value||m.value){i.error("Veuillez remplir tous les champs correctement.");return}y.value=!0;try{const _=await N.post("/upgrade-to-premium",{subscription_type:o.value,payment_service:l.value,phone_number:p.value});y.value=!1,v&&(v.premium=!0),i.success(_.data.message),d("upgraded"),d("close")}catch(_){if(((u=(n=_.response)==null?void 0:n.data)==null?void 0:u.message)=="Unauthenticated."&&x.push("login"),_.response&&_.response.data){const k=_.response.data;i.error(`Paiement √©chou√© :Verifiez vos informations et r√©essayer${k.message}`)}else i.error("Verifiez vos informations et r√©essayer.");console.error(_)}finally{y.value=!1}};return(n,u)=>{const _=he("router-link");return n.isOpen?(t(),s("div",Ls,[e("div",Us,[u[18]||(u[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"üöÄ Passez √† Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",Fs,[o.value?(t(),s("div",qs,[e("div",Rs,[u[12]||(u[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:G([{"bg-green-600 text-white":o.value==="monthly","bg-yellow-400 text-gray-900":o.value==="yearly"},"rounded-lg p-4"])},[e("h4",Os,b(o.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Ns,b(o.value==="monthly"?"Acc√®s complet √† toutes les fonctionnalit√©s.":"Payez moins, profitez plus avec 16% d‚Äô√©conomie !"),1),e("div",Ds,b(o.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:de(w,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[u[16]||(u[16]=e("h3",{class:"text-xl font-bold mb-2"},"D√©tails du paiement",-1)),e("label",Ws,[u[13]||(u[13]=C(" Num√©ro de t√©l√©phone ")),I(e("input",{"onUpdate:modelValue":u[4]||(u[4]=k=>p.value=k),type:"tel",placeholder:"Ex: 696828151",class:G(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":r.value}]),onInput:u[5]||(u[5]=k=>r.value=!p.value),required:""},null,34),[[X,p.value]]),r.value?(t(),s("span",Hs,"Veuillez entrer un num√©ro valide.")):S("",!0)]),u[17]||(u[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Js,[(t(),s(B,null,Y(A,k=>e("label",{key:k.value,class:G(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":l.value===k.value,"border-gray-300 bg-white":l.value!==k.value,"border-red-500":m.value&&!l.value}])},[I(e("input",{type:"radio",value:k.value,"onUpdate:modelValue":u[6]||(u[6]=D=>l.value=D),class:"hidden"},null,8,Bs),[[Qe,l.value]]),e("img",{src:k.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Gs),e("span",{class:G([{"text-[var(--espace-vert)]":l.value===k.value,"text-gray-700":l.value!==k.value},"font-semibold select-none"])},b(k.label),3)],2)),64))]),m.value&&!l.value?(t(),s("span",Ks," Veuillez s√©lectionner un service. ")):S("",!0),e("button",{type:"submit",disabled:y.value||!p.value||!l.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[y.value?(t(),s(B,{key:0},[u[14]||(u[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),u[15]||(u[15]=C(" Veuillez patienter... "))],64)):(t(),s(B,{key:1},[C(" Payer & Souscrire ")],64))],8,Xs),e("button",{type:"button",onClick:u[7]||(u[7]=k=>o.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," ‚Üê Retour aux plans "),e("p",Qs," üîí Paiement s√©curis√© via "+b(l.value||"votre service"),1)],32)])):(t(),s("div",Is,[u[11]||(u[11]=je('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-04ff97e1><div data-v-04ff97e1><h3 class="text-xl font-bold text-gray-800" data-v-04ff97e1>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-04ff97e1>Pour d√©buter sans frais</p><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Pas de statistiques d√©taill√©es </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-04ff97e1> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:u[1]||(u[1]=k=>P("monthly"))},[u[8]||(u[8]=je('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>‚≠ê Populaire</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1> Acc√®s complet √† toutes les fonctionnalit√©s </p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:u[0]||(u[0]=de(k=>P("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:u[3]||(u[3]=k=>P("yearly"))},[u[9]||(u[9]=je('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>-16% √âconomie</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:u[2]||(u[2]=de(k=>P("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),R(_,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:K(()=>u[10]||(u[10]=[C(" ‚Üê Retour ")])),_:1,__:[10]})]))])])])):S("",!0)}}}),Zs=ne(Ys,[["__scopeId","data-v-04ff97e1"]]),eo={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},to={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},so={class:"flex justify-center gap-3 mb-4"},oo=["onClick"],ao={key:0,class:"text-xs text-red-600 mt-1"},ro={class:"flex gap-4"},lo=["value"],no=["src"],io={key:1,class:"text-xs text-red-600 mt-1"},uo={class:"text-center text-lg font-bold mt-6"},co={class:"text-[var(--espace-vert)]"},po=["disabled"],vo={key:0},mo={key:1},fo={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},go={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},bo=le({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup($,{emit:a}){const v=ge().user,x=a,d=pe(),i=g(10),o=g(""),l=g(""),p=g(i.value*100),r=g(!1),m=g(!1),y=g(!1),P=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],A=[10,20,50,100],w=fe(()=>i.value>=10&&o.value.trim().length===9&&/^6\d{8}$/.test(o.value)&&l.value!==""),n=()=>{p.value=i.value*100},u=O=>{i.value=O,n()},_=()=>{n()},k=()=>{y.value=!(o.value.trim().length===9&&/^6\d{8}$/.test(o.value))},D=async()=>{if(m.value=!l.value,!w.value){d.error("Veuillez remplir tous les champs correctement.");return}r.value=!0;try{const O=await N.post("/acheter-jetons",{nombre_jetons:i.value,payment_service:l.value,phone_number:o.value});v&&(v.jetons+=i.value),d.success(O.data.message),x("purchased",i.value),x("close")}catch(O){if(O.response&&O.response.data){const E=O.response.data;d.error(`Erreur: ${E.error_message||"Achat √©chou√©"}. D√©tails: ${E.details||"Aucun d√©tail."}`)}else d.error("Erreur lors de l'achat. Veuillez r√©essayer.");console.error(O)}finally{r.value=!1}};return xe(o,()=>{k()}),(O,E)=>{const W=he("router-link");return t(),s("div",eo,[e("div",to,[E[7]||(E[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," üé´ Acheter des Jetons ",-1)),E[8]||(E[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 100 FCFA",-1)),e("div",so,[(t(),s(B,null,Y(A,j=>e("button",{key:j,type:"button",onClick:oe=>u(j),class:G(["rounded-full px-4 py-2 border font-semibold transition",i.value===j?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},b(j),11,oo)),64))]),E[9]||(E[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[C(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),I(e("input",{id:"jetonQuantity","onUpdate:modelValue":E[0]||(E[0]=j=>i.value=j),type:"number",min:"10",placeholder:"Ex: 10",onInput:_,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[X,i.value,void 0,{number:!0}]]),E[10]||(E[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[C(" Num√©ro de t√©l√©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),I(e("input",{id:"phoneNumber","onUpdate:modelValue":E[1]||(E[1]=j=>o.value=j),type:"tel",placeholder:"Ex: 696428651",onInput:k,class:G(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",y.value?"border-red-500":"border-gray-300"])},null,34),[[X,o.value]]),y.value?(t(),s("p",ao," Veuillez entrer un num√©ro valide (9 chiffres, commen√ßant par 6). ")):S("",!0),E[11]||(E[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",ro,[(t(),s(B,null,Y(P,j=>e("label",{key:j.value,class:G(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":l.value===j.value,"border-gray-300 bg-white":l.value!==j.value}])},[I(e("input",{type:"radio",value:j.value,"onUpdate:modelValue":E[2]||(E[2]=oe=>l.value=oe),class:"hidden"},null,8,lo),[[Qe,l.value]]),e("img",{src:j.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,no),e("span",{class:G({"text-[var(--espace-vert)] font-bold":l.value===j.value,"text-gray-700":l.value!==j.value})},b(j.label),3)],2)),64))]),m.value&&!l.value?(t(),s("p",io," Veuillez s√©lectionner un service. ")):S("",!0),e("div",uo,[E[4]||(E[4]=C(" Montant total : ")),e("span",co,b(p.value)+" FCFA",1)]),e("button",{onClick:D,disabled:!w.value||r.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[r.value?(t(),s("span",mo,"veuillez patientez")):(t(),s("span",vo,"Acheter")),r.value?(t(),s("svg",fo,E[5]||(E[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):S("",!0)],8,po),e("button",go,[R(W,{to:"/jeton-history",onClick:E[3]||(E[3]=j=>x("close"))},{default:K(()=>E[6]||(E[6]=[C("Annuler")])),_:1,__:[6]})])])])}}}),xo=ne(bo,[["__scopeId","data-v-05239cce"]]);class Fe{constructor(a=0,v="Network Error"){this.status=a,this.text=v}}const ho=()=>{if(!(typeof localStorage>"u"))return{get:$=>Promise.resolve(localStorage.getItem($)),set:($,a)=>Promise.resolve(localStorage.setItem($,a)),remove:$=>Promise.resolve(localStorage.removeItem($))}},ye={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ho()},He=$=>$?typeof $=="string"?{publicKey:$}:$.toString()==="[object Object]"?$:{}:{},yo=($,a="https://api.emailjs.com")=>{if(!$)return;const v=He($);ye.publicKey=v.publicKey,ye.blockHeadless=v.blockHeadless,ye.storageProvider=v.storageProvider,ye.blockList=v.blockList,ye.limitRate=v.limitRate,ye.origin=v.origin||a},tt=async($,a,v={})=>{const x=await fetch(ye.origin+$,{method:"POST",headers:v,body:a}),d=await x.text(),i=new Fe(x.status,d);if(x.ok)return i;throw i},st=($,a,v)=>{if(!$||typeof $!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!a||typeof a!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!v||typeof v!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},_o=$=>{if($&&$.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},ot=$=>$.webdriver||!$.languages||$.languages.length===0,at=()=>new Fe(451,"Unavailable For Headless Browser"),wo=($,a)=>{if(!Array.isArray($))throw"The BlockList list has to be an array";if(typeof a!="string")throw"The BlockList watchVariable has to be a string"},ko=$=>{var a;return!((a=$.list)!=null&&a.length)||!$.watchVariable},$o=($,a)=>$ instanceof FormData?$.get(a):$[a],rt=($,a)=>{if(ko($))return!1;wo($.list,$.watchVariable);const v=$o(a,$.watchVariable);return typeof v!="string"?!1:$.list.includes(v)},lt=()=>new Fe(403,"Forbidden"),Co=($,a)=>{if(typeof $!="number"||$<0)throw"The LimitRate throttle has to be a positive number";if(a&&typeof a!="string")throw"The LimitRate ID has to be a non-empty string"},Ao=async($,a,v)=>{const x=Number(await v.get($)||0);return a-Date.now()+x},nt=async($,a,v)=>{if(!a.throttle||!v)return!1;Co(a.throttle,a.id);const x=a.id||$;return await Ao(x,a.throttle,v)>0?!0:(await v.set(x,Date.now().toString()),!1)},it=()=>new Fe(429,"Too Many Requests"),Po=async($,a,v,x)=>{const d=He(x),i=d.publicKey||ye.publicKey,o=d.blockHeadless||ye.blockHeadless,l=d.storageProvider||ye.storageProvider,p={...ye.blockList,...d.blockList},r={...ye.limitRate,...d.limitRate};return o&&ot(navigator)?Promise.reject(at()):(st(i,$,a),_o(v),v&&rt(p,v)?Promise.reject(lt()):await nt(location.pathname,r,l)?Promise.reject(it()):tt("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:$,template_id:a,template_params:v}),{"Content-type":"application/json"}))},jo=$=>{if(!$||$.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},So=$=>typeof $=="string"?document.querySelector($):$,Mo=async($,a,v,x)=>{const d=He(x),i=d.publicKey||ye.publicKey,o=d.blockHeadless||ye.blockHeadless,l=ye.storageProvider||d.storageProvider,p={...ye.blockList,...d.blockList},r={...ye.limitRate,...d.limitRate};if(o&&ot(navigator))return Promise.reject(at());const m=So(v);st(i,$,a),jo(m);const y=new FormData(m);return rt(p,y)?Promise.reject(lt()):await nt(location.pathname,r,l)?Promise.reject(it()):(y.append("lib_version","4.4.1"),y.append("service_id",$),y.append("template_id",a),y.append("user_id",i),tt("/api/v1.0/email/send-form",y))},Ne={init:yo,send:Po,sendForm:Mo,EmailJSResponseStatus:Fe},Vo={class:"space-y-6 pb-16"},Eo={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},zo={key:0,class:"space-y-2 text-[var(--espace-gris)]"},To={class:"flex gap-2"},Lo=["disabled"],Uo={key:0,class:"fas fa-spinner fa-spin mr-2"},Fo={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},Io={key:0,class:"space-y-4"},qo={class:"flex gap-2"},Ro=["disabled"],Oo={key:0,class:"fas fa-spinner fa-spin mr-2"},No=["disabled"],Do={key:1,class:"space-y-2 text-[var(--espace-gris)]"},Wo={key:0,class:"w-24 h-24"},Ho=["src"],Jo={key:0,class:"mt-2 w-24 h-24"},Bo=["src"],Go={class:"flex gap-2"},Ko=["disabled"],Xo={key:0,class:"fas fa-spinner fa-spin mr-2"},Qo=le({__name:"userProfile",setup($){var D,O,E,W,j,oe,ce,Q,L,J,H,Z,ve,z,c,M;const a=ie(),v=ge(),x=pe(),d=g(!1),i=g(!1),o=g(!1),l=g(!1),p=g(!1),r=g(v.user),m=g({nom:((D=r.value)==null?void 0:D.nom)||"",telephone:((O=r.value)==null?void 0:O.telephone)||"",email:((E=r.value)==null?void 0:E.email)||"",ville:((W=r.value)==null?void 0:W.ville)||""}),y=g({nom:((oe=(j=r.value)==null?void 0:j.commercant)==null?void 0:oe.nom)||"",description:((Q=(ce=r.value)==null?void 0:ce.commercant)==null?void 0:Q.description)||"",email:((J=(L=r.value)==null?void 0:L.commercant)==null?void 0:J.email)||"",telephone:((Z=(H=r.value)==null?void 0:H.commercant)==null?void 0:Z.telephone)||"",ville:((z=(ve=r.value)==null?void 0:ve.commercant)==null?void 0:z.ville)||"",logo:null,logoPreview:(M=(c=r.value)==null?void 0:c.commercant)!=null&&M.logo?`http://localhost:8000/storage/${r.value.commercant.logo}`:null}),P=g({code:""});Ne.init("oI96z_b6E-d8WjfOM");const A=V=>{var T;const f=(T=V.target.files)==null?void 0:T[0];if(f){if(!f.type.startsWith("image/")){x.error("Veuillez s√©lectionner une image.");return}if(f.size>2*1024*1024){x.error("Image trop volumineuse (max 2Mo).");return}y.value.logo=f,y.value.logoPreview=URL.createObjectURL(f)}},w=async(V,f)=>{try{await Ne.send("service_06884pt","template_5x962ru",{to_name:V,code:f}),x.success("Code de v√©rification envoy√©.")}catch{x.error("Erreur lors de l'envoi de l'email.")}},n=async()=>{var V,f,T;o.value=!0;try{const ee=await N.post("/updateProfile",m.value);r.value&&(r.value.nom=ee.data.user.nom||"",r.value.telephone=ee.data.user.telephone||"",r.value.email=ee.data.user.email||"",r.value.ville=ee.data.user.ville||""),v.user=ee.data.user,d.value=!1,x.success("Profil mis √† jour avec succ√®s.")}catch(ee){((f=(V=ee.response)==null?void 0:V.data)==null?void 0:f.message)==="Unauthenticated."&&a.push("login"),x.error(((T=ee.response)==null?void 0:T.data.message)||"Erreur lors de la mise √† jour.")}finally{o.value=!1}},u=async()=>{var V,f,T,ee,ae,re,te;(f=(V=r.value)==null?void 0:V.commercant)!=null&&f.email_verified_at,l.value=!0;try{const q=new FormData;q.append("nom",y.value.nom),q.append("description",y.value.description),q.append("email",y.value.email),q.append("telephone",y.value.telephone),q.append("ville",y.value.ville),y.value.logo&&q.append("logo",y.value.logo);const h=await N.post("/commercant/update",q,{headers:{"Content-Type":"multipart/form-data"}});(T=r.value)!=null&&T.commercant&&(r.value.commercant.nom=h.data.commercant.nom,r.value.commercant.description=h.data.commercant.description,r.value.commercant.email=h.data.commercant.email,r.value.commercant.telephone=h.data.commercant.telephone,r.value.commercant.ville=h.data.commercant.ville,r.value.commercant.logo=h.data.commercant.logo),v.user=r.value,y.value.logoPreview=h.data.commercant.logo?`http://localhost:8000/storage/${h.data.commercant.logo}`:null,i.value=!1,console.log(i.value),x.success("Commerce mis √† jour avec succ√®s.")}catch(q){((ae=(ee=q.response)==null?void 0:ee.data)==null?void 0:ae.message)==="Unauthenticated."&&a.push("login"),x.error(((te=(re=q.response)==null?void 0:re.data)==null?void 0:te.message)||"Erreur lors de la mise √† jour du commerce.")}finally{l.value=!1}},_=async()=>{var V,f,T,ee,ae,re,te;p.value=!0;try{const q=await N.post("/commercant/verify-email",{email:(f=(V=r.value)==null?void 0:V.commercant)==null?void 0:f.email,code:P.value.code});(T=r.value)!=null&&T.commercant&&(r.value.commercant.email_verified_at=q.data.email_verified_at,v.user=r.value),P.value.code="",x.success("Email v√©rifi√© avec succ√®s."),window.location.reload()}catch(q){((ae=(ee=q.response)==null?void 0:ee.data)==null?void 0:ae.message)==="Unauthenticated."&&a.push("login"),x.error(((te=(re=q.response)==null?void 0:re.data)==null?void 0:te.message)||"Erreur lors de la v√©rification.")}finally{p.value=!1}},k=async()=>{var V,f,T,ee,ae,re,te,q;p.value=!0;try{const h=await N.post("/commercant/resend-verification",{email:(f=(V=r.value)==null?void 0:V.commercant)==null?void 0:f.email});await w(((ee=(T=r.value)==null?void 0:T.commercant)==null?void 0:ee.email)||"",h.data.verification_code)}catch(h){((re=(ae=h.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&a.push("login"),x.error(((q=(te=h.response)==null?void 0:te.data)==null?void 0:q.message)||"Erreur lors du renvoi.")}finally{p.value=!1}};return xe(()=>v.user,V=>{var f,T,ee,ae,re,te;r.value=V||null,m.value={nom:(V==null?void 0:V.nom)||"",telephone:(V==null?void 0:V.telephone)||"",email:(V==null?void 0:V.email)||"",ville:(V==null?void 0:V.ville)||""},y.value={nom:((f=V==null?void 0:V.commercant)==null?void 0:f.nom)||"",description:((T=V==null?void 0:V.commercant)==null?void 0:T.description)||"",email:((ee=V==null?void 0:V.commercant)==null?void 0:ee.email)||"",telephone:((ae=V==null?void 0:V.commercant)==null?void 0:ae.telephone)||"",ville:((re=V==null?void 0:V.commercant)==null?void 0:re.ville)||"",logo:null,logoPreview:(te=V==null?void 0:V.commercant)!=null&&te.logo?`http://localhost:8000/storage/${V.commercant.logo}`:null}},{immediate:!0}),(V,f)=>{var T,ee,ae,re,te,q;return t(),s("div",Vo,[e("section",Eo,[f[25]||(f[25]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),d.value?(t(),s("form",{key:1,onSubmit:de(n,["prevent"]),class:"space-y-4"},[e("div",null,[f[20]||(f[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),I(e("input",{"onUpdate:modelValue":f[1]||(f[1]=h=>m.value.nom=h),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[X,m.value.nom]])]),e("div",null,[f[21]||(f[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"T√©l√©phone",-1)),I(e("input",{"onUpdate:modelValue":f[2]||(f[2]=h=>m.value.telephone=h),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre t√©l√©phone"},null,512),[[X,m.value.telephone]])]),e("div",null,[f[22]||(f[22]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),I(e("input",{"onUpdate:modelValue":f[3]||(f[3]=h=>m.value.email=h),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[X,m.value.email]])]),e("div",null,[f[23]||(f[23]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),I(e("input",{"onUpdate:modelValue":f[4]||(f[4]=h=>m.value.ville=h),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[X,m.value.ville]])]),e("div",To,[e("button",{type:"submit",disabled:o.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[o.value?(t(),s("i",Uo)):S("",!0),f[24]||(f[24]=C(" Enregistrer "))],10,Lo),e("button",{onClick:f[5]||(f[5]=h=>d.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",zo,[e("p",null,[f[15]||(f[15]=e("strong",null,"Nom :",-1)),C(" "+b((T=r.value)==null?void 0:T.nom),1)]),e("p",null,[f[16]||(f[16]=e("strong",null,"T√©l√©phone :",-1)),C(" "+b((ee=r.value)==null?void 0:ee.telephone),1)]),e("p",null,[f[17]||(f[17]=e("strong",null,"Email :",-1)),C(" "+b(((ae=r.value)==null?void 0:ae.email)||"Non d√©fini"),1)]),e("p",null,[f[18]||(f[18]=e("strong",null,"Ville :",-1)),C(" "+b((re=r.value)==null?void 0:re.ville),1)]),e("p",null,[f[19]||(f[19]=e("strong",null,"Statut Premium :",-1)),C(" "+b((te=r.value)!=null&&te.premium?"Actif":"Inactif"),1)]),e("button",{onClick:f[0]||(f[0]=h=>d.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(q=r.value)!=null&&q.commercant?(t(),s("section",Fo,[f[41]||(f[41]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),!r.value.commercant.email_verified_at&&!i.value?(t(),s("div",Io,[f[28]||(f[28]=e("p",{class:"text-[var(--espace-gris)]"},"Veuillez v√©rifier votre email pour activer votre compte commer√ßant.",-1)),e("form",{onSubmit:de(_,["prevent"]),id:"form",class:"space-y-4"},[e("div",null,[f[26]||(f[26]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"verification_code"},"Code de v√©rification",-1)),I(e("input",{"onUpdate:modelValue":f[6]||(f[6]=h=>P.value.code=h),id:"verification_code",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Entrez le code re√ßu par email"},null,512),[[X,P.value.code]])]),e("div",qo,[e("button",{type:"submit",disabled:p.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",p.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"V√©rifier le code"},[p.value?(t(),s("i",Oo)):S("",!0),f[27]||(f[27]=C(" V√©rifier "))],10,Ro),e("button",{onClick:k,type:"button",disabled:p.value,class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Renvoyer le code"}," Renvoyer ",8,No)])],32),e("button",{onClick:f[7]||(f[7]=h=>{console.log(i.value),i.value=!0}),class:"mt-2 w-full sm:w-auto text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors border-2 border-[var(--espace-vert)] cursor-pointer text-center","aria-label":"Modifier le commerce"}," Retour ")])):i.value?S("",!0):(t(),s("div",Do,[r.value.commercant.logo?(t(),s("div",Wo,[e("img",{src:`http://localhost:8000/storage/${r.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,Ho)])):S("",!0),e("p",null,[f[29]||(f[29]=e("strong",null,"Nom du commerce :",-1)),C(" "+b(r.value.commercant.nom),1)]),e("p",null,[f[30]||(f[30]=e("strong",null,"Description :",-1)),C(" "+b(r.value.commercant.description||"Non d√©finie"),1)]),e("p",null,[f[31]||(f[31]=e("strong",null,"Email :",-1)),C(" "+b(r.value.commercant.email||"Non d√©fini"),1)]),e("p",null,[f[32]||(f[32]=e("strong",null,"T√©l√©phone :",-1)),C(" "+b(r.value.commercant.telephone),1)]),e("p",null,[f[33]||(f[33]=e("strong",null,"Ville :",-1)),C(" "+b(r.value.commercant.ville),1)]),e("button",{onClick:f[8]||(f[8]=h=>i.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le commerce"}," Modifier ")])),i.value?(t(),s("form",{key:2,onSubmit:de(u,["prevent"]),class:"space-y-4"},[e("div",null,[f[34]||(f[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),I(e("input",{"onUpdate:modelValue":f[9]||(f[9]=h=>y.value.nom=h),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[X,y.value.nom]])]),e("div",null,[f[35]||(f[35]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),I(e("textarea",{"onUpdate:modelValue":f[10]||(f[10]=h=>y.value.description=h),id:"description_commerce",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[X,y.value.description]])]),e("div",null,[f[36]||(f[36]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),I(e("input",{"onUpdate:modelValue":f[11]||(f[11]=h=>y.value.email=h),id:"email_commerce",type:"email",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce"},null,512),[[X,y.value.email]])]),e("div",null,[f[37]||(f[37]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"T√©l√©phone",-1)),I(e("input",{"onUpdate:modelValue":f[12]||(f[12]=h=>y.value.telephone=h),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"T√©l√©phone du commerce"},null,512),[[X,y.value.telephone]])]),e("div",null,[f[38]||(f[38]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),I(e("input",{"onUpdate:modelValue":f[13]||(f[13]=h=>y.value.ville=h),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[X,y.value.ville]])]),e("div",null,[f[39]||(f[39]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:A,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),y.value.logoPreview?(t(),s("div",Jo,[e("img",{src:y.value.logoPreview,alt:"Aper√ßu logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,Bo)])):S("",!0)]),e("div",Go,[e("button",{type:"submit",disabled:l.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",l.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[l.value?(t(),s("i",Xo)):S("",!0),f[40]||(f[40]=C(" Modifier "))],10,Ko),e("button",{onClick:f[14]||(f[14]=h=>i.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):S("",!0)])):S("",!0)])}}}),Yo=ne(Qo,[["__scopeId","data-v-ad9d3ddf"]]),Zo=le({__name:"MerchantProfile",props:{user:Object},setup($){const a=pe(),v=g(null),x=g([]);return be(async()=>{try{const d=await N.get("/commercant/profil");v.value=d.data.commercant,x.value=d.data.produits||[]}catch(d){a.error("Erreur lors du chargement des donn√©es du commer√ßant: "+(d.message||d))}}),(d,i)=>null}}),ea=ne(Zo,[["__scopeId","data-v-ce205108"]]),ta={class:"overflow-y-scroll pb-8 relative bg-gray-100 py-8 sm:px-6"},sa={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},oa={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},aa={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},ra={class:"relative"},la=["src"],na={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},ia={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},ua={class:"space-y-1"},da={key:0,class:"text-sm text-gray-500"},ca={key:0,class:"ml-4 flex items-center gap-2"},pa=["src"],va=["disabled"],ma={class:"flex flex-col sm:flex-row gap-2 items-center"},fa={class:"container mx-auto max-w-4xl"},ga={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},ba={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},xa=le({__name:"Profile",setup($){const a=()=>{const J=window.location.hostname;return J==="localhost"||J==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},v=fe(()=>a()),x=ie(),d=pe(),i=ge();i.checkAuth();const o=g(i.user),l=g(!1),p=g(!1),r=g(null),m=g(null),y=g(!1),P=g(!1),A=g(!1),w=fe(()=>P.value?ea:Yo),n=g(null),u=g(null),_=g(!1);let k=null;const D=()=>{var J;(J=n.value)==null||J.click(),l.value=!1},O=J=>{const H=J.target;if(H.files&&H.files[0]){const Z=H.files[0];if(!Z.type.startsWith("image/")){d.error("Veuillez s√©lectionner une image.");return}if(Z.size>2*1024*1024){d.error("Image trop volumineuse (max 2Mo).");return}m.value=Z,r.value=URL.createObjectURL(Z)}},E=async()=>{try{k=await navigator.mediaDevices.getUserMedia({video:!0}),_.value=!0,l.value=!1,setTimeout(()=>{u.value&&(u.value.srcObject=k)},100)}catch(J){d.error("Impossible d'acc√©der √† la cam√©ra."),console.error(J)}},W=()=>{if(!u.value)return;const J=u.value,H=document.createElement("canvas");H.width=J.videoWidth,H.height=J.videoHeight;const Z=H.getContext("2d");Z&&(Z.drawImage(J,0,0,H.width,H.height),H.toBlob(ve=>{ve&&(m.value=new File([ve],"photo.jpg",{type:"image/jpeg"}),r.value=URL.createObjectURL(m.value),j())},"image/jpeg"))},j=()=>{k&&(k.getTracks().forEach(J=>J.stop()),k=null),_.value=!1},oe=()=>{m.value=null,r.value=null},ce=async()=>{var J,H,Z,ve;if(m.value){p.value=!0;try{const z=new FormData;z.append("photo",m.value);const c=await N.post("/profile/photo",z,{headers:{"Content-Type":"multipart/form-data"}});c.data.photo&&(o.value&&(o.value.photo=c.data.photo,i.user=o.value),d.success("Photo mise √† jour."),oe())}catch(z){((H=(J=z.response)==null?void 0:J.data)==null?void 0:H.message)=="Unauthenticated."&&x.push("login"),d.error(((ve=(Z=z.response)==null?void 0:Z.data)==null?void 0:ve.message)||"Erreur lors de l'envoi.")}finally{p.value=!1}}},Q=async()=>{y.value=!1},L=J=>{d.success(`Vous avez achet√© ${J} jetons !`)};return xe(()=>i.user,J=>{o.value=J||null},{immediate:!0}),be(()=>{}),Ve(()=>{r.value&&URL.revokeObjectURL(r.value),k&&k.getTracks().forEach(J=>J.stop())}),(J,H)=>{var Z,ve,z,c,M,V,f,T,ee,ae,re,te,q,h,se,U,ue,we,Ce,Pe,Te;return t(),s("div",ta,[e("div",sa,[e("div",oa,[e("div",aa,[e("div",ra,[(Z=o.value)!=null&&Z.photo?(t(),s("img",{key:0,src:v.value+((ve=o.value)==null?void 0:ve.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,la)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((V=(M=(c=(z=o.value)==null?void 0:z.niveaux_users)==null?void 0:c.at(-1))==null?void 0:M.parrainage_niveau)==null?void 0:V.couleur)||"#0af"}`})},H[5]||(H[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(f=o.value)!=null&&f.premium?(t(),s("i",na)):S("",!0),e("button",{onClick:H[0]||(H[0]=Se=>l.value=!l.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},H[6]||(H[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),l.value?(t(),s("div",ia,[e("button",{onClick:E,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," Cam√©ra "),e("button",{onClick:D,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):S("",!0)]),e("input",{ref_key:"galleryInput",ref:n,type:"file",accept:"image/*",class:"hidden",onChange:O},null,544),e("div",ua,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:$e({color:`${((re=(ae=(ee=(T=o.value)==null?void 0:T.niveaux_users)==null?void 0:ee.at(-1))==null?void 0:ae.parrainage_niveau)==null?void 0:re.couleur)||"#0af"}`})},[C(b((te=o.value)==null?void 0:te.nom)+" ",1),(q=o.value)!=null&&q.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:$e({background:`${((ue=(U=(se=(h=o.value)==null?void 0:h.niveaux_users)==null?void 0:se.at(-1))==null?void 0:U.parrainage_niveau)==null?void 0:ue.couleur)||"#0af"}`})}," Premium ",4)):S("",!0)],4),(we=o.value)!=null&&we.subscription_ends_at?(t(),s("span",da," Jusqu'au "+b(new Date((Ce=o.value)==null?void 0:Ce.subscription_ends_at).toLocaleDateString()),1)):S("",!0)])]),r.value?(t(),s("div",ca,[e("img",{src:r.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,pa),e("button",{onClick:ce,disabled:p.value,class:G(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":p.value}])},b(p.value?"Upload...":"Confirmer"),11,va),e("button",{onClick:oe,class:"text-red-500 hover:text-red-700"}," Annuler ")])):S("",!0)]),e("div",ma,[(Pe=o.value)!=null&&Pe.commercant?S("",!0):(t(),s("button",{key:0,onClick:H[1]||(H[1]=Se=>F(x).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commer√ßant ")),(Te=o.value)!=null&&Te.premium?S("",!0):(t(),s("button",{key:1,onClick:H[2]||(H[2]=Se=>y.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",fa,[(t(),me(dt(w.value)))]),y.value?(t(),me(Zs,{key:0,"is-open":y.value,onClose:H[3]||(H[3]=Se=>y.value=!1),onUpgraded:Q},null,8,["is-open"])):S("",!0),A.value?(t(),me(xo,{key:1,"is-open":A.value,onClose:H[4]||(H[4]=Se=>A.value=!1),onPurchased:L},null,8,["is-open"])):S("",!0),_.value?(t(),s("div",ga,[e("div",ba,[e("video",{ref_key:"videoRef",ref:u,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:W,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:j,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):S("",!0)])}}}),Zc=ne(xa,[["__scopeId","data-v-d3d7ca02"]]),ha={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},ya={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},_a={class:"space-y-2"},wa=["onClick"],ka={class:"font-poppins"},$a={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Ca={class:"lg:hidden mb-4"},Aa={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Pa=["onClick"],ja={key:0,class:"space-y-6"},Sa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ma={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Va={class:"flex items-center gap-4 mb-4"},Ea=["src"],za={class:"text-[var(--espace-vert)] font-semibold"},Ta={class:"text-sm text-[var(--espace-gris)]"},La={class:"text-sm text-[var(--espace-gris)]"},Ua={class:"text-sm text-[var(--espace-gris)]"},Fa={key:0,class:"space-y-6"},Ia={key:0,class:"space-y-6"},qa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ra={class:"text-base font-medium font-poppins"},Oa={class:"text-sm text-[var(--espace-gris)]"},Na=le({__name:"Parametres",setup($){const a=g(!1),v=ge(),x=ie(),d=pe(),i=v.user,o=g("profile"),l=g({id:(i==null?void 0:i.id)??0,nom:(i==null?void 0:i.nom)??"",email:(i==null?void 0:i.email)??"",telephone:(i==null?void 0:i.telephone)??"",ville:(i==null?void 0:i.ville)??""});v.user={...v.user,...l.value};const p=g({current_password:"",new_password:"",confirm_new_password:""});g({});const r=g(""),m=fe(()=>[...i!=null&&i.commercant?[{to:"/commercant/produits",label:"Espace Commer√ßant",icon:"fa-store-alt",description:"G√©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des r√©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"G√©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"G√©rez vos collaborations sur des produits"}]),y=async()=>{var n,u,_,k;a.value=!0;try{await N.post("/updateProfile",l.value),localStorage.setItem("user",JSON.stringify(v.user)),d.success("Profil mis √† jour avec succ√®s",{timeout:3e3})}catch(D){((u=(n=D.response)==null?void 0:n.data)==null?void 0:u.message)=="Unauthenticated."&&x.push("login"),d.error(((k=(_=D.response)==null?void 0:_.data)==null?void 0:k.message)||"Erreur lors de la mise √† jour du profil")}finally{a.value=!1}},P=async()=>{var n,u,_,k;a.value=!0;try{if(p.value.new_password!==p.value.confirm_new_password){d.error("Les mots de passe ne correspondent pas");return}await N.post("/updatePassword",p.value),d.success("Mot de passe mis √† jour avec succ√®s",{timeout:3e3}),p.value={current_password:"",new_password:"",confirm_new_password:""},r.value=""}catch(D){((u=(n=D.response)==null?void 0:n.data)==null?void 0:u.message)=="Unauthenticated."&&x.push("login"),d.error(((k=(_=D.response)==null?void 0:_.data)==null?void 0:k.message)||"Erreur lors de la mise √† jour du mot de passe")}finally{a.value=!1}},A=()=>{v.logout(),x.push({name:"login"})},w=()=>{const n=p.value.new_password;n.length===0?r.value="":n.length<8||!/[A-Za-z]/.test(n)||!/[0-9]/.test(n)?r.value="weak":/[!@#$%^&*]/.test(n)?r.value="strong":r.value="medium"};return xe(()=>p.value.new_password,w),(n,u)=>{const _=he("RouterLink");return t(),s(B,null,[R(ze,{isLoading:a.value},null,8,["isLoading"]),e("div",ha,[e("aside",ya,[u[7]||(u[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"Param√®tres",-1)),e("nav",_a,[(t(),s(B,null,Y([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],k=>e("button",{key:k.id,onClick:D=>k.id==="logout"?A():o.value=k.id,class:G(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":o.value===k.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":o.value!==k.id}])},[e("i",{class:G(["fas",k.icon])},null,2),e("span",ka,b(k.label),1)],10,wa)),64))])]),e("main",$a,[e("div",Ca,[e("div",Aa,[(t(),s(B,null,Y([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],k=>e("button",{key:k.id,onClick:D=>k.id==="logout"?A():o.value=k.id,class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":o.value===k.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":o.value!==k.id}])},[e("i",{class:G(["fas",k.icon])},null,2),C(" "+b(k.label),1)],10,Pa)),64))])]),R(_e,{name:"slide"},{default:K(()=>{var k,D;return[o.value==="profile"?(t(),s("section",ja,[u[10]||(u[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",Sa,[e("form",{onSubmit:de(y,["prevent"]),class:"space-y-4"},[R(ke,{label:"Nom",icon:"fa-user",modelValue:l.value.nom,"onUpdate:modelValue":u[0]||(u[0]=O=>l.value.nom=O),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),R(ke,{label:"Email",icon:"fa-envelope",modelValue:l.value.email,"onUpdate:modelValue":u[1]||(u[1]=O=>l.value.email=O),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),R(ke,{label:"T√©l√©phone",icon:"fa-phone",modelValue:l.value.telephone,"onUpdate:modelValue":u[2]||(u[2]=O=>l.value.telephone=O),type:"tel",required:"",placeholder:"Votre num√©ro de t√©l√©phone"},null,8,["modelValue"]),R(ke,{label:"Ville",icon:"fa-city",modelValue:l.value.ville,"onUpdate:modelValue":u[3]||(u[3]=O=>l.value.ville=O),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),u[8]||(u[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre √† jour ",-1))],32),e("div",Ma,[u[9]||(u[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"Aper√ßu",-1)),e("div",Va,[e("img",{src:((D=(k=F(i))==null?void 0:k.commercant)==null?void 0:D.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,Ea),e("div",null,[e("p",za,b(l.value.nom||"Nonni"),1),e("p",Ta,b(l.value.email||"Non d√©fini"),1)])]),e("p",La,"T√©l√©phone: "+b(l.value.telephone||"Nonni"),1),e("p",Ua,"Ville: "+b(l.value.ville||"Non d√©fini"),1)])])])):S("",!0)]}),_:1}),R(_e,{name:"slide"},{default:K(()=>[o.value==="security"?(t(),s("section",Fa,[u[12]||(u[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"S√©curit√©",-1)),e("form",{onSubmit:de(P,["prevent"]),class:"space-y-4"},[R(ke,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:p.value.current_password,"onUpdate:modelValue":u[4]||(u[4]=k=>p.value.current_password=k),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),R(ke,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:p.value.new_password,"onUpdate:modelValue":u[5]||(u[5]=k=>p.value.new_password=k),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:w},null,8,["modelValue"]),r.value?(t(),s("div",{key:0,class:G(["text-sm",{"text-red-500":r.value==="weak","text-yellow-500":r.value==="medium","text-green-500":r.value==="strong"}])}," Force du mot de passe : "+b(r.value==="weak"?"Faible":r.value==="medium"?"Moyen":"Fort"),3)):S("",!0),R(ke,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:p.value.confirm_new_password,"onUpdate:modelValue":u[6]||(u[6]=k=>p.value.confirm_new_password=k),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),u[11]||(u[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):S("",!0)]),_:1}),R(_e,{name:"slide"},{default:K(()=>[o.value==="links"?(t(),s("section",Ia,[u[13]||(u[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",qa,[(t(!0),s(B,null,Y(m.value,k=>(t(),me(_,{key:k.to,to:k.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:K(()=>[e("i",{class:G(["fas",k.icon])},null,2),e("div",null,[e("h3",Ra,b(k.label),1),e("p",Oa,b(k.description),1)])]),_:2},1032,["to"]))),128))])])):S("",!0)]),_:1})])])],64)}}}),ep=ne(Na,[["__scopeId","data-v-ce56f428"]]),Da={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},Wa={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},Ha=["src","alt"],Ja={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},Ba={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Ga={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},Ka={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},Xa={class:"text-xs text-[var(--espace-gris)] truncate"},Qa={class:"text-sm font-medium text-[var(--espace-or)]"},Ya={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},Za={class:"flex items-center gap-1"},er={class:"flex items-center gap-1"},tr=["aria-label"],sr=le({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup($,{emit:a}){const v=$,x=a,d=pe(),i=Ee(),o=r=>{if(r==null||isNaN(r)||r===0)return"0";const m=Math.abs(r);return m<1e3?r.toString():m<1e4?(r/1e3).toFixed(1).replace(/\.0$/,"")+"k":m<1e6?Math.floor(r/1e3)+"k":m<1e9?(r/1e6).toFixed(1).replace(/\.0$/,"")+"M":(r/1e9).toFixed(1).replace(/\.0$/,"")+"B"},l=g(0),p=async()=>{var r,m;try{console.log(v.produit.id),await i.toggleFavorite(v.produit.id),x("toggle-favorite",v.produit.id)}catch(y){console.error("Erreur lors de la mise √† jour des favoris :",y),d.error(((m=(r=y.response)==null?void 0:r.data)==null?void 0:m.message)||"Erreur lors de la mise √† jour des favori.")}};return(r,m)=>{var P,A;const y=he("router-link");return t(),s("div",Da,[R(y,{to:`/produits/${r.produit.id}`,class:"block relative"},{default:K(()=>[e("div",Wa,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${l.value*100}%)`})},[(t(!0),s(B,null,Y(r.produit.photos||[r.produit.photo_url||"https://via.placeholder.com/150"],(w,n)=>(t(),s("img",{key:n,src:w,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${r.produit.nom} - ${n+1}`},null,8,Ha))),128))],4),r.produit.photos&&r.produit.photos.length>1?(t(),s("div",Ja,[(t(!0),s(B,null,Y(r.produit.photos,(w,n)=>(t(),s("span",{key:n,class:G(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":n===l.value}])},null,2))),128))])):S("",!0)]),r.produit.collaboratif?(t(),s("span",Ba," Collaboratif ")):S("",!0),r.produit.boosted?(t(),s("span",Ga," Boost√© ")):S("",!0),e("h3",Ka,b(r.produit.nom),1),e("p",Xa,b(r.produit.description||"Aucune description"),1),e("p",Qa,b(r.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",Ya,[e("div",Za,[m[0]||(m[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,b(o((P=r.produit.counts)==null?void 0:P.views_count)),1)]),e("div",er,[e("button",{onClick:p,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":r.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":r.produit.is_favorited_by}])},null,2)],8,tr),e("span",null,b(o((A=r.produit.counts)==null?void 0:A.favorites_count)),1)])])])}}}),qe=ne(sr,[["__scopeId","data-v-f669a30f"]]),or={},ar={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm animate-pulse"};function rr($,a){return t(),s("div",ar,a[0]||(a[0]=[je('<div class="w-full h-32 bg-gray-300 rounded-lg mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-3/4 mb-2" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/2 mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-1/3 mb-2" data-v-4ed20fce></div><div class="flex justify-between mt-2" data-v-4ed20fce><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div></div>',5)]))}const Ke=ne(or,[["render",rr],["__scopeId","data-v-4ed20fce"]]),lr={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},nr={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},ir={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},ur=["onClick","aria-label","aria-current"],dr=["aria-label","aria-expanded"],cr={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},pr={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},vr={class:"flex-1 min-w-[120px]"},mr={class:"flex-1 min-w-[120px]"},fr=["value"],gr={class:"flex-1 min-w-[100px]"},br={class:"flex-1 min-w-[100px]"},xr={class:"flex-1 min-w-[120px]"},hr=["value"],yr={class:"flex-1 min-w-[100px]"},_r=["aria-busy"],wr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},kr=le({__name:"Home",setup($){const a=ie(),v=Ee(),x=ge(),d=g([]),i=pe(),o=g(!1),l=g({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),p=g(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),r=g(null),m=g(null),y=g(!1);let P=0;const A=async()=>{try{const E=await N.get("/categories");d.value=E.data.categories}catch(E){console.error("Erreur lors du chargement des cat√©gories:",E),i.error("Erreur lors du chargement des cat√©gories.")}},w=()=>{if(l.value.prix_min&&l.value.prix_max&&parseFloat(l.value.prix_min)>parseFloat(l.value.prix_max)){i.error("Le prix minimum doit √™tre inf√©rieur au prix maximum.");return}v.fetchProducts(l.value,!0),o.value=!1},n=()=>{l.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},o.value=!1},u=E=>{v.setSort(E)},_=()=>Object.values(l.value).filter(E=>E!=="").length,k=E=>{O(E)},D=E=>{O(E)},O=async E=>{var Q,L,J;const W=(Q=x.user)==null?void 0:Q.id,j=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),oe=new Date().toISOString().split("T")[0],ce=localStorage.getItem("lastResetDate");if((!ce||ce!==oe)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",oe)),!j[E])try{setTimeout(async()=>{const H=await N.post("/record_view",{product_id:E,user_id:W??null})},1e3),j[E]=!0,localStorage.setItem("viewedProducts",JSON.stringify(j))}catch(H){console.error("Erreur lors de l'enregistrement de la vue:",H),i.error(((J=(L=H.response)==null?void 0:L.data)==null?void 0:J.message)||"Erreur lors de l'enregistrement de la vue.")}};return be(async()=>{try{if(console.log("Produits au montage:",v.products),await v.fetchProducts({},!0,!0),console.log("Produits charg√©s:",v.products,"isLoading:",v.isLoading),await A(),!x.user){a.push("/login");return}}catch(E){console.error("Erreur lors du chargement des produits ou cat√©gories:",E),E==="Unauthenticated."&&a.push("login"),i.error("Erreur lors du chargement des produits. Veuillez r√©essayer.")}r.value=new IntersectionObserver(E=>{console.log("Observer d√©clench√©, isLoadingMore:",y.value,"hasMore:",v.hasMore),E[0].isIntersecting&&!y.value&&v.hasMore&&(y.value=!0,ct(()=>{P=window.scrollY}),v.fetchProducts(l.value).finally(()=>{y.value=!1}))},{threshold:.1}),m.value&&r.value.observe(m.value)}),+pt(()=>{window.scrollTo(0,P)}),Ve(()=>{r.value&&m.value&&r.value.unobserve(m.value)}),(E,W)=>(t(),s("div",lr,[e("div",nr,[e("div",ir,[(t(),s(B,null,Y([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-bookmark"}],j=>e("button",{key:j.id,onClick:oe=>u(j.id),class:G(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":F(v).sort===j.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":F(v).sort!==j.id}]),"aria-label":`Trier par ${j.label}`,"aria-current":F(v).sort===j.id?"true":void 0},[e("i",{class:G(["fas",j.icon])},null,2),C(" "+b(j.label),1)],10,ur)),64)),e("button",{onClick:W[0]||(W[0]=j=>o.value=!o.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":o.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":o.value},[W[7]||(W[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),_()>0?(t(),s("span",cr,b(_()),1)):S("",!0)],8,dr)]),R(_e,{name:"slide-up"},{default:K(()=>[o.value?(t(),s("div",pr,[e("form",{onSubmit:de(w,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",vr,[I(e("input",{"onUpdate:modelValue":W[1]||(W[1]=j=>l.value.search=j),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[X,l.value.search]])]),e("div",mr,[I(e("select",{"onUpdate:modelValue":W[2]||(W[2]=j=>l.value.category=j),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[8]||(W[8]=e("option",{value:""},"Toutes les Cat√©gories",-1)),(t(!0),s(B,null,Y(d.value,j=>(t(),s("option",{key:j.id,value:j.id},b(j.nom),9,fr))),128))],512),[[Ae,l.value.category]])]),e("div",gr,[I(e("input",{"onUpdate:modelValue":W[3]||(W[3]=j=>l.value.prix_min=j),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[X,l.value.prix_min]])]),e("div",br,[I(e("input",{"onUpdate:modelValue":W[4]||(W[4]=j=>l.value.prix_max=j),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[X,l.value.prix_max]])]),e("div",xr,[I(e("select",{"onUpdate:modelValue":W[5]||(W[5]=j=>l.value.ville=j),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[9]||(W[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(B,null,Y(p.value,j=>(t(),s("option",{key:j,value:j},b(j),9,hr))),128))],512),[[Ae,l.value.ville]])]),e("div",yr,[I(e("select",{"onUpdate:modelValue":W[6]||(W[6]=j=>l.value.collaboratif=j),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},W[10]||(W[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[Ae,l.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[W[12]||(W[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:n,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"R√©initialiser les filtres"},W[11]||(W[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):S("",!0)]),_:1}),R(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:K(()=>[F(v).isLoading&&F(v).products.length===0?(t(!0),s(B,{key:0},Y(F(v).isLoading?8:0,j=>(t(),me(Ke,{key:"skeleton-init-"+j}))),128)):S("",!0),(t(!0),s(B,null,Y(F(v).products,j=>(t(),me(qe,{key:j.id,produit:j,onMouseover:oe=>k(j.id),onTouchstart:oe=>D(j.id)},null,8,["produit","onMouseover","onTouchstart"]))),128)),y.value?(t(!0),s(B,{key:1},Y(y.value?4:0,j=>(t(),me(Ke,{key:"skeleton-more-"+j}))),128)):S("",!0)]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:m,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":y.value},[F(v).hasMore?S("",!0):(t(),s("p",wr,"Aucun produit suppl√©mentaire"))],8,_r)])]))}}),tp=ne(kr,[["__scopeId","data-v-a0d08221"]]),$r={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},Cr={class:"container mx-auto max-w-5xl"},Ar={key:0,class:"text-center text-[var(--espace-gris)]"},Pr={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},jr={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},Sr={class:"w-full lg:w-1/2 relative"},Mr={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},Vr=["src","alt"],Er={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},zr={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},Tr={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Lr={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Commer√ßant Pro"},Ur={class:"w-full lg:w-1/2"},Fr={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},Ir={class:"text-sm text-[var(--espace-gris)] mb-3"},qr={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},Rr={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},Or={class:"flex items-center gap-3"},Nr={class:"flex items-center gap-1"},Dr={class:"flex items-center gap-1"},Wr=["aria-label"],Hr={class:"border-t pt-3 mt-3"},Jr={class:"text-xs text-[var(--espace-gris)] mb-1"},Br={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"Commer√ßant v√©rifi√©",title:"Commer√ßant v√©rifi√©"},Gr={class:"text-xs text-[var(--espace-gris)] mb-1"},Kr={class:"text-xs text-[var(--espace-gris)] mb-1"},Xr={class:"text-xs text-[var(--espace-gris)] mb-2"},Qr={class:"flex flex-col sm:flex-row gap-3 mt-4"},Yr=["disabled","aria-label"],Zr={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},el={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},tl={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},sl={class:"text-xs text-[var(--espace-gris)] mb-3"},ol=["aria-label"],al={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},rl={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},ll={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},nl={class:"text-sm text-[var(--espace-gris)]"},il={class:"text-[var(--espace-or)]"},ul={class:"flex gap-4"},dl={key:0,class:"mt-6"},cl=["aria-busy"],pl={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},vl=le({__name:"Produit",setup($){const a=Ee(),v=Me(),x=ie(),d=ge(),i=Ue(),o=pe();g([]);const l=g(!1),p=g(null),r=g(null),m=g(null),y=g(!1),P=g(0),A=g(0),w=[0,500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],u=c=>{if(c==null||isNaN(c)||c===0)return"0";const M=Math.abs(c);return M<1e3?c.toString():M<1e4?(c/1e3).toFixed(1).replace(/\.0$/,"")+"k":M<1e6?Math.floor(c/1e3)+"k":M<1e9?(c/1e6).toFixed(1).replace(/\.0$/,"")+"M":(c/1e9).toFixed(1).replace(/\.0$/,"")+"B"},_=async()=>{try{a.isLoading=!0,await a.viewProduct(v.params.id),a.isLoading=!1,a.product.photos&&!a.product.photo_url&&(a.product.photo_url=a.product.photos[0]),await a.fetchProducts({category:a.product.category_id,per_page:8},!0)}catch(c){o.error(c||"Erreur lors du chargement du produit"),x.push({name:"home"})}finally{a.isLoading=!1}},k=()=>{var c;if(!d.user){o.error("Veuillez vous connecter pour collaborer"),x.push({name:"login"});return}if(((c=d.user.commercant)==null?void 0:c.id)===a.product.commercant_id){o.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!a.product.collaboratif){o.error("Ce produit n‚Äôest pas ouvert √† la collaboration");return}p.value=a.product.prix+(a.product.marge_min||500),l.value=!0},D=async()=>{if(!p.value||p.value<a.product.prix+(a.product.marge_min||0)){o.error(`Le prix de revente doit √™tre sup√©rieur ou √©gal √† ${a.product.prix+(a.product.marge_min||0)} XAF`);return}await i.addCollaboration({produit_id:a.product.id,prix_revente:p.value})&&(o.success("Demande de collaboration envoy√©e",{timeout:3e3}),l.value=!1,p.value=null)},O=()=>{l.value=!1,p.value=null},E=()=>{x.push({path:`/commercant/produits/${a.product.id}/edit`})},W=async()=>{var c,M,V;if(!d.user||((c=d.user.commercant)==null?void 0:c.id)!==a.product.commercant_id){o.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}if(d.user.jetons<A.value){o.error(`Pas assez de Jetons. Il vous faut ${A.value} Jetons pour ce boost.`);return}try{const f=await N.post(`/produits/${a.product.id}/boost`,{target_views:P.value});d.user.jetons-=A.value,a.product.boosted=!0,o.success(f.data.message||"Produit boost√© avec succ√®s !"),y.value=!1}catch(f){o.error(((V=(M=f.response)==null?void 0:M.data)==null?void 0:V.message)||"Erreur lors du boostage du produit")}},j=()=>{var c;if(!d.user||((c=d.user.commercant)==null?void 0:c.id)!==a.product.commercant_id){o.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}y.value=!0,oe()},oe=()=>{const c=w.indexOf(P.value);A.value=c!==-1?Math.max(5,n[c]):5};xe(P,()=>{oe()});const ce=c=>{L(c)},Q=c=>{L(c)},L=async c=>{var ee,ae,re;const M=(ee=d.user)==null?void 0:ee.id;if(!M){o.error("Connexion requise pour enregistrer la vue.");return}const V=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),f=new Date().toISOString().split("T")[0],T=localStorage.getItem("lastResetDate");if((!T||T!==f)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",f)),!V[c])try{setTimeout(async()=>{const te=await N.post("/record_view",{product_id:c,user_id:M})},1e3),V[c]=!0,localStorage.setItem("viewedProducts",JSON.stringify(V))}catch(te){console.error("Erreur lors de l'enregistrement de la vue:",te),o.error(((re=(ae=te.response)==null?void 0:ae.data)==null?void 0:re.message)||"Erreur lors de l'enregistrement de la vue.")}},J=async()=>{var c,M;try{await a.toggleFavorite(a.product.id)}catch(V){o.error(((M=(c=V.response)==null?void 0:c.data)==null?void 0:M.message)||"Erreur lors de la mise √† jour des favoris.")}},H=(c,M,V)=>{var T;if(!d.user){o.error("Veuillez vous connecter pour d√©marrer une conversation"),x.push({name:"login"});return}const f={id:c,name:M,commercant_id:a.product.commercant_id,name_user:((T=d.user)==null?void 0:T.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(f)),x.push(`/messages/${V}`)},Z=g(0),ve=()=>{var M;const c=(((M=a.product.photos)==null?void 0:M.length)||1)-1;Z.value=Math.min(Z.value+1,c)},z=()=>{Z.value=Math.max(Z.value-1,0)};return be(()=>{_(),i.initializeState(),r.value=new IntersectionObserver(c=>{c[0].isIntersecting&&!a.isLoading&&a.hasMore&&a.fetchProducts({category:a.product.category_id,per_page:8},!1)},{threshold:.1}),m.value&&r.value.observe(m.value)}),Ve(()=>{r.value&&m.value&&r.value.unobserve(m.value)}),xe(()=>v.params.id,c=>{c&&(_(),Z.value=0)}),xe(a.product,c=>{c&&(a.page=1,a.fetchProducts({category:c.category_id,per_page:4},!0),Z.value=0)}),(c,M)=>{const V=he("router-link");return t(),s(B,null,[R(ze,{isLoading:F(a).isLoading},null,8,["isLoading"]),e("div",$r,[e("div",Cr,[F(a).isLoading?(t(),s("div",Ar)):F(a).product?(t(),s("div",Pr,[R(_e,{name:"slide-up"},{default:K(()=>{var f,T,ee,ae,re,te,q,h,se,U,ue,we,Ce,Pe,Te,Se,Je;return[e("div",jr,[e("div",Sr,[e("div",Mr,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${Z.value*100}%)`})},[(t(!0),s(B,null,Y(F(a).product.photos||[F(a).product.photo_url||"https://via.placeholder.com/300"],(Re,Le)=>(t(),s("img",{key:Le,src:Re,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${F(a).product.nom} - ${Le+1}`},null,8,Vr))),128))],4),F(a).product.photos&&F(a).product.photos.length>1?(t(),s("button",{key:0,onClick:z,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image pr√©c√©dente"},M[5]||(M[5]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):S("",!0),F(a).product.photos&&F(a).product.photos.length>1?(t(),s("button",{key:1,onClick:ve,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},M[6]||(M[6]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):S("",!0),F(a).product.photos&&F(a).product.photos.length>1?(t(),s("div",Er,[(t(!0),s(B,null,Y(F(a).product.photos,(Re,Le)=>(t(),s("span",{key:Le,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Le===Z.value}])},null,2))),128))])):S("",!0)]),F(a).product.boosted?(t(),s("span",zr," Boost√© ")):S("",!0),F(a).product.collaboratif?(t(),s("span",Tr," Collaboratif ")):S("",!0),(f=F(d).user)!=null&&f.premium?(t(),s("span",Lr," Premium ")):S("",!0)]),e("div",Ur,[e("h1",Fr,b(F(a).product.nom),1),e("p",Ir,b(F(a).product.description||"Aucune description disponible"),1),e("p",qr,b(F(a).product.prix)+" XAF ",1),e("div",Rr,[e("p",null,[M[7]||(M[7]=e("strong",null,"Cat√©gorie :",-1)),C(" "+b(((T=F(a).product.category)==null?void 0:T.nom)||"Non sp√©cifi√©e"),1)]),e("p",null,[M[8]||(M[8]=e("strong",null,"Quantit√© :",-1)),C(" "+b(F(a).product.quantite),1)]),e("p",null,[M[9]||(M[9]=e("strong",null,"Ville :",-1)),C(" "+b(F(a).product.ville||"Non sp√©cifi√©e"),1)]),e("p",null,[M[10]||(M[10]=e("strong",null,"Ajout√© le :",-1)),C(" "+b(new Date(F(a).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",Or,[e("div",Nr,[M[11]||(M[11]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,b(u((ee=F(a).product.counts)==null?void 0:ee.views_count))+" vues",1)]),e("div",Dr,[e("i",{class:G(["fas fa-bookmark text-[10px]",{"text-[var(--espace-or)]":F(a).product.is_favorited_by}])},null,2),e("span",null,b(u((ae=F(a).product.counts)==null?void 0:ae.favorites_count))+" favoris",1)])])]),e("button",{onClick:J,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":F(a).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark mr-2 text-sm",{"text-[var(--espace-or)]":F(a).product.is_favorited_by}])},null,2),C(" "+b(F(a).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,Wr),e("div",Hr,[M[16]||(M[16]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," √Ä propos du commer√ßant ",-1)),e("p",Jr,[e("strong",null,b((re=F(a).product.commercant)==null?void 0:re.nom),1),(te=F(a).product.commercant)!=null&&te.verified?(t(),s("span",Br,M[12]||(M[12]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):S("",!0)]),e("p",Gr,b(((q=F(a).product.commercant)==null?void 0:q.description)||"Aucune description disponible"),1),e("p",Kr,[M[13]||(M[13]=e("strong",null,"Ville :",-1)),C(" "+b(((h=F(a).product.commercant)==null?void 0:h.ville)||"Nonsp√©cifi√©e"),1)]),e("p",Xr,[M[14]||(M[14]=e("strong",null,"Note :",-1)),C(" "+b(Number((se=F(a).product.commercant)==null?void 0:se.rating).toFixed(1)||"Non √©valu√©")+" / 5 ",1)]),R(V,{to:`/commercants/${F(a).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commer√ßant"},{default:K(()=>M[15]||(M[15]=[C(" Voir le profil du commer√ßant ")])),_:1,__:[15]},8,["to"])]),e("div",Qr,[F(a).product.collaboratif&&((ue=(U=F(d).user)==null?void 0:U.commercant)==null?void 0:ue.id)!==F(a).product.commercant_id?(t(),s("button",{key:0,onClick:k,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},M[17]||(M[17]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),C(" Collaborer ")]))):S("",!0),((Ce=(we=F(d).user)==null?void 0:we.commercant)==null?void 0:Ce.id)===F(a).product.commercant_id?(t(),s("button",{key:1,onClick:E,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},M[18]||(M[18]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),C(" Modifier le produit ")]))):S("",!0),((Te=(Pe=F(d).user)==null?void 0:Pe.commercant)==null?void 0:Te.id)===F(a).product.commercant_id?(t(),s("button",{key:2,onClick:j,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!F(a).product.boosted,"aria-label":F(a).product.boosted?"Boost d√©j√† actif":"Personnaliser le boost"},M[19]||(M[19]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,Yr)):S("",!0),((Je=(Se=F(d).user)==null?void 0:Se.commercant)==null?void 0:Je.id)!==F(a).product.commercant_id?(t(),s("button",{key:3,onClick:M[0]||(M[0]=Re=>H(F(a).product.id,F(a).product.nom,F(a).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},M[20]||(M[20]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),C(" Envoyer un message ")]))):S("",!0)])])])]}),_:1})])):(t(),s("div",Zr," Produit non trouv√©. ")),R(_e,{name:"fade"},{default:K(()=>[l.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(O,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",el,[e("h2",tl," Collaborer sur "+b(F(a).product.nom),1),e("p",sl," Proposez un prix de revente (minimum : "+b(F(a).product.prix+(F(a).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:de(D,["prevent"]),class:"space-y-3"},[e("div",null,[M[21]||(M[21]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),I(e("input",{id:"prix_revente","onUpdate:modelValue":M[1]||(M[1]=f=>p.value=f),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${F(a).product.nom}`,required:""},null,8,ol),[[X,p.value,void 0,{number:!0}]]),p.value?(t(),s("p",al," Marge potentielle : "+b(p.value-F(a).product.prix)+" XAF ",1)):S("",!0)]),e("div",{class:"flex gap-3"},[M[22]||(M[22]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:O,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):S("",!0)]),_:1}),R(_e,{name:"fade"},{default:K(()=>[y.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:M[4]||(M[4]=de(f=>y.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",rl,[M[27]||(M[27]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:de(W,["prevent"]),class:"space-y-6"},[e("div",null,[M[23]||(M[23]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),I(e("input",{type:"range","onUpdate:modelValue":M[2]||(M[2]=f=>P.value=f),min:"0",max:"10000",step:"500",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:oe},null,544),[[X,P.value,void 0,{number:!0}]]),e("p",ll,b(P.value)+" vues ",1)]),e("p",nl,[M[24]||(M[24]=C("Co√ªt estim√© : ")),e("strong",il,b(A.value),1),M[25]||(M[25]=C(" Jetons"))]),e("div",ul,[M[26]||(M[26]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:M[3]||(M[3]=f=>y.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):S("",!0)]),_:1})]),F(a).products?(t(),s("div",dl,[M[28]||(M[28]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),R(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:K(()=>[(t(!0),s(B,null,Y(F(a).products,f=>(t(),me(qe,{key:f.id,produit:f,onMouseover:T=>ce(f.id),onTouchstart:T=>Q(f.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:m,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":F(a).isLoading},[F(a).hasMore?S("",!0):(t(),s("p",pl," Aucun produit suppl√©mentaire "))],8,cl)])):S("",!0)])],64)}}}),sp=ne(vl,[["__scopeId","data-v-e258f430"]]),ml={class:"relative bg-green-500"},fl={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},gl={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},bl={class:"flex items-center gap-1 sm:gap-3"},xl={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},hl=["aria-label"],yl={class:"flex items-center gap-2"},_l=["src"],wl={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},kl={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},$l={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Cl={class:"flex justify-around items-center py-2"},Al=["aria-label"],Pl=le({__name:"AppHeader",setup($){var D;const a=ge(),v=Ue(),x=ie(),d=a.user;Me();const i=g(!1),o=g(!1),l=g(!1),p=g(""),r=Ee(),m=g(!1),y=g(null),P=g(!1),A=fe(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...a.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...a.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:v.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),w=async()=>{var O,E;if(a.user)try{const W=await N.get("/user/badges");v.saveCollaborationsToLocalStorage(W.data.collaborations_pending.map(j=>({produit_id:j.produit_id,prix_revente:j.prix_revente,status:j.status,created_at:j.created_at})))}catch(W){((E=(O=W.response)==null?void 0:O.data)==null?void 0:E.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des badges:",W)}};xe(()=>a.user,O=>{O&&(w(),v.initializeState())},{immediate:!0}),xe(()=>v.collaborationsPending,()=>{v.collaborationsPending>0&&(o.value=!0,setTimeout(()=>o.value=!1,300))});const n=async()=>{if(p.value.trim())try{await r.fetchProducts({search:p.value.trim()},!0),p.value="",m.value=!1}catch(O){console.error("Erreur lors de la recherche:",O)}},u=O=>{if(P.value){P.value=!1;return}y.value&&!y.value.contains(O.target)&&(m.value=!1)},_=async()=>{m.value=!m.value,m.value&&(P.value=!0,await Oe())},k=()=>{x.push("/messages")};return(D=a.user)!=null&&D.id&&window.Echo.channel(`chat.${a.user.id}`).listen("MessageSent",O=>{var E;((E=a.user)==null?void 0:E.id)===O.receiver_id&&v.saveUnreadMessagesToLocalStorage(O.unread_messages)}),be(()=>{a.user&&(w(),v.initializeState()),document.addEventListener("click",u)}),Ve(()=>{document.removeEventListener("click",u)}),(O,E)=>{const W=he("RouterLink");return t(),s("div",ml,[e("header",fl,[e("div",gl,[e("div",bl,[R(W,{to:"/","aria-label":"Retour √† l'accueil"},{default:K(()=>E[2]||(E[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ze,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),E[3]||(E[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",xl,[(t(!0),s(B,null,Y(A.value,j=>(t(),me(W,{key:j.to,to:j.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas",j.icon])},null,2),C(" "+b(j.label)+" ",1),j.badge>0?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":j.to==="/panier"&&i.value||j.to==="/collaborations"&&o.value||j.to==="/commandes"&&l.value}]),"aria-label":j.to==="/panier"?"Nombre d'articles dans le panier":j.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},b(j.badge),11,hl)):S("",!0)]),_:2},1032,["to"]))),128))]),R(et),e("div",yl,[e("button",{onClick:_,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},E[4]||(E[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:k,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},E[5]||(E[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(B,null,Y(A.value.filter(j=>F(a).user?j.to==="/profil":["/login","/register"].includes(j.to)),j=>(t(),me(W,{key:j.to,to:j.to,class:"relative flex items-center justify-center","aria-label":j.label},{default:K(()=>{var oe;return[(oe=F(d))!=null&&oe.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${F(d).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,_l)):(t(),s("div",wl,[e("i",{class:G([`fas ${j.icon}`,"text-2xl text-gray-100"])},null,2)])),j.badge>0&&j.to==="/collaborations"?(t(),s("span",{key:2,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":j.to==="/collaborations"&&o.value}]),"aria-label":"Collaborations en attente"},b(j.badge),3)):S("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),m.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:y,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",kl,[I(e("input",{"onUpdate:modelValue":E[0]||(E[0]=j=>p.value=j),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ye(n,["enter"])},null,544),[[X,p.value]]),e("button",{onClick:n,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},E[6]||(E[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:E[1]||(E[1]=j=>m.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},E[7]||(E[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):S("",!0)]),R(_e,{name:"slide-up"},{default:K(()=>[e("nav",$l,[e("div",Cl,[(t(!0),s(B,null,Y(A.value,j=>(t(),me(W,{key:j.to,to:j.to,"aria-label":j.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas text-lg",j.icon])},null,2),j.badge>0?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":j.to==="/panier"&&i.value||j.to==="/collaborations"&&o.value||j.to==="/commandes"&&l.value}]),"aria-label":j.to==="/panier"?"Nombre d'articles dans le panier":j.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},b(j.badge),11,Al)):S("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),ut=ne(Pl,[["__scopeId","data-v-c232437a"]]),jl={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},Sl={class:"container mx-auto px-4 sm:px-6 py-6"},Ml={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Vl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},El={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},zl={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Tl={key:2,class:"text-sm text-[var(--espace-gris)] italic"},Ll={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Ul=["value"],Fl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Il=["value"],ql={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},Rl=["value"],Ol={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},Nl={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},Dl={key:1,class:"text-base text-[var(--espace-gris)] italic"},Wl={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Hl=["onClick"],Jl=le({__name:"CommercantDashboard",setup($){const a=ie(),v=pe(),x=g([]),d=g([]),i=g(null),o=g(!1),l=g({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),p=g({nom:"",description:"",ville:""}),r=g(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),m=async()=>{o.value=!0;try{const[w,n,u]=await Promise.all([N.get("/commercant/produits"),N.get("/categories"),N.get("/commercant/profil")]);o.value=!1,x.value=w.data.produits.map(_=>{var k;return{..._,commercant_id:((k=i.value)==null?void 0:k.id)||""}}),d.value=n.data.categories,i.value=u.data.commercant,p.value={nom:i.value.nom,description:i.value.description||"",ville:i.value.ville||""}}catch{v.error("Erreur lors du chargement des donn√©es."),o.value=!1}},y=async()=>{try{const w=await N.post("/commercant/produits",l.value);v.success("Produit ajout√© avec succ√®s."),m(),l.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{v.error("Erreur lors de l‚Äôajout du produit.")}},P=async w=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await N.delete(`/commercant/produits/${w}`),v.success("Produit supprim√© avec succ√®s."),m()}catch{v.error("Erreur lors de la suppression du produit.")}},A=async()=>{var w,n;try{await N.put("/commercant/profil",p.value),v.success("Profil mis √† jour avec succ√®s."),m()}catch(u){((n=(w=u.response)==null?void 0:w.data)==null?void 0:n.message)=="Unauthenticated."&&a.push("login"),v.error("Erreur lors de la mise √† jour du profil.")}};return be(()=>{m()}),(w,n)=>(t(),s("div",jl,[R(ut),e("div",Sl,[n[26]||(n[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),C(" Espace Commer√ßant ")],-1)),e("div",Ml,[n[14]||(n[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",Vl,[i.value?(t(),s("p",El,[n[12]||(n[12]=e("span",{class:"font-medium"},"Revenus :",-1)),C(" "+b(i.value.revenus)+" FCFA ",1)])):S("",!0),i.value?(t(),s("p",zl,[n[13]||(n[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),C(" "+b(i.value.produits_vendus),1)])):(t(),s("p",Tl,"Chargement..."))])]),e("div",Ll,[n[17]||(n[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil Commer√ßant",-1)),e("form",{onSubmit:de(A,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>p.value.nom=u),type:"text",placeholder:"Nom du commer√ßant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,p.value.nom]]),I(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=u=>p.value.description=u),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[X,p.value.description]]),I(e("select",{"onUpdate:modelValue":n[2]||(n[2]=u=>p.value.ville=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[n[15]||(n[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,Y(r.value,u=>(t(),s("option",{key:u,value:u},b(u),9,Ul))),128))],512),[[Ae,p.value.ville]]),n[16]||(n[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",Fl,[n[22]||(n[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:de(y,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=u=>l.value.nom=u),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,l.value.nom]]),I(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=u=>l.value.description=u),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[X,l.value.description]]),I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=u=>l.value.prix=u),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,l.value.prix]]),I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=u=>l.value.photo_url=u),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[X,l.value.photo_url]]),I(e("select",{"onUpdate:modelValue":n[7]||(n[7]=u=>l.value.category_id=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[n[18]||(n[18]=e("option",{value:""},"Cat√©gorie",-1)),(t(!0),s(B,null,Y(d.value,u=>(t(),s("option",{key:u.id,value:u.id},b(u.nom),9,Il))),128))],512),[[Ae,l.value.category_id]]),e("label",ql,[I(e("input",{"onUpdate:modelValue":n[8]||(n[8]=u=>l.value.collaboratif=u),type:"checkbox"},null,512),[[Xe,l.value.collaboratif]]),n[19]||(n[19]=C(" Collaboratif "))]),I(e("input",{"onUpdate:modelValue":n[9]||(n[9]=u=>l.value.marge_min=u),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[X,l.value.marge_min]]),I(e("input",{"onUpdate:modelValue":n[10]||(n[10]=u=>l.value.stock=u),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,l.value.stock]]),I(e("select",{"onUpdate:modelValue":n[11]||(n[11]=u=>l.value.ville=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[n[20]||(n[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,Y(r.value,u=>(t(),s("option",{key:u,value:u},b(u),9,Rl))),128))],512),[[Ae,l.value.ville]]),n[21]||(n[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",Ol,[n[25]||(n[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),o.value?(t(),s("div",Nl,n[23]||(n[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):x.value.length===0?(t(),s("div",Dl," Aucun produit disponible. ")):(t(),s("div",Wl,[(t(!0),s(B,null,Y(x.value,u=>(t(),s("div",{key:u.id,class:"relative"},[R(qe,{produit:u},null,8,["produit"]),e("button",{onClick:_=>P(u.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},n[24]||(n[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,Hl)]))),128))]))])])]))}}),op=ne(Jl,[["__scopeId","data-v-62cb30a8"]]),Bl={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},Gl={class:"container mx-auto max-w-4xl"},Kl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Xl={key:0,class:"ml-2"},Ql={class:"w-full bg-gray-200 rounded-full h-4"},Yl={class:"text-[var(--espace-gris)] text-xs mt-2"},Zl={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},en={class:"bg-white rounded-lg shadow-md p-6 mb-6"},tn={key:0,class:"mb-4"},sn={class:"text-sm text-[var(--espace-gris)]"},on={class:"font-bold text-[var(--espace-or)]"},an={class:"text-sm text-[var(--espace-gris)] truncate"},rn=["href"],ln={key:1,class:"mb-4"},nn=["placeholder"],un={class:"flex flex-col sm:flex-row gap-2"},dn=["disabled"],cn={key:0},pn={key:1},vn=["disabled"],mn={key:0},fn={key:1},gn={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},bn={class:"bg-white rounded-lg shadow-md p-6 mb-6"},xn={class:"mb-4"},hn={key:0,class:"overflow-x-auto"},yn={class:"w-full text-sm text-left text-[var(--espace-gris)]"},_n=["onClick"],wn={class:"px-4 py-2"},kn={class:"px-4 py-2"},$n={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Cn={class:"bg-white rounded-lg shadow-md p-6 text-center"},An={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},Pn={class:"text-[var(--espace-gris)] mt-2"},jn=le({__name:"Parrainage",setup($){const a=ge(),v=ie(),x=pe(),d=()=>{const Q=window.location.hostname;return Q==="localhost"||Q==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.com/register"},i=g(""),o=g(""),l=g([]),p=g(0),r=g(""),m=g(""),y=g(!1),P=g(!1),A=g({}),w=g(null),n=g(0),u=g(0),_=g(0),k=g("all"),D=fe(()=>{var Q;return((Q=A.value)==null?void 0:Q.couleur)||"#6b7280"}),O=fe(()=>k.value==="commercants"?l.value.filter(Q=>Q.est_commercant):k.value==="nonCommercants"?l.value.filter(Q=>!Q.est_commercant):l.value),E=async()=>{var Q,L;if(!a.user){x.error("Veuillez vous connecter pour acc√©der √† cette page"),v.push("/login");return}try{const H=(await N.get("/parrainages/dashboard")).data;i.value=H.code||"",o.value=i.value?`${d()}/${i.value}`:"",l.value=H.parrainages||[],p.value=H.total_gains||0,A.value=H.niveau_actuel,w.value=H.niveau_suivant,n.value=H.progression,u.value=H.total_parrainages||0,_.value=H.total_parrainages_commercants||0}catch(J){((L=(Q=J.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&v.push("login"),x.error("Erreur lors de la r√©cup√©ration des donn√©es de parrainage"),console.error(J)}},W=async()=>{var Q,L;if(!a.user){x.error("Veuillez vous connecter");return}y.value=!0;try{const J=await N.post("/parrainages/generateCode");r.value=J.data.suggested_code,m.value=r.value,x.success("Nouveau code sugg√©r√© avec succ√®s !"),i.value&&(o.value=`${d()}/${i.value}`)}catch(J){((L=(Q=J.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&v.push("login"),x.error("Erreur lors de la g√©n√©ration du code"),console.error(J)}finally{y.value=!1}},j=async()=>{var Q,L,J,H;if(!a.user){x.error("Veuillez vous connecter");return}if(!m.value.trim()){x.error("Veuillez entrer un code valide");return}P.value=!0;try{const Z=await N.post("/parrainages/createCode",{code:m.value.trim()});i.value=Z.data.code,o.value=Z.data.link||`${d()}/${Z.data.code}`,x.success(Z.data.message||"Code cr√©√© avec succ√®s !"),await E()}catch(Z){((L=(Q=Z.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&v.push("login"),x.error(((H=(J=Z.response)==null?void 0:J.data)==null?void 0:H.message)||"Erreur lors de la cr√©ation du code"),console.error(Z)}finally{P.value=!1}},oe=Q=>{if(!o.value){x.error("Aucun lien disponible pour le partage");return}let L="";const J=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${o.value}`);switch(Q){case"whatsapp":L=`https://api.whatsapp.com/send?text=${J}`;break;case"facebook":L=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o.value)}`;break;default:x.error("Plateforme non prise en charge");return}window.open(L,"_blank")},ce=Q=>{Q.est_commercant?v.push(`/commercants/${Q.id}`):v.push({name:"public-profile",params:{id:Q.id}})};return be(()=>{E()}),(Q,L)=>{var J,H,Z,ve,z;return t(),s("div",Bl,[e("div",Gl,[e("div",Kl,[e("h2",{class:"text-lg font-semibold mb-4",style:$e({color:D.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:$e({color:D.value})},[e("div",null,[L[5]||(L[5]=C(" niveau : ")),e("strong",null,[C(b(A.value?A.value.nom:"Pas de niveau")+" "+b((J=A.value)==null?void 0:J.emoji)+" ",1),e("div",null," ("+b(_.value)+"/"+b(w.value?w.value.filleuls_requis:(H=A.value)==null?void 0:H.filleuls_requis)+" commer√ßants) ",1)])]),((Z=w.value)==null?void 0:Z.jetons_bonus)>0?(t(),s("span",Xl,"+"+b((ve=w.value)==null?void 0:ve.jetons_bonus)+" jetons ",1)):S("",!0)],4),e("div",Ql,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:$e({width:`${n.value}%`,background:`${D.value}`})},null,4)]),e("p",Yl," Prochain niveau : "+b(w.value?w.value.nom:"L√©gende üèÜ")+" √† "+b(w.value?w.value.filleuls_requis:"1000+")+" commer√ßants ",1),(z=A.value.avantages)!=null&&z.length?(t(),s("p",Zl," Avantages : "+b(A.value.avantages.join(", ")),1)):S("",!0),e("button",{onClick:L[0]||(L[0]=c=>F(v).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},L[6]||(L[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),C(" En savoir plus ")]))]),L[24]||(L[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des r√©compenses ! Atteignez des niveaux sup√©rieurs pour d√©bloquer des jetons et des avantages. ")],-1)),e("div",en,[L[15]||(L[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),i.value?(t(),s("div",tn,[e("p",sn,[L[7]||(L[7]=C(" Code : ")),e("span",on,b(i.value),1)]),e("p",an,[L[8]||(L[8]=C(" Lien : ")),e("a",{href:o.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},b(o.value),9,rn)])])):(t(),s("div",ln,[I(e("input",{"onUpdate:modelValue":L[1]||(L[1]=c=>m.value=c),type:"text",placeholder:r.value||"Entrez ou g√©n√©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,nn),[[X,m.value]]),e("div",un,[e("button",{onClick:W,disabled:y.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[y.value?(t(),s("span",cn,L[9]||(L[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),C(" G√©n√©ration... ")]))):(t(),s("span",pn,L[10]||(L[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),C(" G√©n√©rer un code ")])))],8,dn),e("button",{onClick:j,disabled:P.value||!m.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[P.value?(t(),s("span",mn,L[11]||(L[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),C(" Cr√©ation... ")]))):(t(),s("span",fn,L[12]||(L[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),C(" Cr√©er le code ")])))],8,vn)])])),i.value?(t(),s("div",gn,[e("button",{onClick:L[2]||(L[2]=c=>oe("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},L[13]||(L[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),C(" Partager sur WhatsApp ")])),e("button",{onClick:L[3]||(L[3]=c=>oe("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},L[14]||(L[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),C(" Partager sur Facebook ")]))])):S("",!0)]),e("div",bn,[L[18]||(L[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs Parrain√©s",-1)),e("div",xn,[I(e("select",{"onUpdate:modelValue":L[4]||(L[4]=c=>k.value=c),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},L[16]||(L[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"Commer√ßants",-1),e("option",{value:"nonCommercants"},"Non Commer√ßants",-1)]),512),[[Ae,k.value]])]),O.value.length?(t(),s("div",hn,[e("table",yn,[L[17]||(L[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commer√ßant")])],-1)),e("tbody",null,[(t(!0),s(B,null,Y(O.value,c=>(t(),s("tr",{key:c.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:M=>ce(c)},b(c.filleul_nom||"Anonyme"),9,_n),e("td",wn,b(new Date(c.date_inscription).toLocaleDateString("fr-FR")),1),e("td",kn,b(c.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",$n," Aucun utilisateur parrain√© correspondant au filtre. Commencez √† inviter d√®s maintenant ! "))]),e("div",Cn,[L[22]||(L[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",An,b(p.value)+" jetons ",1),e("p",Pn,[L[19]||(L[19]=C(" üéâ Vous avez invit√© ")),e("strong",null,b(u.value),1),L[20]||(L[20]=C(" utilisateurs, dont ")),e("strong",null,b(_.value),1),L[21]||(L[21]=C(" sont commer√ßants ! "))]),L[23]||(L[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," D√©bloquez plus de jetons et d'avantages en atteignant les niveaux sup√©rieurs. ",-1))])])])}}}),ap=ne(jn,[["__scopeId","data-v-39c3888d"]]),Sn={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Mn={class:"container mx-auto max-w-4xl"},Vn={class:"flex border-b border-gray-300 mb-6"},En={key:0},zn={key:0,class:"grid grid-cols-1 gap-4"},Tn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Ln=["onClick"],Un={class:"text-sm text-[var(--espace-gris)]"},Fn={class:"text-sm text-[var(--espace-gris)]"},In=["onClick"],qn={class:"flex flex gap-2"},Rn=["onClick"],On=["onClick"],Nn=["onClick"],Dn={key:1,class:"text-center text-[var(--espace-gris)]"},Wn={key:1},Hn={key:0,class:"grid grid-cols-1 gap-4"},Jn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Bn=["onClick"],Gn={class:"text-sm text-[var(--espace-gris)]"},Kn={class:"text-sm text-[var(--espace-gris)]"},Xn=["onClick"],Qn=["onClick"],Yn={key:1,class:"text-center text-[var(--espace-gris)]"},Zn=le({__name:"Collaborations",setup($){const a=y=>{localStorage.setItem("pending_collaborations",JSON.stringify(y))},v=pe(),x=ie(),d=g({sent_collaborations:[],received_collaborations:[]}),i=g(!0),o=g("received"),l=async()=>{var y,P,A,w;try{const n=await N.get("/collaborations");d.value=n.data;const u=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(u.length>0){const _=new Set(d.value.sent_collaborations.map(D=>D.produit_id)),k=u.filter(D=>!_.has(D.produit_id));k.length!==u.length&&a(k)}}catch(n){console.log((P=(y=n.response)==null?void 0:y.data)==null?void 0:P.message),v.error("Erreur lors du chargement des collaborations"),((w=(A=n.response)==null?void 0:A.data)==null?void 0:w.message)=="Unauthenticated."&&x.push("login")}finally{i.value=!1}},p=y=>{x.push({path:`/produits/${y}`})},r=y=>{var A,w,n;const P=((A=y.commercant)==null?void 0:A.id)||((n=(w=y.produit)==null?void 0:w.commercant)==null?void 0:n.id);P?x.push({path:`/commercants/${P}`}):v.error("Profil du commer√ßant non disponible")},m=async(y,P)=>{var A;try{const w=await N.post(`/collaborations/${y}`,{statut:P});v.success(w.data.message),await l()}catch(w){v.error(`Erreur lors de la mise √† jour de la collaboration${(A=w.response)==null?void 0:A.data.message}`)}};return be(()=>{i.value=!0,l()}),(y,P)=>{var A,w,n,u;return t(),s(B,null,[R(ze,{isLoading:i.value},null,8,["isLoading"]),e("div",Sn,[e("div",Mn,[P[4]||(P[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),C(" Mes Collaborations ")],-1)),e("div",Vn,[e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="received","text-[var(--espace-gris)]":o.value!=="received"}]),onClick:P[0]||(P[0]=_=>o.value="received")}," Collaborations re√ßues ",2),e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="sent","text-[var(--espace-gris)]":o.value!=="sent"}]),onClick:P[1]||(P[1]=_=>o.value="sent")}," Collaborations envoy√©es ",2)]),o.value==="received"?(t(),s("div",En,[(w=(A=d.value)==null?void 0:A.received_collaborations)!=null&&w.length?(t(),s("div",zn,[(t(!0),s(B,null,Y(d.value.received_collaborations,_=>(t(),s("div",{key:_.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Tn,[e("div",null,[e("h2",{onClick:k=>p(_.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},b(_.produit.nom),9,Ln),e("p",Un," Prix de revente propos√© : "+b(_.prix_revente)+" FCFA ",1),e("p",Fn,[P[2]||(P[2]=C(" Statut : ")),e("span",{class:G({"text-green-600":_.statut==="valider","text-yellow-600":_.statut==="en_attente","text-red-600":_.statut==="refuser"})},b(_.statut==="en_attente"?"En attente":_.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:k=>r(_),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,In)]),e("div",qn,[_.statut==="en_attente"?(t(),s("button",{key:0,onClick:k=>m(_.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,Rn)):S("",!0),_.statut==="en_attente"?(t(),s("button",{key:1,onClick:k=>m(_.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,On)):S("",!0),e("button",{onClick:k=>p(_.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Nn)])])]))),128))])):(t(),s("p",Dn," Aucune collaboration re√ßue pour le moment. "))])):S("",!0),o.value==="sent"?(t(),s("div",Wn,[(u=(n=d.value)==null?void 0:n.sent_collaborations)!=null&&u.length?(t(),s("div",Hn,[(t(!0),s(B,null,Y(d.value.sent_collaborations,_=>(t(),s("div",{key:_.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Jn,[e("div",null,[e("h2",{onClick:k=>p(_.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},b(_.produit.nom),9,Bn),e("p",Gn," Prix de revente propos√© : "+b(_.prix_revente)+" FCFA ",1),e("p",Kn,[P[3]||(P[3]=C(" Statut : ")),e("span",{class:G({"text-green-600":_.statut==="valider","text-yellow-600":_.statut==="en_attente","text-red-600":_.statut==="refuser"})},b(_.statut==="en_attente"?"En attente":_.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:k=>r(_),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,Xn)]),e("button",{onClick:k=>p(_.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Qn)])]))),128))])):(t(),s("p",Yn," Aucune collaboration envoy√©e pour le moment. "))])):S("",!0)])])],64)}}}),rp=ne(Zn,[["__scopeId","data-v-cac76a42"]]),ei={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},ti={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},si={key:0,class:"mb-8"},oi={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},ai=["disabled"],ri={key:0,class:"fas fa-spinner fa-spin mr-2"},li={key:1,class:"space-y-4 mb-6"},ni={class:"flex items-center gap-3"},ii={class:"text-[var(--espace-vert)] font-medium"},ui={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},di={class:"flex items-center gap-2"},ci=["onClick"],pi=["onClick"],vi={key:2,class:"text-center text-gray-500"},mi=le({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup($,{emit:a}){const v=ie(),x=a,d=pe(),i=g(!1),o=g(!1),l=g({id:null,phone_number:"",payment_service:""}),p=()=>{o.value=!0,l.value={id:null,phone_number:"",payment_service:""}},r=A=>{o.value=!0,l.value={id:A.id,phone_number:A.phone_number,payment_service:A.payment_service}},m=()=>{o.value=!1,l.value={id:null,phone_number:"",payment_service:""}},y=async()=>{var w,n,u,_;if(!/^6[0-9]{8}$/.test(l.value.phone_number)){d.error("Le num√©ro de t√©l√©phone doit commencer par 6 et contenir 9 chiffres.");return}i.value=!0;try{l.value.id?(await N.put(`/wallets/${l.value.id}`,l.value),d.success("Portefeuille mis √† jour avec succ√®s !")):(await N.post("/wallets",l.value),d.success("Portefeuille cr√©√© avec succ√®s !")),x("refresh-wallets"),m()}catch(k){((n=(w=k.response)==null?void 0:w.data)==null?void 0:n.message)=="Unauthenticated."&&v.push("login"),d.error(((_=(u=k.response)==null?void 0:u.data)==null?void 0:_.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",k)}finally{i.value=!1}},P=async A=>{var w,n,u,_;if(confirm("√ätes-vous s√ªr de vouloir supprimer ce portefeuille ?")){i.value=!0;try{await N.delete(`/wallets/${A}`),d.success("Portefeuille supprim√© avec succ√®s !"),x("refresh-wallets")}catch(k){((n=(w=k.response)==null?void 0:w.data)==null?void 0:n.message)=="Unauthenticated."&&v.push("login"),d.error(((_=(u=k.response)==null?void 0:u.data)==null?void 0:_.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",k)}finally{i.value=!1}}};return(A,w)=>A.show?(t(),s("div",ei,[e("div",ti,[e("button",{onClick:w[0]||(w[0]=n=>A.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),w[9]||(w[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ G√©rer Mes Portefeuilles",-1)),o.value?(t(),s("div",si,[e("form",{onSubmit:de(y,["prevent"]),class:G(["space-y-5",{"bg-green-50 p-4 rounded-lg":!l.value.id,"bg-yellow-50 p-4 rounded-lg":l.value.id}])},[e("h3",oi,b(l.value.id?"Modifier le Portefeuille":"Cr√©er un Nouveau Portefeuille"),1),e("div",null,[w[3]||(w[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),I(e("input",{"onUpdate:modelValue":w[1]||(w[1]=n=>l.value.phone_number=n),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[X,l.value.phone_number]])]),e("div",null,[w[5]||(w[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),I(e("select",{"onUpdate:modelValue":w[2]||(w[2]=n=>l.value.payment_service=n),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},w[4]||(w[4]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,l.value.payment_service]])]),e("button",{type:"submit",disabled:i.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[i.value?(t(),s("i",ri)):S("",!0),C(" "+b(l.value.id?"Mettre √† jour":"Cr√©er"),1)],8,ai),e("button",{onClick:m,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):S("",!0),A.wallets&&A.wallets.length>0?(t(),s("div",li,[(t(!0),s(B,null,Y(A.wallets,n=>(t(),s("div",{key:n.id||n.phone_number,class:G(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":n.payment_service==="ORANGE","bg-purple-50":n.payment_service==="MTN"}])},[e("div",ni,[e("span",ii,b(n.phone_number)+" ("+b(n.payment_service)+") ",1),n.is_active!==!1?(t(),s("span",ui,"Actif")):S("",!0)]),e("div",di,[e("button",{onClick:u=>r(n),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},w[6]||(w[6]=[e("i",{class:"fas fa-edit"},null,-1),C(" Modifier ")]),8,ci),e("button",{onClick:u=>P(n.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},w[7]||(w[7]=[e("i",{class:"fas fa-trash"},null,-1),C(" Supprimer ")]),8,pi)])],2))),128))])):(t(),s("p",vi,"Aucun portefeuille cr√©√©.")),o.value?S("",!0):(t(),s("button",{key:3,onClick:p,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},w[8]||(w[8]=[e("i",{class:"fas fa-plus"},null,-1),C(" Ajouter un portefeuille ")])))])])):S("",!0)}}),fi=ne(mi,[["__scopeId","data-v-04e487e6"]]),gi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},bi={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},xi={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},hi={key:0,class:"space-y-4"},yi={class:"flex flex-col"},_i={class:"text-[var(--espace-vert)] font-medium"},wi={class:"text-xs text-gray-500"},ki={class:"text-gray-700 text-sm sm:text-base"},$i={class:"flex items-center gap-2"},Ci=["onClick"],Ai=["onClick"],Pi={key:1,class:"text-center text-gray-500"},ji={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},Si={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Mi=["value"],Vi=["disabled"],Ei={key:0,class:"fas fa-spinner fa-spin mr-2"},zi={key:1,class:"border-t pt-4 mt-2"},Ti=le({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup($,{emit:a}){const v=$,x=a,d=pe(),i=g(!1),o=g([...v.offers]);xe(()=>v.offers,w=>{o.value=[...w]},{deep:!0});const l=g(!1),p=g({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),r=()=>{l.value=!0,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},m=w=>{l.value=!0,p.value={id:w.id,nombre_jetons:w.nombre_jetons,prix_unitaire:w.prix_unitaire,description:w.description||"",wallet_id:w.wallet_id}},y=()=>{l.value=!1,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},P=async()=>{var w,n;i.value=!0;try{if(p.value.id){const u=await N.put(`/jeton_market/updateOffer/${p.value.id}`,p.value);d.success("Offre mise √† jour avec succ√®s !");const _=o.value.findIndex(k=>k.id===p.value.id);_!==-1&&(o.value[_]={...o.value[_],...p.value})}else{const u=await N.post("/jeton_market/offer",p.value);d.success("Offre cr√©√©e avec succ√®s !"),o.value.push(u.data)}x("refresh-offers"),y()}catch(u){d.error(((n=(w=u.response)==null?void 0:w.data)==null?void 0:n.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",u)}finally{i.value=!1}},A=async w=>{var n,u;if(confirm("√ätes-vous s√ªr de vouloir supprimer cette offre ?")){i.value=!0;try{await N.delete(`/jeton_market/deleteOffer/${w}`),d.success("Offre supprim√©e avec succ√®s !"),o.value=o.value.filter(_=>_.id!==w),x("refresh-offers")}catch(_){d.error(((u=(n=_.response)==null?void 0:n.data)==null?void 0:u.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",_)}finally{i.value=!1}}};return(w,n)=>w.show?(t(),s("div",gi,[e("div",bi,[e("button",{onClick:n[0]||(n[0]=u=>w.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),n[12]||(n[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìã Mes Offres",-1)),e("div",xi,[o.value.length>0?(t(),s("div",hi,[(t(!0),s(B,null,Y(o.value,u=>{var _,k;return t(),s("div",{key:u.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",yi,[e("span",_i,b(u.nombre_jetons)+" jetons ‚Ä¢ "+b(u.total_prix)+" FCFA ",1),e("span",wi,"PU : "+b(u.prix_unitaire)+" FCFA",1),e("p",ki,[n[4]||(n[4]=e("strong",null,"üí≥ ",-1)),C(" "+b((_=u.wallet)==null?void 0:_.phone_number)+" ("+b((k=u.wallet)==null?void 0:k.payment_service)+") ",1)])]),e("div",$i,[e("button",{onClick:D=>m(u),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},n[5]||(n[5]=[e("i",{class:"fas fa-edit"},null,-1),C(" Modifier ")]),8,Ci),e("button",{onClick:D=>A(u.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},n[6]||(n[6]=[e("i",{class:"fas fa-trash"},null,-1),C(" Supprimer ")]),8,Ai)])])}),128))])):(t(),s("p",Pi,"Aucune offre cr√©√©e."))]),l.value?(t(),s("div",ji,[e("form",{onSubmit:de(P,["prevent"]),class:G(["space-y-4",{"bg-green-50 p-4 rounded-lg":!p.value.id,"bg-yellow-50 p-4 rounded-lg":p.value.id}])},[e("h3",Si,b(p.value.id?"Modifier l'offre":"Cr√©er une nouvelle offre"),1),e("div",null,[n[7]||(n[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=u=>p.value.nombre_jetons=u),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,p.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[n[8]||(n[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=u=>p.value.prix_unitaire=u),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,p.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[n[10]||(n[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),I(e("select",{"onUpdate:modelValue":n[3]||(n[3]=u=>p.value.wallet_id=u),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[n[9]||(n[9]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Y(w.wallets,u=>(t(),s("option",{key:u.id,value:u.id},b(u.phone_number)+" ("+b(u.payment_service)+") ",9,Mi))),128))],512),[[Ae,p.value.wallet_id]])]),e("button",{type:"submit",disabled:i.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[i.value?(t(),s("i",Ei)):S("",!0),C(" "+b(p.value.id?"Mettre √† jour":"Cr√©er"),1)],8,Vi),e("button",{onClick:y,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",zi,[e("button",{onClick:r,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},n[11]||(n[11]=[e("i",{class:"fas fa-plus"},null,-1),C(" Nouvelle offre ")]))]))])])):S("",!0)}}),Li=ne(Ti,[["__scopeId","data-v-03e4f804"]]),Ui={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},Fi={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},Ii={class:"flex items-center justify-between mb-4"},qi={class:"flex items-center gap-3"},Ri=["src"],Oi={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Ni={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},Di={class:"text-gray-700 text-sm sm:text-base"},Wi={class:"text-gray-700 text-sm sm:text-base"},Hi={class:"text-xs text-gray-500 mt-3"},Ji=["onClick"],Bi={key:0,class:"col-span-full text-center py-4"},Gi={key:1,class:"text-center text-gray-600 py-24"},Ki={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Xi={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Qi=["value"],Yi={class:"text-sm text-gray-500"},Zi={class:"font-bold"},eu={class:"font-bold"},tu=["disabled"],su={key:0,class:"fas fa-spinner fa-spin mr-2"},ou={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},au={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},ru={class:"space-y-4"},lu={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},nu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},iu=["value"],uu={class:"text-sm text-[var(--espace-gris)]"},du={class:"font-bold"},cu=["disabled"],pu={key:0,class:"fas fa-spinner fa-spin mr-2"},vu={key:1,class:""},mu={key:2,class:""},fu={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},gu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},bu=["disabled"],xu={key:0,class:"fas fa-spinner fa-spin mr-2"},hu={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},yu=le({__name:"JetonMarket",setup($){const a=()=>{const q=window.location.hostname;return q==="localhost"||q==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},v=fe(()=>a()),x=ie(),d=g([]),i=g([]),o=g({quantityMin:""}),l=g(!1),p=g(!1),r=g({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),m=g(!1),y=g(1),P=g(1),A=g(!1),w=g(!0),n=g(!1),u=g(!1),_=g({walletId:""}),k=g(null),D=g(0),O=g([]),E=g(!1),W=g({id:0,phone_number:"",payment_service:""}),j=g(!1),oe=g(!1),ce=pe(),Q=()=>{l.value=!1,p.value=!1,u.value=!1,E.value=!1,j.value=!1,oe.value=!1},L=async()=>{try{const q=await N.get("/wallets");O.value=q.data.data||[]}catch(q){console.error("Erreur lors du chargement des portefeuilles:",q),O.value=[]}},J=async()=>{var q,h;try{const se=await N.get("/jeton_market/my-offers");i.value=se.data.data||[]}catch(se){((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des offres de l'utilisateur:",se),i.value=[]}},H=async()=>{await L(),Q(),O.value.length===0?E.value=!0:l.value=!0},Z=async()=>{var q,h,se,U;m.value=!0;try{Q();const ue=await N.post("/wallets",W.value);ce.success(ue.data.message||"Portefeuille cr√©√© avec succ√®s !"),E.value=!1,await L(),l.value=!0}catch(ue){((h=(q=ue.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&x.push("login"),ce.error(((U=(se=ue.response)==null?void 0:se.data)==null?void 0:U.message)||"Erreur lors de la cr√©ation du portefeuille"),console.error("Erreur:",ue)}finally{m.value=!1,W.value={id:0,phone_number:"",payment_service:""}}},ve=()=>{p.value=!1,y.value=1,d.value=[],f()},z=async()=>{n.value=!0,y.value=1,d.value=[],await f(),n.value=!1},c=fe(()=>d.value.filter(q=>!o.value.quantityMin||q.nombre_jetons>=parseInt(o.value.quantityMin,10))),M=fe(()=>r.value.nombre_jetons*r.value.prix_unitaire),V=fe(()=>M.value*.1),f=async()=>{var q,h;if(!(A.value||y.value>P.value)){A.value=!0;try{const se={page:y.value,quantity_min:o.value.quantityMin||void 0},U=await N.get("/jeton_market/offers",{params:se});d.value=[...d.value,...U.data.data],P.value=U.data.last_page,y.value+=1}catch(se){((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des offres:",se)}finally{A.value=!1,w.value=!1}}},T=()=>{const q=document.querySelector(".grid");if(q){const{scrollTop:h,clientHeight:se,scrollHeight:U}=q;h+se>=U-300&&!A.value&&f()}},ee=async()=>{var q,h,se;if(!r.value.walletId){ce.error("Veuillez s√©lectionner un portefeuille.");return}m.value=!0;try{const U=await N.post("/jeton_market/offer",{...r.value,wallet_id:r.value.walletId,total_price:M.value});l.value=!1,ce.success(((q=U==null?void 0:U.data)==null?void 0:q.message)||"Offre cr√©√©e avec succ√®s !"),f()}catch(U){ce.error(((se=(h=U.response)==null?void 0:h.data)==null?void 0:se.message)||"Erreur lors de la cr√©ation de l'offre"),console.error("Erreur lors de la cr√©ation de l'offre:",U.response)}finally{m.value=!1}},ae=(q,h,se)=>{Q();const U=d.value.find(ue=>ue.id===q);U&&(k.value=q,D.value=U.total_prix,_.value.walletId="",u.value=!0)},re=async()=>{var q,h;if(!k.value||!_.value.walletId){ce.error("Veuillez s√©lectionner un portefeuille.");return}m.value=!0;try{const se=await N.post(`/jeton_market/buy/${k.value}`,{wallet_id:_.value.walletId});console.log(se.data),u.value=!1,f(),ce.success(se.data.message||"Achat effectu√© avec succ√®s !")}catch(se){console.error("Erreur lors de l'achat:",se.response.data.message),ce.error(((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)||"Erreur lors de l'achat")}finally{m.value=!1,k.value=null,D.value=0}},te=q=>{var h;return(h=q.user)!=null&&h.commercant?`/commercants/${q.user.commercant.id}`:`/profile/public/${q.user_id}`};return be(()=>{w.value=!0,f(),L(),J(),window.addEventListener("scroll",T)}),Ve(()=>{window.removeEventListener("scroll",T)}),(q,h)=>{const se=he("router-link");return t(),s(B,null,[R(ze,{isLoading:w.value},null,8,["isLoading"]),e("div",Ui,[e("div",Fi,[R(se,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:K(()=>h[16]||(h[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),h[17]||(h[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"üåç March√©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute s√©curit√© üöÄ")],-1)),h[18]||(h[18]=e("div",{class:"w-10"},null,-1))]),d.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:T},[(t(!0),s(B,null,Y(c.value,U=>(t(),s("div",{key:U.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",Ii,[e("div",qi,[R(se,{to:te(U),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:K(()=>[U.user.photo?(t(),s("img",{key:0,src:v.value+U.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Ri)):(t(),s("i",Oi))]),_:2},1032,["to"]),R(se,{to:te(U),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:K(()=>[C(b(U.user.nom),1)]),_:2},1032,["to"])]),e("span",Ni,[C(b(U.nombre_jetons)+" ",1),h[19]||(h[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",Di,[h[20]||(h[20]=e("strong",null,"üíµ Prix :",-1)),C(" "+b(U.prix_unitaire)+" FCFA/jeton",1)]),e("p",Wi,[h[21]||(h[21]=e("strong",null,"üí∞ Total :",-1)),C(" "+b(U.total_prix)+" FCFA ",1)]),e("p",Hi,"üìÖ Publi√©e le "+b(new Date(U.date_creation).toLocaleDateString()),1),e("button",{onClick:ue=>{var we,Ce;return ae(U.id,(we=U.wallet)==null?void 0:we.phone_number,(Ce=U.wallet)==null?void 0:Ce.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," ‚ö° Acheter ",8,Ji)]))),128)),m.value?(t(),s("div",Bi,h[22]||(h[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):S("",!0)],32)):(t(),s("div",Gi,[h[25]||(h[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),h[26]||(h[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[h[23]||(h[23]=C("Soyez le premier √† ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:H},"poster une offre"),h[24]||(h[24]=C(" üéâ"))])])),R(_e,{name:"fade"},{default:K(()=>[l.value?(t(),s("div",Ki,[e("div",Xi,[e("button",{onClick:h[0]||(h[0]=U=>l.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),h[35]||(h[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìù Nouvelle Offre",-1)),e("form",{onSubmit:de(ee,["prevent"]),class:"space-y-5"},[e("div",null,[h[27]||(h[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),I(e("input",{"onUpdate:modelValue":h[1]||(h[1]=U=>r.value.nombre_jetons=U),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,r.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[h[28]||(h[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),I(e("input",{"onUpdate:modelValue":h[2]||(h[2]=U=>r.value.prix_unitaire=U),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,r.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[h[30]||(h[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille √† utiliser",-1)),I(e("select",{"onUpdate:modelValue":h[3]||(h[3]=U=>r.value.walletId=U),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[29]||(h[29]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Y(O.value,U=>(t(),s("option",{key:U.id,value:U.id},b(U.phone_number)+" ("+b(U.payment_service)+") ",9,Qi))),128))],512),[[Ae,r.value.walletId]])]),e("p",Yi,[h[31]||(h[31]=C("üí∞ Total: ")),e("span",Zi,b(M.value),1),h[32]||(h[32]=C(" FCFA | üè¶ Commission (10%): ")),e("span",eu,b(V.value),1),h[33]||(h[33]=C(" FCFA"))]),e("button",{type:"submit",disabled:m.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[m.value?(t(),s("i",su)):S("",!0),h[34]||(h[34]=C(" Publier "))],8,tu)],32)])])):S("",!0)]),_:1}),R(_e,{name:"fade"},{default:K(()=>[p.value?(t(),s("div",ou,[e("div",au,[e("button",{onClick:h[4]||(h[4]=U=>p.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"‚úñ"),h[36]||(h[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"üéõÔ∏è Filtres",-1)),e("div",ru,[I(e("input",{"onUpdate:modelValue":h[5]||(h[5]=U=>o.value.quantityMin=U),type:"number",placeholder:"Quantit√© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[X,o.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:ve,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," üîç Appliquer ")])])):S("",!0)]),_:1}),R(_e,{name:"fade"},{default:K(()=>[u.value?(t(),s("div",lu,[e("div",nu,[e("button",{onClick:h[6]||(h[6]=U=>u.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),h[41]||(h[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üì≤ Paiement",-1)),e("form",{onSubmit:de(re,["prevent"]),class:"space-y-5"},[e("div",null,[h[38]||(h[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"S√©lectionnez votre portefeuille",-1)),I(e("select",{"onUpdate:modelValue":h[7]||(h[7]=U=>_.value.walletId=U),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[37]||(h[37]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Y(O.value,U=>(t(),s("option",{key:U.id,value:U.id},b(U.phone_number)+" ("+b(U.payment_service)+") ",9,iu))),128))],512),[[Ae,_.value.walletId]])]),e("p",uu,[h[39]||(h[39]=C("Montant total : ")),e("span",du,b(D.value),1),h[40]||(h[40]=C(" FCFA"))]),e("button",{type:"submit",disabled:m.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[m.value?(t(),s("i",pu)):S("",!0),m.value?(t(),s("span",vu,"Veuillez patienter")):(t(),s("span",mu,"Confirmer le paiement"))],8,cu)],32)])])):S("",!0)]),_:1}),R(_e,{name:"fade"},{default:K(()=>[E.value?(t(),s("div",fu,[e("div",gu,[e("button",{onClick:h[8]||(h[8]=U=>E.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),h[46]||(h[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ Cr√©er un Portefeuille ",-1)),e("form",{onSubmit:de(Z,["prevent"]),class:"space-y-5"},[e("div",null,[h[42]||(h[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),I(e("input",{"onUpdate:modelValue":h[9]||(h[9]=U=>W.value.phone_number=U),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[X,W.value.phone_number]])]),e("div",null,[h[44]||(h[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),I(e("select",{"onUpdate:modelValue":h[10]||(h[10]=U=>W.value.payment_service=U),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},h[43]||(h[43]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,W.value.payment_service]])]),e("button",{type:"submit",disabled:m.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[m.value?(t(),s("i",xu)):S("",!0),h[45]||(h[45]=C(" Cr√©er "))],8,bu)],32)])])):S("",!0)]),_:1}),j.value?(t(),me(fi,{key:2,show:j.value,wallets:O.value,onClose:h[11]||(h[11]=U=>j.value=!1),onRefreshWallets:L},null,8,["show","wallets"])):S("",!0),oe.value?(t(),me(Li,{key:3,show:oe.value,wallets:O.value,offers:i.value,onClose:h[12]||(h[12]=U=>oe.value=!1),onRefreshOffers:f},null,8,["show","wallets","offers"])):S("",!0),e("div",hu,[e("button",{onClick:h[13]||(h[13]=U=>{Q(),p.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},h[47]||(h[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:z,class:G(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":n.value}])},[e("i",{class:G(["fas fa-sync-alt text-xl",{"fa-spin":n.value}])},null,2),h[48]||(h[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:h[14]||(h[14]=U=>{Q(),j.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},h[49]||(h[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:H,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[50]||(h[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:h[15]||(h[15]=U=>{Q(),oe.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[51]||(h[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),lp=ne(yu,[["__scopeId","data-v-c3c0370a"]]),_u={class:"overflow-y-scroll bg-gray-100"},wu={class:"container mx-auto px-4 sm:px-6 py-8"},ku={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},$u={class:"flex flex-col sm:flex-row items-center gap-6"},Cu={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Au=["src"],Pu={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},ju={class:"flex-1"},Su={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Mu={class:"text-sm text-[var(--espace-gris)] mb-1"},Vu={class:"text-sm text-[var(--espace-gris)] mb-1"},Eu={class:"text-sm text-[var(--espace-gris)]"},zu={key:0,class:"text-sm text-[var(--espace-gris)]"},Tu={class:"mt-2 flex space-x-2 flex-col"},Lu={class:"text-sm text-[var(--espace-gris)]"},Uu={class:"text-xs text-[var(--espace-gris)]"},Fu={class:"mt-4 flex flex-col sm:flex-row gap-4"},Iu={class:"mt-4 flex flex-wrap gap-4"},qu={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Ru={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Ou={key:1,class:"text-base text-[var(--espace-gris)] italic"},Nu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Du={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},Wu={class:"flex items-center space-x-2"},Hu={key:3},Ju={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},Bu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Gu={key:5,class:"text-base text-[var(--espace-gris)] italic"},Ku={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},Xu={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qu={class:"text-sm text-[var(--espace-gris)]"},Yu={class:"text-sm text-[var(--espace-gris)]"},Zu=le({__name:"CommercantDetails",setup($){const a=Me(),v=ie(),x=pe(),d=g(!1),i=g(null),o=g(null),l=g(0),p=g(0),r=g(!1),m=async()=>{d.value=!0;try{const w=await N.get(`/commercant/${a.params.commercantId}`);i.value=w.data.commercant,l.value=w.data.average_rating||0,p.value=w.data.vote_count||0,i.value.produits||console.warn("Aucun produit trouv√© dans la r√©ponse de l'API pour ce commer√ßant.")}catch{x.error("Erreur lors du chargement des d√©tails du commer√ßant.")}finally{d.value=!1}},y=async()=>{var w,n,u,_;if(o.value===null||o.value<1||o.value>5){x.error("Veuillez s√©lectionner une note entre 1 et 5.");return}try{const k=await N.post(`/commercant/${a.params.commercantId}/rate`,{rating:o.value});l.value=k.data.average_rating||0,x.success("Merci pour votre note !"),o.value=null,r.value=!1,p.value=k.data.vote_count||p.value+1}catch(k){((n=(w=k.response)==null?void 0:w.data)==null?void 0:n.message)=="Unauthenticated."&&v.push("login"),x.error(((_=(u=k.response)==null?void 0:u.data)==null?void 0:_.message)||"Erreur lors de la notation.")}},P=fe(()=>{var w;return((w=i.value)==null?void 0:w.produits)||[]}),A=()=>{r.value=!0};return be(async()=>{m()}),(w,n)=>{const u=he("router-link");return t(),s(B,null,[R(ze,{isLoading:d.value},null,8,["isLoading"]),e("div",_u,[R(ut),e("div",wu,[i.value?(t(),s("div",ku,[e("div",$u,[e("div",Cu,[i.value.photo_url?(t(),s("img",{key:0,src:i.value.photo_url,alt:"Photo du commer√ßant",class:"w-full h-full object-cover"},null,8,Au)):(t(),s("i",Pu))]),e("div",ju,[e("h1",Su," Commer√ßant : "+b(i.value.nom),1),e("p",Mu,[n[2]||(n[2]=e("strong",null,"Ville :",-1)),C(" "+b(i.value.ville),1)]),e("p",Vu,[n[3]||(n[3]=e("strong",null,"Inscrit depuis :",-1)),C(" "+b(new Date(i.value.created_at).toLocaleDateString()),1)]),e("p",Eu,[n[4]||(n[4]=e("strong",null,"Contact :",-1)),C(" "+b(i.value.email||"Non disponible"),1)]),i.value.telephone?(t(),s("p",zu,[n[5]||(n[5]=e("strong",null,"T√©l√©phone :",-1)),C(" "+b(i.value.telephone),1)])):S("",!0),e("div",Tu,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:A},[(t(),s(B,null,Y(5,_=>e("span",{key:_,class:"relative text-yellow-400 w-5 h-5"},[n[6]||(n[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:$e({width:_<=Math.floor(l.value)?"100%":_===Math.ceil(l.value)&&l.value%1!==0?`${l.value%1*100}%`:"0%"})},null,4)])),64)),e("p",Lu,b(Number(l.value).toFixed(1))+"/5 ",1)]),e("span",Uu,"("+b(p.value)+" votes)",1)])])]),e("div",Fu,[R(u,{to:`/chat/${i.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:K(()=>n[7]||(n[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),C(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),R(u,{to:`/public-profile/${i.value.user_id||i.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:K(()=>n[8]||(n[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),C(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",Iu,[e("span",qu,"Produits : "+b(P.value.length),1),i.value.revenus?(t(),s("span",Ru,"Revenus : "+b(i.value.revenus)+" FCFA",1)):S("",!0)])])):d.value?S("",!0):(t(),s("div",Ou,"Commer√ßant non trouv√©.")),r.value?(t(),s("div",Nu,[e("div",Du,[n[9]||(n[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce Commer√ßant",-1)),e("div",Wu,[I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=_=>o.value=_),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[X,o.value,void 0,{number:!0}]]),e("button",{onClick:y,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:n[1]||(n[1]=_=>r.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):S("",!0),d.value?(t(),s("div",Hu)):P.value.length>0?(t(),s("div",Ju,[n[10]||(n[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du Commer√ßant",-1)),e("div",Bu,[(t(!0),s(B,null,Y(P.value,_=>(t(),me(qe,{key:_.id,produit:_},null,8,["produit"]))),128))])])):i.value&&P.value.length===0?(t(),s("div",Gu,"Aucun produit disponible pour ce commer√ßant.")):S("",!0),i.value&&i.value.statistiques?(t(),s("div",Ku,[n[13]||(n[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",Xu,[e("p",Qu,[n[11]||(n[11]=e("strong",null,"Vues totales :",-1)),C(" "+b(i.value.statistiques.total_views),1)]),e("p",Yu,[n[12]||(n[12]=e("strong",null,"Produits populaires :",-1)),C(" "+b(i.value.statistiques.popular_products),1)])])])):S("",!0)])])],64)}}}),np=ne(Zu,[["__scopeId","data-v-28e3885d"]]),ed={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},td={class:"container mx-auto max-w-2xl"},sd={class:"bg-white rounded-lg shadow-md p-6"},od={key:0,class:"text-red-500 text-xs"},ad={key:0,class:"text-red-500 text-xs"},rd={key:0,class:"text-red-500 text-xs"},ld={key:0,class:"text-red-500 text-xs"},nd={key:0,class:"text-red-500 text-xs"},id=["disabled"],ud={key:0},dd={key:1},cd=le({__name:"CommercantCreate",setup($){const a=ie(),v=pe(),x=g({nom:"",ville:"",email:"",telephone:"",photo:null}),d=g(!1),i=g({}),o=r=>{const m=r.target;m.files&&m.files[0]&&(x.value.photo=m.files[0])},l=async(r,m)=>{console.log(r,m);try{await Ne.send("service_06884pt","template_5x962ru",{to_name:r,code:m}),v.success("Code de v√©rification envoy√©.")}catch{v.error("Erreur lors de l'envoi de l'email.")}},p=async()=>{var r,m,y,P;d.value=!0,i.value={};try{const A=new FormData;A.append("nom",x.value.nom),A.append("ville",x.value.ville),A.append("email",x.value.email),A.append("telephone",x.value.telephone),x.value.photo&&A.append("photo",x.value.photo);const w=await N.post("/commercants",A,{headers:{"Content-Type":"multipart/form-data"}});await l(w.data.commercant.email,w.data.verification_code),v.success("Commer√ßant cr√©√© avec succ√®s !"),a.push("/profil")}catch(A){((m=(r=A.response)==null?void 0:r.data)==null?void 0:m.message)=="Unauthenticated."&&a.push("login"),(P=(y=A.response)==null?void 0:y.data)!=null&&P.errors?i.value=A.response.data.errors:v.error("Erreur lors de la cr√©ation du commer√ßant"),console.error(A)}finally{d.value=!1}};return(r,m)=>(t(),s("div",ed,[e("div",td,[m[11]||(m[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),C(" Cr√©er un Commer√ßant ")],-1)),e("div",sd,[e("form",{onSubmit:de(p,["prevent"]),class:"space-y-6"},[e("div",null,[m[4]||(m[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),I(e("input",{"onUpdate:modelValue":m[0]||(m[0]=y=>x.value.nom=y),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commer√ßant",required:""},null,512),[[X,x.value.nom]]),i.value.nom?(t(),s("span",od,b(i.value.nom),1)):S("",!0)]),e("div",null,[m[5]||(m[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),I(e("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>x.value.ville=y),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[X,x.value.ville]]),i.value.ville?(t(),s("span",ad,b(i.value.ville),1)):S("",!0)]),e("div",null,[m[6]||(m[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),I(e("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>x.value.email=y),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[X,x.value.email]]),i.value.email?(t(),s("span",rd,b(i.value.email),1)):S("",!0)]),e("div",null,[m[7]||(m[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"T√©l√©phone",-1)),I(e("input",{"onUpdate:modelValue":m[3]||(m[3]=y=>x.value.telephone=y),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[X,x.value.telephone]]),i.value.telephone?(t(),s("span",ld,b(i.value.telephone),1)):S("",!0)]),e("div",null,[m[8]||(m[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:o,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),i.value.photo?(t(),s("span",nd,b(i.value.photo),1)):S("",!0)]),e("div",null,[e("button",{type:"submit",disabled:d.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[d.value?(t(),s("span",ud,m[9]||(m[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),C(" Cr√©ation en cours... ")]))):(t(),s("span",dd,m[10]||(m[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),C(" Cr√©er le commer√ßant ")])))],8,id)])],32)])])]))}}),ip=ne(cd,[["__scopeId","data-v-98113384"]]),pd={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},vd={class:"container mx-auto max-w-4xl pb-8"},md={class:"text-md font-semibold text-white flex items-center"},fd={class:"ml-2 text-sm text-white/80"},gd={class:"text-white/90 text-sm mt-2"},bd={key:0,class:"text-white/90 text-sm mt-1"},xd={class:"list-disc list-inside ml-4"},hd=le({__name:"ParrainageInfo",setup($){const a=ie(),v=pe(),x=g([]),d=async()=>{try{const o=await N.get("/parrainages/niveaux");x.value=o.data.niveaux}catch(o){v.error("Erreur lors de la r√©cup√©ration des niveaux de parrainage"),console.error(o)}},i=()=>{a.go(-1)};return be(()=>{d()}),(o,l)=>(t(),s("div",pd,[e("div",vd,[l[4]||(l[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),C(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:i,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},l[0]||(l[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),C(" Retour ")])),l[5]||(l[5]=je('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-910c08f4><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-910c08f4>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-910c08f4> Le syst√®me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Vos gains d√©pendent des <strong data-v-910c08f4>niveaux de parrainage</strong>, d√©bloqu√©s par le nombre de commer√ßants parrain√©s, avec des bonus en jetons cumulatifs. Plus vous parrainez, plus vous montez de niveau ! D√©couvrez les d√©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-910c08f4><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-910c08f4>Comment √ßa fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-910c08f4><li data-v-910c08f4><strong data-v-910c08f4>Obtenez votre code unique :</strong> G√©n√©rez ou cr√©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-910c08f4><strong data-v-910c08f4>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis √† s&#39;inscrire.</li><li data-v-910c08f4><strong data-v-910c08f4>Attirez des commer√ßants :</strong> Encouragez vos filleuls √† devenir des commer√ßants actifs sur la plateforme. Seuls les commer√ßants parrain√©s comptent pour d√©bloquer les niveaux.</li><li data-v-910c08f4><strong data-v-910c08f4>Montez de niveau :</strong> Chaque niveau n√©cessite un nombre sp√©cifique de commer√ßants parrain√©s. Une fois le seuil atteint, vous d√©bloquez un bonus en jetons correspondant √† ce niveau, en plus des bonus des niveaux pr√©c√©dents.</li><li data-v-910c08f4><strong data-v-910c08f4>Suivez vos progr√®s :</strong> Consultez votre niveau actuel, vos jetons bonus et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-910c08f4><strong data-v-910c08f4>Note importante :</strong> Les jetons bonus sont cumulatifs et attribu√©s en fonction des niveaux atteints, pas directement par parrainage individuel. Par exemple, si vous atteignez le niveau 2 avec 5 commer√ßants, vous recevez les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(B,null,Y(x.value,p=>(t(),s("div",{key:p.id,class:"mb-6 p-4 border rounded-lg",style:$e({backgroundColor:p.couleur||"#f0f0f0"})},[e("h3",md,[C(b(p.nom)+" "+b(p.emoji)+" ",1),e("span",fd,"("+b(p.filleuls_requis)+" commer√ßants requis)",1)]),e("p",gd,[l[1]||(l[1]=e("strong",null,"Bonus en jetons :",-1)),C(" "+b(p.jetons_bonus)+" jetons ",1)]),p.avantages.length?(t(),s("p",bd,[l[2]||(l[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",xd,[(t(!0),s(B,null,Y(p.avantages,r=>(t(),s("li",{key:r},b(r),1))),128))])])):S("",!0),l[3]||(l[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont cr√©dit√©s une fois le niveau atteint et cumul√©s avec les niveaux pr√©c√©dents. ",-1))],4))),128))])]))}}),up=ne(hd,[["__scopeId","data-v-910c08f4"]]),yd={class:"w-full flex relative px-0"},_d=["onClick"],wd={class:"flex items-center"},kd=["onClick"],$d=["src"],Cd={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Ad={class:"min-w-0"},Pd={class:"font-semibold text-[var(--espace-vert)] truncate"},jd={class:"text-xs text-[var(--espace-gris)] truncate"},Sd={class:"flex items-center"},Md={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Vd={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Ed={class:"w-full grid grid-rows-[10%_86%]"},zd={class:"flex border-b"},Td={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},Ld={class:"bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full"},Ud={key:0,class:"h-full flex flex-col"},Fd={class:"block text-[var(--espace-vert)]"},Id={class:"text-gray-800"},qd={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},Rd={key:0,class:"text-center text-[var(--espace-gris)]"},Od={class:"px-2 md:px-4 pb-8 sm:pb-4 md:pb-0 z-100"},Nd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},Dd={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},Wd={key:1,class:"flex items-center justify-center h-full"},Hd=le({__name:"Messages",setup($){const a=()=>{const z=window.location.hostname;return z==="localhost"||z==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},v=fe(()=>a()),x=ie(),d=Me(),i=ge(),o=pe(),l=Ue(),p=g([]),r=g([]),m=g(null),y=g(""),P=g(!0),A=g(0),w=g(!1),n=g(!1),u=g(null),_=g(null),k=g(window.innerWidth<768);let D=null;const O=()=>{Oe(()=>{u.value&&u.value.scrollTo({top:u.value.scrollHeight,behavior:"smooth"})})},E=()=>{_.value=null,localStorage.removeItem("chatProduct")},W=async()=>{var z,c;try{const M=await N.get("/conversations");p.value=M.data.conversations}catch(M){((c=(z=M.response)==null?void 0:z.data)==null?void 0:c.message)==="Unauthenticated."&&x.push("login"),o.error("Erreur lors de la r√©cup√©ration des conversations"),console.error(M)}},j=async(z,c=!0)=>{var M,V,f,T,ee,ae,re;if(!n.value){n.value=!0;try{c&&(A.value=0,r.value=[]),P.value=!1;const te=await N.get(`/chat/${z}?offset=${A.value}`),q=te.data.messages,h=((M=u.value)==null?void 0:M.scrollHeight)||0,se=((V=u.value)==null?void 0:V.scrollTop)||0;r.value=[...q,...r.value],w.value=te.data.hasMore;const U=localStorage.getItem("chatProduct"),ue=p.value.find(Pe=>Pe.user_id===z);let we="",Ce="/default-avatar.png";ue?(we=ue.is_commercant?ue.name:((f=te.data.user)==null?void 0:f.nom)||"",Ce=ue.profile_photo||"/default-avatar.png"):U?(we=JSON.parse(U).commercant_name||((T=te.data.user)==null?void 0:T.nom)||"",Ce=(ue==null?void 0:ue.profile_photo)||"/default-avatar.png"):we=((ee=te.data.user)==null?void 0:ee.nom)||"",m.value={user_id:z,name:we,is_commercant:(ue==null?void 0:ue.is_commercant)||!1,profile_photo:Ce},U&&(_.value=JSON.parse(U)),await J(z),Oe(()=>{if(u.value&&!c){const Pe=u.value.scrollHeight;u.value.scrollTop=se+(Pe-h)}else O()})}catch(te){((re=(ae=te.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&x.push("login"),o.error("Erreur lors du chargement des messages"),console.error(te)}finally{n.value=!1}}},oe=z=>{x.push({name:"messages",params:{receiverId:z}}),k.value&&(P.value=!1)},ce=async()=>{var M,V,f,T,ee,ae,re,te,q,h,se,U;if(!y.value.trim()||!m.value){o.error("Veuillez s√©lectionner une conversation et √©crire un message");return}const z=y.value.trim(),c={id:-Date.now(),sender_id:(M=i.user)==null?void 0:M.id,receiver_id:m.value.user_id,content:z,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((V=_.value)==null?void 0:V.id)||null,sender:{id:((f=i.user)==null?void 0:f.id)??0,nom:((T=i.user)==null?void 0:T.nom)??"",email:((ee=i.user)==null?void 0:ee.email)??"",telephone:((ae=i.user)==null?void 0:ae.telephone)??"",ville:((re=i.user)==null?void 0:re.ville)??"",premium:((te=i.user)==null?void 0:te.premium)??!1,parrain_id:((q=i.user)==null?void 0:q.parrain_id)??0},receiver:{id:m.value.user_id,nom:m.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:_.value||null};r.value.push(c),y.value="",O();try{const ue=await N.post(`/chat/${m.value.user_id}`,{content:z,product_id:(h=_.value)==null?void 0:h.id});_.value&&E()}catch(ue){((U=(se=ue.response)==null?void 0:se.data)==null?void 0:U.message)==="Unauthenticated."&&x.push("login"),o.error("√âchec d'envoi"),console.error(ue),r.value=r.value.filter(we=>we.id!==c.id)}},Q=()=>{!u.value||!w.value||n.value||u.value.scrollTop<=100&&(A.value+=30,j(m.value.user_id,!1))},L=()=>{k.value=window.innerWidth<768,P.value=window.innerWidth>=768},J=async z=>{var c,M;try{const V=await N.put("/messages/mark-all-as-read");l.saveUnreadMessagesToLocalStorage(V.data.unread_messages)}catch(V){((M=(c=V.response)==null?void 0:c.data)==null?void 0:M.message)==="Unauthenticated."&&x.push("login"),console.error("Erreur lors du marquage des messages comme lus:",V),o.error("Erreur lors de la mise √† jour des messages lus")}},H=()=>{P.value=!P.value},Z=(z,c)=>{const M=c?`/commercants/${z}`:`/users/${z}`;x.push(M)},ve=()=>{var z;if(!((z=i.user)!=null&&z.id)){console.error("Utilisateur non authentifi√©");return}D&&(D.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),D=window.Echo.private("chat").listen(".App\\Events\\MessageSent",c=>{var M,V;if(((M=m.value)==null?void 0:M.user_id)===c.message.receiver_id||((V=m.value)==null?void 0:V.user_id)===c.message.sender_id){const f={id:c.message.id,sender_id:c.message.sender_id,receiver_id:c.message.receiver_id,content:c.message.content,created_at:c.message.created_at,updated_at:c.message.updated_at,is_read:c.message.is_read,product_id:c.message.product_id||null,sender:c.message.sender,receiver:c.message.receiver,product:c.message.product||null};r.value.push(f),O(),l.saveUnreadMessagesToLocalStorage(c.unread_messages)}}).error(c=>{}),D.params={channelId:"chat"}};return be(()=>{var z;W(),d.params.receiverId&&j(parseInt(d.params.receiverId)),(z=i.user)!=null&&z.id&&ve(),window.addEventListener("resize",L),xe(()=>u.value,c=>{c&&c.addEventListener("scroll",Q)})}),Ve(()=>{D&&(D.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),window.removeEventListener("resize",L),u.value&&u.value.removeEventListener("scroll",Q)}),xe(()=>d.params.receiverId,async z=>{z&&await j(parseInt(z))}),xe(()=>{var z;return(z=i.user)==null?void 0:z.id},z=>{z&&ve()}),(z,c)=>{var V,f;const M=he("router-link");return t(),s("div",yd,[R(_e,{name:"slide-fade"},{default:K(()=>[P.value||!k.value?(t(),s("div",{key:0,class:G(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",k.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[c[1]||(c[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(B,null,Y(p.value,T=>(t(),s("div",{key:T.user_id,onClick:ee=>oe(T.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",wd,[e("div",{onClick:de(ee=>Z(T.user_id,T.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[T.profile_photo?(t(),s("img",{key:0,src:v.value+T.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,$d)):(t(),s("i",Cd))],8,kd),e("div",Ad,[e("p",Pd,b(T.name),1),e("p",jd,b(T.last_message),1)])]),e("div",Sd,[T.unread_count>0?(t(),s("div",Md,b(T.unread_count),1)):S("",!0),e("div",Vd,b(new Date(T.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,_d))),128))],2)):S("",!0)]),_:1}),e("div",Ed,[e("div",zd,[!P.value&&k.value&&m.value?(t(),s("button",{key:0,onClick:H,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},c[2]||(c[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):S("",!0),m.value?(t(),s("h2",Td,b(m.value.name),1)):S("",!0)]),e("div",Ld,[m.value?(t(),s("div",Ud,[e("div",{class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 z-50 messages-container",ref_key:"messagesContainer",ref:u},[(t(!0),s(B,null,Y(r.value,T=>{var ee,ae,re,te;return t(),s("div",{key:T.id,class:G(["p-3 rounded-lg break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":T.sender_id===((ee=F(i).user)==null?void 0:ee.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":T.sender_id!==((ae=F(i).user)==null?void 0:ae.id)}])},[e("strong",Fd,b((re=T.sender)==null?void 0:re.nom)+" :",1),e("p",Id,[(te=T.product)!=null&&te.id?(t(),me(M,{key:0,to:{name:"produit",params:{id:T.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:K(()=>[C(" [Produit "+b(T.product.nom)+"] ",1)]),_:2},1032,["to"])):S("",!0),C(" "+b(T.content),1)]),e("p",qd,b(new Date(T.created_at).toLocaleTimeString()),1)],2)}),128)),n.value?(t(),s("div",Rd,"Chargement...")):S("",!0)],512),e("div",Od,[e("div",Nd,[(V=_.value)!=null&&V.id?(t(),s("span",Dd,[C(" Produit "+b((f=_.value)==null?void 0:f.nom)+" ",1),e("button",{onClick:E,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," √ó ")])):S("",!0),I(e("input",{"onUpdate:modelValue":c[0]||(c[0]=T=>y.value=T),onKeyup:Ye(ce,["enter"]),type:"text",placeholder:"√âcrivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w-[200px]"},null,544),[[X,y.value]]),e("button",{onClick:ce,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},c[3]||(c[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",Wd,c[4]||(c[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"S√©lectionnez une conversation pour commencer.",-1)])))])])])}}}),dp=ne(Hd,[["__scopeId","data-v-e04fc4c7"]]),Jd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},Bd={key:0,class:"overflow-y-scroll space-y-4"},Gd={class:"flex justify-between items-center"},Kd={class:"text-lg font-semibold"},Xd={class:"text-gray-600"},Qd={class:"text-gray-600"},Yd={class:"text-gray-600"},Zd={class:"text-gray-600"},ec={class:"text-gray-600"},tc={key:0,class:"text-gray-600"},sc={class:"text-right"},oc=["onClick"],ac={key:1,class:"text-gray-500"},rc={class:"mt-6 flex gap-4"},lc={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},nc=le({__name:"JetonHistory",setup($){const a=ie(),x=ge().user,d=g([]),i=g(!1),o=pe(),l=async()=>{try{const m=await N.get(`/jeton-transactions/${x==null?void 0:x.id}`);d.value=m.data}catch(m){console.error("Erreur lors du chargement des transactions:",m)}},p=m=>new Date(m).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=async m=>{var y,P,A,w;if(confirm(`Refaire l'achat de ${m.nombre_jetons} jetons avec le m√™me service (${m.methode_paiement}) ?`)){i.value=!0;try{const n=await N.post("/acheter-jetons",{nombre_jetons:m.nombre_jetons,payment_service:m.methode_paiement,phone_number:m.phone_number});o.success(n.data.message),l()}catch(n){((P=(y=n.response)==null?void 0:y.data)==null?void 0:P.message)=="Unauthenticated."&&a.push("login"),o.error(((w=(A=n.response)==null?void 0:A.data)==null?void 0:w.message)||"Erreur lors de l'achat."),console.error(n)}finally{i.value=!1}}};return be(()=>{x&&l()}),(m,y)=>{const P=he("router-link");return t(),s("div",Jd,[y[4]||(y[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),d.value.length>0?(t(),s("div",Bd,[(t(!0),s(B,null,Y(d.value,A=>(t(),s("div",{key:A.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",Gd,[e("div",null,[e("p",Kd,"Achat de "+b(A.nombre_jetons)+" jetons",1),e("p",Xd,"Montant: "+b(A.montant)+" FCFA",1),e("p",Qd,"M√©thode: "+b(A.methode_paiement),1),e("p",Yd,"Num√©ro: "+b(A.phone_number),1),e("p",Zd,"Statut: "+b(A.statut),1),e("p",ec,"Date: "+b(p(A.date_transaction)),1),A.transaction_id_mesomb?(t(),s("p",tc," ID Transaction: "+b(A.transaction_id_mesomb),1)):S("",!0)]),e("div",sc,[e("button",{onClick:w=>r(A),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},y[0]||(y[0]=[e("i",{class:"fas fa-redo"},null,-1),C(" Refaire ")]),8,oc)])])]))),128))])):(t(),s("p",ac,"Aucune transaction trouv√©e.")),e("div",rc,[R(P,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:K(()=>y[1]||(y[1]=[C(" Acheter des Jetons ")])),_:1,__:[1]}),R(P,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:K(()=>y[2]||(y[2]=[C(" Booster un Produit ")])),_:1,__:[2]})]),i.value?(t(),s("div",lc,y[3]||(y[3]=[je('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-5312e1a5><p class="text-lg text-[var(--espace-vert)]" data-v-5312e1a5>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-5312e1a5><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-5312e1a5></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-5312e1a5></path></svg></div>',1)]))):S("",!0)])}}}),cp=ne(nc,[["__scopeId","data-v-5312e1a5"]]),ic={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},uc={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},dc={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},cc={class:"relative"},pc=["src"],vc={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},mc={class:"flex-1"},fc={class:"text-gray-600"},gc={key:0,class:"text-sm text-gray-500"},bc={class:"text-gray-600"},xc={class:"text-gray-600"},hc=le({__name:"ProfilePublic",setup($){const a=Me(),v=ie(),x=pe(),d=g(null),i=async()=>{var l,p;try{const r=await N.get(`/profile/public/${a.params.id}`);d.value=r.data}catch(r){((p=(l=r.response)==null?void 0:l.data)==null?void 0:p.message)=="Unauthenticated."&&v.push("login"),x.error("Erreur lors de la r√©cup√©ration du profil."),console.error(r)}},o=()=>{var l;(l=d.value)!=null&&l.id?v.push({name:"messages",params:{receiverId:d.value.id}}):x.error("Impossible d'acc√©der au chat. Profil invalide.")};return be(()=>{i()}),(l,p)=>{var r,m,y,P,A,w,n,u,_,k,D,O,E,W,j,oe,ce,Q,L,J,H,Z;return t(),s("div",ic,[e("div",uc,[e("div",dc,[e("div",cc,[(r=d.value)!=null&&r.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(m=d.value)==null?void 0:m.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,pc)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((w=(A=(P=(y=d.value)==null?void 0:y.niveaux_users)==null?void 0:P.at(-1))==null?void 0:A.parrainage_niveau)==null?void 0:w.couleur)||"#0af"}`})},p[0]||(p[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(n=d.value)!=null&&n.premium?(t(),s("i",vc)):S("",!0)]),e("div",mc,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:$e({color:`${((D=(k=(_=(u=d.value)==null?void 0:u.niveaux_users)==null?void 0:_.at(-1))==null?void 0:k.parrainage_niveau)==null?void 0:D.couleur)||"#0af"}`})},[C(b((O=d.value)==null?void 0:O.nom)+" ",1),(E=d.value)!=null&&E.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:$e({background:`${((ce=(oe=(j=(W=d.value)==null?void 0:W.niveaux_users)==null?void 0:j.at(-1))==null?void 0:oe.parrainage_niveau)==null?void 0:ce.couleur)||"#0af"}`})}," Premium ",4)):S("",!0)],4),e("p",fc,"Statut : "+b((Q=d.value)!=null&&Q.commercant?"Commer√ßant":"Utilisateur"),1),(L=d.value)!=null&&L.subscription_ends_at?(t(),s("p",gc," Abonnement Premium jusqu'au "+b(new Date((J=d.value)==null?void 0:J.subscription_ends_at).toLocaleDateString()),1)):S("",!0),e("p",bc,"Ville : "+b((H=d.value)==null?void 0:H.ville),1),e("p",xc,"T√©l√©phone : "+b((Z=d.value)==null?void 0:Z.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:o,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},p[1]||(p[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),C(" Discuter ")]))])]),p[2]||(p[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),pp=ne(hc,[["__scopeId","data-v-e1d303b7"]]),yc={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},_c={class:"bg-white p-6 rounded-lg shadow-md mb-6"},wc={class:"space-y-4"},kc={class:"text-gray-700"},$c={class:"text-gray-700"},Cc={class:"text-gray-700"},Ac={class:"text-gray-700"},Pc={class:"text-gray-700"},jc={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Sc=["disabled"],Mc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Vc={key:0,class:"mt-4 text-green-600 text-center"},Ec=le({__name:"Doc",setup($){ie();const a=g(!1),v=g(!1),x=g({name:"",email:"",message:""}),d=async()=>{a.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x.value)})).ok)v.value=!0,x.value={name:"",email:"",message:""},setTimeout(()=>{v.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(i){console.error("Erreur lors de la soumission:",i)}finally{a.value=!1}};return(i,o)=>{const l=he("router-link");return t(),s("div",yc,[o[33]||(o[33]=je('<div class="text-center mb-8" data-v-e1156810><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-e1156810>üìò Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-e1156810>Votre espace pour faciliter le commerce au Cameroun</p><p class="text-lg font-semibold text-[var(--espace-or)] mt-1" data-v-e1156810>Commerce facile, opportunit√©s infinies.</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-e1156810><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-e1156810>√Ä Propos d‚ÄôEspace Cameroun</h2><p class="text-gray-700" data-v-e1156810> Espace Cameroun est une plateforme de marketplace con√ßue pour connecter commer√ßants, acheteurs et revendeurs. Son objectif principal est de cr√©er un espace num√©rique o√π les transactions commerciales peuvent se d√©rouler facilement et en toute s√©curit√©. Notre mission est de faciliter l‚Äôactivit√© commerciale au Cameroun en offrant des outils simples et accessibles √† tous. </p></section>',2)),e("section",_c,[o[27]||(o[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Fonctionnalit√©s Cl√©s",-1)),e("div",wc,[e("div",null,[o[6]||(o[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",kc,[o[4]||(o[4]=C(" Communiquez directement avec vos partenaires commerciaux pour n√©gocier ou confirmer des transactions via la section ")),R(l,{to:"/messages",class:"text-blue-500 underline"},{default:K(()=>o[3]||(o[3]=[C("Chat")])),_:1,__:[3]}),o[5]||(o[5]=C(". "))])]),o[23]||(o[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," Cr√©ez et g√©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute s√©curit√©. ")],-1)),e("div",null,[o[10]||(o[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",$c,[o[8]||(o[8]=C(" Participez au march√© des jetons via ")),R(l,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:K(()=>o[7]||(o[7]=[C("March√© des Jetons")])),_:1,__:[7]}),o[9]||(o[9]=C(" pour vendre vos jetons ou en acheter, g√©n√©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[o[14]||(o[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Cc,[o[12]||(o[12]=C(" Devenez commer√ßant en cr√©ant un compte via ")),R(l,{to:"/profil",class:"text-blue-500 underline"},{default:K(()=>o[11]||(o[11]=[C("Profil")])),_:1,__:[11]}),o[13]||(o[13]=C(", puis publiez vos produits (ex. t√©l√©phones, v√™tements) ou services (ex. r√©parations, cours) en remplissant les d√©tails (nom, prix, description, photos), s√©lectionnant un portefeuille, et soumettant votre annonce. "))])]),o[24]||(o[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagn√©s pour booster vos produits ou services, augmentant leur visibilit√© aupr√®s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[o[18]||(o[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Ac,[o[16]||(o[16]=C(" Travaillez avec d‚Äôautres commer√ßants pour proposer des produits ou services en collaboration via ")),R(l,{to:"/collaborations",class:"text-blue-500 underline"},{default:K(()=>o[15]||(o[15]=[C("Collaborations")])),_:1,__:[15]}),o[17]||(o[17]=C(". "))])]),e("div",null,[o[22]||(o[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Syst√®me de Parrainage",-1)),e("p",Pc,[o[20]||(o[20]=C(" Invitez d‚Äôautres utilisateurs √† cr√©er un compte commer√ßant via ")),R(l,{to:"/parrainage",class:"text-blue-500 underline"},{default:K(()=>o[19]||(o[19]=[C("√âquipe")])),_:1,__:[19]}),o[21]||(o[21]=C(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commer√ßants parrain√©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les √©changer sur le march√© des jetons. "))])]),o[25]||(o[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez √† un abonnement premium pour acc√©der √† des privil√®ges exclusifs, comme une visibilit√© accrue, des fonctionnalit√©s avanc√©es, et des avantages sp√©ciaux (d√©tails √† venir). ")],-1)),o[26]||(o[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," D√©couvrez d‚Äôautres fonctionnalit√©s au fil de votre utilisation pour optimiser votre exp√©rience commerciale. ")],-1))])]),e("section",jc,[o[31]||(o[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),o[32]||(o[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester √† l‚Äô√©coute pour les mises √† jour et les nouvelles fonctionnalit√©s √† venir. ",-1)),e("form",{onSubmit:de(d,["prevent"]),class:"space-y-4"},[e("div",null,[o[28]||(o[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),I(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[0]||(o[0]=p=>x.value.name=p),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[X,x.value.name]])]),e("div",null,[o[29]||(o[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),I(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":o[1]||(o[1]=p=>x.value.email=p),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[X,x.value.email]])]),e("div",null,[o[30]||(o[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),I(e("textarea",{id:"message",name:"message","onUpdate:modelValue":o[2]||(o[2]=p=>x.value.message=p),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[X,x.value.message]])]),e("button",{type:"submit",disabled:a.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":a.value}])},[a.value?(t(),s("span",Mc)):S("",!0),e("span",null,b(a.value?"Envoi...":"Envoyer"),1)],10,Sc)],32),v.value?(t(),s("p",Vc,"Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):S("",!0)]),o[34]||(o[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines √âtapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour am√©liorer Espace Cameroun. Restez connect√©s pour d√©couvrir de nouvelles fonctionnalit√©s et opportunit√©s commerciales dans un avenir proche. ")],-1))])}}}),vp=ne(Ec,[["__scopeId","data-v-e1156810"]]),zc={class:"overflow-y-scroll bg-gray-50 flex flex-col"},Tc={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},Lc={class:"flex items-center mb-4"},Uc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},Fc={class:"ml-4 text-lg font-semibold text-gray-800"},Ic={key:0,class:"text-gray-700 mb-2 leading-relaxed"},qc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},Rc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},Oc=["disabled"],Nc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Dc={key:0,class:"mt-4 text-green-600 text-center"},Wc=le({__name:"Politique",setup($){new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});const a=g([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons √† prot√©ger vos informations personnelles et √† respecter votre vie priv√©e."},{id:"collecte",title:"Donn√©es collect√©es",icon:"fas fa-database",list:["Nom, email, t√©l√©phone","Produits publi√©s","Messages √©chang√©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donn√©es",icon:"fas fa-cogs",list:["Gestion des comptes","Am√©lioration du service","S√©curit√© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donn√©es. Elles ne sont partag√©es qu‚Äôavec nos prestataires ou si la loi l‚Äôexige."},{id:"securite",title:"S√©curit√©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des acc√®s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["Acc√®s et rectification","Suppression du compte","Opposition et portabilit√©"]}]),v=g(!1),x=g(!1),d=g({name:"",email:"",message:""}),i=async()=>{v.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d.value)})).ok)x.value=!0,d.value={name:"",email:"",message:""},setTimeout(()=>{x.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(o){console.error("Erreur envoi :",o)}finally{v.value=!1}};return(o,l)=>(t(),s("div",zc,[l[8]||(l[8]=je('<section class="bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white pt-6 pb-8 shadow-lg" data-v-0622a650><div class="max-w-4xl mx-auto text-center px-6" data-v-0622a650><h1 class="text-4xl sm:text-5xl font-bold mb-4" data-v-0622a650>Politique de Confidentialit√©</h1><p class="text-lg text-green-100 max-w-2xl mx-auto" data-v-0622a650> D√©couvrez comment <strong data-v-0622a650>Espace Cameroun</strong> prot√®ge vos donn√©es et respecte votre vie priv√©e. </p><p class="text-lg font-semibold text-[var(--espace-or)] mt-2" data-v-0622a650>Commerce facile, opportunit√©s infinies. </p></div></section>',1)),e("section",Tc,[R(De,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:K(()=>[(t(!0),s(B,null,Y(a.value,p=>(t(),s("div",{key:p.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",Lc,[e("div",Uc,[e("i",{class:G([p.icon,"text-xl"])},null,2)]),e("h2",Fc,b(p.title),1)]),p.text?(t(),s("p",Ic,b(p.text),1)):S("",!0),p.list?(t(),s("ul",qc,[(t(!0),s(B,null,Y(p.list,r=>(t(),s("li",{key:r},b(r),1))),128))])):S("",!0)]))),128))]),_:1})]),e("section",Rc,[l[6]||(l[6]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," üíå Une question sur vos donn√©es ? ",-1)),l[7]||(l[7]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous r√©pondrons dans les plus brefs d√©lais. ",-1)),e("form",{onSubmit:de(i,["prevent"]),class:"space-y-4"},[e("div",null,[l[3]||(l[3]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),I(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":l[0]||(l[0]=p=>d.value.name=p),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[X,d.value.name]])]),e("div",null,[l[4]||(l[4]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),I(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":l[1]||(l[1]=p=>d.value.email=p),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[X,d.value.email]])]),e("div",null,[l[5]||(l[5]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),I(e("textarea",{id:"message",name:"message","onUpdate:modelValue":l[2]||(l[2]=p=>d.value.message=p),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[X,d.value.message]])]),e("button",{type:"submit",disabled:v.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":v.value}])},[v.value?(t(),s("span",Nc)):S("",!0),e("span",null,b(v.value?"Envoi...":"Envoyer"),1)],10,Oc)],32),x.value?(t(),s("p",Dc," ‚úÖ Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):S("",!0)])]))}}),mp=ne(Wc,[["__scopeId","data-v-0622a650"]]);export{xo as A,Qc as C,vp as D,Kc as F,Gc as H,cp as J,Xc as L,dp as M,Zc as P,Yc as R,tp as a,np as b,ip as c,op as d,ep as e,ap as f,up as g,sp as h,rp as i,pp as j,lp as k,mp as l,N as m};
