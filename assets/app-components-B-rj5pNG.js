import{r as v,u as ue,d as re,a as ge,w as me,o as ve,b as xe,c as s,e as P,f as F,g as t,h as e,i as W,j as Y,k,t as c,l as ce,m as Ae,n as Pe,F as H,p as ee,q as pe,s as X,v as D,x as Z,y as Ue,T as be,z as ie,A as _e,B as ye,C as Be,D as ze,E as He,G as Ye,H as Ge,I as Xe}from"./vue-CXlWhWFs.js";import{d as qe}from"./pinia-cLUqAEOv.js";import{a as Le}from"./axios-Dq7h7Pqt.js";const et=()=>{const I=window.location.hostname;return I==="localhost"||I==="127.0.0.1"?"http://localhost:8000/api/v1":"https://espacecameroun.devfack.com/api/v1"};Le.defaults.withCredentials=!0;Le.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Le.defaults.withXSRFToken=!0;const R=Le.create({withCredentials:!0,baseURL:et(),headers:{Accept:"application/json","Content-Type":"application/json"}});R.interceptors.request.use(I=>(localStorage.getItem("auth_token"),I));const fe=qe("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(I){const l=await R.post("/login",I);this.user=l.data.user,this.token=l.data.token,localStorage.setItem("token",this.token??""),R.defaults.headers.common.Authorization=`Bearer ${this.token}`},async register(I){const l=await R.post("/register",I);this.user=l.data.user,this.token=l.data.token,localStorage.setItem("token",this.token??""),R.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{R.defaults.headers.common.Authorization=`Bearer ${this.token}`;const I=await R.get("/user");return this.user=I.data.user,!0}catch{return this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{this.token&&(R.defaults.headers.common.Authorization=`Bearer ${this.token}`,await R.post("/logout"))}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete R.defaults.headers.common.Authorization}}}),Ke="/assets/logoOrangeweb-C9Cko1mf.webp",Fe=qe("userState",()=>{const I=v(0),l=v(0),$=ue(),f=()=>{const a=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");I.value=a.length;const u=localStorage.getItem("unread_messages");l.value=u?parseInt(u,10):0},o=a=>{localStorage.setItem("pending_collaborations",JSON.stringify(a)),I.value=a.length},i=a=>{localStorage.setItem("unread_messages",a.toString()),l.value=a},n=async a=>{var S;const u=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");u.push({produit_id:a.produit_id,prix_revente:a.prix_revente,status:"pending",created_at:new Date().toISOString()}),o(u);try{return await R.post("/collaborations",{produit_id:a.produit_id,prix_revente:a.prix_revente}),await g(),$.success("Demande de collaboration envoyée !"),!0}catch(b){const h=u.filter(r=>!(r.produit_id===a.produit_id&&r.prix_revente===a.prix_revente));return o(h),$.error(((S=b.response)==null?void 0:S.data.message)||"Erreur lors de la demande de collaboration"),!1}},g=async()=>{try{const a=await R.get("/user/badges");I.value=a.data.collaborations_pending,console.log(a.data),i(a.data.unread_messages||0)}catch(a){console.error("Erreur lors de la synchronisation des badges:",a)}};return{collaborationsPending:I,unreadMessages:l,initializeState:f,addCollaboration:n,syncCollaborationsWithBackend:g,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),I.value=0,l.value=0},saveCollaborationsToLocalStorage:o,saveUnreadMessagesToLocalStorage:i}}),Ie=qe("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:I=>fe().user},actions:{async fetchProducts(I={},l=!1){var $,f;if(!(this.isLoading||!l&&!this.hasMore)){this.isLoading=!0,l&&(this.products=[],this.page=1,this.hasMore=!0);try{const o=await R.get("/produits",{params:{...I,page:this.page,sort:this.sort}});if(console.log(o.data.data),I.per_page==="all")this.products=l?o.data:[...this.products,...o.data];else{const i=o.data.data;this.products=l?i:[...this.products,...i],this.hasMore=o.data.current_page<o.data.last_page,this.page=o.data.current_page+1}}catch(o){throw((f=($=o.response)==null?void 0:$.data)==null?void 0:f.message)||"Erreur lors du chargement des produits"}finally{this.isLoading=!1}}},async toggleFavorite(I){var i,n;const l=fe();if(!l.user&&(await l.checkAuth(),!l.user)){console.warn("Utilisateur non connecté, redirection ou action nécessaire");return}const $=l.user;console.log(`user ${JSON.stringify($)}`);const f=this.products.find(g=>g.id===I);let o=!1;f&&(f.is_favorited_by=!f.is_favorited_by,f.counts.favorites_count=f.is_favorited_by?f.counts.favorites_count+1:f.counts.favorites_count-1,o=!0),this.product&&this.product.id===I&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,o=!0);try{const g=await R.post(`/produits/${I}/favorite`),p=g.data.produit;if(o){const a=this.products.findIndex(u=>u.id===I);a!==-1&&(this.products[a]={...this.products[a],...p}),this.product&&this.product.id===I&&(this.product={...this.product,...p})}return g.data.message}catch(g){if(o){const p=this.products.find(a=>a.id===I);p&&(p.is_favorited_by=!p.is_favorited_by,p.counts.favorites_count=p.is_favorited_by?p.counts.favorites_count-1:p.counts.favorites_count+1),this.product&&this.product.id===I&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}throw((n=(i=g.response)==null?void 0:i.data)==null?void 0:n.message)||"Erreur lors de la mise à jour des favoris"}},async viewProduct(I){var l,$;try{const f=await R.get(`/produits/${I}`);this.product=f.data.produit;const o=this.products.findIndex(i=>i.id===I);o!==-1?this.products[o]={...this.products[o],...this.product}:this.products.push(this.product)}catch(f){throw(($=(l=f.response)==null?void 0:l.data)==null?void 0:$.message)||"Erreur lors du chargement du produit"}},setSort(I){this.sort=I,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(I){this.userId=I}}}),tt={key:0,class:"fixed top-14 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},st={class:"text-sm font-semibold text-[var(--espace-vert)]"},ot={class:"text-gray-800"},at=re({__name:"SoldeUser",setup(I){ge();const l=fe(),$=v(0),f=async()=>{if(l.user)try{$.value=l.user.jetons,console.log($.value)}catch(o){console.error("Erreur lors de la récupération des jetons:",o)}};return me(()=>l.user,()=>{f()}),ve(()=>{f()}),(o,i)=>{const n=xe("router-link");return F(l).user?(t(),s("div",tt,[i[1]||(i[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",st,[W(n,{to:"/jeton-history"},{default:Y(()=>[i[0]||(i[0]=k(" Jetons : ")),e("span",ot,c($.value),1)]),_:1,__:[0]})])])):P("",!0)}}}),le=(I,l)=>{const $=I.__vccOpts||I;for(const[f,o]of l)$[f]=o;return $},Qe=le(at,[["__scopeId","data-v-12adcefd"]]),rt={class:"relative"},lt={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 w-full z-50 shadow-md"},nt={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},it={class:"flex items-center gap-1 sm:gap-3"},ut={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},dt=["aria-label"],ct={class:"flex items-center gap-2"},pt=["src"],vt={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},mt={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},ft=re({__name:"HeaderBar",setup(I){const l=()=>{const _=window.location.hostname;return _==="localhost"||_==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},$=ce(()=>l()),f=fe(),o=Fe();ge();const i=ce(()=>f.user);Ae();const n=v(!1),g=v(!1),p=v(""),a=Ie(),u=v(!1),S=v(null),b=v(!1),h=ce(()=>[...i.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/profil",label:"Profil",icon:"fa-user-circle"},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:o.unreadMessages},...i.value.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:o.collaborationsPending},{to:"/parrainage",label:"Mon equipe",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),r=async()=>{if(i.value)try{await o.syncCollaborationsWithBackend()}catch(_){console.error("Erreur lors du chargement des badges:",_)}},d=async()=>{if(!i.value&&f.token)try{await f.checkAuth()}catch(_){console.error("Erreur lors de la récupération de l'utilisateur:",_),f.logout()}i.value&&await r()};me(()=>o.collaborationsPending,_=>{_>-1&&(n.value=!0,setTimeout(()=>n.value=!1,300))}),me(()=>o.unreadMessages,_=>{_>-1&&(g.value=!0,setTimeout(()=>g.value=!1,300))});const C=async()=>{if(p.value.trim())try{await a.fetchProducts({search:p.value.trim()},!0),p.value="",u.value=!1}catch(_){console.error("Erreur lors de la recherche:",_)}},V=_=>{if(b.value){b.value=!1;return}S.value&&!S.value.contains(_.target)&&(u.value=!1)};return ve(async()=>{var _;await d(),document.addEventListener("click",V),(_=f.user)!=null&&_.id&&window.Echo.channel(`chat.${f.user.id}`).listen("MessageSent",M=>{var A;console.log("📩 header e reçu :",M.message),((A=f.user)==null?void 0:A.id)===M.receiver_id&&(console.log("📩 header e reçu :",M.message),o.saveUnreadMessagesToLocalStorage(M.unread_messages))})}),Pe(()=>{var _;document.removeEventListener("click",V),(_=f.user)!=null&&_.id&&window.Echo.leave(`chat.${f.user.id}`)}),(_,M)=>{const A=xe("RouterLink");return t(),s("div",rt,[e("header",lt,[e("div",nt,[e("div",it,[W(A,{to:"/","aria-label":"Retour à l'accueil"},{default:Y(()=>M[2]||(M[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ke,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),M[3]||(M[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"}," Espace Cameroun ",-1))]),e("nav",ut,[(t(!0),s(H,null,ee(h.value,T=>(t(),pe(A,{key:T.to,to:T.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Y(()=>[e("i",{class:X(["fas",T.icon])},null,2),k(" "+c(T.label)+" ",1),T!=null&&T.badge&&T.badge>-1?(t(),s("span",{key:0,class:X(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":T.to==="/collaborations"&&n.value||T.to==="/messages"&&g.value}]),"aria-label":T.to==="/collaborations"?"Collaborations en attente":T.to==="/messages"?"Messages non lus":""},c(T.badge),11,dt)):P("",!0)]),_:2},1032,["to"]))),128))]),W(Qe),e("div",ct,[i.value?(t(),pe(A,{key:0,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:Y(()=>{var T;return[(T=i.value)!=null&&T.photo?(t(),s("img",{key:0,src:$.value+i.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,pt)):(t(),s("div",vt,M[4]||(M[4]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):P("",!0),i.value?(t(),pe(A,{key:1,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:Y(()=>[M[5]||(M[5]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),F(o).unreadMessages>-1?(t(),s("span",{key:0,class:X(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":g.value}]),"aria-label":"Messages non lus"},c(F(o).unreadMessages),3)):P("",!0)]),_:1,__:[5]})):P("",!0)])]),u.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:S,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",mt,[D(e("input",{"onUpdate:modelValue":M[0]||(M[0]=T=>p.value=T),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ue(C,["enter"])},null,544),[[Z,p.value]]),e("button",{onClick:C,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},M[6]||(M[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:M[1]||(M[1]=T=>u.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},M[7]||(M[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):P("",!0)])])}}}),Nd=le(ft,[["__scopeId","data-v-47ef24bd"]]),gt={class:"relative"},bt={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},xt={class:"flex justify-around items-center py-2"},ht=["aria-label"],yt=re({__name:"FooterBar",setup(I){const l=fe(),$=Fe();ge();const f=v(!1),o=v(!1),i=ce(()=>[...l.user?[{to:"/",label:"Accueil",icon:"fa-home"},...l.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:$.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]);return me(()=>$.collaborationsPending,n=>{n>0&&(f.value=!0,setTimeout(()=>f.value=!1,300))}),me(()=>$.unreadMessages,n=>{n>0&&(o.value=!0,setTimeout(()=>o.value=!1,300))}),(n,g)=>{const p=xe("RouterLink"),a=xe("router-link");return t(),s("div",gt,[W(be,{name:"slide-up"},{default:Y(()=>[e("nav",bt,[e("div",xt,[(t(!0),s(H,null,ee(i.value,u=>(t(),pe(p,{key:u.to,to:u.to,"aria-label":u.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Y(()=>[e("i",{class:X(["fas text-lg",u.icon])},null,2),u!=null&&u.badge&&u.badge>-1?(t(),s("span",{key:0,class:X(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":u.to==="/collaborations"&&f.value||u.to==="/messages"&&o.value}]),"aria-label":u.to==="/collaborations"?"Collaborations en attente":u.to==="/messages"?"Messages non lus":""},c(u.badge),11,ht)):P("",!0)]),_:2},1032,["to","aria-label"]))),128)),W(a,{to:"/jetonMarket","aria-label":"Aller au marché",class:"fixed bottom-17 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:Y(()=>g[0]||(g[0]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[0]})])])]),_:1})])}}}),Dd=le(yt,[["__scopeId","data-v-44ad3687"]]),_t="/assets/logo-ba4eAQQi.png",wt={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},kt=re({__name:"Loader",props:{isLoading:{type:Boolean}},setup(I){return(l,$)=>(t(),pe(be,{name:"fade"},{default:Y(()=>[l.isLoading?(t(),s("div",wt,$[0]||($[0]=[e("div",{class:"relative p-6"},[e("img",{src:_t,alt:"Logo Espace Cameroun",class:"h-12 w-12 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-or)] border-t-transparent animate-spin"})],-1)]))):P("",!0)]),_:1}))}}),je=le(kt,[["__scopeId","data-v-f60cc94a"]]),$t={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},Ct={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},At={key:0,class:"mb-8"},Pt={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},jt=["disabled"],St={key:0,class:"fas fa-spinner fa-spin mr-2"},Mt={key:1,class:"space-y-4 mb-6"},Vt={class:"flex items-center gap-3"},Et={class:"text-[var(--espace-vert)] font-medium"},zt={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},Ft={class:"flex items-center gap-2"},It=["onClick"],Lt=["onClick"],Tt={key:2,class:"text-center text-gray-500"},Ot=re({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(I,{emit:l}){const $=l,f=ue(),o=v(!1),i=v(!1),n=v({id:null,phone_number:"",payment_service:""}),g=()=>{i.value=!0,n.value={id:null,phone_number:"",payment_service:""}},p=b=>{i.value=!0,n.value={id:b.id,phone_number:b.phone_number,payment_service:b.payment_service}},a=()=>{i.value=!1,n.value={id:null,phone_number:"",payment_service:""}},u=async()=>{var h,r;if(!/^6[0-9]{8}$/.test(n.value.phone_number)){f.error("Le numéro de téléphone doit commencer par 6 et contenir 9 chiffres.");return}o.value=!0;try{n.value.id?(await R.put(`/wallets/${n.value.id}`,n.value),f.success("Portefeuille mis à jour avec succès !")):(await R.post("/wallets",n.value),f.success("Portefeuille créé avec succès !")),$("refresh-wallets"),a()}catch(d){f.error(((r=(h=d.response)==null?void 0:h.data)==null?void 0:r.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",d)}finally{o.value=!1}},S=async b=>{var h,r;if(confirm("Êtes-vous sûr de vouloir supprimer ce portefeuille ?")){o.value=!0;try{await R.delete(`/wallets/${b}`),f.success("Portefeuille supprimé avec succès !"),$("refresh-wallets")}catch(d){f.error(((r=(h=d.response)==null?void 0:h.data)==null?void 0:r.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",d)}finally{o.value=!1}}};return(b,h)=>b.show?(t(),s("div",$t,[e("div",Ct,[e("button",{onClick:h[0]||(h[0]=r=>b.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"✖"),h[9]||(h[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"💳 Gérer Mes Portefeuilles",-1)),i.value?(t(),s("div",At,[e("form",{onSubmit:ie(u,["prevent"]),class:X(["space-y-5",{"bg-green-50 p-4 rounded-lg":!n.value.id,"bg-yellow-50 p-4 rounded-lg":n.value.id}])},[e("h3",Pt,c(n.value.id?"Modifier le Portefeuille":"Créer un Nouveau Portefeuille"),1),e("div",null,[h[3]||(h[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Numéro de téléphone",-1)),D(e("input",{"onUpdate:modelValue":h[1]||(h[1]=r=>n.value.phone_number=r),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Z,n.value.phone_number]])]),e("div",null,[h[5]||(h[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),D(e("select",{"onUpdate:modelValue":h[2]||(h[2]=r=>n.value.payment_service=r),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},h[4]||(h[4]=[e("option",{value:"",disabled:""},"Sélectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[_e,n.value.payment_service]])]),e("button",{type:"submit",disabled:o.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[o.value?(t(),s("i",St)):P("",!0),k(" "+c(n.value.id?"Mettre à jour":"Créer"),1)],8,jt),e("button",{onClick:a,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):P("",!0),b.wallets&&b.wallets.length>0?(t(),s("div",Mt,[(t(!0),s(H,null,ee(b.wallets,r=>(t(),s("div",{key:r.id||r.phone_number,class:X(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":r.payment_service==="ORANGE","bg-purple-50":r.payment_service==="MTN"}])},[e("div",Vt,[e("span",Et,c(r.phone_number)+" ("+c(r.payment_service)+") ",1),r.is_active!==!1?(t(),s("span",zt,"Actif")):P("",!0)]),e("div",Ft,[e("button",{onClick:d=>p(r),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},h[6]||(h[6]=[e("i",{class:"fas fa-edit"},null,-1),k(" Modifier ")]),8,It),e("button",{onClick:d=>S(r.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},h[7]||(h[7]=[e("i",{class:"fas fa-trash"},null,-1),k(" Supprimer ")]),8,Lt)])],2))),128))])):(t(),s("p",Tt,"Aucun portefeuille créé.")),i.value?P("",!0):(t(),s("button",{key:3,onClick:g,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},h[8]||(h[8]=[e("i",{class:"fas fa-plus"},null,-1),k(" Ajouter un portefeuille ")])))])])):P("",!0)}}),Ut=le(Ot,[["__scopeId","data-v-7c50b5d1"]]),qt={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},Rt={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},Nt={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},Dt={key:0,class:"space-y-4"},Wt={class:"flex flex-col"},Jt={class:"text-[var(--espace-vert)] font-medium"},Bt={class:"text-xs text-gray-500"},Ht={class:"text-gray-700 text-sm sm:text-base"},Gt={class:"flex items-center gap-2"},Xt=["onClick"],Kt=["onClick"],Qt={key:1,class:"text-center text-gray-500"},Zt={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},Yt={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},es=["value"],ts=["disabled"],ss={key:0,class:"fas fa-spinner fa-spin mr-2"},os={key:1,class:"border-t pt-4 mt-2"},as=re({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(I,{emit:l}){const $=I,f=l,o=ue(),i=v(!1),n=v([...$.offers]);me(()=>$.offers,r=>{n.value=[...r]},{deep:!0});const g=v(!1),p=v({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),a=()=>{g.value=!0,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},u=r=>{g.value=!0,p.value={id:r.id,nombre_jetons:r.nombre_jetons,prix_unitaire:r.prix_unitaire,description:r.description||"",wallet_id:r.wallet_id}},S=()=>{g.value=!1,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},b=async()=>{var r,d;i.value=!0;try{if(p.value.id){const C=await R.put(`/jeton_market/updateOffer/${p.value.id}`,p.value);o.success("Offre mise à jour avec succès !");const V=n.value.findIndex(_=>_.id===p.value.id);V!==-1&&(n.value[V]={...n.value[V],...p.value})}else{const C=await R.post("/jeton_market/offer",p.value);o.success("Offre créée avec succès !"),n.value.push(C.data)}f("refresh-offers"),S()}catch(C){o.error(((d=(r=C.response)==null?void 0:r.data)==null?void 0:d.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",C)}finally{i.value=!1}},h=async r=>{var d,C;if(confirm("Êtes-vous sûr de vouloir supprimer cette offre ?")){i.value=!0;try{await R.delete(`/jeton_market/deleteOffer/${r}`),o.success("Offre supprimée avec succès !"),n.value=n.value.filter(V=>V.id!==r),f("refresh-offers")}catch(V){o.error(((C=(d=V.response)==null?void 0:d.data)==null?void 0:C.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",V)}finally{i.value=!1}}};return(r,d)=>r.show?(t(),s("div",qt,[e("div",Rt,[e("button",{onClick:d[0]||(d[0]=C=>r.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"✖"),d[12]||(d[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"📋 Mes Offres",-1)),e("div",Nt,[n.value.length>0?(t(),s("div",Dt,[(t(!0),s(H,null,ee(n.value,C=>{var V,_;return t(),s("div",{key:C.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",Wt,[e("span",Jt,c(C.nombre_jetons)+" jetons • "+c(C.total_prix)+" FCFA ",1),e("span",Bt,"PU : "+c(C.prix_unitaire)+" FCFA",1),e("p",Ht,[d[4]||(d[4]=e("strong",null,"💳 ",-1)),k(" "+c((V=C.wallet)==null?void 0:V.phone_number)+" ("+c((_=C.wallet)==null?void 0:_.payment_service)+") ",1)])]),e("div",Gt,[e("button",{onClick:M=>u(C),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},d[5]||(d[5]=[e("i",{class:"fas fa-edit"},null,-1),k(" Modifier ")]),8,Xt),e("button",{onClick:M=>h(C.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},d[6]||(d[6]=[e("i",{class:"fas fa-trash"},null,-1),k(" Supprimer ")]),8,Kt)])])}),128))])):(t(),s("p",Qt,"Aucune offre créée."))]),g.value?(t(),s("div",Zt,[e("form",{onSubmit:ie(b,["prevent"]),class:X(["space-y-4",{"bg-green-50 p-4 rounded-lg":!p.value.id,"bg-yellow-50 p-4 rounded-lg":p.value.id}])},[e("h3",Yt,c(p.value.id?"Modifier l'offre":"Créer une nouvelle offre"),1),e("div",null,[d[7]||(d[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantité",-1)),D(e("input",{"onUpdate:modelValue":d[1]||(d[1]=C=>p.value.nombre_jetons=C),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,p.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[d[8]||(d[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":d[2]||(d[2]=C=>p.value.prix_unitaire=C),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,p.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[d[10]||(d[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),D(e("select",{"onUpdate:modelValue":d[3]||(d[3]=C=>p.value.wallet_id=C),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[d[9]||(d[9]=e("option",{value:"",disabled:""},"Sélectionnez un portefeuille",-1)),(t(!0),s(H,null,ee(r.wallets,C=>(t(),s("option",{key:C.id,value:C.id},c(C.phone_number)+" ("+c(C.payment_service)+") ",9,es))),128))],512),[[_e,p.value.wallet_id]])]),e("button",{type:"submit",disabled:i.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[i.value?(t(),s("i",ss)):P("",!0),k(" "+c(p.value.id?"Mettre à jour":"Créer"),1)],8,ts),e("button",{onClick:S,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",os,[e("button",{onClick:a,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},d[11]||(d[11]=[e("i",{class:"fas fa-plus"},null,-1),k(" Nouvelle offre ")]))]))])])):P("",!0)}}),rs=le(as,[["__scopeId","data-v-03e4f804"]]),ls={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},ns={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},is={class:"flex items-center justify-between mb-4"},us={class:"flex items-center gap-3"},ds=["src"],cs={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},ps={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},vs={class:"text-gray-700 text-sm sm:text-base"},ms={class:"text-gray-700 text-sm sm:text-base"},fs={class:"text-xs text-gray-500 mt-3"},gs=["onClick"],bs={key:0,class:"col-span-full text-center py-4"},xs={key:1,class:"text-center text-gray-600 py-24"},hs={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},ys={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},_s=["value"],ws={class:"text-sm text-gray-500"},ks={class:"font-bold"},$s={class:"font-bold"},Cs=["disabled"],As={key:0,class:"fas fa-spinner fa-spin mr-2"},Ps={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},js={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},Ss={class:"space-y-4"},Ms={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Vs={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Es=["value"],zs={class:"text-sm text-[var(--espace-gris)]"},Fs={class:"font-bold"},Is=["disabled"],Ls={key:0,class:"fas fa-spinner fa-spin mr-2"},Ts={key:1,class:""},Os={key:2,class:""},Us={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},qs={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Rs=["disabled"],Ns={key:0,class:"fas fa-spinner fa-spin mr-2"},Ds={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},Ws=re({__name:"JetonMarket",setup(I){const l=()=>{const B=window.location.hostname;return B==="localhost"||B==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},$=ce(()=>l());ge();const f=v([]),o=v([]),i=v({quantityMin:""}),n=v(!1),g=v(!1),p=v({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),a=v(!1),u=v(1),S=v(1),b=v(!1),h=v(!0),r=v(!1),d=v(!1),C=v({walletId:""}),V=v(null),_=v(0),M=v([]),A=v(!1),T=v({id:0,phone_number:"",payment_service:""}),K=v(!1),U=v(!1),se=ue(),ne=()=>{n.value=!1,g.value=!1,d.value=!1,A.value=!1,K.value=!1,U.value=!1},G=async()=>{try{const B=await R.get("/wallets");M.value=B.data.data||[]}catch(B){console.error("Erreur lors du chargement des portefeuilles:",B),M.value=[]}},y=async()=>{try{const B=await R.get("/jeton_market/my-offers");o.value=B.data.data||[]}catch(B){console.error("Erreur lors du chargement des offres de l'utilisateur:",B),o.value=[]}},w=async()=>{await G(),ne(),M.value.length===0?A.value=!0:n.value=!0},E=async()=>{var B,x;a.value=!0;try{ne();const ae=await R.post("/wallets",T.value);se.success(ae.data.message||"Portefeuille créé avec succès !"),A.value=!1,await G(),n.value=!0}catch(ae){se.error(((x=(B=ae.response)==null?void 0:B.data)==null?void 0:x.message)||"Erreur lors de la création du portefeuille"),console.error("Erreur:",ae)}finally{a.value=!1,T.value={id:0,phone_number:"",payment_service:""}}},m=()=>{g.value=!1,u.value=1,f.value=[],O()},J=async()=>{r.value=!0,u.value=1,f.value=[],await O(),r.value=!1},z=ce(()=>f.value.filter(B=>!i.value.quantityMin||B.nombre_jetons>=parseInt(i.value.quantityMin,10))),N=ce(()=>p.value.nombre_jetons*p.value.prix_unitaire),te=ce(()=>N.value*.05),O=async()=>{if(!(b.value||u.value>S.value)){b.value=!0;try{const B={page:u.value,quantity_min:i.value.quantityMin||void 0},x=await R.get("/jeton_market/offers",{params:B});f.value=[...f.value,...x.data.data],S.value=x.data.last_page,u.value+=1}catch(B){console.error("Erreur lors du chargement des offres:",B)}finally{b.value=!1,h.value=!1}}},j=()=>{const B=document.querySelector(".grid");if(B){const{scrollTop:x,clientHeight:ae,scrollHeight:q}=B;x+ae>=q-300&&!b.value&&O()}},L=async()=>{var B,x,ae;if(!p.value.walletId){se.error("Veuillez sélectionner un portefeuille.");return}a.value=!0;try{const q=await R.post("/jeton_market/offer",{...p.value,wallet_id:p.value.walletId,total_price:N.value});n.value=!1,se.success(((B=q==null?void 0:q.data)==null?void 0:B.message)||"Offre créée avec succès !"),O()}catch(q){se.error(((ae=(x=q.response)==null?void 0:x.data)==null?void 0:ae.message)||"Erreur lors de la création de l'offre"),console.error("Erreur lors de la création de l'offre:",q.response)}finally{a.value=!1}},Q=(B,x,ae)=>{ne();const q=f.value.find(we=>we.id===B);q&&(V.value=B,_.value=q.total_prix,C.value.walletId="",d.value=!0)},oe=async()=>{var B,x;if(!V.value||!C.value.walletId){se.error("Veuillez sélectionner un portefeuille.");return}a.value=!0;try{const ae=await R.post(`/jeton_market/buy/${V.value}`,{wallet_id:C.value.walletId});d.value=!1,O(),se.success(ae.data.message||"Achat effectué avec succès !")}catch(ae){console.error("Erreur lors de l'achat:",ae.response.data.message),se.error(((x=(B=ae.response)==null?void 0:B.data)==null?void 0:x.message)||"Erreur lors de l'achat")}finally{a.value=!1,V.value=null,_.value=0}},de=B=>{var x;return console.log(B.user_id),(x=B.user)!=null&&x.commercant?`/commercants/${B.user.commercant.id}`:`/profile/public/${B.user_id}`};return ve(()=>{h.value=!0,O(),G(),y(),window.addEventListener("scroll",j)}),Pe(()=>{window.removeEventListener("scroll",j)}),(B,x)=>{const ae=xe("router-link");return t(),s(H,null,[W(je,{isLoading:h.value},null,8,["isLoading"]),e("div",ls,[e("div",ns,[W(ae,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:Y(()=>x[16]||(x[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),x[17]||(x[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"🌍 Marché"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute sécurité 🚀")],-1)),x[18]||(x[18]=e("div",{class:"w-10"},null,-1))]),f.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:j},[(t(!0),s(H,null,ee(z.value,q=>(t(),s("div",{key:q.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",is,[e("div",us,[W(ae,{to:de(q),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:Y(()=>[q.user.photo?(t(),s("img",{key:0,src:$.value+q.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,ds)):(t(),s("i",cs))]),_:2},1032,["to"]),W(ae,{to:de(q),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:Y(()=>[k(c(q.user.nom),1)]),_:2},1032,["to"])]),e("span",ps,[k(c(q.nombre_jetons)+" ",1),x[19]||(x[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",vs,[x[20]||(x[20]=e("strong",null,"💵 Prix :",-1)),k(" "+c(q.prix_unitaire)+" FCFA/jeton",1)]),e("p",ms,[x[21]||(x[21]=e("strong",null,"💰 Total :",-1)),k(" "+c(q.total_prix)+" FCFA ",1)]),e("p",fs,"📅 Publiée le "+c(new Date(q.date_creation).toLocaleDateString()),1),e("button",{onClick:we=>{var ke,$e;return Q(q.id,(ke=q.wallet)==null?void 0:ke.phone_number,($e=q.wallet)==null?void 0:$e.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," ⚡ Acheter ",8,gs)]))),128)),a.value?(t(),s("div",bs,x[22]||(x[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):P("",!0)],32)):(t(),s("div",xs,[x[25]||(x[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),x[26]||(x[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[x[23]||(x[23]=k("Soyez le premier à ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:w},"poster une offre"),x[24]||(x[24]=k(" 🎉"))])])),W(be,{name:"fade"},{default:Y(()=>[n.value?(t(),s("div",hs,[e("div",ys,[e("button",{onClick:x[0]||(x[0]=q=>n.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"✖"),x[35]||(x[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"📝 Nouvelle Offre",-1)),e("form",{onSubmit:ie(L,["prevent"]),class:"space-y-5"},[e("div",null,[x[27]||(x[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantité",-1)),D(e("input",{"onUpdate:modelValue":x[1]||(x[1]=q=>p.value.nombre_jetons=q),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,p.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[x[28]||(x[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":x[2]||(x[2]=q=>p.value.prix_unitaire=q),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,p.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[x[30]||(x[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille à utiliser",-1)),D(e("select",{"onUpdate:modelValue":x[3]||(x[3]=q=>p.value.walletId=q),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[x[29]||(x[29]=e("option",{value:"",disabled:""},"Sélectionnez un portefeuille",-1)),(t(!0),s(H,null,ee(M.value,q=>(t(),s("option",{key:q.id,value:q.id},c(q.phone_number)+" ("+c(q.payment_service)+") ",9,_s))),128))],512),[[_e,p.value.walletId]])]),e("p",ws,[x[31]||(x[31]=k("💰 Total: ")),e("span",ks,c(N.value),1),x[32]||(x[32]=k(" FCFA | 🏦 Commission (5%): ")),e("span",$s,c(te.value),1),x[33]||(x[33]=k(" FCFA"))]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),s("i",As)):P("",!0),x[34]||(x[34]=k(" Publier "))],8,Cs)],32)])])):P("",!0)]),_:1}),W(be,{name:"fade"},{default:Y(()=>[g.value?(t(),s("div",Ps,[e("div",js,[e("button",{onClick:x[4]||(x[4]=q=>g.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"✖"),x[36]||(x[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"🎛️ Filtres",-1)),e("div",Ss,[D(e("input",{"onUpdate:modelValue":x[5]||(x[5]=q=>i.value.quantityMin=q),type:"number",placeholder:"Quantité min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[Z,i.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:m,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," 🔍 Appliquer ")])])):P("",!0)]),_:1}),W(be,{name:"fade"},{default:Y(()=>[d.value?(t(),s("div",Ms,[e("div",Vs,[e("button",{onClick:x[6]||(x[6]=q=>d.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"✖"),x[41]||(x[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"📲 Paiement",-1)),e("form",{onSubmit:ie(oe,["prevent"]),class:"space-y-5"},[e("div",null,[x[38]||(x[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Sélectionnez votre portefeuille",-1)),D(e("select",{"onUpdate:modelValue":x[7]||(x[7]=q=>C.value.walletId=q),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[x[37]||(x[37]=e("option",{value:"",disabled:""},"Sélectionnez un portefeuille",-1)),(t(!0),s(H,null,ee(M.value,q=>(t(),s("option",{key:q.id,value:q.id},c(q.phone_number)+" ("+c(q.payment_service)+") ",9,Es))),128))],512),[[_e,C.value.walletId]])]),e("p",zs,[x[39]||(x[39]=k("Montant total : ")),e("span",Fs,c(_.value),1),x[40]||(x[40]=k(" FCFA"))]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),s("i",Ls)):P("",!0),a.value?(t(),s("span",Ts,"Veuillez patienter")):(t(),s("span",Os,"Confirmer le paiement"))],8,Is)],32)])])):P("",!0)]),_:1}),W(be,{name:"fade"},{default:Y(()=>[A.value?(t(),s("div",Us,[e("div",qs,[e("button",{onClick:x[8]||(x[8]=q=>A.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"✖"),x[46]||(x[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"💳 Créer un Portefeuille ",-1)),e("form",{onSubmit:ie(E,["prevent"]),class:"space-y-5"},[e("div",null,[x[42]||(x[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Numéro de téléphone",-1)),D(e("input",{"onUpdate:modelValue":x[9]||(x[9]=q=>T.value.phone_number=q),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Z,T.value.phone_number]])]),e("div",null,[x[44]||(x[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),D(e("select",{"onUpdate:modelValue":x[10]||(x[10]=q=>T.value.payment_service=q),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},x[43]||(x[43]=[e("option",{value:"",disabled:""},"Sélectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[_e,T.value.payment_service]])]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),s("i",Ns)):P("",!0),x[45]||(x[45]=k(" Créer "))],8,Rs)],32)])])):P("",!0)]),_:1}),K.value?(t(),pe(Ut,{key:2,show:K.value,wallets:M.value,onClose:x[11]||(x[11]=q=>K.value=!1),onRefreshWallets:G},null,8,["show","wallets"])):P("",!0),U.value?(t(),pe(rs,{key:3,show:U.value,wallets:M.value,offers:o.value,onClose:x[12]||(x[12]=q=>U.value=!1),onRefreshOffers:O},null,8,["show","wallets","offers"])):P("",!0),e("div",Ds,[e("button",{onClick:x[13]||(x[13]=q=>{ne(),g.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},x[47]||(x[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:J,class:X(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":r.value}])},[e("i",{class:X(["fas fa-sync-alt text-xl",{"fa-spin":r.value}])},null,2),x[48]||(x[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:x[14]||(x[14]=q=>{ne(),K.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},x[49]||(x[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:w,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},x[50]||(x[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:x[15]||(x[15]=q=>{ne(),U.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},x[51]||(x[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),Wd=le(Ws,[["__scopeId","data-v-705e45f4"]]),Js={class:"mb-4"},Bs={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},Hs={class:"relative"},Gs={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},Xs=["type","value","required","placeholder"],Ks={key:0,class:"text-red-500 text-sm mt-1"},he=re({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(I){return(l,$)=>(t(),s("div",Js,[e("label",Bs,c(I.label),1),e("div",Hs,[e("span",Gs,[e("i",{class:X(`fas ${I.icon}`)},null,2)]),e("input",{type:I.type,value:I.modelValue,onInput:$[0]||($[0]=f=>l.$emit("update:modelValue",f.target.value)),required:I.required,placeholder:I.placeholder,class:X(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",I.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,Xs)]),I.error?(t(),s("p",Ks,c(I.error),1)):P("",!0)]))}}),Qs={class:"overflow-y-scroll flex items-center justify-center px-4 py-4"},Zs={class:"w-full max-w-lg bg-gray-30 rounded-2xl shadow-xl p-6 sm:p-10"},Ys=["disabled"],eo={key:0,class:"fas fa-spinner fa-spin mr-2"},to={key:1,class:"fas fa-sign-in-alt mr-2"},so={class:"text-center text-sm text-gray-600 mt-6"},oo=re({__name:"Login",setup(I){const l=v({login:"",mot_de_passe:""}),$=v({}),f=ge(),o=ue(),i=fe(),n=v(!1),g=async()=>{var p;try{n.value=!0,await i.login({login:l.value.login,mot_de_passe:l.value.mot_de_passe}),o.success("Connexion réussie !"),f.push({name:"home"})}catch(a){console.error("Erreur lors de la connexion:",a);const u=a.message||"Erreur lors de la connexion. Veuillez vérifier vos informations.";o.error(u),((p=a.response)==null?void 0:p.status)===422&&($.value=a.response.data.errors||{})}finally{n.value=!1}};return(p,a)=>{const u=xe("router-link");return t(),s("div",Qs,[e("div",Zs,[a[4]||(a[4]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-sign-in-alt mr-2 text-[var(--espace-or)]"}),k(" Connexion ")],-1)),a[5]||(a[5]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[k(" Connectez-vous à "),e("strong",null,"Espace Cameroun"),k(" pour accéder à vos achats et votre espace commerçant. ")],-1)),e("form",{onSubmit:ie(g,["prevent"]),class:"space-y-5"},[W(he,{label:"Email ou Téléphone",icon:"fa-envelope",modelValue:l.value.login,"onUpdate:modelValue":a[0]||(a[0]=S=>l.value.login=S),type:"text",required:"",error:$.value.login},null,8,["modelValue","error"]),W(he,{label:"Mot de passe",icon:"fa-lock",modelValue:l.value.mot_de_passe,"onUpdate:modelValue":a[1]||(a[1]=S=>l.value.mot_de_passe=S),type:"password",required:"",error:$.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:n.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[n.value?(t(),s("i",eo)):(t(),s("i",to)),e("span",null,c(n.value?"Connexion...":"Se connecter"),1)],8,Ys)],32),e("p",so,[a[3]||(a[3]=k(" Pas de compte ? ")),W(u,{to:"/register",class:"text-[var(--espace-vert)] font-medium hover:text-[var(--espace-or)] hover:underline"},{default:Y(()=>a[2]||(a[2]=[k(" Inscrivez-vous ici ")])),_:1,__:[2]})])])])}}}),Jd=le(oo,[["__scopeId","data-v-8c3a8b22"]]),ao={class:"h-full bg-gray-100 pt-5 px-4 sm:px-2"},ro={class:"h-full w-full overflow-y-scroll"},lo={key:0},no={key:1,class:"grid grid-cols-1 pt-4 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},io={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},uo={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},co=["src"],po=["onClick"],vo=["onClick"],mo={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},fo={class:"p-2"},go={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)] truncate"},bo=["onClick"],xo={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},ho={class:"text-md font-bold text-[var(--espace-or)] mt-2"},yo={class:"text-sm text-[var(--espace-gris)]"},_o={class:"text-sm text-[var(--espace-gris)] mt-2"},wo={class:"ml-4"},ko={key:2,class:"text-center text-[var(--espace-gris)]"},$o={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},Co={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},Ao={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},Po={key:0,class:"grid grid-cols-3 gap-2 mb-2"},jo=["src"],So=["onClick"],Mo=["value"],Vo={key:0,class:"flex items-center gap-2"},Eo={class:"flex gap-4 pt-2"},zo=["disabled"],Fo={key:0,class:"fas fa-spinner fa-spin mr-2"},Io=re({__name:"CommercantProduits",setup(I){const l=fe(),$=ge(),f=ue(),o=v(!1),i=v(!1),n=v([]),g=v([]),p=v(!1),a=v(!1),u=v(null),S=v({}),b=v({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),h=v([]),r=v([]),d=v(null),C=async()=>{o.value=!0;try{const y=await R.get("/commercant/produits");n.value=y.data.produits.map(w=>({...w,photo_url:w.photos&&w.photos.length>0?w.photos[0]:"https://via.placeholder.com/150"})),console.log(y.data),n.value.forEach(w=>{S.value[w.id]||(S.value[w.id]=0)})}catch{f.error("Erreur lors du chargement des produits")}finally{o.value=!1}},V=async()=>{o.value=!0;try{const y=await R.get("/categories");g.value=y.data.categories}catch{f.error("Erreur lors de la chargement des catégories")}finally{o.value=!1}},_=()=>{b.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},h.value=[],r.value=[],p.value=!0},M=y=>{u.value=y,b.value={nom:y.nom,description:y.description||"",prix:y.prix,stock:y.quantite,category_id:y.category_id,collaboratif:!!y.collaboratif,marge_min:y.marge_min||0},h.value=[],r.value=y.photos||[],S.value[y.id]||(S.value[y.id]=0),a.value=!0},A=y=>{const w=y.target;if(w.files){const E=Array.from(w.files);h.value=[...h.value,...E],r.value=[...r.value,...E.map(m=>URL.createObjectURL(m))],d.value&&(d.value.value="")}},T=y=>{h.value.splice(y,1),r.value.splice(y,1)},K=async()=>{var w,E;i.value=!0;const y=new FormData;y.append("nom",b.value.nom),y.append("description",b.value.description),y.append("prix",b.value.prix.toString()),y.append("stock",b.value.stock.toString()),y.append("category_id",b.value.category_id),y.append("collaboratif",b.value.collaboratif?"1":"0"),y.append("marge_min",b.value.marge_min.toString()),h.value.forEach(m=>y.append("photos[]",m));for(let[m,J]of y.entries())console.log(`${m}:`,J);try{if(p.value){const m=await R.post("/commercant/produits",y,{headers:{"Content-Type":"multipart/form-data"}});console.log(m.data),f.success("Produit ajouté avec succès")}else{const m=await R.post(`/commercant/produits/${(w=u.value)==null?void 0:w.id}`,y,{headers:{"Content-Type":"multipart/form-data"}});f.success("Produit modifié avec succès")}await C(),U()}catch(m){f.error(((E=m.response)==null?void 0:E.data.message)||"Erreur lors de la sauvegarde du produit")}finally{i.value=!1}},U=()=>{p.value=!1,a.value=!1,u.value=null,h.value=[],r.value=[]},se=ce(()=>y=>S.value[y]||0),ne=y=>{var m;const w=n.value.find(J=>J.id===y),E=(m=w==null?void 0:w.photos)!=null&&m.length?w.photos.length-1:0;S.value[y]=Math.min((S.value[y]||0)+1,E)},G=y=>{S.value[y]=Math.max((S.value[y]||0)-1,0)};return ve(()=>{var y;if(!((y=l.user)!=null&&y.commercant)){f.error("Accès réservé aux commerçants"),$.push("/");return}C(),V()}),(y,w)=>{const E=xe("router-link");return t(),s(H,null,[W(je,{isLoading:o.value},null,8,["isLoading"]),e("div",ao,[e("div",ro,[e("div",{class:"flex justify-between items-center"},[w[9]||(w[9]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),k(" Mes Produits ")],-1)),e("button",{onClick:_,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},w[8]||(w[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),k(" Ajouter un produit ")]))]),o.value?(t(),s("div",lo,w[10]||(w[10]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):n.value.length?(t(),s("div",no,[(t(!0),s(H,null,ee(n.value,m=>(t(),s("div",{key:m.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",io,[m.collaboratif?(t(),s("span",uo," Collaboratif ")):P("",!0),W(E,{to:`/produits/${m.id}`,class:"block relative"},{default:Y(()=>[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${se.value(m.id)*100}%)`})},[(t(!0),s(H,null,ee(m.photos,(J,z)=>(t(),s("img",{key:z,src:J,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,co))),128))],4)]),_:2},1032,["to"]),m.photos&&m.photos.length>1?(t(),s("button",{key:1,onClick:J=>G(m.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},w[11]||(w[11]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,po)):P("",!0),m.photos&&m.photos.length>1?(t(),s("button",{key:2,onClick:J=>ne(m.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},w[12]||(w[12]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,vo)):P("",!0),m.photos&&m.photos.length>1?(t(),s("div",mo,[(t(!0),s(H,null,ee(m.photos,(J,z)=>(t(),s("span",{key:z,class:X(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":z===se.value(m.id)}])},null,2))),128))])):P("",!0)]),e("div",fo,[e("h2",go,[W(E,{to:`/produits/${m.id}`,class:"block relative"},{default:Y(()=>[k(c(m.nom),1)]),_:2},1032,["to"]),e("button",{onClick:J=>M(m),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},w[13]||(w[13]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,bo)]),e("p",xo,c(m.description||"Aucune"),1),e("p",ho,c(m.prix)+" FCFA",1),e("p",yo,"Stock: "+c(m.quantite),1),e("div",_o,[e("span",null,[w[14]||(w[14]=e("i",{class:"fas fa-eye mr-1"},null,-1)),k(" "+c(m.raw_views_count||0)+" vues",1)]),e("span",wo,[w[15]||(w[15]=e("i",{class:"fas fa-heart mr-1"},null,-1)),k(" "+c(m.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",ko,"Aucun produit pour le moment."))]),W(be,{name:"fade"},{default:Y(()=>{var m;return[p.value||a.value?(t(),s("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ie(U,["self"])},[e("div",$o,[e("h2",Co,c(p.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:ie(K,["prevent"]),class:"space-y-4"},[e("div",null,[w[19]||(w[19]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",Ao,[r.value.length?(t(),s("div",Po,[(t(!0),s(H,null,ee(r.value,(J,z)=>(t(),s("div",{key:z,class:"relative w-full h-20"},[e("img",{src:J,class:"w-full h-full object-cover rounded-lg",alt:"Prévisualisation"},null,8,jo),e("button",{onClick:ie(N=>T(z),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},w[16]||(w[16]=[e("i",{class:"fas fa-times"},null,-1)]),8,So)]))),128))])):P("",!0),e("input",{ref_key:"fileInput",ref:d,type:"file",multiple:"",onChange:A,class:"hidden",accept:"image/*"},null,544),r.value.length?(t(),s("button",{key:2,type:"button",onClick:w[1]||(w[1]=J=>{var z;return(z=d.value)==null?void 0:z.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},w[18]||(w[18]=[e("i",{class:"fas fa-plus mr-2"},null,-1),k(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:w[0]||(w[0]=J=>{var z;return(z=d.value)==null?void 0:z.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},w[17]||(w[17]=[e("i",{class:"fas fa-camera mr-2"},null,-1),k(" Ajouter une photo ")])))])]),e("div",null,[w[20]||(w[20]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),D(e("input",{"onUpdate:modelValue":w[2]||(w[2]=J=>b.value.nom=J),type:"text",required:"",class:"input-style"},null,512),[[Z,b.value.nom]])]),e("div",null,[w[21]||(w[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":w[3]||(w[3]=J=>b.value.description=J),rows:"3",class:"input-style"},null,512),[[Z,b.value.description]])]),e("div",null,[w[22]||(w[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),D(e("input",{"onUpdate:modelValue":w[4]||(w[4]=J=>b.value.prix=J),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Z,b.value.prix,void 0,{number:!0}]])]),e("div",null,[w[23]||(w[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),D(e("input",{"onUpdate:modelValue":w[5]||(w[5]=J=>b.value.stock=J),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Z,b.value.stock,void 0,{number:!0}]])]),e("div",null,[w[25]||(w[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Catégorie",-1)),D(e("select",{"onUpdate:modelValue":w[6]||(w[6]=J=>b.value.category_id=J),required:"",class:"input-style"},[w[24]||(w[24]=e("option",{value:""},"Sélectionner une catégorie",-1)),(t(!0),s(H,null,ee(g.value,J=>(t(),s("option",{key:J.id,value:J.id},c(J.nom),9,Mo))),128))],512),[[_e,b.value.category_id]])]),p.value||!((m=u.value)!=null&&m.collaboratif)?(t(),s("div",Vo,[D(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":w[7]||(w[7]=J=>b.value.collaboratif=J)},null,512),[[Be,b.value.collaboratif]]),w[26]||(w[26]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):P("",!0),e("div",Eo,[e("button",{type:"submit",disabled:i.value,class:X(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",i.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[i.value?(t(),s("i",Fo)):P("",!0),k(" "+c(p.value?"Ajouter":"Modifier"),1)],10,zo),e("button",{type:"button",onClick:U,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):P("",!0)]}),_:1})])],64)}}}),Bd=le(Io,[["__scopeId","data-v-72acb5f6"]]),Lo={class:"overflow-y-scroll bg-white flex justify-center px-4 pt-8"},To={class:"flex flex-col w-full max-w-lg rounded-2xl sm:p-10"},Oo=["disabled"],Uo={class:"text-center text-sm text-gray-600 mt-6"},qo=re({__name:"Register",setup(I){const l=v({nom:"",telephone:"",email:"",ville:"",mot_de_passe:"",parrain_code:""}),$=v({}),f=ge(),o=Ae(),i=ue(),n=fe();ve(()=>{const a=o.params.code;a&&(l.value.parrain_code=a)});const g=v(!1),p=async()=>{var a,u,S;try{g.value=!0,await n.register(l.value),i.success("Inscription réussie !"),f.push({name:"home"})}catch(b){console.error("Erreur lors de l'inscription:",b);const h=((u=(a=b.response)==null?void 0:a.data)==null?void 0:u.message)||"Erreur lors de l'inscription. Veuillez vérifier vos informations.";i.error(h),((S=b.response)==null?void 0:S.status)===422&&($.value=b.response.data.errors)}finally{g.value=!1}};return(a,u)=>{const S=xe("router-link");return t(),s("div",Lo,[e("div",To,[u[8]||(u[8]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),k(" Créez votre compte ")],-1)),u[9]||(u[9]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[k(" Rejoignez "),e("strong",null,"Espace Cameroun"),k(" et profitez d’une expérience d’achat unique. Vos informations resteront confidentielles. ")],-1)),e("form",{onSubmit:ie(p,["prevent"]),class:"space-y-5"},[W(he,{label:"Nom",icon:"fa-user",modelValue:l.value.nom,"onUpdate:modelValue":u[0]||(u[0]=b=>l.value.nom=b),type:"text",required:"",error:$.value.nom},null,8,["modelValue","error"]),W(he,{label:"Téléphone",icon:"fa-phone",modelValue:l.value.telephone,"onUpdate:modelValue":u[1]||(u[1]=b=>l.value.telephone=b),type:"tel",required:"",error:$.value.telephone},null,8,["modelValue","error"]),W(he,{label:"Email (optionnel)",icon:"fa-envelope",modelValue:l.value.email,"onUpdate:modelValue":u[2]||(u[2]=b=>l.value.email=b),type:"email",error:$.value.email},null,8,["modelValue","error"]),W(he,{label:"Ville",icon:"fa-city",modelValue:l.value.ville,"onUpdate:modelValue":u[3]||(u[3]=b=>l.value.ville=b),type:"text",required:"",error:$.value.ville},null,8,["modelValue","error"]),W(he,{label:"Mot de passe",icon:"fa-lock",modelValue:l.value.mot_de_passe,"onUpdate:modelValue":u[4]||(u[4]=b=>l.value.mot_de_passe=b),type:"password",required:"",error:$.value.mot_de_passe},null,8,["modelValue","error"]),W(he,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:l.value.parrain_code,"onUpdate:modelValue":u[5]||(u[5]=b=>l.value.parrain_code=b),type:"text",error:$.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:g.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[e("i",{class:X([g.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,c(g.value?"Inscription...":"S'inscrire"),1)],8,Oo)],32),e("p",Uo,[u[7]||(u[7]=k(" Vous avez déjà un compte ? ")),W(S,{to:"/login",class:"text-[var(--espace-vert)] font-medium hover:underline"},{default:Y(()=>u[6]||(u[6]=[k(" Connectez-vous ici ")])),_:1,__:[6]})]),u[10]||(u[10]=e("p",{class:"text-center text-xs text-gray-400 mt-2 pb-24"},[k(" En vous inscrivant, vous acceptez nos "),e("a",{href:"/conditions",class:"hover:underline text-[var(--espace-vert)]"},"conditions d'utilisation"),k(" et notre "),e("a",{href:"/confidentialite",class:"hover:underline text-[var(--espace-vert)]"},"politique de confidentialité"),k(". ")],-1))])])}}}),Hd=le(qo,[["__scopeId","data-v-470ef40a"]]),Ro={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},No={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},Do={class:"p-6"},Wo={key:0,class:"grid md:grid-cols-3 gap-6"},Jo={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},Bo={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Ho={class:"font-extrabold text-lg mb-2"},Go={class:"mb-2 text-sm opacity-90"},Xo={class:"text-3xl font-extrabold"},Ko={class:"flex flex-col text-sm font-medium text-gray-700"},Qo={key:0,class:"text-xs text-red-600 mt-1"},Zo={class:"flex gap-4"},Yo=["value"],ea=["src"],ta={key:0,class:"text-xs text-red-600 mt-1 block"},sa=["disabled"],oa={class:"text-xs text-gray-400 mt-4 text-center"},aa=re({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(I,{emit:l}){const $=l,f=ue(),o=v(""),i=v(""),n=v(""),g=v(!1),p=v(!1),a=v(!1),u=h=>{o.value=h,g.value=!1,p.value=!1,i.value="",n.value=""},S=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],b=async()=>{if(g.value=!n.value,p.value=!i.value,g.value||p.value){f.error("Veuillez remplir tous les champs correctement.");return}a.value=!0;try{console.log({subscription_type:o.value,payment_service:i.value,phone_number:n.value});const h=await R.post("/upgrade-to-premium",{subscription_type:o.value,payment_service:i.value,phone_number:n.value});a.value=!1,f.success(h.data.message),$("upgraded"),$("close")}catch(h){h.response&&h.response.data?(h.response.data,f.error("Paiement échoué :Verifiez vos informations et réessayer")):f.error("Verifiez vos informations et réessayer."),console.error(h)}finally{a.value=!1}};return(h,r)=>h.isOpen?(t(),s("div",Ro,[e("div",No,[r[17]||(r[17]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"🚀 Passez à Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",Do,[o.value?(t(),s("div",Jo,[e("div",Bo,[r[11]||(r[11]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:X([{"bg-green-600 text-white":o.value==="monthly","bg-yellow-400 text-gray-900":o.value==="yearly"},"rounded-lg p-4"])},[e("h4",Ho,c(o.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Go,c(o.value==="monthly"?"Accès complet à toutes les fonctionnalités.":"Payez moins, profitez plus avec 16% d’économie !"),1),e("div",Xo,c(o.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:ie(b,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[r[15]||(r[15]=e("h3",{class:"text-xl font-bold mb-2"},"Détails du paiement",-1)),e("label",Ko,[r[12]||(r[12]=k(" Numéro de téléphone ")),D(e("input",{"onUpdate:modelValue":r[4]||(r[4]=d=>n.value=d),type:"tel",placeholder:"Ex: 696428651",class:X(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":g.value}]),onInput:r[5]||(r[5]=d=>g.value=!n.value),required:""},null,34),[[Z,n.value]]),g.value?(t(),s("span",Qo,"Veuillez entrer un numéro valide.")):P("",!0)]),r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Zo,[(t(),s(H,null,ee(S,d=>e("label",{key:d.value,class:X(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":i.value===d.value,"border-gray-300 bg-white":i.value!==d.value,"border-red-500":p.value&&!i.value}])},[D(e("input",{type:"radio",value:d.value,"onUpdate:modelValue":r[6]||(r[6]=C=>i.value=C),class:"hidden"},null,8,Yo),[[He,i.value]]),e("img",{src:d.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,ea),e("span",{class:X([{"text-[var(--espace-vert)]":i.value===d.value,"text-gray-700":i.value!==d.value},"font-semibold select-none"])},c(d.label),3)],2)),64))]),p.value&&!i.value?(t(),s("span",ta," Veuillez sélectionner un service. ")):P("",!0),e("button",{type:"submit",disabled:a.value||!n.value||!i.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[a.value?(t(),s(H,{key:0},[r[13]||(r[13]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),r[14]||(r[14]=k(" Veuillez patienter... "))],64)):(t(),s(H,{key:1},[k(" Payer & Souscrire ")],64))],8,sa),e("button",{type:"button",onClick:r[7]||(r[7]=d=>o.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," ← Retour aux plans "),e("p",oa," 🔒 Paiement sécurisé via "+c(i.value||"votre service"),1)],32)])):(t(),s("div",Wo,[r[10]||(r[10]=ze('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-7e8d0671><div data-v-7e8d0671><h3 class="text-xl font-bold text-gray-800" data-v-7e8d0671>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-7e8d0671>Pour débuter sans frais</p><ul class="space-y-2 text-sm" data-v-7e8d0671><li class="flex items-center gap-2 text-gray-700" data-v-7e8d0671><span data-v-7e8d0671>✔</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-7e8d0671><span data-v-7e8d0671>✔</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-7e8d0671><span data-v-7e8d0671>❌</span> Pas de statistiques détaillées </li><li class="flex items-center gap-2 text-gray-400" data-v-7e8d0671><span data-v-7e8d0671>❌</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-7e8d0671><span data-v-7e8d0671>❌</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-7e8d0671> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:r[1]||(r[1]=d=>u("monthly"))},[r[8]||(r[8]=ze('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-7e8d0671>⭐ Populaire</span><div data-v-7e8d0671><h3 class="text-xl font-bold" data-v-7e8d0671>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-7e8d0671> Accès complet à toutes les fonctionnalités </p><div class="text-3xl font-extrabold mb-2" data-v-7e8d0671>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-7e8d0671><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Produits illimités</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Collaborations illimitées</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Statistiques détaillées</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Badge “Premium”</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:r[0]||(r[0]=ie(d=>u("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:r[3]||(r[3]=d=>u("yearly"))},[r[9]||(r[9]=ze('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-7e8d0671>-16% Économie</span><div data-v-7e8d0671><h3 class="text-xl font-bold" data-v-7e8d0671>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-7e8d0671>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-7e8d0671>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-7e8d0671><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Produits illimités</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Collaborations illimitées</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Statistiques détaillées</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Badge “Premium”</li><li class="flex items-center gap-2" data-v-7e8d0671><span data-v-7e8d0671>✔</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:r[2]||(r[2]=ie(d=>u("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")])]))])])])):P("",!0)}}),ra=le(aa,[["__scopeId","data-v-7e8d0671"]]),la={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},na={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},ia={class:"flex justify-center gap-3 mb-4"},ua=["onClick"],da={key:0,class:"text-xs text-red-600 mt-1"},ca={class:"flex gap-4"},pa=["value"],va=["src"],ma={key:1,class:"text-xs text-red-600 mt-1"},fa={class:"text-center text-lg font-bold mt-6"},ga={class:"text-[var(--espace-vert)]"},ba=["disabled"],xa={key:0},ha={key:1},ya={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_a={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},wa=re({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(I,{emit:l}){const $=l,f=ue(),o=v(10),i=v(""),n=v(""),g=v(o.value*25),p=v(!1),a=v(!1),u=v(!1),S=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],b=[10,20,50,100],h=ce(()=>o.value>=10&&i.value.trim().length===9&&/^6\d{8}$/.test(i.value)&&n.value!==""),r=()=>{g.value=o.value*25},d=M=>{o.value=M,r()},C=()=>{r()},V=()=>{u.value=!(i.value.trim().length===9&&/^6\d{8}$/.test(i.value))},_=async()=>{if(a.value=!n.value,!h.value){f.error("Veuillez remplir tous les champs correctement.");return}p.value=!0;try{const M=await R.post("/acheter-jetons",{nombre_jetons:o.value,payment_service:n.value,phone_number:i.value});console.log(M.data),f.success(M.data.message),$("purchased",o.value),$("close")}catch(M){if(M.response&&M.response.data){const A=M.response.data;f.error(`Erreur: ${A.error_message||"Achat échoué"}. Détails: ${A.details||"Aucun détail."}`)}else f.error("Erreur lors de l'achat. Veuillez réessayer.");console.error(M)}finally{p.value=!1}};return me(i,()=>{V()}),(M,A)=>{const T=xe("router-link");return t(),s("div",la,[e("div",na,[A[7]||(A[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," 🎫 Acheter des Jetons ",-1)),A[8]||(A[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 25 FCFA",-1)),e("div",ia,[(t(),s(H,null,ee(b,K=>e("button",{key:K,type:"button",onClick:U=>d(K),class:X(["rounded-full px-4 py-2 border font-semibold transition",o.value===K?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},c(K),11,ua)),64))]),A[9]||(A[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[k(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),D(e("input",{id:"jetonQuantity","onUpdate:modelValue":A[0]||(A[0]=K=>o.value=K),type:"number",min:"10",placeholder:"Ex: 10",onInput:C,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[Z,o.value,void 0,{number:!0}]]),A[10]||(A[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[k(" Numéro de téléphone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),D(e("input",{id:"phoneNumber","onUpdate:modelValue":A[1]||(A[1]=K=>i.value=K),type:"tel",placeholder:"Ex: 696428651",onInput:V,class:X(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",u.value?"border-red-500":"border-gray-300"])},null,34),[[Z,i.value]]),u.value?(t(),s("p",da," Veuillez entrer un numéro valide (9 chiffres, commençant par 6). ")):P("",!0),A[11]||(A[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",ca,[(t(),s(H,null,ee(S,K=>e("label",{key:K.value,class:X(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":n.value===K.value,"border-gray-300 bg-white":n.value!==K.value}])},[D(e("input",{type:"radio",value:K.value,"onUpdate:modelValue":A[2]||(A[2]=U=>n.value=U),class:"hidden"},null,8,pa),[[He,n.value]]),e("img",{src:K.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,va),e("span",{class:X({"text-[var(--espace-vert)] font-bold":n.value===K.value,"text-gray-700":n.value!==K.value})},c(K.label),3)],2)),64))]),a.value&&!n.value?(t(),s("p",ma," Veuillez sélectionner un service. ")):P("",!0),e("div",fa,[A[4]||(A[4]=k(" Montant total : ")),e("span",ga,c(g.value)+" FCFA",1)]),e("button",{onClick:_,disabled:!h.value||p.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[p.value?(t(),s("span",ha,"veuillez patientez")):(t(),s("span",xa,"Acheter")),p.value?(t(),s("svg",ya,A[5]||(A[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):P("",!0)],8,ba),e("button",_a,[W(T,{to:"/jeton-history",onClick:A[3]||(A[3]=K=>$("close"))},{default:Y(()=>A[6]||(A[6]=[k("Annuler")])),_:1,__:[6]})])])])}}}),ka=le(wa,[["__scopeId","data-v-c7a0e7a2"]]),$a={class:"space-y-6 pb-16"},Ca={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},Aa={key:0,class:"space-y-2 text-[var(--espace-gris)]"},Pa={class:"flex gap-2"},ja=["disabled"],Sa={key:0,class:"fas fa-spinner fa-spin mr-2"},Ma={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},Va={key:0,class:"space-y-2 text-[var(--espace-gris)]"},Ea={key:0,class:"w-24 h-24"},za=["src"],Fa={key:0,class:"mt-2 w-24 h-24"},Ia=["src"],La={class:"flex gap-2"},Ta=["disabled"],Oa={key:0,class:"fas fa-spinner fa-spin mr-2"},Ua=re({__name:"userProfile",props:{user:Object},setup(I){var h,r,d,C,V,_,M,A,T,K,U,se,ne,G,y,w;const l=fe(),$=ue(),f=v(!1),o=v(l.user),i=v(!1),n=v(!1),g=v({nom:((h=o.value)==null?void 0:h.nom)||"",telephone:((r=o.value)==null?void 0:r.telephone)||"",email:((d=o.value)==null?void 0:d.email)||"",ville:((C=o.value)==null?void 0:C.ville)||""}),p=v(!1),a=v({nom:((_=(V=o.value)==null?void 0:V.commercant)==null?void 0:_.nom)||"",description:((A=(M=o.value)==null?void 0:M.commercant)==null?void 0:A.description)||"",email:((K=(T=o.value)==null?void 0:T.commercant)==null?void 0:K.email)||"",telephone:((se=(U=o.value)==null?void 0:U.commercant)==null?void 0:se.telephone)||"",ville:((G=(ne=o.value)==null?void 0:ne.commercant)==null?void 0:G.ville)||"",logo:null,logoPreview:(w=(y=o.value)==null?void 0:y.commercant)!=null&&w.logo?`http://localhost:8000/storage/${o.value.commercant.logo}`:null});console.log(`com ${JSON.stringify(a.value)}`);const u=E=>{var J;const m=(J=E.target.files)==null?void 0:J[0];if(m){if(!m.type.startsWith("image/")){$.error("Veuillez sélectionner une image.");return}if(m.size>2*1024*1024){$.error("Image trop volumineuse (max 2Mo).");return}a.value.logo=m,a.value.logoPreview=URL.createObjectURL(m)}},S=async()=>{var E;i.value=!0;try{const m=await R.post("/updateProfile",g.value);o.value&&(o.value.nom=m.data.user.nom||"",o.value.telephone=m.data.user.telephone||"",o.value.email=m.data.user.email||"",o.value.ville=m.data.user.ville||""),l.user=m.data.user,f.value=!1,$.success("Profil mis à jour avec succès.")}catch(m){$.error(((E=m.response)==null?void 0:E.data.message)||"Erreur lors de la mise à jour.")}finally{i.value=!1}},b=async()=>{var E,m,J;n.value=!0;try{const z=new FormData;z.append("nom",a.value.nom),z.append("description",a.value.description),z.append("email",a.value.email),z.append("telephone",a.value.telephone),z.append("ville",a.value.ville),a.value.logo&&z.append("logo",a.value.logo);const N=await R.post("/commercant/update",z,{headers:{"Content-Type":"multipart/form-data"}});console.log(`com ${JSON.stringify(N.data)}`),(E=o.value)!=null&&E.commercant&&(o.value.commercant.nom=N.data.commercant.nom,o.value.commercant.description=N.data.commercant.description,o.value.commercant.email=N.data.commercant.email,o.value.commercant.telephone=N.data.commercant.telephone,o.value.commercant.ville=N.data.commercant.ville,o.value.commercant.logo=N.data.commercant.logo),l.user=o.value,a.value.logoPreview=N.data.commercant.logo?`http://localhost:8000/storage/${N.data.commercant.logo}`:null,p.value=!1,$.success("Commerce mis à jour avec succès.")}catch(z){$.error(((J=(m=z.response)==null?void 0:m.data)==null?void 0:J.message)||"Erreur lors de la mise à jour du commerce.")}finally{n.value=!1}};return me(()=>l.user,E=>{var m,J,z,N,te,O;o.value=E||null,g.value={nom:(E==null?void 0:E.nom)||"",telephone:(E==null?void 0:E.telephone)||"",email:(E==null?void 0:E.email)||"",ville:(E==null?void 0:E.ville)||""},a.value={nom:((m=E==null?void 0:E.commercant)==null?void 0:m.nom)||"",description:((J=E==null?void 0:E.commercant)==null?void 0:J.description)||"",email:((z=E==null?void 0:E.commercant)==null?void 0:z.email)||"",telephone:((N=E==null?void 0:E.commercant)==null?void 0:N.telephone)||"",ville:((te=E==null?void 0:E.commercant)==null?void 0:te.ville)||"",logo:null,logoPreview:(O=E==null?void 0:E.commercant)!=null&&O.logo?`http://localhost:8000/storage/${E.commercant.logo}`:null}},{immediate:!0}),(E,m)=>{var J,z,N,te,O,j;return t(),s("div",$a,[e("section",Ca,[m[23]||(m[23]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),f.value?(t(),s("form",{key:1,onSubmit:ie(S,["prevent"]),class:"space-y-4"},[e("div",null,[m[18]||(m[18]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),D(e("input",{"onUpdate:modelValue":m[1]||(m[1]=L=>g.value.nom=L),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[Z,g.value.nom]])]),e("div",null,[m[19]||(m[19]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"Téléphone",-1)),D(e("input",{"onUpdate:modelValue":m[2]||(m[2]=L=>g.value.telephone=L),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre téléphone"},null,512),[[Z,g.value.telephone]])]),e("div",null,[m[20]||(m[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),D(e("input",{"onUpdate:modelValue":m[3]||(m[3]=L=>g.value.email=L),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[Z,g.value.email]])]),e("div",null,[m[21]||(m[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),D(e("input",{"onUpdate:modelValue":m[4]||(m[4]=L=>g.value.ville=L),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[Z,g.value.ville]])]),e("div",Pa,[e("button",{type:"submit",disabled:i.value,class:X(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",i.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[i.value?(t(),s("i",Sa)):P("",!0),m[22]||(m[22]=k(" Enregistrer "))],10,ja),e("button",{onClick:m[5]||(m[5]=L=>f.value=!1),class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",Aa,[e("p",null,[m[13]||(m[13]=e("strong",null,"Nom :",-1)),k(" "+c((J=o.value)==null?void 0:J.nom),1)]),e("p",null,[m[14]||(m[14]=e("strong",null,"Téléphone :",-1)),k(" "+c((z=o.value)==null?void 0:z.telephone),1)]),e("p",null,[m[15]||(m[15]=e("strong",null,"Email :",-1)),k(" "+c(((N=o.value)==null?void 0:N.email)||"Non défini"),1)]),e("p",null,[m[16]||(m[16]=e("strong",null,"Ville :",-1)),k(" "+c((te=o.value)==null?void 0:te.ville),1)]),e("p",null,[m[17]||(m[17]=e("strong",null,"Statut Premium :",-1)),k(" "+c((O=o.value)!=null&&O.premium?"Actif":"Inactif"),1)]),e("button",{onClick:m[0]||(m[0]=L=>f.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(j=o.value)!=null&&j.commercant?(t(),s("section",Ma,[m[36]||(m[36]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),p.value?(t(),s("form",{key:1,onSubmit:ie(b,["prevent"]),class:"space-y-4"},[e("div",null,[m[29]||(m[29]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),D(e("input",{"onUpdate:modelValue":m[7]||(m[7]=L=>a.value.nom=L),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[Z,a.value.nom]])]),e("div",null,[m[30]||(m[30]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":m[8]||(m[8]=L=>a.value.description=L),id:"description_commerce",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[Z,a.value.description]])]),e("div",null,[m[31]||(m[31]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),D(e("input",{"onUpdate:modelValue":m[9]||(m[9]=L=>a.value.email=L),id:"email_commerce",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce (optionnel)"},null,512),[[Z,a.value.email]])]),e("div",null,[m[32]||(m[32]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"Téléphone",-1)),D(e("input",{"onUpdate:modelValue":m[10]||(m[10]=L=>a.value.telephone=L),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Téléphone du commerce"},null,512),[[Z,a.value.telephone]])]),e("div",null,[m[33]||(m[33]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),D(e("input",{"onUpdate:modelValue":m[11]||(m[11]=L=>a.value.ville=L),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[Z,a.value.ville]])]),e("div",null,[m[34]||(m[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:u,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),a.value.logoPreview?(t(),s("div",Fa,[e("img",{src:a.value.logoPreview,alt:"Aperçu logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,Ia)])):P("",!0)]),e("div",La,[e("button",{type:"submit",disabled:n.value,class:X(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",n.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[n.value?(t(),s("i",Oa)):P("",!0),m[35]||(m[35]=k(" Enregistrer "))],10,Ta),e("button",{onClick:m[12]||(m[12]=L=>p.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",Va,[o.value.commercant.logo?(t(),s("div",Ea,[e("img",{src:`http://localhost:8000/storage/${o.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,za)])):P("",!0),e("p",null,[m[24]||(m[24]=e("strong",null,"Nom du commerce :",-1)),k(" "+c(o.value.commercant.nom),1)]),e("p",null,[m[25]||(m[25]=e("strong",null,"Description :",-1)),k(" "+c(o.value.commercant.description||"Non définie"),1)]),e("p",null,[m[26]||(m[26]=e("strong",null,"Email :",-1)),k(" "+c(o.value.commercant.email||"Non défini"),1)]),e("p",null,[m[27]||(m[27]=e("strong",null,"Téléphone :",-1)),k(" "+c(o.value.commercant.telephone),1)]),e("p",null,[m[28]||(m[28]=e("strong",null,"Ville :",-1)),k(" "+c(o.value.commercant.ville),1)]),e("button",{onClick:m[6]||(m[6]=L=>p.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Modifier ")]))])):P("",!0)])}}}),qa=le(Ua,[["__scopeId","data-v-7ecf429f"]]),Ra=re({__name:"MerchantProfile",props:{user:Object},setup(I){const l=ue(),$=v(null),f=v([]);return ve(async()=>{try{const o=await R.get("/commercant/profil");$.value=o.data.commercant,f.value=o.data.produits||[]}catch(o){l.error("Erreur lors du chargement des données du commerçant: "+(o.message||o))}}),(o,i)=>null}}),Na=le(Ra,[["__scopeId","data-v-ce205108"]]),Da={class:"overflow-y-scroll min-h-screen relative bg-gray-100 py-8 sm:px-6"},Wa={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},Ja={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},Ba={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},Ha={class:"relative"},Ga=["src"],Xa={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},Ka={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},Qa={class:"space-y-1"},Za={key:0,class:"text-sm text-gray-500"},Ya={key:0,class:"ml-4 flex items-center gap-2"},er=["src"],tr=["disabled"],sr={class:"flex flex-col sm:flex-row gap-2 items-center"},or={class:"container mx-auto max-w-4xl"},ar={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},rr={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},lr=re({__name:"Profile",setup(I){const l=()=>{const w=window.location.hostname;return w==="localhost"||w==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},$=ce(()=>l()),f=ge(),o=ue(),i=fe(),n=v(i.user);console.log(n==null?void 0:n.value);const g=v(!1),p=v(!1),a=v(null),u=v(null),S=v(!1),b=v(!1),h=v(!1),r=ce(()=>b.value?Na:qa),d=v(null),C=v(null),V=v(!1);let _=null;const M=()=>{var w;(w=d.value)==null||w.click(),g.value=!1},A=w=>{const E=w.target;if(E.files&&E.files[0]){const m=E.files[0];if(!m.type.startsWith("image/")){o.error("Veuillez sélectionner une image.");return}if(m.size>2*1024*1024){o.error("Image trop volumineuse (max 2Mo).");return}u.value=m,a.value=URL.createObjectURL(m)}},T=async()=>{try{_=await navigator.mediaDevices.getUserMedia({video:!0}),V.value=!0,g.value=!1,setTimeout(()=>{C.value&&(C.value.srcObject=_)},100)}catch(w){o.error("Impossible d'accéder à la caméra."),console.error(w)}},K=()=>{if(!C.value)return;const w=C.value,E=document.createElement("canvas");E.width=w.videoWidth,E.height=w.videoHeight;const m=E.getContext("2d");m&&(m.drawImage(w,0,0,E.width,E.height),E.toBlob(J=>{J&&(u.value=new File([J],"photo.jpg",{type:"image/jpeg"}),a.value=URL.createObjectURL(u.value),U())},"image/jpeg"))},U=()=>{_&&(_.getTracks().forEach(w=>w.stop()),_=null),V.value=!1},se=()=>{u.value=null,a.value=null},ne=async()=>{var w,E;if(u.value){p.value=!0;try{const m=new FormData;m.append("photo",u.value);const J=await R.post("/profile/photo",m,{headers:{"Content-Type":"multipart/form-data"}});J.data.photo&&(n.value&&(n.value.photo=J.data.photo,i.user=n.value),o.success("Photo mise à jour."),se())}catch(m){o.error(((E=(w=m.response)==null?void 0:w.data)==null?void 0:E.message)||"Erreur lors de l'envoi.")}finally{p.value=!1}}},G=async()=>{S.value=!1},y=w=>{o.success(`Vous avez acheté ${w} jetons !`)};return me(()=>i.user,w=>{n.value=w||null},{immediate:!0}),ve(()=>{}),Pe(()=>{a.value&&URL.revokeObjectURL(a.value),_&&_.getTracks().forEach(w=>w.stop())}),(w,E)=>{var m,J,z,N,te,O,j,L,Q,oe,de,B,x,ae,q,we,ke,$e,Se,Me,Ve;return t(),s("div",Da,[e("div",Wa,[e("div",Ja,[e("div",Ba,[e("div",Ha,[(m=n.value)!=null&&m.photo?(t(),s("img",{key:0,src:$.value+((J=n.value)==null?void 0:J.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Ga)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:ye({background:`${((O=(te=(N=(z=n.value)==null?void 0:z.niveaux_users)==null?void 0:N.at(-1))==null?void 0:te.parrainage_niveau)==null?void 0:O.couleur)||"#0af"}`})},E[5]||(E[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(j=n.value)!=null&&j.premium?(t(),s("i",Xa)):P("",!0),e("button",{onClick:E[0]||(E[0]=Ce=>g.value=!g.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},E[6]||(E[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),g.value?(t(),s("div",Ka,[e("button",{onClick:T,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," Caméra "),e("button",{onClick:M,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):P("",!0)]),e("input",{ref_key:"galleryInput",ref:d,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544),e("div",Qa,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:ye({color:`${((de=(oe=(Q=(L=n.value)==null?void 0:L.niveaux_users)==null?void 0:Q.at(-1))==null?void 0:oe.parrainage_niveau)==null?void 0:de.couleur)||"#0af"}`})},[k(c((B=n.value)==null?void 0:B.nom)+" ",1),(x=n.value)!=null&&x.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:ye({background:`${((ke=(we=(q=(ae=n.value)==null?void 0:ae.niveaux_users)==null?void 0:q.at(-1))==null?void 0:we.parrainage_niveau)==null?void 0:ke.couleur)||"#0af"}`})}," Premium ",4)):P("",!0)],4),($e=n.value)!=null&&$e.subscription_ends_at?(t(),s("span",Za," Jusqu'au "+c(new Date((Se=n.value)==null?void 0:Se.subscription_ends_at).toLocaleDateString()),1)):P("",!0)])]),a.value?(t(),s("div",Ya,[e("img",{src:a.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,er),e("button",{onClick:ne,disabled:p.value,class:X(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":p.value}])},c(p.value?"Upload...":"Confirmer"),11,tr),e("button",{onClick:se,class:"text-red-500 hover:text-red-700"}," Annuler ")])):P("",!0)]),e("div",sr,[(Me=n.value)!=null&&Me.commercant?P("",!0):(t(),s("button",{key:0,onClick:E[1]||(E[1]=Ce=>F(f).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commerçant ")),(Ve=n.value)!=null&&Ve.premium?P("",!0):(t(),s("button",{key:1,onClick:E[2]||(E[2]=Ce=>S.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",or,[(t(),pe(Ye(r.value)))]),S.value?(t(),pe(ra,{key:0,"is-open":S.value,onClose:E[3]||(E[3]=Ce=>S.value=!1),onUpgraded:G},null,8,["is-open"])):P("",!0),h.value?(t(),pe(ka,{key:1,"is-open":h.value,onClose:E[4]||(E[4]=Ce=>h.value=!1),onPurchased:y},null,8,["is-open"])):P("",!0),V.value?(t(),s("div",ar,[e("div",rr,[e("video",{ref_key:"videoRef",ref:C,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:K,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:U,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):P("",!0)])}}}),Gd=le(lr,[["__scopeId","data-v-a8b35f6f"]]),nr={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},ir={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},ur={class:"space-y-2"},dr=["onClick"],cr={class:"font-poppins"},pr={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},vr={class:"lg:hidden mb-4"},mr={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},fr=["onClick"],gr={key:0,class:"space-y-6"},br={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xr={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},hr={class:"flex items-center gap-4 mb-4"},yr=["src"],_r={class:"text-[var(--espace-vert)] font-semibold"},wr={class:"text-sm text-[var(--espace-gris)]"},kr={class:"text-sm text-[var(--espace-gris)]"},$r={class:"text-sm text-[var(--espace-gris)]"},Cr={key:0,class:"space-y-6"},Ar={key:0,class:"space-y-6"},Pr={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},jr={class:"text-base font-medium font-poppins"},Sr={class:"text-sm text-[var(--espace-gris)]"},Mr=re({__name:"Parametres",setup(I){const l=v(!1),$=fe(),f=ge(),o=ue(),i=$.user,n=v("profile"),g=v({id:(i==null?void 0:i.id)??0,nom:(i==null?void 0:i.nom)??"",email:(i==null?void 0:i.email)??"",telephone:(i==null?void 0:i.telephone)??"",ville:(i==null?void 0:i.ville)??""});$.user={...$.user,...g.value};const p=v({current_password:"",new_password:"",confirm_new_password:""});v({});const a=v(""),u=ce(()=>[...i!=null&&i.commercant?[{to:"/commercant/produits",label:"Espace Commerçant",icon:"fa-store-alt",description:"Gérez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des récompenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"Gérez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"Gérez vos collaborations sur des produits"}]),S=async()=>{var d,C;l.value=!0;try{await R.post("/updateProfile",g.value),localStorage.setItem("user",JSON.stringify($.user)),o.success("Profil mis à jour avec succès",{timeout:3e3})}catch(V){o.error(((C=(d=V.response)==null?void 0:d.data)==null?void 0:C.message)||"Erreur lors de la mise à jour du profil")}finally{l.value=!1}},b=async()=>{var d,C;l.value=!0;try{if(p.value.new_password!==p.value.confirm_new_password){o.error("Les mots de passe ne correspondent pas");return}await R.post("/updatePassword",p.value),o.success("Mot de passe mis à jour avec succès",{timeout:3e3}),p.value={current_password:"",new_password:"",confirm_new_password:""},a.value=""}catch(V){o.error(((C=(d=V.response)==null?void 0:d.data)==null?void 0:C.message)||"Erreur lors de la mise à jour du mot de passe")}finally{l.value=!1}},h=()=>{$.logout(),f.push({name:"login"})},r=()=>{const d=p.value.new_password;d.length===0?a.value="":d.length<8||!/[A-Za-z]/.test(d)||!/[0-9]/.test(d)?a.value="weak":/[!@#$%^&*]/.test(d)?a.value="strong":a.value="medium"};return me(()=>p.value.new_password,r),(d,C)=>{const V=xe("RouterLink");return t(),s(H,null,[W(je,{isLoading:l.value},null,8,["isLoading"]),e("div",nr,[e("aside",ir,[C[7]||(C[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"Paramètres",-1)),e("nav",ur,[(t(),s(H,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"Sécurité",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"Déconnexion",icon:"fa-sign-out-alt"}],_=>e("button",{key:_.id,onClick:M=>_.id==="logout"?h():n.value=_.id,class:X(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":n.value===_.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":n.value!==_.id}])},[e("i",{class:X(["fas",_.icon])},null,2),e("span",cr,c(_.label),1)],10,dr)),64))])]),e("main",pr,[e("div",vr,[e("div",mr,[(t(),s(H,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"Sécurité",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"Déconnexion",icon:"fa-sign-out-alt"}],_=>e("button",{key:_.id,onClick:M=>_.id==="logout"?h():n.value=_.id,class:X(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":n.value===_.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":n.value!==_.id}])},[e("i",{class:X(["fas",_.icon])},null,2),k(" "+c(_.label),1)],10,fr)),64))])]),W(be,{name:"slide"},{default:Y(()=>{var _,M;return[n.value==="profile"?(t(),s("section",gr,[C[10]||(C[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",br,[e("form",{onSubmit:ie(S,["prevent"]),class:"space-y-4"},[W(he,{label:"Nom",icon:"fa-user",modelValue:g.value.nom,"onUpdate:modelValue":C[0]||(C[0]=A=>g.value.nom=A),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),W(he,{label:"Email",icon:"fa-envelope",modelValue:g.value.email,"onUpdate:modelValue":C[1]||(C[1]=A=>g.value.email=A),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),W(he,{label:"Téléphone",icon:"fa-phone",modelValue:g.value.telephone,"onUpdate:modelValue":C[2]||(C[2]=A=>g.value.telephone=A),type:"tel",required:"",placeholder:"Votre numéro de téléphone"},null,8,["modelValue"]),W(he,{label:"Ville",icon:"fa-city",modelValue:g.value.ville,"onUpdate:modelValue":C[3]||(C[3]=A=>g.value.ville=A),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),C[8]||(C[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre à jour ",-1))],32),e("div",xr,[C[9]||(C[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"Aperçu",-1)),e("div",hr,[e("img",{src:((M=(_=F(i))==null?void 0:_.commercant)==null?void 0:M.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,yr),e("div",null,[e("p",_r,c(g.value.nom||"Nonni"),1),e("p",wr,c(g.value.email||"Non défini"),1)])]),e("p",kr,"Téléphone: "+c(g.value.telephone||"Nonni"),1),e("p",$r,"Ville: "+c(g.value.ville||"Non défini"),1)])])])):P("",!0)]}),_:1}),W(be,{name:"slide"},{default:Y(()=>[n.value==="security"?(t(),s("section",Cr,[C[12]||(C[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Sécurité",-1)),e("form",{onSubmit:ie(b,["prevent"]),class:"space-y-4"},[W(he,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:p.value.current_password,"onUpdate:modelValue":C[4]||(C[4]=_=>p.value.current_password=_),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),W(he,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:p.value.new_password,"onUpdate:modelValue":C[5]||(C[5]=_=>p.value.new_password=_),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:r},null,8,["modelValue"]),a.value?(t(),s("div",{key:0,class:X(["text-sm",{"text-red-500":a.value==="weak","text-yellow-500":a.value==="medium","text-green-500":a.value==="strong"}])}," Force du mot de passe : "+c(a.value==="weak"?"Faible":a.value==="medium"?"Moyen":"Fort"),3)):P("",!0),W(he,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:p.value.confirm_new_password,"onUpdate:modelValue":C[6]||(C[6]=_=>p.value.confirm_new_password=_),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),C[11]||(C[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):P("",!0)]),_:1}),W(be,{name:"slide"},{default:Y(()=>[n.value==="links"?(t(),s("section",Ar,[C[13]||(C[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",Pr,[(t(!0),s(H,null,ee(u.value,_=>(t(),pe(V,{key:_.to,to:_.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:Y(()=>[e("i",{class:X(["fas",_.icon])},null,2),e("div",null,[e("h3",jr,c(_.label),1),e("p",Sr,c(_.description),1)])]),_:2},1032,["to"]))),128))])])):P("",!0)]),_:1})])])],64)}}}),Xd=le(Mr,[["__scopeId","data-v-4610c24c"]]),Vr={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},Er={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},zr=["src","alt"],Fr={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},Ir={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Lr={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boosté"},Tr={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},Or={class:"text-xs text-[var(--espace-gris)] truncate"},Ur={class:"text-sm font-medium text-[var(--espace-or)]"},qr={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},Rr={class:"flex items-center gap-1"},Nr={class:"flex items-center gap-1"},Dr=["aria-label"],Wr=re({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(I,{emit:l}){const $=I,f=l,o=ue(),i=Ie(),n=a=>{if(a==null||isNaN(a)||a===0)return"0";const u=Math.abs(a);return u<1e3?a.toString():u<1e4?(a/1e3).toFixed(1).replace(/\.0$/,"")+"k":u<1e6?Math.floor(a/1e3)+"k":u<1e9?(a/1e6).toFixed(1).replace(/\.0$/,"")+"M":(a/1e9).toFixed(1).replace(/\.0$/,"")+"B"},g=v(0),p=async()=>{var a,u;try{await i.toggleFavorite($.produit.id),f("toggle-favorite",$.produit.id)}catch(S){o.error(((u=(a=S.response)==null?void 0:a.data)==null?void 0:u.message)||"Erreur lors de la mise à jour des favoris.")}};return(a,u)=>{var b,h;const S=xe("router-link");return t(),s("div",Vr,[W(S,{to:`/produits/${a.produit.id}`,class:"block relative"},{default:Y(()=>[e("div",Er,[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${g.value*100}%)`})},[(t(!0),s(H,null,ee(a.produit.photos||[a.produit.photo_url||"https://via.placeholder.com/150"],(r,d)=>(t(),s("img",{key:d,src:r,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${a.produit.nom} - ${d+1}`},null,8,zr))),128))],4),a.produit.photos&&a.produit.photos.length>1?(t(),s("div",Fr,[(t(!0),s(H,null,ee(a.produit.photos,(r,d)=>(t(),s("span",{key:d,class:X(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":d===g.value}])},null,2))),128))])):P("",!0)]),a.produit.collaboratif?(t(),s("span",Ir," Collaboratif ")):P("",!0),a.produit.boosted_until&&new Date(a.produit.boosted_until)>new Date?(t(),s("span",Lr," Boosté ")):P("",!0),e("h3",Tr,c(a.produit.nom),1),e("p",Or,c(a.produit.description||"Aucune description"),1),e("p",Ur,c(a.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",qr,[e("div",Rr,[u[0]||(u[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,c(n((b=a.produit.counts)==null?void 0:b.views_count)),1)]),e("div",Nr,[e("button",{onClick:p,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":a.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:X(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":a.produit.is_favorited_by}])},null,2)],8,Dr),e("span",null,c(n((h=a.produit.counts)==null?void 0:h.favorites_count)),1)])])])}}}),Te=le(Wr,[["__scopeId","data-v-03efe6d5"]]),Jr={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},Br={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},Hr={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},Gr=["onClick","aria-label","aria-current"],Xr={class:"fixed right-10 z-5 flex justify-end items-center mb-3"},Kr=["aria-label","aria-expanded"],Qr={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},Zr={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},Yr={class:"flex-1 min-w-[120px]"},el={class:"flex-1 min-w-[120px]"},tl=["value"],sl={class:"flex-1 min-w-[100px]"},ol={class:"flex-1 min-w-[100px]"},al={class:"flex-1 min-w-[120px]"},rl=["value"],ll={class:"flex-1 min-w-[100px]"},nl=["aria-busy"],il={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},ul=re({__name:"Home",setup(I){const l=Ie(),$=fe(),f=v([]),o=ue(),i=v(!1),n=v({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),g=v(["Douala","Yaoundé","Bamenda","Buea","Garoua"]),p=v(null),a=v(null),u=async()=>{try{const _=await R.get("/categories");f.value=_.data.categories}catch(_){console.error("Erreur lors du chargement des catégories:",_),o.error("Erreur lors du chargement des catégories.")}},S=()=>{if(n.value.prix_min&&n.value.prix_max&&parseFloat(n.value.prix_min)>parseFloat(n.value.prix_max)){o.error("Le prix minimum doit être inférieur au prix maximum.");return}l.fetchProducts(n.value,!0),i.value=!1},b=()=>{n.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},l.fetchProducts({},!0)},h=_=>{l.setSort(_)},r=()=>Object.values(n.value).filter(_=>_!=="").length,d=_=>{V(_)},C=_=>{V(_)},V=async _=>{var U,se,ne;const M=(U=$.user)==null?void 0:U.id,A=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),T=new Date().toISOString().split("T")[0],K=localStorage.getItem("lastResetDate");if((!K||K!==T)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",T)),!await A[_])try{setTimeout(async()=>{const G=await R.post("/record_view",{product_id:_,user_id:M??null})},1e3),A[_]=!0,localStorage.setItem("viewedProducts",JSON.stringify(A))}catch(G){console.error("Erreur lors de l'enregistrement de la vue:",G),o.error(((ne=(se=G.response)==null?void 0:se.data)==null?void 0:ne.message)||"Erreur lors de l'enregistrement de la vue.")}};return ve(async()=>{try{await l.fetchProducts(),await u()}catch(_){console.error("Erreur lors du chargement des produits ou catégories:",_),o.error("Erreur lors du chargement des produits. Veuillez réessayer.")}p.value=new IntersectionObserver(_=>{_[0].isIntersecting&&!l.isLoading&&l.hasMore&&l.fetchProducts(n.value)},{threshold:.1}),a.value&&p.value.observe(a.value)}),Pe(()=>{p.value&&a.value&&p.value.unobserve(a.value)}),(_,M)=>(t(),s("div",Jr,[W(je,{isLoading:F(l).isLoading},null,8,["isLoading"]),e("div",Br,[e("div",Hr,[(t(),s(H,null,ee([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-heart"}],A=>e("button",{key:A.id,onClick:T=>h(A.id),class:X(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":F(l).sort===A.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":F(l).sort!==A.id}]),"aria-label":`Trier par ${A.label}`,"aria-current":F(l).sort===A.id?"true":void 0},[e("i",{class:X(["fas",A.icon])},null,2),k(" "+c(A.label),1)],10,Gr)),64))]),e("div",Xr,[e("button",{onClick:M[0]||(M[0]=A=>i.value=!i.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":i.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":i.value},[M[7]||(M[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),r()>0?(t(),s("span",Qr,c(r()),1)):P("",!0)],8,Kr)]),W(be,{name:"slide-up"},{default:Y(()=>[i.value?(t(),s("div",Zr,[e("form",{onSubmit:ie(S,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",Yr,[D(e("input",{"onUpdate:modelValue":M[1]||(M[1]=A=>n.value.search=A),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[Z,n.value.search]])]),e("div",el,[D(e("select",{"onUpdate:modelValue":M[2]||(M[2]=A=>n.value.category=A),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[M[8]||(M[8]=e("option",{value:""},"Toutes les Catégories",-1)),(t(!0),s(H,null,ee(f.value,A=>(t(),s("option",{key:A.id,value:A.id},c(A.nom),9,tl))),128))],512),[[_e,n.value.category]])]),e("div",sl,[D(e("input",{"onUpdate:modelValue":M[3]||(M[3]=A=>n.value.prix_min=A),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[Z,n.value.prix_min]])]),e("div",ol,[D(e("input",{"onUpdate:modelValue":M[4]||(M[4]=A=>n.value.prix_max=A),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[Z,n.value.prix_max]])]),e("div",al,[D(e("select",{"onUpdate:modelValue":M[5]||(M[5]=A=>n.value.ville=A),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[M[9]||(M[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(H,null,ee(g.value,A=>(t(),s("option",{key:A,value:A},c(A),9,rl))),128))],512),[[_e,n.value.ville]])]),e("div",ll,[D(e("select",{"onUpdate:modelValue":M[6]||(M[6]=A=>n.value.collaboratif=A),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},M[10]||(M[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[_e,n.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[M[12]||(M[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:b,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Réinitialiser les filtres"},M[11]||(M[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):P("",!0)]),_:1}),W(Ge,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:Y(()=>[(t(!0),s(H,null,ee(F(l).products,A=>(t(),pe(Te,{key:A.id,produit:A,onMouseover:T=>d(A.id),onTouchstart:T=>C(A.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:a,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":F(l).isLoading},[F(l).hasMore?P("",!0):(t(),s("p",il," Aucun produit supplémentaire "))],8,nl)])]))}}),Kd=le(ul,[["__scopeId","data-v-8f4595ca"]]),dl={class:"overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-20 px-4 sm:px-6"},cl={class:"container mx-auto max-w-5xl"},pl={key:0,class:"text-center text-[var(--espace-gris)]"},vl={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},ml={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},fl={class:"w-full lg:w-1/2 relative"},gl={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},bl=["src","alt"],xl={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},hl={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boosté"},yl={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},_l={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Commerçant Pro"},wl={class:"w-full lg:w-1/2"},kl={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},$l={class:"text-sm text-[var(--espace-gris)] mb-3"},Cl={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},Al={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},Pl={class:"flex items-center gap-3"},jl={class:"flex items-center gap-1"},Sl={class:"flex items-center gap-1"},Ml=["aria-label"],Vl={class:"border-t pt-3 mt-3"},El={class:"text-xs text-[var(--espace-gris)] mb-1"},zl={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"Commerçant vérifié",title:"Commerçant vérifié"},Fl={class:"text-xs text-[var(--espace-gris)] mb-1"},Il={class:"text-xs text-[var(--espace-gris)] mb-1"},Ll={class:"text-xs text-[var(--espace-gris)] mb-2"},Tl={class:"flex flex-col sm:flex-row gap-3 mt-4"},Ol=["disabled","aria-label"],Ul={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},ql={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},Rl={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},Nl={class:"text-xs text-[var(--espace-gris)] mb-3"},Dl=["aria-label"],Wl={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},Jl={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},Bl={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Hl={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Gl={class:"text-sm text-[var(--espace-gris)]"},Xl={class:"text-[var(--espace-or)]"},Kl={class:"flex gap-4"},Ql={key:0,class:"mt-6"},Zl=["aria-busy"],Yl={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},en=re({__name:"Produit",setup(I){const l=Ie(),$=Ae(),f=ge(),o=fe(),i=Fe(),n=ue();v([]);const g=v(!1),p=v(null),a=v(null),u=v(null),S=v(!1),b=v(1),h=v(0),r=v(5),d=[100,500,1e3,5e3,1e4],C=[5,15,25,50,75],V=O=>{if(O==null||isNaN(O)||O===0)return"0";const j=Math.abs(O);return j<1e3?O.toString():j<1e4?(O/1e3).toFixed(1).replace(/\.0$/,"")+"k":j<1e6?Math.floor(O/1e3)+"k":j<1e9?(O/1e6).toFixed(1).replace(/\.0$/,"")+"M":(O/1e9).toFixed(1).replace(/\.0$/,"")+"B"},_=async()=>{try{l.isLoading=!0,await l.viewProduct($.params.id),l.isLoading=!1,l.product.photos&&!l.product.photo_url&&(l.product.photo_url=l.product.photos[0]),await l.fetchProducts({category:l.product.category_id,per_page:8},!0)}catch(O){n.error(O||"Erreur lors du chargement du produit"),f.push({name:"home"})}finally{l.isLoading=!1}},M=()=>{var L,Q;if(!o.user){n.error("Veuillez vous connecter pour contacter le commerçant"),f.push({name:"login"});return}const O=(L=l.product.commercant)==null?void 0:L.telephone,j=encodeURIComponent(`Bonjour ${(Q=l.product.commercant)==null?void 0:Q.nom}, je suis intéressé par ${l.product.nom}. Pouvez-vous me contacter ?`);window.open(`https://wa.me/${O}?text=${j}`,"_blank")},A=()=>{var O;if(!o.user){n.error("Veuillez vous connecter pour collaborer"),f.push({name:"login"});return}if(((O=o.user.commercant)==null?void 0:O.id)===l.product.commercant_id){n.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!l.product.collaboratif){n.error("Ce produit n’est pas ouvert à la collaboration");return}p.value=l.product.prix+(l.product.marge_min||500),g.value=!0},T=async()=>{if(!p.value||p.value<l.product.prix+(l.product.marge_min||0)){n.error(`Le prix de revente doit être supérieur ou égal à ${l.product.prix+(l.product.marge_min||0)} XAF`);return}await i.addCollaboration({produit_id:l.product.id,prix_revente:p.value})&&(n.success("Demande de collaboration envoyée",{timeout:3e3}),g.value=!1,p.value=null)},K=()=>{g.value=!1,p.value=null},U=()=>{f.push({path:`/commercant/produits/${l.product.id}/edit`})},se=async()=>{var O,j,L;if(!o.user||((O=o.user.commercant)==null?void 0:O.id)!==l.product.commercant_id){n.error("Seul le commerçant propriétaire peut booster ce produit");return}if(o.user.jetons<r.value){n.error(`Pas assez de Jetons. Il vous faut ${r.value} Jetons pour ce boost.`);return}try{const Q=await R.post(`/produits/${l.product.id}/boost`,{duration_days:b.value,target_views:d[h.value]});o.user.jetons-=r.value,l.product.boosted_until=Q.data.data.end_date,n.success(Q.data.message||"Produit boosté avec succès !"),S.value=!1}catch(Q){n.error(((L=(j=Q.response)==null?void 0:j.data)==null?void 0:L.message)||"Erreur lors du boostage du produit")}},ne=()=>{var O;if(!o.user||((O=o.user.commercant)==null?void 0:O.id)!==l.product.commercant_id){n.error("Seul le commerçant propriétaire peut booster ce produit");return}S.value=!0,G()},G=()=>{const O=b.value*5,j=C[h.value];r.value=Math.max(5,O+j)};me([b,h],()=>{G()});const y=O=>{E(O)},w=O=>{E(O)},E=async O=>{var de,B,x;const j=(de=o.user)==null?void 0:de.id;if(!j){n.error("Connexion requise pour enregistrer la vue.");return}const L=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),Q=new Date().toISOString().split("T")[0],oe=localStorage.getItem("lastResetDate");if((!oe||oe!==Q)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",Q)),!L[O])try{setTimeout(async()=>{const ae=await R.post("/record_view",{product_id:O,user_id:j})},1e3),L[O]=!0,localStorage.setItem("viewedProducts",JSON.stringify(L))}catch(ae){console.error("Erreur lors de l'enregistrement de la vue:",ae),n.error(((x=(B=ae.response)==null?void 0:B.data)==null?void 0:x.message)||"Erreur lors de l'enregistrement de la vue.")}},m=async()=>{var O,j;try{await l.toggleFavorite(l.product.id)}catch(L){n.error(((j=(O=L.response)==null?void 0:O.data)==null?void 0:j.message)||"Erreur lors de la mise à jour des favoris.")}},J=(O,j,L)=>{var oe;if(!o.user){n.error("Veuillez vous connecter pour démarrer une conversation"),f.push({name:"login"});return}const Q={id:O,name:j,commercant_id:l.product.commercant_id,name_user:((oe=o.user)==null?void 0:oe.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(Q)),f.push(`/messages/${L}`)},z=v(0),N=()=>{var j;const O=(((j=l.product.photos)==null?void 0:j.length)||1)-1;z.value=Math.min(z.value+1,O)},te=()=>{z.value=Math.max(z.value-1,0)};return ve(()=>{_(),i.initializeState(),a.value=new IntersectionObserver(O=>{O[0].isIntersecting&&!l.isLoading&&l.hasMore&&l.fetchProducts({category:l.product.category_id,per_page:8},!1)},{threshold:.1}),u.value&&a.value.observe(u.value)}),Pe(()=>{a.value&&u.value&&a.value.unobserve(u.value)}),me(()=>$.params.id,O=>{O&&(_(),z.value=0)}),me(l.product,O=>{O&&(l.page=1,l.fetchProducts({category:O.category_id,per_page:4},!0),z.value=0)}),(O,j)=>{const L=xe("router-link");return t(),s(H,null,[W(je,{isLoading:F(l).isLoading},null,8,["isLoading"]),e("div",dl,[e("div",cl,[F(l).isLoading?(t(),s("div",pl)):F(l).product?(t(),s("div",vl,[W(be,{name:"slide-up"},{default:Y(()=>{var Q,oe,de,B,x,ae,q,we,ke,$e,Se,Me,Ve,Ce,Re,Ne,De,We,Je;return[e("div",ml,[e("div",fl,[e("div",gl,[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${z.value*100}%)`})},[(t(!0),s(H,null,ee(F(l).product.photos||[F(l).product.photo_url||"https://via.placeholder.com/300"],(Oe,Ee)=>(t(),s("img",{key:Ee,src:Oe,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${F(l).product.nom} - ${Ee+1}`},null,8,bl))),128))],4),F(l).product.photos&&F(l).product.photos.length>1?(t(),s("button",{key:0,onClick:te,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image précédente"},j[6]||(j[6]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):P("",!0),F(l).product.photos&&F(l).product.photos.length>1?(t(),s("button",{key:1,onClick:N,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},j[7]||(j[7]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):P("",!0),F(l).product.photos&&F(l).product.photos.length>1?(t(),s("div",xl,[(t(!0),s(H,null,ee(F(l).product.photos,(Oe,Ee)=>(t(),s("span",{key:Ee,class:X(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Ee===z.value}])},null,2))),128))])):P("",!0)]),F(l).product.boosted_until&&new Date(F(l).product.boosted_until)>new Date?(t(),s("span",hl," Boosté ")):P("",!0),F(l).product.collaboratif?(t(),s("span",yl," Collaboratif ")):P("",!0),(Q=F(o).user)!=null&&Q.premium?(t(),s("span",_l," Premium ")):P("",!0)]),e("div",wl,[e("h1",kl,c(F(l).product.nom),1),e("p",$l,c(F(l).product.description||"Aucune description disponible"),1),e("p",Cl,c(F(l).product.prix)+" XAF ",1),e("div",Al,[e("p",null,[j[8]||(j[8]=e("strong",null,"Catégorie :",-1)),k(" "+c(((oe=F(l).product.category)==null?void 0:oe.nom)||"Non spécifiée"),1)]),e("p",null,[j[9]||(j[9]=e("strong",null,"Quantité :",-1)),k(" "+c(F(l).product.quantite),1)]),e("p",null,[j[10]||(j[10]=e("strong",null,"Ville :",-1)),k(" "+c(F(l).product.ville||"Non spécifiée"),1)]),e("p",null,[j[11]||(j[11]=e("strong",null,"Ajouté le :",-1)),k(" "+c(new Date(F(l).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",Pl,[e("div",jl,[j[12]||(j[12]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,c(V((de=F(l).product.counts)==null?void 0:de.views_count))+" vues",1)]),e("div",Sl,[e("i",{class:X(["fas fa-heart text-[10px]",{"text-[var(--espace-or)]":F(l).product.is_favorited_by}])},null,2),e("span",null,c(V((B=F(l).product.counts)==null?void 0:B.favorites_count))+" favoris",1)])])]),e("button",{onClick:m,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":F(l).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:X(["fas fa-heart mr-2 text-sm",{"text-[var(--espace-or)]":F(l).product.is_favorited_by}])},null,2),k(" "+c(F(l).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,Ml),e("div",Vl,[j[17]||(j[17]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," À propos du commerçant ",-1)),e("p",El,[e("strong",null,c((x=F(l).product.commercant)==null?void 0:x.nom),1),(ae=F(l).product.commercant)!=null&&ae.verified?(t(),s("span",zl,j[13]||(j[13]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):P("",!0)]),e("p",Fl,c(((q=F(l).product.commercant)==null?void 0:q.description)||"Aucune description disponible"),1),e("p",Il,[j[14]||(j[14]=e("strong",null,"Ville :",-1)),k(" "+c(((we=F(l).product.commercant)==null?void 0:we.ville)||"Nonspécifiée"),1)]),e("p",Ll,[j[15]||(j[15]=e("strong",null,"Note :",-1)),k(" "+c(Number((ke=F(l).product.commercant)==null?void 0:ke.rating).toFixed(1)||"Non évalué")+" / 5 ",1)]),W(L,{to:`/commercants/${F(l).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commerçant"},{default:Y(()=>j[16]||(j[16]=[k(" Voir le profil du commerçant ")])),_:1,__:[16]},8,["to"])]),e("div",Tl,[((Se=($e=F(o).user)==null?void 0:$e.commercant)==null?void 0:Se.id)!==F(l).product.commercant_id?(t(),s("button",{key:0,onClick:M,class:"flex-1 bg-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] text-white transition-all duration-200 active:scale-95 text-sm","aria-label":"Contacter le commerçant"},j[18]||(j[18]=[e("i",{class:"fas fa-phone mr-2 text-sm"},null,-1),k(" Contacter le commerçant ")]))):P("",!0),F(l).product.collaboratif&&((Ve=(Me=F(o).user)==null?void 0:Me.commercant)==null?void 0:Ve.id)!==F(l).product.commercant_id?(t(),s("button",{key:1,onClick:A,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},j[19]||(j[19]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),k(" Collaborer ")]))):P("",!0),((Re=(Ce=F(o).user)==null?void 0:Ce.commercant)==null?void 0:Re.id)===F(l).product.commercant_id?(t(),s("button",{key:2,onClick:U,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},j[20]||(j[20]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),k(" Modifier le produit ")]))):P("",!0),((De=(Ne=F(o).user)==null?void 0:Ne.commercant)==null?void 0:De.id)===F(l).product.commercant_id?(t(),s("button",{key:3,onClick:ne,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!F(l).product.boosted_until&&new Date(F(l).product.boosted_until)>new Date,"aria-label":F(l).product.boosted_until&&new Date(F(l).product.boosted_until)>new Date?"Boost déjà actif":"Personnaliser le boost"},j[21]||(j[21]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,Ol)):P("",!0),((Je=(We=F(o).user)==null?void 0:We.commercant)==null?void 0:Je.id)!==F(l).product.commercant_id?(t(),s("button",{key:4,onClick:j[0]||(j[0]=Oe=>J(F(l).product.id,F(l).product.nom,F(l).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Contacter le vendeur"},j[22]||(j[22]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),k(" Contacter le vendeur ")]))):P("",!0)])])])]}),_:1})])):(t(),s("div",Ul," Produit non trouvé. ")),W(be,{name:"fade"},{default:Y(()=>[g.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ie(K,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",ql,[e("h2",Rl," Collaborer sur "+c(F(l).product.nom),1),e("p",Nl," Proposez un prix de revente (minimum : "+c(F(l).product.prix+(F(l).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:ie(T,["prevent"]),class:"space-y-3"},[e("div",null,[j[23]||(j[23]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),D(e("input",{id:"prix_revente","onUpdate:modelValue":j[1]||(j[1]=Q=>p.value=Q),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${F(l).product.nom}`,required:""},null,8,Dl),[[Z,p.value,void 0,{number:!0}]]),p.value?(t(),s("p",Wl," Marge potentielle : "+c(p.value-F(l).product.prix)+" XAF ",1)):P("",!0)]),e("div",{class:"flex gap-3"},[j[24]||(j[24]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:K,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):P("",!0)]),_:1}),W(be,{name:"fade"},{default:Y(()=>[S.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:j[5]||(j[5]=ie(Q=>S.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",Jl,[j[30]||(j[30]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:ie(se,["prevent"]),class:"space-y-6"},[e("div",null,[j[25]||(j[25]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Durée (jours)",-1)),D(e("input",{type:"range","onUpdate:modelValue":j[2]||(j[2]=Q=>b.value=Q),min:"1",max:"20",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:G},null,544),[[Z,b.value,void 0,{number:!0}]]),e("p",Bl,c(b.value)+" jours ",1)]),e("div",null,[j[26]||(j[26]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),D(e("input",{type:"range","onUpdate:modelValue":j[3]||(j[3]=Q=>h.value=Q),min:"0",max:"4",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:G},null,544),[[Z,h.value,void 0,{number:!0}]]),e("p",Hl,c(d[h.value])+" vues ",1)]),e("p",Gl,[j[27]||(j[27]=k("Coût estimé : ")),e("strong",Xl,c(r.value),1),j[28]||(j[28]=k(" Jetons"))]),e("div",Kl,[j[29]||(j[29]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:j[4]||(j[4]=Q=>S.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):P("",!0)]),_:1})]),F(l).products?(t(),s("div",Ql,[j[31]||(j[31]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),W(Ge,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:Y(()=>[(t(!0),s(H,null,ee(F(l).products,Q=>(t(),pe(Te,{key:Q.id,produit:Q,onMouseover:oe=>y(Q.id),onTouchstart:oe=>w(Q.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:u,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":F(l).isLoading},[F(l).hasMore?P("",!0):(t(),s("p",Yl," Aucun produit supplémentaire "))],8,Zl)])):P("",!0)])],64)}}}),Qd=le(en,[["__scopeId","data-v-4335b260"]]),tn={class:"relative bg-green-500"},sn={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},on={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},an={class:"flex items-center gap-1 sm:gap-3"},rn={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},ln=["aria-label"],nn={class:"flex items-center gap-2"},un=["src"],dn={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},cn={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},pn={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},vn={class:"flex justify-around items-center py-2"},mn=["aria-label"],fn=re({__name:"AppHeader",setup(I){var M;const l=fe(),$=Fe(),f=ge(),o=l.user;Ae();const i=v(!1),n=v(!1),g=v(!1),p=v(""),a=Ie(),u=v(!1),S=v(null),b=v(!1),h=ce(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...l.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...l.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:$.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),r=async()=>{if(l.user)try{const A=await R.get("/user/badges");$.saveCollaborationsToLocalStorage(A.data.collaborations_pending.map(T=>({produit_id:T.produit_id,prix_revente:T.prix_revente,status:T.status,created_at:T.created_at})))}catch(A){console.error("Erreur lors du chargement des badges:",A)}};me(()=>l.user,A=>{A&&(r(),$.initializeState())},{immediate:!0}),me(()=>$.collaborationsPending,()=>{$.collaborationsPending>0&&(n.value=!0,setTimeout(()=>n.value=!1,300))});const d=async()=>{if(p.value.trim())try{await a.fetchProducts({search:p.value.trim()},!0),p.value="",u.value=!1}catch(A){console.error("Erreur lors de la recherche:",A)}},C=A=>{if(b.value){b.value=!1;return}S.value&&!S.value.contains(A.target)&&(u.value=!1)},V=async()=>{u.value=!u.value,u.value&&(b.value=!0,await Xe())},_=()=>{f.push("/messages")};return console.log("📩 header e reçu :"),(M=l.user)!=null&&M.id&&window.Echo.channel(`chat.${l.user.id}`).listen("MessageSent",A=>{var T;console.log("📩 header e reçu :",A.message),((T=l.user)==null?void 0:T.id)===A.receiver_id&&(console.log("📩 header e reçu :",A.message),$.saveUnreadMessagesToLocalStorage(A.unread_messages))}),ve(()=>{l.user&&(r(),$.initializeState()),document.addEventListener("click",C)}),Pe(()=>{document.removeEventListener("click",C)}),(A,T)=>{const K=xe("RouterLink");return t(),s("div",tn,[e("header",sn,[e("div",on,[e("div",an,[W(K,{to:"/","aria-label":"Retour à l'accueil"},{default:Y(()=>T[2]||(T[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ke,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),T[3]||(T[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",rn,[(t(!0),s(H,null,ee(h.value,U=>(t(),pe(K,{key:U.to,to:U.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Y(()=>[e("i",{class:X(["fas",U.icon])},null,2),k(" "+c(U.label)+" ",1),U.badge>0?(t(),s("span",{key:0,class:X(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":U.to==="/panier"&&i.value||U.to==="/collaborations"&&n.value||U.to==="/commandes"&&g.value}]),"aria-label":U.to==="/panier"?"Nombre d'articles dans le panier":U.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},c(U.badge),11,ln)):P("",!0)]),_:2},1032,["to"]))),128))]),W(Qe),e("div",nn,[e("button",{onClick:V,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},T[4]||(T[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:_,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},T[5]||(T[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(H,null,ee(h.value.filter(U=>F(l).user?U.to==="/profil":["/login","/register"].includes(U.to)),U=>(t(),pe(K,{key:U.to,to:U.to,class:"relative flex items-center justify-center","aria-label":U.label},{default:Y(()=>{var se;return[(se=F(o))!=null&&se.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${F(o).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,un)):(t(),s("div",dn,[e("i",{class:X([`fas ${U.icon}`,"text-2xl text-gray-100"])},null,2)])),U.badge>0&&U.to==="/collaborations"?(t(),s("span",{key:2,class:X(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":U.to==="/collaborations"&&n.value}]),"aria-label":"Collaborations en attente"},c(U.badge),3)):P("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),u.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:S,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",cn,[D(e("input",{"onUpdate:modelValue":T[0]||(T[0]=U=>p.value=U),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ue(d,["enter"])},null,544),[[Z,p.value]]),e("button",{onClick:d,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},T[6]||(T[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:T[1]||(T[1]=U=>u.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},T[7]||(T[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):P("",!0)]),W(be,{name:"slide-up"},{default:Y(()=>[e("nav",pn,[e("div",vn,[(t(!0),s(H,null,ee(h.value,U=>(t(),pe(K,{key:U.to,to:U.to,"aria-label":U.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Y(()=>[e("i",{class:X(["fas text-lg",U.icon])},null,2),U.badge>0?(t(),s("span",{key:0,class:X(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":U.to==="/panier"&&i.value||U.to==="/collaborations"&&n.value||U.to==="/commandes"&&g.value}]),"aria-label":U.to==="/panier"?"Nombre d'articles dans le panier":U.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},c(U.badge),11,mn)):P("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),Ze=le(fn,[["__scopeId","data-v-37541233"]]),gn={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},bn={class:"container mx-auto px-4 sm:px-6 py-6"},xn={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},hn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},yn={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},_n={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},wn={key:2,class:"text-sm text-[var(--espace-gris)] italic"},kn={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},$n=["value"],Cn={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},An=["value"],Pn={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},jn=["value"],Sn={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},Mn={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},Vn={key:1,class:"text-base text-[var(--espace-gris)] italic"},En={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},zn=["onClick"],Fn=re({__name:"CommercantDashboard",setup(I){const l=ue(),$=v([]),f=v([]),o=v(null),i=v(!1),n=v({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),g=v({nom:"",description:"",ville:""}),p=v(["Douala","Yaoundé","Bamenda","Buea","Garoua"]),a=async()=>{i.value=!0;try{const[h,r,d]=await Promise.all([R.get("/commercant/produits"),R.get("/categories"),R.get("/commercant/profil")]);i.value=!1,$.value=h.data.produits.map(C=>{var V;return{...C,commercant_id:((V=o.value)==null?void 0:V.id)||""}}),f.value=r.data.categories,o.value=d.data.commercant,g.value={nom:o.value.nom,description:o.value.description||"",ville:o.value.ville||""}}catch{l.error("Erreur lors du chargement des données."),i.value=!1}},u=async()=>{try{const h=await R.post("/commercant/produits",n.value);l.success("Produit ajouté avec succès."),a(),n.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{l.error("Erreur lors de l’ajout du produit.")}},S=async h=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await R.delete(`/commercant/produits/${h}`),l.success("Produit supprimé avec succès."),a()}catch{l.error("Erreur lors de la suppression du produit.")}},b=async()=>{try{await R.put("/commercant/profil",g.value),l.success("Profil mis à jour avec succès."),a()}catch{l.error("Erreur lors de la mise à jour du profil.")}};return ve(()=>{a()}),(h,r)=>(t(),s("div",gn,[W(Ze),e("div",bn,[r[26]||(r[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),k(" Espace Commerçant ")],-1)),e("div",xn,[r[14]||(r[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",hn,[o.value?(t(),s("p",yn,[r[12]||(r[12]=e("span",{class:"font-medium"},"Revenus :",-1)),k(" "+c(o.value.revenus)+" FCFA ",1)])):P("",!0),o.value?(t(),s("p",_n,[r[13]||(r[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),k(" "+c(o.value.produits_vendus),1)])):(t(),s("p",wn,"Chargement..."))])]),e("div",kn,[r[17]||(r[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil Commerçant",-1)),e("form",{onSubmit:ie(b,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[D(e("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>g.value.nom=d),type:"text",placeholder:"Nom du commerçant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,g.value.nom]]),D(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=d=>g.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Z,g.value.description]]),D(e("select",{"onUpdate:modelValue":r[2]||(r[2]=d=>g.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[r[15]||(r[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(H,null,ee(p.value,d=>(t(),s("option",{key:d,value:d},c(d),9,$n))),128))],512),[[_e,g.value.ville]]),r[16]||(r[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",Cn,[r[22]||(r[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:ie(u,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[D(e("input",{"onUpdate:modelValue":r[3]||(r[3]=d=>n.value.nom=d),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.nom]]),D(e("textarea",{"onUpdate:modelValue":r[4]||(r[4]=d=>n.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Z,n.value.description]]),D(e("input",{"onUpdate:modelValue":r[5]||(r[5]=d=>n.value.prix=d),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.prix]]),D(e("input",{"onUpdate:modelValue":r[6]||(r[6]=d=>n.value.photo_url=d),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Z,n.value.photo_url]]),D(e("select",{"onUpdate:modelValue":r[7]||(r[7]=d=>n.value.category_id=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[r[18]||(r[18]=e("option",{value:""},"Catégorie",-1)),(t(!0),s(H,null,ee(f.value,d=>(t(),s("option",{key:d.id,value:d.id},c(d.nom),9,An))),128))],512),[[_e,n.value.category_id]]),e("label",Pn,[D(e("input",{"onUpdate:modelValue":r[8]||(r[8]=d=>n.value.collaboratif=d),type:"checkbox"},null,512),[[Be,n.value.collaboratif]]),r[19]||(r[19]=k(" Collaboratif "))]),D(e("input",{"onUpdate:modelValue":r[9]||(r[9]=d=>n.value.marge_min=d),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Z,n.value.marge_min]]),D(e("input",{"onUpdate:modelValue":r[10]||(r[10]=d=>n.value.stock=d),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.stock]]),D(e("select",{"onUpdate:modelValue":r[11]||(r[11]=d=>n.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[r[20]||(r[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(H,null,ee(p.value,d=>(t(),s("option",{key:d,value:d},c(d),9,jn))),128))],512),[[_e,n.value.ville]]),r[21]||(r[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",Sn,[r[25]||(r[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),i.value?(t(),s("div",Mn,r[23]||(r[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):$.value.length===0?(t(),s("div",Vn," Aucun produit disponible. ")):(t(),s("div",En,[(t(!0),s(H,null,ee($.value,d=>(t(),s("div",{key:d.id,class:"relative"},[W(Te,{produit:d},null,8,["produit"]),e("button",{onClick:C=>S(d.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},r[24]||(r[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,zn)]))),128))]))])])]))}}),Zd=le(Fn,[["__scopeId","data-v-98a2ca3d"]]),In={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},Ln={class:"container mx-auto max-w-4xl"},Tn={class:"bg-white rounded-lg shadow-md p-6 mb-6"},On={key:0,class:"ml-2"},Un={class:"w-full bg-gray-200 rounded-full h-4"},qn={class:"text-[var(--espace-gris)] text-xs mt-2"},Rn={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},Nn={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Dn={key:0,class:"mb-4"},Wn={class:"text-sm text-[var(--espace-gris)]"},Jn={class:"font-bold text-[var(--espace-or)]"},Bn={class:"text-sm text-[var(--espace-gris)] truncate"},Hn=["href"],Gn={key:1,class:"mb-4"},Xn=["placeholder"],Kn={class:"flex flex-col sm:flex-row gap-2"},Qn=["disabled"],Zn={key:0},Yn={key:1},ei=["disabled"],ti={key:0},si={key:1},oi={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},ai={class:"bg-white rounded-lg shadow-md p-6 mb-6"},ri={class:"mb-4"},li={key:0,class:"overflow-x-auto"},ni={class:"w-full text-sm text-left text-[var(--espace-gris)]"},ii=["onClick"],ui={class:"px-4 py-2"},di={class:"px-4 py-2"},ci={key:1,class:"text-center text-[var(--espace-gris)] py-4"},pi={class:"bg-white rounded-lg shadow-md p-6 text-center"},vi={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},mi={class:"text-[var(--espace-gris)] mt-2"},fi=re({__name:"Parrainage",setup(I){const l=fe(),$=ge(),f=ue(),o=()=>{const G=window.location.hostname;return G==="localhost"||G==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.devfack.com/register"},i=v(""),n=v(""),g=v([]),p=v(0),a=v(""),u=v(""),S=v(!1),b=v(!1),h=v({}),r=v(null),d=v(0),C=v(0),V=v(0),_=v("all"),M=ce(()=>{var G;return((G=h.value)==null?void 0:G.couleur)||"#6b7280"}),A=ce(()=>_.value==="commercants"?g.value.filter(G=>G.est_commercant):_.value==="nonCommercants"?g.value.filter(G=>!G.est_commercant):g.value),T=async()=>{if(!l.user){f.error("Veuillez vous connecter pour accéder à cette page"),$.push("/login");return}try{const y=(await R.get("/parrainages/dashboard")).data;i.value=y.code||"",n.value=i.value?`${o()}/${i.value}`:"",g.value=y.parrainages||[],p.value=y.total_gains||0,h.value=y.niveau_actuel,r.value=y.niveau_suivant,d.value=y.progression,C.value=y.total_parrainages||0,V.value=y.total_parrainages_commercants||0}catch(G){f.error("Erreur lors de la récupération des données de parrainage"),console.error(G)}},K=async()=>{if(!l.user){f.error("Veuillez vous connecter");return}S.value=!0;try{const G=await R.post("/parrainages/generateCode");a.value=G.data.suggested_code,u.value=a.value,f.success("Nouveau code suggéré avec succès !"),i.value&&(n.value=`${o()}/${i.value}`)}catch(G){f.error("Erreur lors de la génération du code"),console.error(G)}finally{S.value=!1}},U=async()=>{var G,y;if(!l.user){f.error("Veuillez vous connecter");return}if(!u.value.trim()){f.error("Veuillez entrer un code valide");return}b.value=!0;try{const w=await R.post("/parrainages/createCode",{code:u.value.trim()});i.value=w.data.code,n.value=w.data.link||`${o()}/${w.data.code}`,f.success(w.data.message||"Code créé avec succès !"),await T()}catch(w){f.error(((y=(G=w.response)==null?void 0:G.data)==null?void 0:y.message)||"Erreur lors de la création du code"),console.error(w)}finally{b.value=!1}},se=G=>{if(!n.value){f.error("Aucun lien disponible pour le partage");return}let y="";const w=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${n.value}`);switch(G){case"whatsapp":y=`https://api.whatsapp.com/send?text=${w}`;break;case"facebook":y=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n.value)}`;break;default:f.error("Plateforme non prise en charge");return}window.open(y,"_blank")},ne=G=>{G.est_commercant?$.push(`/commercants/${G.id}`):$.push({name:"public-profile",params:{id:G.id}})};return ve(()=>{T()}),(G,y)=>{var w,E,m,J,z;return t(),s("div",In,[e("div",Ln,[e("div",Tn,[e("h2",{class:"text-lg font-semibold mb-4",style:ye({color:M.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:ye({color:M.value})},[e("div",null,[y[5]||(y[5]=k(" Votre niveau actuel : ")),e("strong",null,c(h.value?h.value.nom:"Pas de niveau")+" "+c((w=h.value)==null?void 0:w.emoji)+" ("+c(V.value)+"/"+c(r.value?r.value.filleuls_requis:(E=h.value)==null?void 0:E.filleuls_requis)+" commerçants)",1)]),((m=r.value)==null?void 0:m.jetons_bonus)>0?(t(),s("span",On,"+"+c((J=r.value)==null?void 0:J.jetons_bonus)+" jetons ",1)):P("",!0)],4),e("div",Un,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:ye({width:`${d.value}%`,background:`${M.value}`})},null,4)]),e("p",qn," Prochain niveau : "+c(r.value?r.value.nom:"Légende 🏆")+" à "+c(r.value?r.value.filleuls_requis:"1000+")+" commerçants ",1),(z=h.value.avantages)!=null&&z.length?(t(),s("p",Rn," Avantages : "+c(h.value.avantages.join(", ")),1)):P("",!0),e("button",{onClick:y[0]||(y[0]=N=>F($).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},y[6]||(y[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),k(" En savoir plus ")]))]),y[24]||(y[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des récompenses ! Atteignez des niveaux supérieurs pour débloquer des jetons et des avantages. ")],-1)),e("div",Nn,[y[15]||(y[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),i.value?(t(),s("div",Dn,[e("p",Wn,[y[7]||(y[7]=k(" Code : ")),e("span",Jn,c(i.value),1)]),e("p",Bn,[y[8]||(y[8]=k(" Lien : ")),e("a",{href:n.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},c(n.value),9,Hn)])])):(t(),s("div",Gn,[D(e("input",{"onUpdate:modelValue":y[1]||(y[1]=N=>u.value=N),type:"text",placeholder:a.value||"Entrez ou générez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,Xn),[[Z,u.value]]),e("div",Kn,[e("button",{onClick:K,disabled:S.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[S.value?(t(),s("span",Zn,y[9]||(y[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),k(" Génération... ")]))):(t(),s("span",Yn,y[10]||(y[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),k(" Générer un code ")])))],8,Qn),e("button",{onClick:U,disabled:b.value||!u.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[b.value?(t(),s("span",ti,y[11]||(y[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),k(" Création... ")]))):(t(),s("span",si,y[12]||(y[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),k(" Créer le code ")])))],8,ei)])])),i.value?(t(),s("div",oi,[e("button",{onClick:y[2]||(y[2]=N=>se("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},y[13]||(y[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),k(" Partager sur WhatsApp ")])),e("button",{onClick:y[3]||(y[3]=N=>se("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},y[14]||(y[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),k(" Partager sur Facebook ")]))])):P("",!0)]),e("div",ai,[y[18]||(y[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs Parrainés",-1)),e("div",ri,[D(e("select",{"onUpdate:modelValue":y[4]||(y[4]=N=>_.value=N),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},y[16]||(y[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"Commerçants",-1),e("option",{value:"nonCommercants"},"Non Commerçants",-1)]),512),[[_e,_.value]])]),A.value.length?(t(),s("div",li,[e("table",ni,[y[17]||(y[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commerçant")])],-1)),e("tbody",null,[(t(!0),s(H,null,ee(A.value,N=>(t(),s("tr",{key:N.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:te=>ne(N)},c(N.filleul_nom||"Anonyme"),9,ii),e("td",ui,c(new Date(N.date_inscription).toLocaleDateString("fr-FR")),1),e("td",di,c(N.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",ci," Aucun utilisateur parrainé correspondant au filtre. Commencez à inviter dès maintenant ! "))]),e("div",pi,[y[22]||(y[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",vi,c(p.value)+" jetons ",1),e("p",mi,[y[19]||(y[19]=k(" 🎉 Vous avez invité ")),e("strong",null,c(C.value),1),y[20]||(y[20]=k(" utilisateurs, dont ")),e("strong",null,c(V.value),1),y[21]||(y[21]=k(" sont commerçants ! "))]),y[23]||(y[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," Débloquez plus de jetons et d'avantages en atteignant les niveaux supérieurs. ",-1))])])])}}}),Yd=le(fi,[["__scopeId","data-v-fa541dd4"]]),gi={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},bi={class:"container mx-auto max-w-4xl"},xi={class:"flex border-b border-gray-300 mb-6"},hi={key:0},yi={key:0,class:"grid grid-cols-1 gap-4"},_i={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},wi=["onClick"],ki={class:"text-sm text-[var(--espace-gris)]"},$i={class:"text-sm text-[var(--espace-gris)]"},Ci=["onClick"],Ai={class:"flex flex gap-2"},Pi=["onClick"],ji=["onClick"],Si=["onClick"],Mi={key:1,class:"text-center text-[var(--espace-gris)]"},Vi={key:1},Ei={key:0,class:"grid grid-cols-1 gap-4"},zi={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Fi=["onClick"],Ii={class:"text-sm text-[var(--espace-gris)]"},Li={class:"text-sm text-[var(--espace-gris)]"},Ti=["onClick"],Oi=["onClick"],Ui={key:1,class:"text-center text-[var(--espace-gris)]"},qi=re({__name:"Collaborations",setup(I){const l=S=>{localStorage.setItem("pending_collaborations",JSON.stringify(S))},$=ue(),f=ge(),o=v({sent_collaborations:[],received_collaborations:[]}),i=v(!0),n=v("received"),g=async()=>{try{const S=await R.get("/collaborations");console.log(S.data),o.value=S.data;const b=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(b.length>0){const h=new Set(o.value.sent_collaborations.map(d=>d.produit_id)),r=b.filter(d=>!h.has(d.produit_id));r.length!==b.length&&(l(r),console.log("Collaborations en attente nettoyées dans localStorage"))}}catch{$.error("Erreur lors du chargement des collaborations")}finally{i.value=!1}},p=S=>{f.push({path:`/produits/${S}`})},a=S=>{var h,r,d;const b=((h=S.commercant)==null?void 0:h.id)||((d=(r=S.produit)==null?void 0:r.commercant)==null?void 0:d.id);b?f.push({path:`/commercants/${b}`}):$.error("Profil du commerçant non disponible")},u=async(S,b)=>{var h;try{const r=await R.post(`/collaborations/${S}`,{statut:b});$.success(r.data.message),await g()}catch(r){console.log(r.response.data.message),$.error(`Erreur lors de la mise à jour de la collaboration${(h=r.response)==null?void 0:h.data.message}`)}};return ve(()=>{i.value=!0,g()}),(S,b)=>{var h,r,d,C;return t(),s(H,null,[W(je,{isLoading:i.value},null,8,["isLoading"]),e("div",gi,[e("div",bi,[b[4]||(b[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),k(" Mes Collaborations ")],-1)),e("div",xi,[e("button",{class:X(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":n.value==="received","text-[var(--espace-gris)]":n.value!=="received"}]),onClick:b[0]||(b[0]=V=>n.value="received")}," Collaborations reçues ",2),e("button",{class:X(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":n.value==="sent","text-[var(--espace-gris)]":n.value!=="sent"}]),onClick:b[1]||(b[1]=V=>n.value="sent")}," Collaborations envoyées ",2)]),n.value==="received"?(t(),s("div",hi,[(r=(h=o.value)==null?void 0:h.received_collaborations)!=null&&r.length?(t(),s("div",yi,[(t(!0),s(H,null,ee(o.value.received_collaborations,V=>(t(),s("div",{key:V.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",_i,[e("div",null,[e("h2",{onClick:_=>p(V.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},c(V.produit.nom),9,wi),e("p",ki," Prix de revente proposé : "+c(V.prix_revente)+" FCFA ",1),e("p",$i,[b[2]||(b[2]=k(" Statut : ")),e("span",{class:X({"text-green-600":V.statut==="valider","text-yellow-600":V.statut==="en_attente","text-red-600":V.statut==="refuser"})},c(V.statut==="en_attente"?"En attente":V.statut==="valider"?"Valider":"Refusée"),3)]),e("button",{onClick:_=>a(V),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerçant ",8,Ci)]),e("div",Ai,[V.statut==="en_attente"?(t(),s("button",{key:0,onClick:_=>u(V.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,Pi)):P("",!0),V.statut==="en_attente"?(t(),s("button",{key:1,onClick:_=>u(V.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,ji)):P("",!0),e("button",{onClick:_=>p(V.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Si)])])]))),128))])):(t(),s("p",Mi," Aucune collaboration reçue pour le moment. "))])):P("",!0),n.value==="sent"?(t(),s("div",Vi,[(C=(d=o.value)==null?void 0:d.sent_collaborations)!=null&&C.length?(t(),s("div",Ei,[(t(!0),s(H,null,ee(o.value.sent_collaborations,V=>(t(),s("div",{key:V.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",zi,[e("div",null,[e("h2",{onClick:_=>p(V.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},c(V.produit.nom),9,Fi),e("p",Ii," Prix de revente proposé : "+c(V.prix_revente)+" FCFA ",1),e("p",Li,[b[3]||(b[3]=k(" Statut : ")),e("span",{class:X({"text-green-600":V.statut==="valider","text-yellow-600":V.statut==="en_attente","text-red-600":V.statut==="refuser"})},c(V.statut==="en_attente"?"En attente":V.statut==="valider"?"Valider":"Refusée"),3)]),e("button",{onClick:_=>a(V),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerçant ",8,Ti)]),e("button",{onClick:_=>p(V.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Oi)])]))),128))])):(t(),s("p",Ui," Aucune collaboration envoyée pour le moment. "))])):P("",!0)])])],64)}}}),ec=le(qi,[["__scopeId","data-v-32f56443"]]),Ri={class:"overflow-y-scroll bg-gray-100"},Ni={class:"container mx-auto px-4 sm:px-6 py-8"},Di={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},Wi={class:"flex flex-col sm:flex-row items-center gap-6"},Ji={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Bi=["src"],Hi={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Gi={class:"flex-1"},Xi={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Ki={class:"text-sm text-[var(--espace-gris)] mb-1"},Qi={class:"text-sm text-[var(--espace-gris)] mb-1"},Zi={class:"text-sm text-[var(--espace-gris)]"},Yi={key:0,class:"text-sm text-[var(--espace-gris)]"},eu={class:"mt-2 flex space-x-2 flex-col"},tu={class:"text-sm text-[var(--espace-gris)]"},su={class:"text-xs text-[var(--espace-gris)]"},ou={class:"mt-4 flex flex-col sm:flex-row gap-4"},au={class:"mt-4 flex flex-wrap gap-4"},ru={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},lu={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},nu={key:1,class:"text-base text-[var(--espace-gris)] italic"},iu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},uu={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},du={class:"flex items-center space-x-2"},cu={key:3},pu={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},vu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},mu={key:5,class:"text-base text-[var(--espace-gris)] italic"},fu={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},gu={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},bu={class:"text-sm text-[var(--espace-gris)]"},xu={class:"text-sm text-[var(--espace-gris)]"},hu=re({__name:"CommercantDetails",setup(I){const l=Ae(),$=ue(),f=v(!1),o=v(null),i=v(null),n=v(0),g=v(0),p=v(!1),a=async()=>{f.value=!0;try{const h=await R.get(`/commercant/${l.params.commercantId}`);console.log(h.data),o.value=h.data.commercant,n.value=h.data.average_rating||0,g.value=h.data.vote_count||0,o.value.produits||console.warn("Aucun produit trouvé dans la réponse de l'API pour ce commerçant.")}catch{$.error("Erreur lors du chargement des détails du commerçant.")}finally{f.value=!1}},u=async()=>{var h,r;if(i.value===null||i.value<1||i.value>5){$.error("Veuillez sélectionner une note entre 1 et 5.");return}try{const d=await R.post(`/commercant/${l.params.commercantId}/rate`,{rating:i.value});n.value=d.data.average_rating||0,$.success("Merci pour votre note !"),i.value=null,p.value=!1,g.value=d.data.vote_count||g.value+1}catch(d){$.error(((r=(h=d.response)==null?void 0:h.data)==null?void 0:r.message)||"Erreur lors de la notation.")}},S=ce(()=>{var h;return((h=o.value)==null?void 0:h.produits)||[]}),b=()=>{p.value=!0};return ve(async()=>{a()}),(h,r)=>{const d=xe("router-link");return t(),s(H,null,[W(je,{isLoading:f.value},null,8,["isLoading"]),e("div",Ri,[W(Ze),e("div",Ni,[o.value?(t(),s("div",Di,[e("div",Wi,[e("div",Ji,[o.value.photo_url?(t(),s("img",{key:0,src:o.value.photo_url,alt:"Photo du commerçant",class:"w-full h-full object-cover"},null,8,Bi)):(t(),s("i",Hi))]),e("div",Gi,[e("h1",Xi," Commerçant : "+c(o.value.nom),1),e("p",Ki,[r[2]||(r[2]=e("strong",null,"Ville :",-1)),k(" "+c(o.value.ville),1)]),e("p",Qi,[r[3]||(r[3]=e("strong",null,"Inscrit depuis :",-1)),k(" "+c(new Date(o.value.created_at).toLocaleDateString()),1)]),e("p",Zi,[r[4]||(r[4]=e("strong",null,"Contact :",-1)),k(" "+c(o.value.email||"Non disponible"),1)]),o.value.telephone?(t(),s("p",Yi,[r[5]||(r[5]=e("strong",null,"Téléphone :",-1)),k(" "+c(o.value.telephone),1)])):P("",!0),e("div",eu,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:b},[(t(),s(H,null,ee(5,C=>e("span",{key:C,class:"relative text-yellow-400 w-5 h-5"},[r[6]||(r[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:ye({width:C<=Math.floor(n.value)?"100%":C===Math.ceil(n.value)&&n.value%1!==0?`${n.value%1*100}%`:"0%"})},null,4)])),64)),e("p",tu,c(Number(n.value).toFixed(1))+"/5 ",1)]),e("span",su,"("+c(g.value)+" votes)",1)])])]),e("div",ou,[W(d,{to:`/chat/${o.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Y(()=>r[7]||(r[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),k(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),W(d,{to:`/public-profile/${o.value.user_id||o.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Y(()=>r[8]||(r[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),k(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",au,[e("span",ru,"Produits : "+c(S.value.length),1),o.value.revenus?(t(),s("span",lu,"Revenus : "+c(o.value.revenus)+" FCFA",1)):P("",!0)])])):f.value?P("",!0):(t(),s("div",nu,"Commerçant non trouvé.")),p.value?(t(),s("div",iu,[e("div",uu,[r[9]||(r[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce Commerçant",-1)),e("div",du,[D(e("input",{"onUpdate:modelValue":r[0]||(r[0]=C=>i.value=C),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[Z,i.value,void 0,{number:!0}]]),e("button",{onClick:u,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:r[1]||(r[1]=C=>p.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):P("",!0),f.value?(t(),s("div",cu)):S.value.length>0?(t(),s("div",pu,[r[10]||(r[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du Commerçant",-1)),e("div",vu,[(t(!0),s(H,null,ee(S.value,C=>(t(),pe(Te,{key:C.id,produit:C},null,8,["produit"]))),128))])])):o.value&&S.value.length===0?(t(),s("div",mu,"Aucun produit disponible pour ce commerçant.")):P("",!0),o.value&&o.value.statistiques?(t(),s("div",fu,[r[13]||(r[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",gu,[e("p",bu,[r[11]||(r[11]=e("strong",null,"Vues totales :",-1)),k(" "+c(o.value.statistiques.total_views),1)]),e("p",xu,[r[12]||(r[12]=e("strong",null,"Produits populaires :",-1)),k(" "+c(o.value.statistiques.popular_products),1)])])])):P("",!0)])])],64)}}}),tc=le(hu,[["__scopeId","data-v-e97faea3"]]),yu={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},_u={class:"container mx-auto max-w-2xl"},wu={class:"bg-white rounded-lg shadow-md p-6"},ku={key:0,class:"text-red-500 text-xs"},$u={key:0,class:"text-red-500 text-xs"},Cu={key:0,class:"text-red-500 text-xs"},Au={key:0,class:"text-red-500 text-xs"},Pu={key:0,class:"text-red-500 text-xs"},ju=["disabled"],Su={key:0},Mu={key:1},Vu=re({__name:"CommercantCreate",setup(I){const l=ge(),$=ue(),f=v({nom:"",ville:"",email:"",telephone:"",photo:null}),o=v(!1),i=v({}),n=p=>{const a=p.target;a.files&&a.files[0]&&(f.value.photo=a.files[0])},g=async()=>{var p,a;o.value=!0,i.value={};try{const u=new FormData;u.append("nom",f.value.nom),u.append("ville",f.value.ville),u.append("email",f.value.email),u.append("telephone",f.value.telephone),f.value.photo&&u.append("photo",f.value.photo);const S=await R.post("/commercants",u,{headers:{"Content-Type":"multipart/form-data"}});console.log(S.data.message),$.success("Commerçant créé avec succès !"),l.push("/profil")}catch(u){(a=(p=u.response)==null?void 0:p.data)!=null&&a.errors?i.value=u.response.data.errors:$.error("Erreur lors de la création du commerçant"),console.error(u)}finally{o.value=!1}};return(p,a)=>(t(),s("div",yu,[e("div",_u,[a[11]||(a[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),k(" Créer un Commerçant ")],-1)),e("div",wu,[e("form",{onSubmit:ie(g,["prevent"]),class:"space-y-6"},[e("div",null,[a[4]||(a[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>f.value.nom=u),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerçant",required:""},null,512),[[Z,f.value.nom]]),i.value.nom?(t(),s("span",ku,c(i.value.nom),1)):P("",!0)]),e("div",null,[a[5]||(a[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),D(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>f.value.ville=u),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[Z,f.value.ville]]),i.value.ville?(t(),s("span",$u,c(i.value.ville),1)):P("",!0)]),e("div",null,[a[6]||(a[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),D(e("input",{"onUpdate:modelValue":a[2]||(a[2]=u=>f.value.email=u),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[Z,f.value.email]]),i.value.email?(t(),s("span",Cu,c(i.value.email),1)):P("",!0)]),e("div",null,[a[7]||(a[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Téléphone",-1)),D(e("input",{"onUpdate:modelValue":a[3]||(a[3]=u=>f.value.telephone=u),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[Z,f.value.telephone]]),i.value.telephone?(t(),s("span",Au,c(i.value.telephone),1)):P("",!0)]),e("div",null,[a[8]||(a[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:n,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),i.value.photo?(t(),s("span",Pu,c(i.value.photo),1)):P("",!0)]),e("div",null,[e("button",{type:"submit",disabled:o.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[o.value?(t(),s("span",Su,a[9]||(a[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),k(" Création en cours... ")]))):(t(),s("span",Mu,a[10]||(a[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),k(" Créer le commerçant ")])))],8,ju)])],32)])])]))}}),sc=le(Vu,[["__scopeId","data-v-0c50a6f0"]]),Eu={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},zu={class:"container mx-auto max-w-4xl"},Fu={class:"text-md font-semibold text-white flex items-center"},Iu={class:"ml-2 text-sm text-white/80"},Lu={class:"text-white/90 text-sm mt-2"},Tu={key:0,class:"text-white/90 text-sm mt-1"},Ou={class:"list-disc list-inside ml-4"},Uu=re({__name:"ParrainageInfo",setup(I){const l=ge(),$=ue(),f=v([]),o=async()=>{try{const n=await R.get("/parrainages/niveaux");f.value=n.data.niveaux}catch(n){$.error("Erreur lors de la récupération des niveaux de parrainage"),console.error(n)}},i=()=>{l.go(-1)};return ve(()=>{o()}),(n,g)=>(t(),s("div",Eu,[e("div",zu,[g[4]||(g[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),k(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:i,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},g[0]||(g[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),k(" Retour ")])),g[5]||(g[5]=ze('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-9d89fe08> Le système de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Vos gains dépendent des <strong data-v-9d89fe08>niveaux de parrainage</strong>, débloqués par le nombre de commerçants parrainés, avec des bonus en jetons cumulatifs. Plus vous parrainez, plus vous montez de niveau ! Découvrez les détails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Comment ça fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-9d89fe08><li data-v-9d89fe08><strong data-v-9d89fe08>Obtenez votre code unique :</strong> Générez ou créez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis à s&#39;inscrire.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Attirez des commerçants :</strong> Encouragez vos filleuls à devenir des commerçants actifs sur la plateforme. Seuls les commerçants parrainés comptent pour débloquer les niveaux.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Montez de niveau :</strong> Chaque niveau nécessite un nombre spécifique de commerçants parrainés. Une fois le seuil atteint, vous débloquez un bonus en jetons correspondant à ce niveau, en plus des bonus des niveaux précédents.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Suivez vos progrès :</strong> Consultez votre niveau actuel, vos jetons bonus et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-9d89fe08><strong data-v-9d89fe08>Note importante :</strong> Les jetons bonus sont cumulatifs et attribués en fonction des niveaux atteints, pas directement par parrainage individuel. Par exemple, si vous atteignez le niveau 2 avec 5 commerçants, vous recevez les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(H,null,ee(f.value,p=>(t(),s("div",{key:p.id,class:"mb-6 p-4 border rounded-lg",style:ye({backgroundColor:p.couleur||"#f0f0f0"})},[e("h3",Fu,[k(c(p.nom)+" "+c(p.emoji)+" ",1),e("span",Iu,"("+c(p.filleuls_requis)+" commerçants requis)",1)]),e("p",Lu,[g[1]||(g[1]=e("strong",null,"Bonus en jetons :",-1)),k(" "+c(p.jetons_bonus)+" jetons ",1)]),p.avantages.length?(t(),s("p",Tu,[g[2]||(g[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",Ou,[(t(!0),s(H,null,ee(p.avantages,a=>(t(),s("li",{key:a},c(a),1))),128))])])):P("",!0),g[3]||(g[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont crédités une fois le niveau atteint et cumulés avec les niveaux précédents. ",-1))],4))),128))])]))}}),oc=le(Uu,[["__scopeId","data-v-9d89fe08"]]),qu={class:"w-full flex relative px-0"},Ru=["onClick"],Nu={class:"flex items-center"},Du=["onClick"],Wu=["src"],Ju={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Bu={class:"min-w-0"},Hu={class:"font-semibold text-[var(--espace-vert)] truncate"},Gu={class:"text-xs text-[var(--espace-gris)] truncate"},Xu={class:"flex items-center"},Ku={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Qu={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Zu={class:"w-full grid grid-rows-[10%_86%]"},Yu={class:"flex border-b"},ed={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},td={key:0,class:"h-full flex flex-col"},sd={class:"block text-[var(--espace-vert)]"},od={class:"text-gray-800"},ad={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},rd={key:0,class:"text-center text-[var(--espace-gris)]"},ld={class:"px-2 md:px-4 z-20"},nd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},id={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},ud={key:1,class:"flex items-center justify-center h-full"},dd=re({__name:"Messages",setup(I){const l=()=>{const z=window.location.hostname;return z==="localhost"||z==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},$=ce(()=>l()),f=ge(),o=Ae(),i=fe(),n=ue(),g=Fe(),p=v([]),a=v([]),u=v(null),S=v(""),b=v(!0),h=v(0),r=v(!1),d=v(!1),C=v(null),V=v(null),_=v(window.innerWidth<768);let M=null;const A=()=>{Xe(()=>{var z;(z=C.value)==null||z.scrollTo({top:C.value.scrollHeight,behavior:"smooth"})})},T=()=>{V.value=null,localStorage.removeItem("chatProduct")},K=async()=>{try{const z=await R.get("/conversations");p.value=z.data.conversations,console.log(z.data)}catch(z){n.error("Erreur lors de la récupération des conversations"),console.error(z)}},U=async(z,N=!0)=>{var te,O,j;if(!d.value){d.value=!0;try{N&&(h.value=0,a.value=[]),b.value=!1;const L=await R.get(`/chat/${z}?offset=${h.value}`);a.value=[...L.data.messages],r.value=L.data.hasMore;const Q=localStorage.getItem("chatProduct"),oe=p.value.find(x=>x.user_id===z);let de="",B="/default-avatar.png";oe?(de=oe.is_commercant?oe.name:((te=L.data.user)==null?void 0:te.nom)||"",B=oe.profile_photo||"/default-avatar.png"):Q?(de=JSON.parse(Q).commercant_name||((O=L.data.user)==null?void 0:O.nom)||"",B=(oe==null?void 0:oe.profile_photo)||"/default-avatar.png"):de=((j=L.data.user)==null?void 0:j.nom)||"",u.value={user_id:z,name:de,is_commercant:(oe==null?void 0:oe.is_commercant)||!1,profile_photo:B},Q&&(V.value=JSON.parse(Q)),await w(z),A()}catch(L){n.error("Erreur lors du chargement des messages"),console.error(L)}finally{d.value=!1}}},se=z=>{f.push({name:"messages",params:{receiverId:z}}),_.value&&(b.value=!1)},ne=async()=>{var te,O,j,L,Q,oe,de,B,x,ae;if(!S.value.trim()||!u.value){n.error("Veuillez sélectionner une conversation et écrire un message");return}const z=S.value.trim(),N={id:-Date.now(),sender_id:(te=i.user)==null?void 0:te.id,receiver_id:u.value.user_id,content:z,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((O=V.value)==null?void 0:O.id)||null,sender:{id:((j=i.user)==null?void 0:j.id)??0,nom:((L=i.user)==null?void 0:L.nom)??"",email:((Q=i.user)==null?void 0:Q.email)??"",telephone:((oe=i.user)==null?void 0:oe.telephone)??"",ville:((de=i.user)==null?void 0:de.ville)??"",premium:((B=i.user)==null?void 0:B.premium)??!1,parrain_id:((x=i.user)==null?void 0:x.parrain_id)??0},receiver:{id:u.value.user_id,nom:u.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:V.value||null};a.value.push(N),S.value="",A();try{const q=await R.post(`/chat/${u.value.user_id}`,{content:z,product_id:(ae=V.value)==null?void 0:ae.id});console.log(q.data),V.value&&T()}catch(q){n.error("Échec d'envoi"),console.error(q),a.value=a.value.filter(we=>we.id!==N.id)}},G=()=>{!C.value||!r.value||d.value||C.value.scrollTop<=100&&(h.value+=30,U(u.value.user_id,!1))},y=()=>{_.value=window.innerWidth<768,b.value=window.innerWidth>=768},w=async z=>{try{const N=await R.put("/messages/mark-all-as-read");g.saveUnreadMessagesToLocalStorage(N.data.unread_messages)}catch(N){console.error("Erreur lors du marquage des messages comme lus:",N),n.error("Erreur lors de la mise à jour des messages lus")}},E=()=>{b.value=!b.value},m=(z,N)=>{const te=N?`/commercants/${z}`:`/users/${z}`;f.push(te)},J=z=>{var N;M&&(M.stopListening("MessageSent"),window.Echo.leave(`chat.${M.params.receiverId}`)),z&&((N=i.user)!=null&&N.id)&&(console.log("🔔 Abonnement au canal chat."+z),M=window.Echo.channel("public-channel").listen("message.sent",te=>{var O,j;if(console.log("📩 Nouveau message reçu :",te.message),((O=u.value)==null?void 0:O.user_id)===z&&te.sender_id!==((j=i.user)==null?void 0:j.id)){const L={id:te.message.id,sender_id:te.sender_id,receiver_id:te.receiver_id,content:te.message.content,created_at:te.message.created_at,updated_at:te.message.updated_at,is_read:te.message.is_read,product_id:te.message.product_id||null,sender:te.sender,receiver:te.receiver,product:te.message.product||null};a.value.push(L),A(),g.saveUnreadMessagesToLocalStorage(te.unread_messages)}}),M.params={receiverId:z})};return ve(()=>{K(),o.params.receiverId&&U(parseInt(o.params.receiverId)),window.addEventListener("resize",y)}),Pe(()=>{M&&(M.stopListening("MessageSent"),window.Echo.leave(`chat.${M.params.receiverId}`)),window.removeEventListener("resize",y)}),me(()=>{var z;return(z=u.value)==null?void 0:z.user_id},z=>{z&&J(z)}),me(()=>o.params.receiverId,async z=>{z&&await U(parseInt(z))}),(z,N)=>{var O,j;const te=xe("router-link");return t(),s("div",qu,[W(be,{name:"slide-fade"},{default:Y(()=>[b.value||!_.value?(t(),s("div",{key:0,class:X(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",_.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[N[1]||(N[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(H,null,ee(p.value,L=>(t(),s("div",{key:L.user_id,onClick:Q=>se(L.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",Nu,[e("div",{onClick:ie(Q=>m(L.user_id,L.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[L.profile_photo?(t(),s("img",{key:0,src:$.value+L.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Wu)):(t(),s("i",Ju))],8,Du),e("div",Bu,[e("p",Hu,c(L.name),1),e("p",Gu,c(L.last_message),1)])]),e("div",Xu,[L.unread_count>0?(t(),s("div",Ku,c(L.unread_count),1)):P("",!0),e("div",Qu,c(new Date(L.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,Ru))),128))],2)):P("",!0)]),_:1}),e("div",Zu,[e("div",Yu,[!b.value&&_.value&&u.value?(t(),s("button",{key:0,onClick:E,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},N[2]||(N[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):P("",!0),u.value?(t(),s("h2",ed,c(u.value.name),1)):P("",!0)]),e("div",{class:X(["bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full",b.value&&!_.value?"":"rounded-r-lg"]),onScroll:G},[u.value?(t(),s("div",td,[e("div",{ref_key:"messagesContainer",ref:C,class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 messages-container"},[(t(!0),s(H,null,ee(a.value,L=>{var Q,oe,de;return t(),s("div",{key:L.id,class:X(["p-3 rounded-full break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":L.sender_id===((Q=F(i).user)==null?void 0:Q.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":L.sender_id!==((oe=F(i).user)==null?void 0:oe.id)}])},[e("strong",sd,c(L.sender.nom)+" :",1),e("p",od,[(de=L.product)!=null&&de.id?(t(),pe(te,{key:0,to:{name:"produit",params:{id:L.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:Y(()=>[k("[Produit "+c(L.product.nom)+"]",1)]),_:2},1032,["to"])):P("",!0),k(" "+c(L.content),1)]),e("p",ad,c(new Date(L.created_at).toLocaleTimeString()),1)],2)}),128)),d.value?(t(),s("div",rd,"Chargement...")):P("",!0)],512),e("div",ld,[e("div",nd,[(O=V.value)!=null&&O.id?(t(),s("span",id,[k(" Produit "+c((j=V.value)==null?void 0:j.nom)+" ",1),e("button",{onClick:T,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," × ")])):P("",!0),D(e("input",{"onUpdate:modelValue":N[0]||(N[0]=L=>S.value=L),onKeyup:Ue(ne,["enter"]),type:"text",placeholder:"Écrivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w[200px]"},null,544),[[Z,S.value]]),e("button",{onClick:ne,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},N[3]||(N[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",ud,N[4]||(N[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"Sélectionnez une conversation pour commencer.",-1)])))],34)])])}}}),ac=le(dd,[["__scopeId","data-v-81cfc639"]]),cd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},pd={key:0,class:"overflow-y-scroll space-y-4"},vd={class:"flex justify-between items-center"},md={class:"text-lg font-semibold"},fd={class:"text-gray-600"},gd={class:"text-gray-600"},bd={class:"text-gray-600"},xd={class:"text-gray-600"},hd={class:"text-gray-600"},yd={key:0,class:"text-gray-600"},_d={class:"text-right"},wd=["onClick"],kd={key:1,class:"text-gray-500"},$d={class:"mt-6 flex gap-4"},Cd={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ad=re({__name:"JetonHistory",setup(I){const $=fe().user,f=v([]),o=v(!1),i=ue(),n=async()=>{try{const a=await R.get(`/jeton-transactions/${$==null?void 0:$.id}`);console.log(a.data),f.value=a.data}catch(a){console.error("Erreur lors du chargement des transactions:",a)}},g=a=>new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=async a=>{var u,S;if(console.log("Refaire la transaction:",a),!!confirm(`Refaire l'achat de ${a.nombre_jetons} jetons avec le même service (${a.methode_paiement}) ?`)){o.value=!0;try{const b=await R.post("/acheter-jetons",{nombre_jetons:a.nombre_jetons,payment_service:a.methode_paiement,phone_number:a.phone_number});i.success(b.data.message),n()}catch(b){i.error(((S=(u=b.response)==null?void 0:u.data)==null?void 0:S.message)||"Erreur lors de l'achat."),console.error(b)}finally{o.value=!1}}};return ve(()=>{$&&n()}),(a,u)=>{const S=xe("router-link");return t(),s("div",cd,[u[4]||(u[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),f.value.length>0?(t(),s("div",pd,[(t(!0),s(H,null,ee(f.value,b=>(t(),s("div",{key:b.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",vd,[e("div",null,[e("p",md,"Achat de "+c(b.nombre_jetons)+" jetons",1),e("p",fd,"Montant: "+c(b.montant)+" FCFA",1),e("p",gd,"Méthode: "+c(b.methode_paiement),1),e("p",bd,"Numéro: "+c(b.phone_number),1),e("p",xd,"Statut: "+c(b.statut),1),e("p",hd,"Date: "+c(g(b.date_transaction)),1),b.transaction_id_mesomb?(t(),s("p",yd," ID Transaction: "+c(b.transaction_id_mesomb),1)):P("",!0)]),e("div",_d,[e("button",{onClick:h=>p(b),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},u[0]||(u[0]=[e("i",{class:"fas fa-redo"},null,-1),k(" Refaire ")]),8,wd)])])]))),128))])):(t(),s("p",kd,"Aucune transaction trouvée.")),e("div",$d,[W(S,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Y(()=>u[1]||(u[1]=[k(" Acheter des Jetons ")])),_:1,__:[1]}),W(S,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Y(()=>u[2]||(u[2]=[k(" Booster un Produit ")])),_:1,__:[2]})]),o.value?(t(),s("div",Cd,u[3]||(u[3]=[ze('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-4d0a432e><p class="text-lg text-[var(--espace-vert)]" data-v-4d0a432e>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-4d0a432e><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-4d0a432e></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-4d0a432e></path></svg></div>',1)]))):P("",!0)])}}}),rc=le(Ad,[["__scopeId","data-v-4d0a432e"]]),Pd={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},jd={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},Sd={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},Md={class:"relative"},Vd=["src"],Ed={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},zd={class:"flex-1"},Fd={class:"text-gray-600"},Id={key:0,class:"text-sm text-gray-500"},Ld={class:"text-gray-600"},Td={class:"text-gray-600"},Od=re({__name:"ProfilePublic",setup(I){const l=Ae(),$=ge(),f=ue(),o=v(null),i=async()=>{try{const g=await R.get(`/profile/public/${l.params.id}`);o.value=g.data}catch(g){f.error("Erreur lors de la récupération du profil."),console.error(g)}},n=()=>{var g;(g=o.value)!=null&&g.id?$.push({name:"messages",params:{receiverId:o.value.id}}):f.error("Impossible d'accéder au chat. Profil invalide.")};return ve(()=>{i()}),(g,p)=>{var a,u,S,b,h,r,d,C,V,_,M,A,T,K,U,se,ne,G,y,w,E,m;return t(),s("div",Pd,[e("div",jd,[e("div",Sd,[e("div",Md,[(a=o.value)!=null&&a.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(u=o.value)==null?void 0:u.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Vd)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:ye({background:`${((r=(h=(b=(S=o.value)==null?void 0:S.niveaux_users)==null?void 0:b.at(-1))==null?void 0:h.parrainage_niveau)==null?void 0:r.couleur)||"#0af"}`})},p[0]||(p[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(d=o.value)!=null&&d.premium?(t(),s("i",Ed)):P("",!0)]),e("div",zd,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:ye({color:`${((M=(_=(V=(C=o.value)==null?void 0:C.niveaux_users)==null?void 0:V.at(-1))==null?void 0:_.parrainage_niveau)==null?void 0:M.couleur)||"#0af"}`})},[k(c((A=o.value)==null?void 0:A.nom)+" ",1),(T=o.value)!=null&&T.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:ye({background:`${((ne=(se=(U=(K=o.value)==null?void 0:K.niveaux_users)==null?void 0:U.at(-1))==null?void 0:se.parrainage_niveau)==null?void 0:ne.couleur)||"#0af"}`})}," Premium ",4)):P("",!0)],4),e("p",Fd,"Statut : "+c((G=o.value)!=null&&G.commercant?"Commerçant":"Utilisateur"),1),(y=o.value)!=null&&y.subscription_ends_at?(t(),s("p",Id," Abonnement Premium jusqu'au "+c(new Date((w=o.value)==null?void 0:w.subscription_ends_at).toLocaleDateString()),1)):P("",!0),e("p",Ld,"Ville : "+c((E=o.value)==null?void 0:E.ville),1),e("p",Td,"Téléphone : "+c((m=o.value)==null?void 0:m.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:n,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},p[1]||(p[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),k(" Discuter ")]))])]),p[2]||(p[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),lc=le(Od,[["__scopeId","data-v-eef19e07"]]);export{ka as A,Bd as C,Dd as F,Nd as H,rc as J,Jd as L,ac as M,Gd as P,Hd as R,Kd as a,tc as b,sc as c,Zd as d,Xd as e,Yd as f,oc as g,Qd as h,ec as i,lc as j,Wd as k,fe as u};
