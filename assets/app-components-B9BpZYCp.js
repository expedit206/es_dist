import{u as le,r as m,a as de,d as ae,w as he,o as ge,b as be,c as s,e as P,f as T,g as t,h as e,i as N,j as Q,k as y,t as v,l as ve,m as je,n as Se,p as pe,F as X,q as ee,s as K,T as ye,v as ue,x as we,y as R,z as Y,A as Je,B as Ae,C as Be,D as Ye,E as Ze,G as et,H as ke,I as qe,J as He,K as Ge}from"./vue-D22jj4LC.js";import{d as Oe}from"./pinia-yzfThc-V.js";import{a as Fe}from"./axios-Dq7h7Pqt.js";const Xe="/assets/logoOrangeweb-C9Cko1mf.webp",tt=()=>{const I=window.location.hostname;return I==="localhost"||I==="127.0.0.1"?"http://localhost:8000":"https://api.espacecameroun.com"};Fe.defaults.withCredentials=!0;Fe.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Fe.defaults.withXSRFToken=!0;const B=Fe.create({withCredentials:!0,baseURL:tt(),headers:{Accept:"application/json","Content-Type":"application/json"}}),Ne=le(),fe=Oe("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(I){const u=await B.post("/login",I);this.user=u.data.user,this.token=u.data.token,localStorage.setItem("token",this.token??""),B.defaults.headers.common.Authorization=`Bearer ${this.token}`},async register(I){const u=await B.post("/register",I);this.user=u.data.user,this.token=u.data.token,localStorage.setItem("token",this.token??""),B.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{B.defaults.headers.common.Authorization=`Bearer ${this.token}`;const I=await B.get("/user");return this.user=I.data.user,!0}catch(I){return console.error("utilisateur non:",I),Ne.push("/login"),this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{Ne.push("/login"),this.token&&await B.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete B.defaults.headers.common.Authorization,["pending_collaborations","pending_orders","cart","token","unread_messages","viewedProducts"].forEach(u=>localStorage.removeItem(u))}}}),De=le(),Ie=Oe("userState",()=>{const I=m(0),u=m(0),b=de(),x=()=>{const l=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");I.value=l.length;const f=localStorage.getItem("unread_messages");u.value=f?parseInt(f,10):0},p=l=>{localStorage.setItem("pending_collaborations",JSON.stringify(l)),I.value=l.length},r=l=>{localStorage.setItem("unread_messages",l.toString()),u.value=l},o=async l=>{var A,_,j;const f=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");f.push({produit_id:l.produit_id,prix_revente:l.prix_revente,status:"pending",created_at:new Date().toISOString()}),p(f);try{return await B.post("/collaborations",{produit_id:l.produit_id,prix_revente:l.prix_revente}),await n(),b.success("Demande de collaboration envoy√©e !"),!0}catch(h){((_=(A=h.response)==null?void 0:A.data)==null?void 0:_.message)=="Unauthenticated."&&De.push("login");const a=f.filter(i=>!(i.produit_id===l.produit_id&&i.prix_revente===l.prix_revente));return p(a),b.error(((j=h.response)==null?void 0:j.data.message)||"Erreur lors de la demande de collaboration"),!1}},n=async()=>{var l,f;try{const A=await B.get("/user/badges");I.value=A.data.collaborations_pending,r(A.data.unread_messages||0)}catch(A){((f=(l=A.response)==null?void 0:l.data)==null?void 0:f.message)=="Unauthenticated."&&De.push("login"),console.error("Erreur lors de la synchronisation des badges:",A)}};return{collaborationsPending:I,unreadMessages:u,initializeState:x,addCollaboration:o,syncCollaborationsWithBackend:n,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),I.value=0,u.value=0},saveCollaborationsToLocalStorage:p,saveUnreadMessagesToLocalStorage:r}}),Me=Oe("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:I=>fe().user},actions:{async fetchProducts(I={},u=!1,b=!1){var x,p;if(!(this.isLoading||!u&&!this.hasMore&&!b)){this.isLoading=!0,(u||b)&&(this.products=[],this.page=1,this.hasMore=!0);try{const r=await B.get("/produits",{params:{...I,page:this.page,sort:this.sort}});console.log("R√©ponse de l'API:",r.data),console.log("R√©ponse de l'API:",r.data.data);const o=r.data.data||[];if(!Array.isArray(o))throw new Error("Les donn√©es des produits ne sont pas un tableau");u||b||I.per_page==="all"?this.products=o:this.products=[...this.products,...o],this.hasMore=r.data.current_page<(r.data.last_page||1),this.page=r.data.current_page+1}catch(r){const o=le();console.error("Erreur lors du fetch:",r),o.push("login"),(p=(x=r.response)==null?void 0:x.data)==null||p.message}finally{this.isLoading=!1}}},async toggleFavorite(I){var p,r;const u=fe();if(!u.user&&(await u.checkAuth(),!u.user)){console.warn("Utilisateur non connect√©, redirection ou action n√©cessaire");return}const b=this.products.find(o=>o.id===I);let x=!1;b&&(b.is_favorited_by=!b.is_favorited_by,b.counts.favorites_count=b.is_favorited_by?b.counts.favorites_count+1:b.counts.favorites_count-1,x=!0),this.product&&this.product.id===I&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,x=!0);try{const o=await B.post(`/produits/${I}/favorite`),n=o.data.produit;if(x){const c=this.products.findIndex(l=>l.id===I);c!==-1&&(this.products[c]={...this.products[c],...n}),this.product&&this.product.id===I&&(this.product={...this.product,...n})}return o.data.message}catch(o){const n=le();if(((r=(p=o.response)==null?void 0:p.data)==null?void 0:r.message)==="Unauthenticated."&&n.push("login"),console.error("Erreur toggleFavorite:",o),x){const c=this.products.find(l=>l.id===I);c&&(c.is_favorited_by=!c.is_favorited_by,c.counts.favorites_count=c.is_favorited_by?c.counts.favorites_count-1:c.counts.favorites_count+1),this.product&&this.product.id===I&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct(I){var u,b,x,p;try{const r=await B.get(`/produits/${I}`);this.product=r.data.produit;const o=this.products.findIndex(n=>n.id===I);o!==-1?this.products[o]={...this.products[o],...this.product}:this.products.push(this.product)}catch(r){const o=le();throw((b=(u=r.response)==null?void 0:u.data)==null?void 0:b.message)==="Unauthenticated."&&o.push("login"),((p=(x=r.response)==null?void 0:x.data)==null?void 0:p.message)||"Erreur lors du chargement du produit"}},setSort(I){this.sort=I,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(I){this.userId=I}}}),st={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},ot={class:"text-sm font-semibold text-[var(--espace-vert)]"},at={class:"text-gray-800"},rt=ae({__name:"SoldeUser",setup(I){le();const u=fe(),b=m(0),x=async()=>{if(u.user)try{b.value=u.user.jetons}catch(p){console.error("Erreur lors de la r√©cup√©ration des jetons:",p)}};return he(()=>u.user,()=>{x()}),ge(()=>{x()}),(p,r)=>{const o=be("router-link");return T(u).user?(t(),s("div",st,[r[1]||(r[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",ot,[N(o,{to:"/jeton-history"},{default:Q(()=>[r[0]||(r[0]=y(" Jetons : ")),e("span",at,v(b.value),1)]),_:1,__:[0]})])])):P("",!0)}}}),re=(I,u)=>{const b=I.__vccOpts||I;for(const[x,p]of u)b[x]=p;return b},Ke=re(rt,[["__scopeId","data-v-a9413d7d"]]),lt={class:"relative bg-[var(--espace-vert)] w-full"},nt={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 z-50 shadow-md h-full"},it={class:"px-2 w-full sm:px-3 py-2 flex justify-between items-center gap-4 mb-4"},ut={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},dt=["aria-label"],ct={class:"flex items-center gap-2"},pt=["src"],vt={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},mt={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},ft=ae({__name:"HeaderBar",setup(I){const u=()=>{const a=window.location.hostname;return a==="localhost"||a==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},b=ve(()=>u()),x=fe(),p=Ie();le();const r=ve(()=>x.user);je();const o=m(!1),n=m(!1);m(""),Me();const c=m(!1),l=m(null),f=m(!1),A=ve(()=>[...r.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:p.unreadMessages},...r.value.commercant?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:p.collaborationsPending},{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),_=async()=>{if(r.value)try{await p.syncCollaborationsWithBackend()}catch(a){console.error("Erreur lors du chargement des badges:",a)}},j=async()=>{if(!r.value&&x.token)try{await x.checkAuth()}catch(a){console.error("Erreur lors de la r√©cup√©ration de l'utilisateur:",a),x.logout()}r.value&&_()};he(()=>p.collaborationsPending,a=>{a>-1&&(o.value=!0,setTimeout(()=>o.value=!1,300))}),he(()=>p.unreadMessages,a=>{a>-1&&(n.value=!0,setTimeout(()=>n.value=!1,300))});const h=a=>{if(f.value){f.value=!1;return}l.value&&!l.value.contains(a.target)&&(c.value=!1)};return ge(async()=>{var a;await j(),document.addEventListener("click",h),(a=x.user)!=null&&a.id&&window.Echo.channel(`chat.${x.user.id}`).listen("MessageSent",i=>{var $;(($=x.user)==null?void 0:$.id)===i.receiver_id&&p.saveUnreadMessagesToLocalStorage(i.unread_messages)})}),Se(()=>{var a;document.removeEventListener("click",h),(a=x.user)!=null&&a.id&&window.Echo.leave(`chat.${x.user.id}`)}),(a,i)=>{const $=be("RouterLink"),w=be("router-link");return t(),s("div",lt,[e("header",nt,[e("div",it,[N($,{to:"/","aria-label":"Retour √† l'accueil"},{default:Q(()=>i[0]||(i[0]=[e("div",{class:"flex items-center gap-1 sm:gap-3"},[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Xe,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})]),e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"}," Espace Cameroun ")],-1)])),_:1,__:[0]}),e("nav",ut,[(t(!0),s(X,null,ee(A.value,F=>(t(),pe($,{key:F.to,to:F.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:K(["fas",F.icon])},null,2),y(" "+v(F.label)+" ",1),F!=null&&F.badge&&F.badge>-1?(t(),s("span",{key:0,class:K(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":F.to==="/collaborations"&&o.value||F.to==="/messages"&&n.value}]),"aria-label":F.to==="/collaborations"?"Collaborations en attente":F.to==="/messages"?"Messages non lus":""},v(F.badge),11,dt)):P("",!0)]),_:2},1032,["to"]))),128))]),N(Ke),e("div",ct,[r.value?(t(),pe($,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:Q(()=>[i[1]||(i[1]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),T(p).unreadMessages>-1?(t(),s("span",{key:0,class:K(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":n.value}]),"aria-label":"Messages non lus"},v(T(p).unreadMessages),3)):P("",!0)]),_:1,__:[1]})):P("",!0),r.value?(t(),pe($,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:Q(()=>{var F;return[(F=r.value)!=null&&F.photo?(t(),s("img",{key:0,src:b.value+r.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,pt)):(t(),s("div",vt,i[2]||(i[2]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):P("",!0)]),r.value?(t(),pe(w,{key:0,to:"/jetonMarket","aria-label":"Aller au march√©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:Q(()=>i[3]||(i[3]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[3]})):P("",!0),e("div",mt,[N(w,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:Q(()=>i[4]||(i[4]=[y(" ? ")])),_:1,__:[4]})])])])])}}}),bc=re(ft,[["__scopeId","data-v-0d96a0cc"]]),gt={class:"relative"},xt={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},bt={class:"flex justify-around items-center py-2"},ht=["aria-label"],yt=ae({__name:"FooterBar",setup(I){const u=fe(),b=Ie();le();const x=m(!1),p=m(!1),r=ve(()=>[...u.user?[{to:"/",label:"Accueil",icon:"fa-home"},...u.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:b.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]);return he(()=>b.collaborationsPending,o=>{o>0&&(x.value=!0,setTimeout(()=>x.value=!1,300))}),he(()=>b.unreadMessages,o=>{o>0&&(p.value=!0,setTimeout(()=>p.value=!1,300))}),(o,n)=>{const c=be("RouterLink");return t(),s("div",gt,[N(ye,{name:"slide-up"},{default:Q(()=>[e("nav",xt,[e("div",bt,[(t(!0),s(X,null,ee(r.value,l=>(t(),pe(c,{key:l.to,to:l.to,"aria-label":l.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:K(["fas text-lg",l.icon])},null,2),l!=null&&l.badge&&l.badge>-1?(t(),s("span",{key:0,class:K(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":l.to==="/collaborations"&&x.value||l.to==="/messages"&&p.value}]),"aria-label":l.to==="/collaborations"?"Collaborations en attente":l.to==="/messages"?"Messages non lus":""},v(l.badge),11,ht)):P("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),hc=re(yt,[["__scopeId","data-v-8779b672"]]),_t={class:"mb-4"},wt={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},kt={class:"relative"},$t={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},Ct=["type","value","required","placeholder"],At={key:0,class:"text-red-500 text-sm mt-1"},_e=ae({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(I){return(u,b)=>(t(),s("div",_t,[e("label",wt,v(I.label),1),e("div",kt,[e("span",$t,[e("i",{class:K(`fas ${I.icon}`)},null,2)]),e("input",{type:I.type,value:I.modelValue,onInput:b[0]||(b[0]=x=>u.$emit("update:modelValue",x.target.value)),required:I.required,placeholder:I.placeholder,class:K(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",I.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,Ct)]),I.error?(t(),s("p",At,v(I.error),1)):P("",!0)]))}}),Pt={class:"overflow-y-scroll flex items-center justify-center px-4 py-4"},jt={class:"w-full max-w-lg bg-gray-30 rounded-2xl shadow-xl p-6 sm:p-10"},St=["disabled"],Mt={key:0,class:"fas fa-spinner fa-spin mr-2"},Vt={key:1,class:"fas fa-sign-in-alt mr-2"},Et={class:"text-center text-sm text-gray-600 mt-6"},zt=ae({__name:"Login",setup(I){const u=m({login:"",mot_de_passe:""}),b=m({}),x=le(),p=de(),r=fe(),o=m(!1),n=async()=>{var c;try{o.value=!0,await r.login({login:u.value.login,mot_de_passe:u.value.mot_de_passe}),p.success("Connexion r√©ussie !"),x.push({name:"home"})}catch(l){console.error("Erreur lors de la connexion:",l);const f=l.message||"Erreur lors de la connexion. Veuillez v√©rifier vos informations.";p.error(f),((c=l.response)==null?void 0:c.status)===422&&(b.value=l.response.data.errors||{})}finally{o.value=!1}};return ge(async()=>{r.user&&x.push({name:"home"})}),(c,l)=>{const f=be("router-link");return t(),s("div",Pt,[e("div",jt,[l[4]||(l[4]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-sign-in-alt mr-2 text-[var(--espace-or)]"}),y(" Connexion ")],-1)),l[5]||(l[5]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[y(" Connectez-vous √† "),e("strong",null,"Espace Cameroun"),y(" pour acc√©der √† vos achats et votre espace commer√ßant. ")],-1)),e("form",{onSubmit:ue(n,["prevent"]),class:"space-y-5"},[N(_e,{label:"Email ou T√©l√©phone",icon:"fa-envelope",modelValue:u.value.login,"onUpdate:modelValue":l[0]||(l[0]=A=>u.value.login=A),type:"text",required:"",error:b.value.login},null,8,["modelValue","error"]),N(_e,{label:"Mot de passe",icon:"fa-lock",modelValue:u.value.mot_de_passe,"onUpdate:modelValue":l[1]||(l[1]=A=>u.value.mot_de_passe=A),type:"password",required:"",error:b.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:o.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[o.value?(t(),s("i",Mt)):(t(),s("i",Vt)),e("span",null,v(o.value?"Connexion...":"Se connecter"),1)],8,St)],32),e("p",Et,[l[3]||(l[3]=y(" Pas de compte ? ")),N(f,{to:"/register",class:"text-[var(--espace-vert)] font-medium hover:text-[var(--espace-or)] hover:underline"},{default:Q(()=>l[2]||(l[2]=[y(" Inscrivez-vous ici ")])),_:1,__:[2]})])])])}}}),yc=re(zt,[["__scopeId","data-v-5e9e0d07"]]),Ut="/assets/logo-ba4eAQQi.png",It={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},Ft=ae({__name:"Loader",props:{isLoading:{type:Boolean}},setup(I){return(u,b)=>(t(),pe(ye,{name:"fade"},{default:Q(()=>[u.isLoading?(t(),s("div",It,b[0]||(b[0]=[e("div",{class:"relative p-6"},[e("img",{src:Ut,alt:"Logo Espace Cameroun",class:"h-12 w-12 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-or)] border-t-transparent animate-spin"})],-1)]))):P("",!0)]),_:1}))}}),Ve=re(Ft,[["__scopeId","data-v-f60cc94a"]]),Tt={class:"h-full bg-gray-100 pt-10 px-4 sm:px-2 pb-16"},Lt={class:"h-full w-full overflow-y-scroll"},qt={key:0},Ot={key:1,class:"grid grid-cols-1 pt-15 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Rt={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},Nt={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Dt=["src"],Wt=["onClick"],Jt=["onClick"],Bt={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Ht={class:"p-2"},Gt={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},Xt=["onClick"],Kt={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},Qt={class:"text-md font-bold text-[var(--espace-or)] mt-2"},Yt={class:"text-sm text-[var(--espace-gris)]"},Zt={class:"text-sm text-[var(--espace-gris)] mt-2"},es={class:"ml-4"},ts={key:2,class:"text-center text-[var(--espace-gris)]"},ss={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},os={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},as={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},rs={key:0,class:"grid grid-cols-3 gap-2 mb-2"},ls=["src"],ns=["onClick"],is={class:"relative"},us={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto"},ds=["onClick"],cs={key:0,class:"flex items-center gap-2"},ps={class:"flex gap-4 pt-2"},vs=["disabled"],ms={key:0,class:"fas fa-spinner fa-spin mr-2"},fs=ae({__name:"CommercantProduits",setup(I){const u=Me(),b=fe(),x=le(),p=de(),r=m(!1),o=m(!1),n=m([]),c=m([]),l=m(!1),f=m(!1),A=m(null),_=m({}),j=m({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),h=m(!1),a=m(""),i=ve(()=>c.value.filter(g=>g.nom.toLowerCase().includes(a.value.toLowerCase()))),$=()=>{setTimeout(()=>{h.value=!1},150)},w=m([]),F=m([]),D=m(null),M=ve(()=>[...w.value,...F.value.map(g=>URL.createObjectURL(g))]),W=async()=>{r.value=!0;try{const g=await B.get("/commercant/produits");r.value=!1,n.value=g.data.produits.map(d=>({...d,photo_url:d.photos&&d.photos.length>0?d.photos[0]:"https://via.placeholder.com/150"})),n.value.forEach(d=>{_.value[d.id]||(_.value[d.id]=0)})}catch{p.error("Erreur lors du chargement des produits")}finally{r.value=!1}},C=async()=>{try{const g=await B.get("/categories");c.value=g.data.categories}catch{p.error("Erreur lors du chargement des cat√©gories")}finally{}},se=()=>{j.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},w.value=[],F.value=[],l.value=!0},ne=g=>{A.value=g,j.value={nom:g.nom,description:g.description||"",prix:g.prix,stock:g.quantite,category_id:g.category_id,collaboratif:!!g.collaboratif,marge_min:g.marge_min||0},w.value=g.photos?[...g.photos]:[],F.value=[],_.value[g.id]||(_.value[g.id]=0),f.value=!0},Z=g=>{const d=g.target;if(d.files){const H=Array.from(d.files);F.value.push(...H),D.value&&(D.value.value="")}},z=g=>{if(g<w.value.length)w.value.splice(g,1);else{const d=g-w.value.length;F.value.splice(d,1)}},G=async()=>{var d,H,V,E;o.value=!0;const g=new FormData;g.append("nom",j.value.nom),g.append("description",j.value.description),g.append("prix",j.value.prix.toString()),g.append("stock",j.value.stock.toString()),g.append("category_id",j.value.category_id),g.append("collaboratif",j.value.collaboratif?"1":"0"),g.append("marge_min",j.value.marge_min.toString()),w.value.forEach(O=>g.append("old_photos[]",O)),F.value.forEach(O=>g.append("photos[]",O));try{if(l.value)await B.post("/commercant/produits",g,{headers:{"Content-Type":"multipart/form-data"}}),p.success("Produit ajout√© avec succ√®s");else{const O=await B.post(`/commercant/produits/${(d=A.value)==null?void 0:d.id}`,g,{headers:{"Content-Type":"multipart/form-data"}});console.log(O.data),p.success("Produit modifi√© avec succ√®s")}await W(),u.fetchProducts(),J()}catch(O){((V=(H=O.response)==null?void 0:H.data)==null?void 0:V.message)=="Unauthenticated."&&x.push("login"),p.error(((E=O.response)==null?void 0:E.data.message)||"Erreur lors de la sauvegarde du produit")}finally{o.value=!1}},J=()=>{l.value=!1,f.value=!1,A.value=null,w.value=[],F.value=[]},U=ve(()=>g=>_.value[g]||0),S=g=>{var V;const d=n.value.find(E=>E.id===g),H=(V=d==null?void 0:d.photos)!=null&&V.length?d.photos.length-1:0;_.value[g]=Math.min((_.value[g]||0)+1,H)},q=g=>{_.value[g]=Math.max((_.value[g]||0)-1,0)};return ge(async()=>{await W(),C(),setTimeout(()=>{var g;if(!((g=b.user)!=null&&g.commercant)){p.error("Acc√®s r√©serv√© aux commer√ßants"),x.push("/");return}},2e3)}),(g,d)=>{const H=be("router-link");return t(),s(X,null,[N(Ve,{isLoading:r.value},null,8,["isLoading"]),e("div",Tt,[e("div",Lt,[e("div",{class:"flex justify-between items-center fixed z-10 w-full pr-7"},[d[10]||(d[10]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),y(" Mes Produits ")],-1)),e("button",{onClick:se,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},d[9]||(d[9]=[e("i",{class:"fas fa-plus mr-2"},null,-1),y(" Ajouter un produit ")]))]),r.value?(t(),s("div",qt,d[11]||(d[11]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):n.value.length?(t(),s("div",Ot,[(t(!0),s(X,null,ee(n.value,V=>(t(),s("div",{key:V.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",Rt,[V.collaboratif?(t(),s("span",Nt," Collaboratif ")):P("",!0),N(H,{to:`/produits/${V.id}`,class:"block relative"},{default:Q(()=>[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${U.value(V.id)*100}%)`})},[(t(!0),s(X,null,ee(V.photos,(E,O)=>(t(),s("img",{key:O,src:E,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,Dt))),128))],4)]),_:2},1032,["to"]),V.photos&&V.photos.length>1?(t(),s("button",{key:1,onClick:E=>q(V.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},d[12]||(d[12]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Wt)):P("",!0),V.photos&&V.photos.length>1?(t(),s("button",{key:2,onClick:E=>S(V.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},d[13]||(d[13]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Jt)):P("",!0),V.photos&&V.photos.length>1?(t(),s("div",Bt,[(t(!0),s(X,null,ee(V.photos,(E,O)=>(t(),s("span",{key:O,class:K(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":O===U.value(V.id)}])},null,2))),128))])):P("",!0)]),e("div",Ht,[e("h2",Gt,[N(H,{to:`/produits/${V.id}`,class:"block relative"},{default:Q(()=>[y(v(V.nom),1)]),_:2},1032,["to"]),e("button",{onClick:E=>ne(V),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},d[14]||(d[14]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,Xt)]),e("p",Kt,v(V.description||"Aucune"),1),e("p",Qt,v(V.prix)+" FCFA",1),e("p",Yt,"Stock: "+v(V.quantite),1),e("div",Zt,[e("span",null,[d[15]||(d[15]=e("i",{class:"fas fa-eye mr-1"},null,-1)),y(" "+v(V.raw_views_count||0)+" vues",1)]),e("span",es,[d[16]||(d[16]=e("i",{class:"fas fa-bookmark mr-1"},null,-1)),y(" "+v(V.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",ts,"Aucun produit pour le moment."))]),N(ye,{name:"fade"},{default:Q(()=>{var V;return[l.value||f.value?(t(),s("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ue(J,["self"])},[e("div",ss,[e("h2",os,v(l.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:ue(G,["prevent"]),class:"space-y-4 pt-12"},[e("div",null,[d[20]||(d[20]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",as,[M.value.length?(t(),s("div",rs,[(t(!0),s(X,null,ee(M.value,(E,O)=>(t(),s("div",{key:O,class:"relative w-full h-20"},[e("img",{src:E,class:"w-full h-full object-cover rounded-lg",alt:"Pr√©visualisation"},null,8,ls),e("button",{onClick:ue(ie=>z(O),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},d[17]||(d[17]=[e("i",{class:"fas fa-times"},null,-1)]),8,ns)]))),128))])):P("",!0),e("input",{ref_key:"fileInput",ref:D,type:"file",multiple:"",onChange:Z,class:"hidden",accept:"image/*"},null,544),M.value.length?(t(),s("button",{key:2,type:"button",onClick:d[1]||(d[1]=E=>{var O;return(O=D.value)==null?void 0:O.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},d[19]||(d[19]=[e("i",{class:"fas fa-plus mr-2"},null,-1),y(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:d[0]||(d[0]=E=>{var O;return(O=D.value)==null?void 0:O.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},d[18]||(d[18]=[e("i",{class:"fas fa-camera mr-2"},null,-1),y(" Ajouter une photo ")])))])]),e("div",null,[d[21]||(d[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=E=>j.value.nom=E),type:"text",required:"",class:"input-style"},null,512),[[Y,j.value.nom]])]),e("div",null,[d[22]||(d[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),R(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=E=>j.value.description=E),rows:"3",class:"input-style"},null,512),[[Y,j.value.description]])]),e("div",null,[d[23]||(d[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":d[4]||(d[4]=E=>j.value.prix=E),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Y,j.value.prix,void 0,{number:!0}]])]),e("div",null,[d[24]||(d[24]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),R(e("input",{"onUpdate:modelValue":d[5]||(d[5]=E=>j.value.stock=E),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Y,j.value.stock,void 0,{number:!0}]])]),e("div",is,[d[25]||(d[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Cat√©gorie",-1)),R(e("input",{"onUpdate:modelValue":d[6]||(d[6]=E=>a.value=E),type:"text",placeholder:"Rechercher une cat√©gorie",class:"input-style",onFocus:d[7]||(d[7]=E=>h.value=!0),onBlur:$},null,544),[[Y,a.value]]),h.value&&i.value.length?(t(),s("ul",us,[(t(!0),s(X,null,ee(i.value,E=>(t(),s("li",{key:E.id,onClick:O=>{j.value.category_id=E.id,a.value=E.nom,h.value=!1},class:"px-2 py-1 hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] cursor-pointer"},v(E.nom),9,ds))),128))])):P("",!0)]),l.value||!((V=A.value)!=null&&V.collaboratif)?(t(),s("div",cs,[R(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":d[8]||(d[8]=E=>j.value.collaboratif=E)},null,512),[[Je,j.value.collaboratif]]),d[26]||(d[26]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):P("",!0),e("div",ps,[e("button",{type:"submit",disabled:o.value,class:K(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[o.value?(t(),s("i",ms)):P("",!0),y(" "+v(l.value?"Ajouter":"Modifier"),1)],10,vs),e("button",{type:"button",onClick:J,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):P("",!0)]}),_:1})])],64)}}}),_c=re(fs,[["__scopeId","data-v-e1cdc9b2"]]),gs={class:"overflow-y-scroll bg-white flex justify-center px-4 pt-8"},xs={class:"flex flex-col w-full max-w-lg rounded-2xl sm:p-10"},bs={class:"relative"},hs={class:"relative"},ys=["disabled"],_s={class:"text-center text-sm text-gray-600 mt-6"},ws=ae({__name:"Register",setup(I){const u=m({nom:"",telephone:"",mot_de_passe:"",mot_de_passe_confirmation:"",parrain_code:""}),b=m({}),x=le(),p=je(),r=de(),o=fe();ge(()=>{const A=p.params.code;A&&(u.value.parrain_code=A)});const n=m(!1),c=m(!1),l=m(!1),f=async()=>{var A,_,j;try{l.value=!0,await o.register(u.value),r.success("Inscription r√©ussie !"),x.push({name:"home"})}catch(h){console.error("Erreur lors de l'inscription:",h);const a=((_=(A=h.response)==null?void 0:A.data)==null?void 0:_.message)||"Erreur lors de l'inscription. Veuillez v√©rifier vos informations.";r.error(a),((j=h.response)==null?void 0:j.status)===422&&(b.value=h.response.data.errors)}finally{l.value=!1}};return(A,_)=>{const j=be("router-link");return t(),s("div",gs,[e("div",xs,[_[9]||(_[9]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),y(" Cr√©ez votre compte ")],-1)),_[10]||(_[10]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[y(" Rejoignez "),e("strong",null,"Espace Cameroun"),y(" et profitez d‚Äôune exp√©rience d‚Äôachat unique. Vos informations resteront confidentielles. ")],-1)),e("form",{onSubmit:ue(f,["prevent"]),class:"space-y-5"},[N(_e,{label:"Nom",icon:"fa-user",modelValue:u.value.nom,"onUpdate:modelValue":_[0]||(_[0]=h=>u.value.nom=h),type:"text",required:"",error:b.value.nom},null,8,["modelValue","error"]),N(_e,{label:"T√©l√©phone",icon:"fa-phone",modelValue:u.value.telephone,"onUpdate:modelValue":_[1]||(_[1]=h=>u.value.telephone=h),type:"tel",required:"",error:b.value.telephone},null,8,["modelValue","error"]),e("div",bs,[N(_e,{label:"Mot de passe",icon:"fa-lock",modelValue:u.value.mot_de_passe,"onUpdate:modelValue":_[2]||(_[2]=h=>u.value.mot_de_passe=h),type:n.value?"text":"password",required:"",error:b.value.mot_de_passe},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:_[3]||(_[3]=h=>n.value=!n.value)},[e("i",{class:K(n.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e("div",hs,[N(_e,{label:"Confirmer le mot de passe",icon:"fa-lock",modelValue:u.value.mot_de_passe_confirmation,"onUpdate:modelValue":_[4]||(_[4]=h=>u.value.mot_de_passe_confirmation=h),type:c.value?"text":"password",required:"",error:b.value.mot_de_passe_confirmation},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:_[5]||(_[5]=h=>c.value=!c.value)},[e("i",{class:K(c.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),N(_e,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:u.value.parrain_code,"onUpdate:modelValue":_[6]||(_[6]=h=>u.value.parrain_code=h),type:"text",error:b.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:l.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[e("i",{class:K([l.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,v(l.value?"Inscription...":"S'inscrire"),1)],8,ys)],32),e("p",_s,[_[8]||(_[8]=y(" Vous avez d√©j√† un compte ? ")),N(j,{to:"/login",class:"text-[var(--espace-vert)] font-medium hover:underline"},{default:Q(()=>_[7]||(_[7]=[y(" Connectez-vous ici ")])),_:1,__:[7]})]),_[11]||(_[11]=e("p",{class:"text-center text-xs text-gray-400 mt-2 pb-24"},[y(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"},"politique de confidentialit√©"),y(". ")],-1))])])}}}),wc=re(ws,[["__scopeId","data-v-f8def22a"]]),ks={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},$s={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},Cs={class:"p-6"},As={key:0,class:"grid md:grid-cols-3 gap-6"},Ps={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},js={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Ss={class:"font-extrabold text-lg mb-2"},Ms={class:"mb-2 text-sm opacity-90"},Vs={class:"text-3xl font-extrabold"},Es={class:"flex flex-col text-sm font-medium text-gray-700"},zs={key:0,class:"text-xs text-red-600 mt-1"},Us={class:"flex gap-4"},Is=["value"],Fs=["src"],Ts={key:0,class:"text-xs text-red-600 mt-1 block"},Ls=["disabled"],qs={class:"text-xs text-gray-400 mt-4 text-center"},Os=ae({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(I,{emit:u}){const b=fe().user,x=le(),p=u,r=de(),o=m(""),n=m(""),c=m(""),l=m(!1),f=m(!1),A=m(!1),_=a=>{o.value=a,l.value=!1,f.value=!1,n.value="",c.value=""},j=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],h=async()=>{var a,i;if(l.value=!c.value,f.value=!n.value,l.value||f.value){r.error("Veuillez remplir tous les champs correctement.");return}A.value=!0;try{const $=await B.post("/upgrade-to-premium",{subscription_type:o.value,payment_service:n.value,phone_number:c.value});A.value=!1,b&&(b.premium=!0),r.success($.data.message),p("upgraded"),p("close")}catch($){if(((i=(a=$.response)==null?void 0:a.data)==null?void 0:i.message)=="Unauthenticated."&&x.push("login"),$.response&&$.response.data){const w=$.response.data;r.error(`Paiement √©chou√© :Verifiez vos informations et r√©essayer${w.message}`)}else r.error("Verifiez vos informations et r√©essayer.");console.error($)}finally{A.value=!1}};return(a,i)=>{const $=be("router-link");return a.isOpen?(t(),s("div",ks,[e("div",$s,[i[18]||(i[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"üöÄ Passez √† Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",Cs,[o.value?(t(),s("div",Ps,[e("div",js,[i[12]||(i[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:K([{"bg-green-600 text-white":o.value==="monthly","bg-yellow-400 text-gray-900":o.value==="yearly"},"rounded-lg p-4"])},[e("h4",Ss,v(o.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Ms,v(o.value==="monthly"?"Acc√®s complet √† toutes les fonctionnalit√©s.":"Payez moins, profitez plus avec 16% d‚Äô√©conomie !"),1),e("div",Vs,v(o.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:ue(h,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[i[16]||(i[16]=e("h3",{class:"text-xl font-bold mb-2"},"D√©tails du paiement",-1)),e("label",Es,[i[13]||(i[13]=y(" Num√©ro de t√©l√©phone ")),R(e("input",{"onUpdate:modelValue":i[4]||(i[4]=w=>c.value=w),type:"tel",placeholder:"Ex: 696828151",class:K(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":l.value}]),onInput:i[5]||(i[5]=w=>l.value=!c.value),required:""},null,34),[[Y,c.value]]),l.value?(t(),s("span",zs,"Veuillez entrer un num√©ro valide.")):P("",!0)]),i[17]||(i[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Us,[(t(),s(X,null,ee(j,w=>e("label",{key:w.value,class:K(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":n.value===w.value,"border-gray-300 bg-white":n.value!==w.value,"border-red-500":f.value&&!n.value}])},[R(e("input",{type:"radio",value:w.value,"onUpdate:modelValue":i[6]||(i[6]=F=>n.value=F),class:"hidden"},null,8,Is),[[Be,n.value]]),e("img",{src:w.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Fs),e("span",{class:K([{"text-[var(--espace-vert)]":n.value===w.value,"text-gray-700":n.value!==w.value},"font-semibold select-none"])},v(w.label),3)],2)),64))]),f.value&&!n.value?(t(),s("span",Ts," Veuillez s√©lectionner un service. ")):P("",!0),e("button",{type:"submit",disabled:A.value||!c.value||!n.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[A.value?(t(),s(X,{key:0},[i[14]||(i[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),i[15]||(i[15]=y(" Veuillez patienter... "))],64)):(t(),s(X,{key:1},[y(" Payer & Souscrire ")],64))],8,Ls),e("button",{type:"button",onClick:i[7]||(i[7]=w=>o.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," ‚Üê Retour aux plans "),e("p",qs," üîí Paiement s√©curis√© via "+v(n.value||"votre service"),1)],32)])):(t(),s("div",As,[i[11]||(i[11]=Ae('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-04ff97e1><div data-v-04ff97e1><h3 class="text-xl font-bold text-gray-800" data-v-04ff97e1>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-04ff97e1>Pour d√©buter sans frais</p><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Pas de statistiques d√©taill√©es </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>‚ùå</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-04ff97e1> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:i[1]||(i[1]=w=>_("monthly"))},[i[8]||(i[8]=Ae('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>‚≠ê Populaire</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1> Acc√®s complet √† toutes les fonctionnalit√©s </p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:i[0]||(i[0]=ue(w=>_("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:i[3]||(i[3]=w=>_("yearly"))},[i[9]||(i[9]=Ae('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>-16% √âconomie</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:i[2]||(i[2]=ue(w=>_("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),N($,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:Q(()=>i[10]||(i[10]=[y(" ‚Üê Retour ")])),_:1,__:[10]})]))])])])):P("",!0)}}}),Rs=re(Os,[["__scopeId","data-v-04ff97e1"]]),Ns={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Ds={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},Ws={class:"flex justify-center gap-3 mb-4"},Js=["onClick"],Bs={key:0,class:"text-xs text-red-600 mt-1"},Hs={class:"flex gap-4"},Gs=["value"],Xs=["src"],Ks={key:1,class:"text-xs text-red-600 mt-1"},Qs={class:"text-center text-lg font-bold mt-6"},Ys={class:"text-[var(--espace-vert)]"},Zs=["disabled"],eo={key:0},to={key:1},so={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oo={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},ao=ae({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(I,{emit:u}){const b=fe().user,x=u,p=de(),r=m(10),o=m(""),n=m(""),c=m(r.value*100),l=m(!1),f=m(!1),A=m(!1),_=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],j=[10,20,50,100],h=ve(()=>r.value>=10&&o.value.trim().length===9&&/^6\d{8}$/.test(o.value)&&n.value!==""),a=()=>{c.value=r.value*100},i=D=>{r.value=D,a()},$=()=>{a()},w=()=>{A.value=!(o.value.trim().length===9&&/^6\d{8}$/.test(o.value))},F=async()=>{if(f.value=!n.value,!h.value){p.error("Veuillez remplir tous les champs correctement.");return}l.value=!0;try{const D=await B.post("/acheter-jetons",{nombre_jetons:r.value,payment_service:n.value,phone_number:o.value});b&&(b.jetons+=r.value),p.success(D.data.message),x("purchased",r.value),x("close")}catch(D){if(D.response&&D.response.data){const M=D.response.data;p.error(`Erreur: ${M.error_message||"Achat √©chou√©"}. D√©tails: ${M.details||"Aucun d√©tail."}`)}else p.error("Erreur lors de l'achat. Veuillez r√©essayer.");console.error(D)}finally{l.value=!1}};return he(o,()=>{w()}),(D,M)=>{const W=be("router-link");return t(),s("div",Ns,[e("div",Ds,[M[7]||(M[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," üé´ Acheter des Jetons ",-1)),M[8]||(M[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 100 FCFA",-1)),e("div",Ws,[(t(),s(X,null,ee(j,C=>e("button",{key:C,type:"button",onClick:se=>i(C),class:K(["rounded-full px-4 py-2 border font-semibold transition",r.value===C?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},v(C),11,Js)),64))]),M[9]||(M[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[y(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),R(e("input",{id:"jetonQuantity","onUpdate:modelValue":M[0]||(M[0]=C=>r.value=C),type:"number",min:"10",placeholder:"Ex: 10",onInput:$,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[Y,r.value,void 0,{number:!0}]]),M[10]||(M[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[y(" Num√©ro de t√©l√©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),R(e("input",{id:"phoneNumber","onUpdate:modelValue":M[1]||(M[1]=C=>o.value=C),type:"tel",placeholder:"Ex: 696428651",onInput:w,class:K(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",A.value?"border-red-500":"border-gray-300"])},null,34),[[Y,o.value]]),A.value?(t(),s("p",Bs," Veuillez entrer un num√©ro valide (9 chiffres, commen√ßant par 6). ")):P("",!0),M[11]||(M[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",Hs,[(t(),s(X,null,ee(_,C=>e("label",{key:C.value,class:K(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":n.value===C.value,"border-gray-300 bg-white":n.value!==C.value}])},[R(e("input",{type:"radio",value:C.value,"onUpdate:modelValue":M[2]||(M[2]=se=>n.value=se),class:"hidden"},null,8,Gs),[[Be,n.value]]),e("img",{src:C.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Xs),e("span",{class:K({"text-[var(--espace-vert)] font-bold":n.value===C.value,"text-gray-700":n.value!==C.value})},v(C.label),3)],2)),64))]),f.value&&!n.value?(t(),s("p",Ks," Veuillez s√©lectionner un service. ")):P("",!0),e("div",Qs,[M[4]||(M[4]=y(" Montant total : ")),e("span",Ys,v(c.value)+" FCFA",1)]),e("button",{onClick:F,disabled:!h.value||l.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[l.value?(t(),s("span",to,"veuillez patientez")):(t(),s("span",eo,"Acheter")),l.value?(t(),s("svg",so,M[5]||(M[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):P("",!0)],8,Zs),e("button",oo,[N(W,{to:"/jeton-history",onClick:M[3]||(M[3]=C=>x("close"))},{default:Q(()=>M[6]||(M[6]=[y("Annuler")])),_:1,__:[6]})])])])}}}),ro=re(ao,[["__scopeId","data-v-05239cce"]]),lo={class:"space-y-6 pb-16"},no={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},io={key:0,class:"space-y-2 text-[var(--espace-gris)]"},uo={class:"flex gap-2"},co=["disabled"],po={key:0,class:"fas fa-spinner fa-spin mr-2"},vo={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},mo={key:0,class:"space-y-2 text-[var(--espace-gris)]"},fo={key:0,class:"w-24 h-24"},go=["src"],xo={key:0,class:"mt-2 w-24 h-24"},bo=["src"],ho={class:"flex gap-2"},yo=["disabled"],_o={key:0,class:"fas fa-spinner fa-spin mr-2"},wo=ae({__name:"userProfile",props:{user:Object},setup(I){var h,a,i,$,w,F,D,M,W,C,se,ne,Z,z,G,J;const u=le(),b=fe(),x=de(),p=m(!1),r=m(b.user),o=m(!1),n=m(!1),c=m({nom:((h=r.value)==null?void 0:h.nom)||"",telephone:((a=r.value)==null?void 0:a.telephone)||"",email:((i=r.value)==null?void 0:i.email)||"",ville:(($=r.value)==null?void 0:$.ville)||""}),l=m(!1),f=m({nom:((F=(w=r.value)==null?void 0:w.commercant)==null?void 0:F.nom)||"",description:((M=(D=r.value)==null?void 0:D.commercant)==null?void 0:M.description)||"",email:((C=(W=r.value)==null?void 0:W.commercant)==null?void 0:C.email)||"",telephone:((ne=(se=r.value)==null?void 0:se.commercant)==null?void 0:ne.telephone)||"",ville:((z=(Z=r.value)==null?void 0:Z.commercant)==null?void 0:z.ville)||"",logo:null,logoPreview:(J=(G=r.value)==null?void 0:G.commercant)!=null&&J.logo?`http://localhost:8000/storage/${r.value.commercant.logo}`:null}),A=U=>{var q;const S=(q=U.target.files)==null?void 0:q[0];if(S){if(!S.type.startsWith("image/")){x.error("Veuillez s√©lectionner une image.");return}if(S.size>2*1024*1024){x.error("Image trop volumineuse (max 2Mo).");return}f.value.logo=S,f.value.logoPreview=URL.createObjectURL(S)}},_=async()=>{var U,S,q;o.value=!0;try{const g=await B.post("/updateProfile",c.value);r.value&&(r.value.nom=g.data.user.nom||"",r.value.telephone=g.data.user.telephone||"",r.value.email=g.data.user.email||"",r.value.ville=g.data.user.ville||""),b.user=g.data.user,p.value=!1,x.success("Profil mis √† jour avec succ√®s.")}catch(g){((S=(U=g.response)==null?void 0:U.data)==null?void 0:S.message)=="Unauthenticated."&&u.push("login"),x.error(((q=g.response)==null?void 0:q.data.message)||"Erreur lors de la mise √† jour.")}finally{o.value=!1}},j=async()=>{var U,S,q,g,d;n.value=!0;try{const H=new FormData;H.append("nom",f.value.nom),H.append("description",f.value.description),H.append("email",f.value.email),H.append("telephone",f.value.telephone),H.append("ville",f.value.ville),f.value.logo&&H.append("logo",f.value.logo);const V=await B.post("/commercant/update",H,{headers:{"Content-Type":"multipart/form-data"}});(U=r.value)!=null&&U.commercant&&(r.value.commercant.nom=V.data.commercant.nom,r.value.commercant.description=V.data.commercant.description,r.value.commercant.email=V.data.commercant.email,r.value.commercant.telephone=V.data.commercant.telephone,r.value.commercant.ville=V.data.commercant.ville,r.value.commercant.logo=V.data.commercant.logo),b.user=r.value,f.value.logoPreview=V.data.commercant.logo?`http://localhost:8000/storage/${V.data.commercant.logo}`:null,l.value=!1,x.success("Commerce mis √† jour avec succ√®s.")}catch(H){((q=(S=H.response)==null?void 0:S.data)==null?void 0:q.message)=="Unauthenticated."&&u.push("login"),x.error(((d=(g=H.response)==null?void 0:g.data)==null?void 0:d.message)||"Erreur lors de la mise √† jour du commerce.")}finally{n.value=!1}};return he(()=>b.user,U=>{var S,q,g,d,H,V;r.value=U||null,c.value={nom:(U==null?void 0:U.nom)||"",telephone:(U==null?void 0:U.telephone)||"",email:(U==null?void 0:U.email)||"",ville:(U==null?void 0:U.ville)||""},f.value={nom:((S=U==null?void 0:U.commercant)==null?void 0:S.nom)||"",description:((q=U==null?void 0:U.commercant)==null?void 0:q.description)||"",email:((g=U==null?void 0:U.commercant)==null?void 0:g.email)||"",telephone:((d=U==null?void 0:U.commercant)==null?void 0:d.telephone)||"",ville:((H=U==null?void 0:U.commercant)==null?void 0:H.ville)||"",logo:null,logoPreview:(V=U==null?void 0:U.commercant)!=null&&V.logo?`http://localhost:8000/storage/${U.commercant.logo}`:null}},{immediate:!0}),(U,S)=>{var q,g,d,H,V,E;return t(),s("div",lo,[e("section",no,[S[23]||(S[23]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),p.value?(t(),s("form",{key:1,onSubmit:ue(_,["prevent"]),class:"space-y-4"},[e("div",null,[S[18]||(S[18]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),R(e("input",{"onUpdate:modelValue":S[1]||(S[1]=O=>c.value.nom=O),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[Y,c.value.nom]])]),e("div",null,[S[19]||(S[19]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"T√©l√©phone",-1)),R(e("input",{"onUpdate:modelValue":S[2]||(S[2]=O=>c.value.telephone=O),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre t√©l√©phone"},null,512),[[Y,c.value.telephone]])]),e("div",null,[S[20]||(S[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),R(e("input",{"onUpdate:modelValue":S[3]||(S[3]=O=>c.value.email=O),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[Y,c.value.email]])]),e("div",null,[S[21]||(S[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),R(e("input",{"onUpdate:modelValue":S[4]||(S[4]=O=>c.value.ville=O),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[Y,c.value.ville]])]),e("div",uo,[e("button",{type:"submit",disabled:o.value,class:K(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[o.value?(t(),s("i",po)):P("",!0),S[22]||(S[22]=y(" Enregistrer "))],10,co),e("button",{onClick:S[5]||(S[5]=O=>p.value=!1),class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",io,[e("p",null,[S[13]||(S[13]=e("strong",null,"Nom :",-1)),y(" "+v((q=r.value)==null?void 0:q.nom),1)]),e("p",null,[S[14]||(S[14]=e("strong",null,"T√©l√©phone :",-1)),y(" "+v((g=r.value)==null?void 0:g.telephone),1)]),e("p",null,[S[15]||(S[15]=e("strong",null,"Email :",-1)),y(" "+v(((d=r.value)==null?void 0:d.email)||"Non d√©fini"),1)]),e("p",null,[S[16]||(S[16]=e("strong",null,"Ville :",-1)),y(" "+v((H=r.value)==null?void 0:H.ville),1)]),e("p",null,[S[17]||(S[17]=e("strong",null,"Statut Premium :",-1)),y(" "+v((V=r.value)!=null&&V.premium?"Actif":"Inactif"),1)]),e("button",{onClick:S[0]||(S[0]=O=>p.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(E=r.value)!=null&&E.commercant?(t(),s("section",vo,[S[36]||(S[36]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),l.value?(t(),s("form",{key:1,onSubmit:ue(j,["prevent"]),class:"space-y-4"},[e("div",null,[S[29]||(S[29]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),R(e("input",{"onUpdate:modelValue":S[7]||(S[7]=O=>f.value.nom=O),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[Y,f.value.nom]])]),e("div",null,[S[30]||(S[30]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),R(e("textarea",{"onUpdate:modelValue":S[8]||(S[8]=O=>f.value.description=O),id:"description_commerce",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[Y,f.value.description]])]),e("div",null,[S[31]||(S[31]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),R(e("input",{"onUpdate:modelValue":S[9]||(S[9]=O=>f.value.email=O),id:"email_commerce",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce (optionnel)"},null,512),[[Y,f.value.email]])]),e("div",null,[S[32]||(S[32]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"T√©l√©phone",-1)),R(e("input",{"onUpdate:modelValue":S[10]||(S[10]=O=>f.value.telephone=O),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"T√©l√©phone du commerce"},null,512),[[Y,f.value.telephone]])]),e("div",null,[S[33]||(S[33]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),R(e("input",{"onUpdate:modelValue":S[11]||(S[11]=O=>f.value.ville=O),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[Y,f.value.ville]])]),e("div",null,[S[34]||(S[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:A,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),f.value.logoPreview?(t(),s("div",xo,[e("img",{src:f.value.logoPreview,alt:"Aper√ßu logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,bo)])):P("",!0)]),e("div",ho,[e("button",{type:"submit",disabled:n.value,class:K(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",n.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[n.value?(t(),s("i",_o)):P("",!0),S[35]||(S[35]=y(" Enregistrer "))],10,yo),e("button",{onClick:S[12]||(S[12]=O=>l.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",mo,[r.value.commercant.logo?(t(),s("div",fo,[e("img",{src:`http://localhost:8000/storage/${r.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,go)])):P("",!0),e("p",null,[S[24]||(S[24]=e("strong",null,"Nom du commerce :",-1)),y(" "+v(r.value.commercant.nom),1)]),e("p",null,[S[25]||(S[25]=e("strong",null,"Description :",-1)),y(" "+v(r.value.commercant.description||"Non d√©finie"),1)]),e("p",null,[S[26]||(S[26]=e("strong",null,"Email :",-1)),y(" "+v(r.value.commercant.email||"Non d√©fini"),1)]),e("p",null,[S[27]||(S[27]=e("strong",null,"T√©l√©phone :",-1)),y(" "+v(r.value.commercant.telephone),1)]),e("p",null,[S[28]||(S[28]=e("strong",null,"Ville :",-1)),y(" "+v(r.value.commercant.ville),1)]),e("button",{onClick:S[6]||(S[6]=O=>l.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Modifier ")]))])):P("",!0)])}}}),ko=re(wo,[["__scopeId","data-v-d704430c"]]),$o=ae({__name:"MerchantProfile",props:{user:Object},setup(I){const u=de(),b=m(null),x=m([]);return ge(async()=>{try{const p=await B.get("/commercant/profil");b.value=p.data.commercant,x.value=p.data.produits||[]}catch(p){u.error("Erreur lors du chargement des donn√©es du commer√ßant: "+(p.message||p))}}),(p,r)=>null}}),Co=re($o,[["__scopeId","data-v-ce205108"]]),Ao={class:"overflow-y-scroll pb-8 relative bg-gray-100 py-8 sm:px-6"},Po={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},jo={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},So={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},Mo={class:"relative"},Vo=["src"],Eo={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},zo={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},Uo={class:"space-y-1"},Io={key:0,class:"text-sm text-gray-500"},Fo={key:0,class:"ml-4 flex items-center gap-2"},To=["src"],Lo=["disabled"],qo={class:"flex flex-col sm:flex-row gap-2 items-center"},Oo={class:"container mx-auto max-w-4xl"},Ro={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},No={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},Do=ae({__name:"Profile",setup(I){const u=()=>{const G=window.location.hostname;return G==="localhost"||G==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},b=ve(()=>u()),x=le(),p=de(),r=fe();r.checkAuth();const o=m(r.user),n=m(!1),c=m(!1),l=m(null),f=m(null),A=m(!1),_=m(!1),j=m(!1),h=ve(()=>_.value?Co:ko),a=m(null),i=m(null),$=m(!1);let w=null;const F=()=>{var G;(G=a.value)==null||G.click(),n.value=!1},D=G=>{const J=G.target;if(J.files&&J.files[0]){const U=J.files[0];if(!U.type.startsWith("image/")){p.error("Veuillez s√©lectionner une image.");return}if(U.size>2*1024*1024){p.error("Image trop volumineuse (max 2Mo).");return}f.value=U,l.value=URL.createObjectURL(U)}},M=async()=>{try{w=await navigator.mediaDevices.getUserMedia({video:!0}),$.value=!0,n.value=!1,setTimeout(()=>{i.value&&(i.value.srcObject=w)},100)}catch(G){p.error("Impossible d'acc√©der √† la cam√©ra."),console.error(G)}},W=()=>{if(!i.value)return;const G=i.value,J=document.createElement("canvas");J.width=G.videoWidth,J.height=G.videoHeight;const U=J.getContext("2d");U&&(U.drawImage(G,0,0,J.width,J.height),J.toBlob(S=>{S&&(f.value=new File([S],"photo.jpg",{type:"image/jpeg"}),l.value=URL.createObjectURL(f.value),C())},"image/jpeg"))},C=()=>{w&&(w.getTracks().forEach(G=>G.stop()),w=null),$.value=!1},se=()=>{f.value=null,l.value=null},ne=async()=>{var G,J,U,S;if(f.value){c.value=!0;try{const q=new FormData;q.append("photo",f.value);const g=await B.post("/profile/photo",q,{headers:{"Content-Type":"multipart/form-data"}});g.data.photo&&(o.value&&(o.value.photo=g.data.photo,r.user=o.value),p.success("Photo mise √† jour."),se())}catch(q){((J=(G=q.response)==null?void 0:G.data)==null?void 0:J.message)=="Unauthenticated."&&x.push("login"),p.error(((S=(U=q.response)==null?void 0:U.data)==null?void 0:S.message)||"Erreur lors de l'envoi.")}finally{c.value=!1}}},Z=async()=>{A.value=!1},z=G=>{p.success(`Vous avez achet√© ${G} jetons !`)};return he(()=>r.user,G=>{o.value=G||null},{immediate:!0}),ge(()=>{}),Se(()=>{l.value&&URL.revokeObjectURL(l.value),w&&w.getTracks().forEach(G=>G.stop())}),(G,J)=>{var U,S,q,g,d,H,V,E,O,ie,ce,me,te,k,oe,L,xe,$e,Ce,Ee,ze;return t(),s("div",Ao,[e("div",Po,[e("div",jo,[e("div",So,[e("div",Mo,[(U=o.value)!=null&&U.photo?(t(),s("img",{key:0,src:b.value+((S=o.value)==null?void 0:S.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Vo)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:we({background:`${((H=(d=(g=(q=o.value)==null?void 0:q.niveaux_users)==null?void 0:g.at(-1))==null?void 0:d.parrainage_niveau)==null?void 0:H.couleur)||"#0af"}`})},J[5]||(J[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(V=o.value)!=null&&V.premium?(t(),s("i",Eo)):P("",!0),e("button",{onClick:J[0]||(J[0]=Pe=>n.value=!n.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},J[6]||(J[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),n.value?(t(),s("div",zo,[e("button",{onClick:M,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," Cam√©ra "),e("button",{onClick:F,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):P("",!0)]),e("input",{ref_key:"galleryInput",ref:a,type:"file",accept:"image/*",class:"hidden",onChange:D},null,544),e("div",Uo,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:we({color:`${((ce=(ie=(O=(E=o.value)==null?void 0:E.niveaux_users)==null?void 0:O.at(-1))==null?void 0:ie.parrainage_niveau)==null?void 0:ce.couleur)||"#0af"}`})},[y(v((me=o.value)==null?void 0:me.nom)+" ",1),(te=o.value)!=null&&te.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:we({background:`${((xe=(L=(oe=(k=o.value)==null?void 0:k.niveaux_users)==null?void 0:oe.at(-1))==null?void 0:L.parrainage_niveau)==null?void 0:xe.couleur)||"#0af"}`})}," Premium ",4)):P("",!0)],4),($e=o.value)!=null&&$e.subscription_ends_at?(t(),s("span",Io," Jusqu'au "+v(new Date((Ce=o.value)==null?void 0:Ce.subscription_ends_at).toLocaleDateString()),1)):P("",!0)])]),l.value?(t(),s("div",Fo,[e("img",{src:l.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,To),e("button",{onClick:ne,disabled:c.value,class:K(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":c.value}])},v(c.value?"Upload...":"Confirmer"),11,Lo),e("button",{onClick:se,class:"text-red-500 hover:text-red-700"}," Annuler ")])):P("",!0)]),e("div",qo,[(Ee=o.value)!=null&&Ee.commercant?P("",!0):(t(),s("button",{key:0,onClick:J[1]||(J[1]=Pe=>T(x).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commer√ßant ")),(ze=o.value)!=null&&ze.premium?P("",!0):(t(),s("button",{key:1,onClick:J[2]||(J[2]=Pe=>A.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",Oo,[(t(),pe(Ye(h.value)))]),A.value?(t(),pe(Rs,{key:0,"is-open":A.value,onClose:J[3]||(J[3]=Pe=>A.value=!1),onUpgraded:Z},null,8,["is-open"])):P("",!0),j.value?(t(),pe(ro,{key:1,"is-open":j.value,onClose:J[4]||(J[4]=Pe=>j.value=!1),onPurchased:z},null,8,["is-open"])):P("",!0),$.value?(t(),s("div",Ro,[e("div",No,[e("video",{ref_key:"videoRef",ref:i,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:W,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:C,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):P("",!0)])}}}),kc=re(Do,[["__scopeId","data-v-d3d7ca02"]]),Wo={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},Jo={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},Bo={class:"space-y-2"},Ho=["onClick"],Go={class:"font-poppins"},Xo={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Ko={class:"lg:hidden mb-4"},Qo={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Yo=["onClick"],Zo={key:0,class:"space-y-6"},ea={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ta={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},sa={class:"flex items-center gap-4 mb-4"},oa=["src"],aa={class:"text-[var(--espace-vert)] font-semibold"},ra={class:"text-sm text-[var(--espace-gris)]"},la={class:"text-sm text-[var(--espace-gris)]"},na={class:"text-sm text-[var(--espace-gris)]"},ia={key:0,class:"space-y-6"},ua={key:0,class:"space-y-6"},da={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ca={class:"text-base font-medium font-poppins"},pa={class:"text-sm text-[var(--espace-gris)]"},va=ae({__name:"Parametres",setup(I){const u=m(!1),b=fe(),x=le(),p=de(),r=b.user,o=m("profile"),n=m({id:(r==null?void 0:r.id)??0,nom:(r==null?void 0:r.nom)??"",email:(r==null?void 0:r.email)??"",telephone:(r==null?void 0:r.telephone)??"",ville:(r==null?void 0:r.ville)??""});b.user={...b.user,...n.value};const c=m({current_password:"",new_password:"",confirm_new_password:""});m({});const l=m(""),f=ve(()=>[...r!=null&&r.commercant?[{to:"/commercant/produits",label:"Espace Commer√ßant",icon:"fa-store-alt",description:"G√©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des r√©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"G√©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"G√©rez vos collaborations sur des produits"}]),A=async()=>{var a,i,$,w;u.value=!0;try{await B.post("/updateProfile",n.value),localStorage.setItem("user",JSON.stringify(b.user)),p.success("Profil mis √† jour avec succ√®s",{timeout:3e3})}catch(F){((i=(a=F.response)==null?void 0:a.data)==null?void 0:i.message)=="Unauthenticated."&&x.push("login"),p.error(((w=($=F.response)==null?void 0:$.data)==null?void 0:w.message)||"Erreur lors de la mise √† jour du profil")}finally{u.value=!1}},_=async()=>{var a,i,$,w;u.value=!0;try{if(c.value.new_password!==c.value.confirm_new_password){p.error("Les mots de passe ne correspondent pas");return}await B.post("/updatePassword",c.value),p.success("Mot de passe mis √† jour avec succ√®s",{timeout:3e3}),c.value={current_password:"",new_password:"",confirm_new_password:""},l.value=""}catch(F){((i=(a=F.response)==null?void 0:a.data)==null?void 0:i.message)=="Unauthenticated."&&x.push("login"),p.error(((w=($=F.response)==null?void 0:$.data)==null?void 0:w.message)||"Erreur lors de la mise √† jour du mot de passe")}finally{u.value=!1}},j=()=>{b.logout(),x.push({name:"login"})},h=()=>{const a=c.value.new_password;a.length===0?l.value="":a.length<8||!/[A-Za-z]/.test(a)||!/[0-9]/.test(a)?l.value="weak":/[!@#$%^&*]/.test(a)?l.value="strong":l.value="medium"};return he(()=>c.value.new_password,h),(a,i)=>{const $=be("RouterLink");return t(),s(X,null,[N(Ve,{isLoading:u.value},null,8,["isLoading"]),e("div",Wo,[e("aside",Jo,[i[7]||(i[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"Param√®tres",-1)),e("nav",Bo,[(t(),s(X,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],w=>e("button",{key:w.id,onClick:F=>w.id==="logout"?j():o.value=w.id,class:K(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":o.value===w.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":o.value!==w.id}])},[e("i",{class:K(["fas",w.icon])},null,2),e("span",Go,v(w.label),1)],10,Ho)),64))])]),e("main",Xo,[e("div",Ko,[e("div",Qo,[(t(),s(X,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],w=>e("button",{key:w.id,onClick:F=>w.id==="logout"?j():o.value=w.id,class:K(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":o.value===w.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":o.value!==w.id}])},[e("i",{class:K(["fas",w.icon])},null,2),y(" "+v(w.label),1)],10,Yo)),64))])]),N(ye,{name:"slide"},{default:Q(()=>{var w,F;return[o.value==="profile"?(t(),s("section",Zo,[i[10]||(i[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",ea,[e("form",{onSubmit:ue(A,["prevent"]),class:"space-y-4"},[N(_e,{label:"Nom",icon:"fa-user",modelValue:n.value.nom,"onUpdate:modelValue":i[0]||(i[0]=D=>n.value.nom=D),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),N(_e,{label:"Email",icon:"fa-envelope",modelValue:n.value.email,"onUpdate:modelValue":i[1]||(i[1]=D=>n.value.email=D),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),N(_e,{label:"T√©l√©phone",icon:"fa-phone",modelValue:n.value.telephone,"onUpdate:modelValue":i[2]||(i[2]=D=>n.value.telephone=D),type:"tel",required:"",placeholder:"Votre num√©ro de t√©l√©phone"},null,8,["modelValue"]),N(_e,{label:"Ville",icon:"fa-city",modelValue:n.value.ville,"onUpdate:modelValue":i[3]||(i[3]=D=>n.value.ville=D),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),i[8]||(i[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre √† jour ",-1))],32),e("div",ta,[i[9]||(i[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"Aper√ßu",-1)),e("div",sa,[e("img",{src:((F=(w=T(r))==null?void 0:w.commercant)==null?void 0:F.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,oa),e("div",null,[e("p",aa,v(n.value.nom||"Nonni"),1),e("p",ra,v(n.value.email||"Non d√©fini"),1)])]),e("p",la,"T√©l√©phone: "+v(n.value.telephone||"Nonni"),1),e("p",na,"Ville: "+v(n.value.ville||"Non d√©fini"),1)])])])):P("",!0)]}),_:1}),N(ye,{name:"slide"},{default:Q(()=>[o.value==="security"?(t(),s("section",ia,[i[12]||(i[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"S√©curit√©",-1)),e("form",{onSubmit:ue(_,["prevent"]),class:"space-y-4"},[N(_e,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:c.value.current_password,"onUpdate:modelValue":i[4]||(i[4]=w=>c.value.current_password=w),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),N(_e,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:c.value.new_password,"onUpdate:modelValue":i[5]||(i[5]=w=>c.value.new_password=w),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:h},null,8,["modelValue"]),l.value?(t(),s("div",{key:0,class:K(["text-sm",{"text-red-500":l.value==="weak","text-yellow-500":l.value==="medium","text-green-500":l.value==="strong"}])}," Force du mot de passe : "+v(l.value==="weak"?"Faible":l.value==="medium"?"Moyen":"Fort"),3)):P("",!0),N(_e,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:c.value.confirm_new_password,"onUpdate:modelValue":i[6]||(i[6]=w=>c.value.confirm_new_password=w),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),i[11]||(i[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):P("",!0)]),_:1}),N(ye,{name:"slide"},{default:Q(()=>[o.value==="links"?(t(),s("section",ua,[i[13]||(i[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",da,[(t(!0),s(X,null,ee(f.value,w=>(t(),pe($,{key:w.to,to:w.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:Q(()=>[e("i",{class:K(["fas",w.icon])},null,2),e("div",null,[e("h3",ca,v(w.label),1),e("p",pa,v(w.description),1)])]),_:2},1032,["to"]))),128))])])):P("",!0)]),_:1})])])],64)}}}),$c=re(va,[["__scopeId","data-v-ce56f428"]]),ma={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},fa={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},ga=["src","alt"],xa={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},ba={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},ha={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},ya={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},_a={class:"text-xs text-[var(--espace-gris)] truncate"},wa={class:"text-sm font-medium text-[var(--espace-or)]"},ka={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},$a={class:"flex items-center gap-1"},Ca={class:"flex items-center gap-1"},Aa=["aria-label"],Pa=ae({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(I,{emit:u}){const b=I,x=u,p=de(),r=Me(),o=l=>{if(l==null||isNaN(l)||l===0)return"0";const f=Math.abs(l);return f<1e3?l.toString():f<1e4?(l/1e3).toFixed(1).replace(/\.0$/,"")+"k":f<1e6?Math.floor(l/1e3)+"k":f<1e9?(l/1e6).toFixed(1).replace(/\.0$/,"")+"M":(l/1e9).toFixed(1).replace(/\.0$/,"")+"B"},n=m(0),c=async()=>{var l,f;try{console.log(b.produit.id),await r.toggleFavorite(b.produit.id),x("toggle-favorite",b.produit.id)}catch(A){console.error("Erreur lors de la mise √† jour des favoris :",A),p.error(((f=(l=A.response)==null?void 0:l.data)==null?void 0:f.message)||"Erreur lors de la mise √† jour des favori.")}};return(l,f)=>{var _,j;const A=be("router-link");return t(),s("div",ma,[N(A,{to:`/produits/${l.produit.id}`,class:"block relative"},{default:Q(()=>[e("div",fa,[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${n.value*100}%)`})},[(t(!0),s(X,null,ee(l.produit.photos||[l.produit.photo_url||"https://via.placeholder.com/150"],(h,a)=>(t(),s("img",{key:a,src:h,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${l.produit.nom} - ${a+1}`},null,8,ga))),128))],4),l.produit.photos&&l.produit.photos.length>1?(t(),s("div",xa,[(t(!0),s(X,null,ee(l.produit.photos,(h,a)=>(t(),s("span",{key:a,class:K(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":a===n.value}])},null,2))),128))])):P("",!0)]),l.produit.collaboratif?(t(),s("span",ba," Collaboratif ")):P("",!0),l.produit.boosted?(t(),s("span",ha," Boost√© ")):P("",!0),e("h3",ya,v(l.produit.nom),1),e("p",_a,v(l.produit.description||"Aucune description"),1),e("p",wa,v(l.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",ka,[e("div",$a,[f[0]||(f[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,v(o((_=l.produit.counts)==null?void 0:_.views_count)),1)]),e("div",Ca,[e("button",{onClick:c,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":l.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:K(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":l.produit.is_favorited_by}])},null,2)],8,Aa),e("span",null,v(o((j=l.produit.counts)==null?void 0:j.favorites_count)),1)])])])}}}),Te=re(Pa,[["__scopeId","data-v-f669a30f"]]),ja={},Sa={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm animate-pulse"};function Ma(I,u){return t(),s("div",Sa,u[0]||(u[0]=[Ae('<div class="w-full h-32 bg-gray-300 rounded-lg mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-3/4 mb-2" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/2 mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-1/3 mb-2" data-v-4ed20fce></div><div class="flex justify-between mt-2" data-v-4ed20fce><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div></div>',5)]))}const We=re(ja,[["render",Ma],["__scopeId","data-v-4ed20fce"]]),Va={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},Ea={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},za={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},Ua=["onClick","aria-label","aria-current"],Ia=["aria-label","aria-expanded"],Fa={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},Ta={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},La={class:"flex-1 min-w-[120px]"},qa={class:"flex-1 min-w-[120px]"},Oa=["value"],Ra={class:"flex-1 min-w-[100px]"},Na={class:"flex-1 min-w-[100px]"},Da={class:"flex-1 min-w-[120px]"},Wa=["value"],Ja={class:"flex-1 min-w-[100px]"},Ba=["aria-busy"],Ha={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Ga=ae({__name:"Home",setup(I){const u=le(),b=Me(),x=fe(),p=m([]),r=de(),o=m(!1),n=m({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),c=m(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),l=m(null),f=m(null),A=m(!1);let _=0;const j=async()=>{try{const M=await B.get("/categories");p.value=M.data.categories}catch(M){console.error("Erreur lors du chargement des cat√©gories:",M),r.error("Erreur lors du chargement des cat√©gories.")}},h=()=>{if(n.value.prix_min&&n.value.prix_max&&parseFloat(n.value.prix_min)>parseFloat(n.value.prix_max)){r.error("Le prix minimum doit √™tre inf√©rieur au prix maximum.");return}b.fetchProducts(n.value,!0),o.value=!1},a=()=>{n.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},o.value=!1},i=M=>{b.setSort(M)},$=()=>Object.values(n.value).filter(M=>M!=="").length,w=M=>{D(M)},F=M=>{D(M)},D=async M=>{var Z,z,G;const W=(Z=x.user)==null?void 0:Z.id,C=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),se=new Date().toISOString().split("T")[0],ne=localStorage.getItem("lastResetDate");if((!ne||ne!==se)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",se)),!C[M])try{setTimeout(async()=>{const J=await B.post("/record_view",{product_id:M,user_id:W??null})},1e3),C[M]=!0,localStorage.setItem("viewedProducts",JSON.stringify(C))}catch(J){console.error("Erreur lors de l'enregistrement de la vue:",J),r.error(((G=(z=J.response)==null?void 0:z.data)==null?void 0:G.message)||"Erreur lors de l'enregistrement de la vue.")}};return ge(async()=>{try{if(console.log("Produits au montage:",b.products),await b.fetchProducts({},!0,!0),console.log("Produits charg√©s:",b.products,"isLoading:",b.isLoading),await j(),!x.user){u.push("/login");return}}catch(M){console.error("Erreur lors du chargement des produits ou cat√©gories:",M),M==="Unauthenticated."&&u.push("login"),r.error("Erreur lors du chargement des produits. Veuillez r√©essayer.")}l.value=new IntersectionObserver(M=>{console.log("Observer d√©clench√©, isLoadingMore:",A.value,"hasMore:",b.hasMore),M[0].isIntersecting&&!A.value&&b.hasMore&&(A.value=!0,Ze(()=>{_=window.scrollY}),b.fetchProducts(n.value).finally(()=>{A.value=!1}))},{threshold:.1}),f.value&&l.value.observe(f.value)}),+et(()=>{window.scrollTo(0,_)}),Se(()=>{l.value&&f.value&&l.value.unobserve(f.value)}),(M,W)=>(t(),s("div",Va,[e("div",Ea,[e("div",za,[(t(),s(X,null,ee([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-bookmark"}],C=>e("button",{key:C.id,onClick:se=>i(C.id),class:K(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":T(b).sort===C.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":T(b).sort!==C.id}]),"aria-label":`Trier par ${C.label}`,"aria-current":T(b).sort===C.id?"true":void 0},[e("i",{class:K(["fas",C.icon])},null,2),y(" "+v(C.label),1)],10,Ua)),64)),e("button",{onClick:W[0]||(W[0]=C=>o.value=!o.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":o.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":o.value},[W[7]||(W[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),$()>0?(t(),s("span",Fa,v($()),1)):P("",!0)],8,Ia)]),N(ye,{name:"slide-up"},{default:Q(()=>[o.value?(t(),s("div",Ta,[e("form",{onSubmit:ue(h,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",La,[R(e("input",{"onUpdate:modelValue":W[1]||(W[1]=C=>n.value.search=C),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[Y,n.value.search]])]),e("div",qa,[R(e("select",{"onUpdate:modelValue":W[2]||(W[2]=C=>n.value.category=C),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[8]||(W[8]=e("option",{value:""},"Toutes les Cat√©gories",-1)),(t(!0),s(X,null,ee(p.value,C=>(t(),s("option",{key:C.id,value:C.id},v(C.nom),9,Oa))),128))],512),[[ke,n.value.category]])]),e("div",Ra,[R(e("input",{"onUpdate:modelValue":W[3]||(W[3]=C=>n.value.prix_min=C),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[Y,n.value.prix_min]])]),e("div",Na,[R(e("input",{"onUpdate:modelValue":W[4]||(W[4]=C=>n.value.prix_max=C),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[Y,n.value.prix_max]])]),e("div",Da,[R(e("select",{"onUpdate:modelValue":W[5]||(W[5]=C=>n.value.ville=C),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[9]||(W[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(X,null,ee(c.value,C=>(t(),s("option",{key:C,value:C},v(C),9,Wa))),128))],512),[[ke,n.value.ville]])]),e("div",Ja,[R(e("select",{"onUpdate:modelValue":W[6]||(W[6]=C=>n.value.collaboratif=C),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},W[10]||(W[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[ke,n.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[W[12]||(W[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:a,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"R√©initialiser les filtres"},W[11]||(W[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):P("",!0)]),_:1}),N(qe,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:Q(()=>[T(b).isLoading&&T(b).products.length===0?(t(!0),s(X,{key:0},ee(T(b).isLoading?8:0,C=>(t(),pe(We,{key:"skeleton-init-"+C}))),128)):P("",!0),(t(!0),s(X,null,ee(T(b).products,C=>(t(),pe(Te,{key:C.id,produit:C,onMouseover:se=>w(C.id),onTouchstart:se=>F(C.id)},null,8,["produit","onMouseover","onTouchstart"]))),128)),A.value?(t(!0),s(X,{key:1},ee(A.value?4:0,C=>(t(),pe(We,{key:"skeleton-more-"+C}))),128)):P("",!0)]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:f,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":A.value},[T(b).hasMore?P("",!0):(t(),s("p",Ha,"Aucun produit suppl√©mentaire"))],8,Ba)])]))}}),Cc=re(Ga,[["__scopeId","data-v-a0d08221"]]),Xa={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},Ka={class:"container mx-auto max-w-5xl"},Qa={key:0,class:"text-center text-[var(--espace-gris)]"},Ya={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Za={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},er={class:"w-full lg:w-1/2 relative"},tr={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},sr=["src","alt"],or={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},ar={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},rr={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},lr={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Commer√ßant Pro"},nr={class:"w-full lg:w-1/2"},ir={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},ur={class:"text-sm text-[var(--espace-gris)] mb-3"},dr={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},cr={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},pr={class:"flex items-center gap-3"},vr={class:"flex items-center gap-1"},mr={class:"flex items-center gap-1"},fr=["aria-label"],gr={class:"border-t pt-3 mt-3"},xr={class:"text-xs text-[var(--espace-gris)] mb-1"},br={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"Commer√ßant v√©rifi√©",title:"Commer√ßant v√©rifi√©"},hr={class:"text-xs text-[var(--espace-gris)] mb-1"},yr={class:"text-xs text-[var(--espace-gris)] mb-1"},_r={class:"text-xs text-[var(--espace-gris)] mb-2"},wr={class:"flex flex-col sm:flex-row gap-3 mt-4"},kr=["disabled","aria-label"],$r={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},Cr={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},Ar={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},Pr={class:"text-xs text-[var(--espace-gris)] mb-3"},jr=["aria-label"],Sr={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},Mr={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},Vr={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Er={class:"text-sm text-[var(--espace-gris)]"},zr={class:"text-[var(--espace-or)]"},Ur={class:"flex gap-4"},Ir={key:0,class:"mt-6"},Fr=["aria-busy"],Tr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Lr=ae({__name:"Produit",setup(I){const u=Me(),b=je(),x=le(),p=fe(),r=Ie(),o=de();m([]);const n=m(!1),c=m(null),l=m(null),f=m(null),A=m(!1),_=m(0),j=m(0),h=[0,500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],i=g=>{if(g==null||isNaN(g)||g===0)return"0";const d=Math.abs(g);return d<1e3?g.toString():d<1e4?(g/1e3).toFixed(1).replace(/\.0$/,"")+"k":d<1e6?Math.floor(g/1e3)+"k":d<1e9?(g/1e6).toFixed(1).replace(/\.0$/,"")+"M":(g/1e9).toFixed(1).replace(/\.0$/,"")+"B"},$=async()=>{try{u.isLoading=!0,await u.viewProduct(b.params.id),u.isLoading=!1,u.product.photos&&!u.product.photo_url&&(u.product.photo_url=u.product.photos[0]),await u.fetchProducts({category:u.product.category_id,per_page:8},!0)}catch(g){o.error(g||"Erreur lors du chargement du produit"),x.push({name:"home"})}finally{u.isLoading=!1}},w=()=>{var g;if(!p.user){o.error("Veuillez vous connecter pour collaborer"),x.push({name:"login"});return}if(((g=p.user.commercant)==null?void 0:g.id)===u.product.commercant_id){o.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!u.product.collaboratif){o.error("Ce produit n‚Äôest pas ouvert √† la collaboration");return}c.value=u.product.prix+(u.product.marge_min||500),n.value=!0},F=async()=>{if(!c.value||c.value<u.product.prix+(u.product.marge_min||0)){o.error(`Le prix de revente doit √™tre sup√©rieur ou √©gal √† ${u.product.prix+(u.product.marge_min||0)} XAF`);return}await r.addCollaboration({produit_id:u.product.id,prix_revente:c.value})&&(o.success("Demande de collaboration envoy√©e",{timeout:3e3}),n.value=!1,c.value=null)},D=()=>{n.value=!1,c.value=null},M=()=>{x.push({path:`/commercant/produits/${u.product.id}/edit`})},W=async()=>{var g,d,H;if(!p.user||((g=p.user.commercant)==null?void 0:g.id)!==u.product.commercant_id){o.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}if(p.user.jetons<j.value){o.error(`Pas assez de Jetons. Il vous faut ${j.value} Jetons pour ce boost.`);return}try{const V=await B.post(`/produits/${u.product.id}/boost`,{target_views:_.value});p.user.jetons-=j.value,u.product.boosted=!0,o.success(V.data.message||"Produit boost√© avec succ√®s !"),A.value=!1}catch(V){o.error(((H=(d=V.response)==null?void 0:d.data)==null?void 0:H.message)||"Erreur lors du boostage du produit")}},C=()=>{var g;if(!p.user||((g=p.user.commercant)==null?void 0:g.id)!==u.product.commercant_id){o.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}A.value=!0,se()},se=()=>{const g=h.indexOf(_.value);j.value=g!==-1?Math.max(5,a[g]):5};he(_,()=>{se()});const ne=g=>{z(g)},Z=g=>{z(g)},z=async g=>{var O,ie,ce;const d=(O=p.user)==null?void 0:O.id;if(!d){o.error("Connexion requise pour enregistrer la vue.");return}const H=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),V=new Date().toISOString().split("T")[0],E=localStorage.getItem("lastResetDate");if((!E||E!==V)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",V)),!H[g])try{setTimeout(async()=>{const me=await B.post("/record_view",{product_id:g,user_id:d})},1e3),H[g]=!0,localStorage.setItem("viewedProducts",JSON.stringify(H))}catch(me){console.error("Erreur lors de l'enregistrement de la vue:",me),o.error(((ce=(ie=me.response)==null?void 0:ie.data)==null?void 0:ce.message)||"Erreur lors de l'enregistrement de la vue.")}},G=async()=>{var g,d;try{await u.toggleFavorite(u.product.id)}catch(H){o.error(((d=(g=H.response)==null?void 0:g.data)==null?void 0:d.message)||"Erreur lors de la mise √† jour des favoris.")}},J=(g,d,H)=>{var E;if(!p.user){o.error("Veuillez vous connecter pour d√©marrer une conversation"),x.push({name:"login"});return}const V={id:g,name:d,commercant_id:u.product.commercant_id,name_user:((E=p.user)==null?void 0:E.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(V)),x.push(`/messages/${H}`)},U=m(0),S=()=>{var d;const g=(((d=u.product.photos)==null?void 0:d.length)||1)-1;U.value=Math.min(U.value+1,g)},q=()=>{U.value=Math.max(U.value-1,0)};return ge(()=>{$(),r.initializeState(),l.value=new IntersectionObserver(g=>{g[0].isIntersecting&&!u.isLoading&&u.hasMore&&u.fetchProducts({category:u.product.category_id,per_page:8},!1)},{threshold:.1}),f.value&&l.value.observe(f.value)}),Se(()=>{l.value&&f.value&&l.value.unobserve(f.value)}),he(()=>b.params.id,g=>{g&&($(),U.value=0)}),he(u.product,g=>{g&&(u.page=1,u.fetchProducts({category:g.category_id,per_page:4},!0),U.value=0)}),(g,d)=>{const H=be("router-link");return t(),s(X,null,[N(Ve,{isLoading:T(u).isLoading},null,8,["isLoading"]),e("div",Xa,[e("div",Ka,[T(u).isLoading?(t(),s("div",Qa)):T(u).product?(t(),s("div",Ya,[N(ye,{name:"slide-up"},{default:Q(()=>{var V,E,O,ie,ce,me,te,k,oe,L,xe,$e,Ce,Ee,ze,Pe,Re;return[e("div",Za,[e("div",er,[e("div",tr,[e("div",{class:"flex w-full h-full slider-container",style:we({transform:`translateX(-${U.value*100}%)`})},[(t(!0),s(X,null,ee(T(u).product.photos||[T(u).product.photo_url||"https://via.placeholder.com/300"],(Le,Ue)=>(t(),s("img",{key:Ue,src:Le,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${T(u).product.nom} - ${Ue+1}`},null,8,sr))),128))],4),T(u).product.photos&&T(u).product.photos.length>1?(t(),s("button",{key:0,onClick:q,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image pr√©c√©dente"},d[5]||(d[5]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):P("",!0),T(u).product.photos&&T(u).product.photos.length>1?(t(),s("button",{key:1,onClick:S,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},d[6]||(d[6]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):P("",!0),T(u).product.photos&&T(u).product.photos.length>1?(t(),s("div",or,[(t(!0),s(X,null,ee(T(u).product.photos,(Le,Ue)=>(t(),s("span",{key:Ue,class:K(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Ue===U.value}])},null,2))),128))])):P("",!0)]),T(u).product.boosted?(t(),s("span",ar," Boost√© ")):P("",!0),T(u).product.collaboratif?(t(),s("span",rr," Collaboratif ")):P("",!0),(V=T(p).user)!=null&&V.premium?(t(),s("span",lr," Premium ")):P("",!0)]),e("div",nr,[e("h1",ir,v(T(u).product.nom),1),e("p",ur,v(T(u).product.description||"Aucune description disponible"),1),e("p",dr,v(T(u).product.prix)+" XAF ",1),e("div",cr,[e("p",null,[d[7]||(d[7]=e("strong",null,"Cat√©gorie :",-1)),y(" "+v(((E=T(u).product.category)==null?void 0:E.nom)||"Non sp√©cifi√©e"),1)]),e("p",null,[d[8]||(d[8]=e("strong",null,"Quantit√© :",-1)),y(" "+v(T(u).product.quantite),1)]),e("p",null,[d[9]||(d[9]=e("strong",null,"Ville :",-1)),y(" "+v(T(u).product.ville||"Non sp√©cifi√©e"),1)]),e("p",null,[d[10]||(d[10]=e("strong",null,"Ajout√© le :",-1)),y(" "+v(new Date(T(u).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",pr,[e("div",vr,[d[11]||(d[11]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,v(i((O=T(u).product.counts)==null?void 0:O.views_count))+" vues",1)]),e("div",mr,[e("i",{class:K(["fas fa-bookmark text-[10px]",{"text-[var(--espace-or)]":T(u).product.is_favorited_by}])},null,2),e("span",null,v(i((ie=T(u).product.counts)==null?void 0:ie.favorites_count))+" favoris",1)])])]),e("button",{onClick:G,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":T(u).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:K(["fas fa-bookmark mr-2 text-sm",{"text-[var(--espace-or)]":T(u).product.is_favorited_by}])},null,2),y(" "+v(T(u).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,fr),e("div",gr,[d[16]||(d[16]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," √Ä propos du commer√ßant ",-1)),e("p",xr,[e("strong",null,v((ce=T(u).product.commercant)==null?void 0:ce.nom),1),(me=T(u).product.commercant)!=null&&me.verified?(t(),s("span",br,d[12]||(d[12]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):P("",!0)]),e("p",hr,v(((te=T(u).product.commercant)==null?void 0:te.description)||"Aucune description disponible"),1),e("p",yr,[d[13]||(d[13]=e("strong",null,"Ville :",-1)),y(" "+v(((k=T(u).product.commercant)==null?void 0:k.ville)||"Nonsp√©cifi√©e"),1)]),e("p",_r,[d[14]||(d[14]=e("strong",null,"Note :",-1)),y(" "+v(Number((oe=T(u).product.commercant)==null?void 0:oe.rating).toFixed(1)||"Non √©valu√©")+" / 5 ",1)]),N(H,{to:`/commercants/${T(u).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commer√ßant"},{default:Q(()=>d[15]||(d[15]=[y(" Voir le profil du commer√ßant ")])),_:1,__:[15]},8,["to"])]),e("div",wr,[T(u).product.collaboratif&&((xe=(L=T(p).user)==null?void 0:L.commercant)==null?void 0:xe.id)!==T(u).product.commercant_id?(t(),s("button",{key:0,onClick:w,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},d[17]||(d[17]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),y(" Collaborer ")]))):P("",!0),((Ce=($e=T(p).user)==null?void 0:$e.commercant)==null?void 0:Ce.id)===T(u).product.commercant_id?(t(),s("button",{key:1,onClick:M,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},d[18]||(d[18]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),y(" Modifier le produit ")]))):P("",!0),((ze=(Ee=T(p).user)==null?void 0:Ee.commercant)==null?void 0:ze.id)===T(u).product.commercant_id?(t(),s("button",{key:2,onClick:C,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!T(u).product.boosted,"aria-label":T(u).product.boosted?"Boost d√©j√† actif":"Personnaliser le boost"},d[19]||(d[19]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,kr)):P("",!0),((Re=(Pe=T(p).user)==null?void 0:Pe.commercant)==null?void 0:Re.id)!==T(u).product.commercant_id?(t(),s("button",{key:3,onClick:d[0]||(d[0]=Le=>J(T(u).product.id,T(u).product.nom,T(u).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},d[20]||(d[20]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),y(" Envoyer un message ")]))):P("",!0)])])])]}),_:1})])):(t(),s("div",$r," Produit non trouv√©. ")),N(ye,{name:"fade"},{default:Q(()=>[n.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ue(D,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",Cr,[e("h2",Ar," Collaborer sur "+v(T(u).product.nom),1),e("p",Pr," Proposez un prix de revente (minimum : "+v(T(u).product.prix+(T(u).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:ue(F,["prevent"]),class:"space-y-3"},[e("div",null,[d[21]||(d[21]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),R(e("input",{id:"prix_revente","onUpdate:modelValue":d[1]||(d[1]=V=>c.value=V),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${T(u).product.nom}`,required:""},null,8,jr),[[Y,c.value,void 0,{number:!0}]]),c.value?(t(),s("p",Sr," Marge potentielle : "+v(c.value-T(u).product.prix)+" XAF ",1)):P("",!0)]),e("div",{class:"flex gap-3"},[d[22]||(d[22]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:D,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):P("",!0)]),_:1}),N(ye,{name:"fade"},{default:Q(()=>[A.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:d[4]||(d[4]=ue(V=>A.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",Mr,[d[27]||(d[27]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:ue(W,["prevent"]),class:"space-y-6"},[e("div",null,[d[23]||(d[23]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),R(e("input",{type:"range","onUpdate:modelValue":d[2]||(d[2]=V=>_.value=V),min:"0",max:"10000",step:"500",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:se},null,544),[[Y,_.value,void 0,{number:!0}]]),e("p",Vr,v(_.value)+" vues ",1)]),e("p",Er,[d[24]||(d[24]=y("Co√ªt estim√© : ")),e("strong",zr,v(j.value),1),d[25]||(d[25]=y(" Jetons"))]),e("div",Ur,[d[26]||(d[26]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:d[3]||(d[3]=V=>A.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):P("",!0)]),_:1})]),T(u).products?(t(),s("div",Ir,[d[28]||(d[28]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),N(qe,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:Q(()=>[(t(!0),s(X,null,ee(T(u).products,V=>(t(),pe(Te,{key:V.id,produit:V,onMouseover:E=>ne(V.id),onTouchstart:E=>Z(V.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:f,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":T(u).isLoading},[T(u).hasMore?P("",!0):(t(),s("p",Tr," Aucun produit suppl√©mentaire "))],8,Fr)])):P("",!0)])],64)}}}),Ac=re(Lr,[["__scopeId","data-v-e258f430"]]),qr={class:"relative bg-green-500"},Or={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},Rr={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},Nr={class:"flex items-center gap-1 sm:gap-3"},Dr={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},Wr=["aria-label"],Jr={class:"flex items-center gap-2"},Br=["src"],Hr={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},Gr={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},Xr={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Kr={class:"flex justify-around items-center py-2"},Qr=["aria-label"],Yr=ae({__name:"AppHeader",setup(I){var F;const u=fe(),b=Ie(),x=le(),p=u.user;je();const r=m(!1),o=m(!1),n=m(!1),c=m(""),l=Me(),f=m(!1),A=m(null),_=m(!1),j=ve(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...u.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...u.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:b.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),h=async()=>{var D,M;if(u.user)try{const W=await B.get("/user/badges");b.saveCollaborationsToLocalStorage(W.data.collaborations_pending.map(C=>({produit_id:C.produit_id,prix_revente:C.prix_revente,status:C.status,created_at:C.created_at})))}catch(W){((M=(D=W.response)==null?void 0:D.data)==null?void 0:M.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des badges:",W)}};he(()=>u.user,D=>{D&&(h(),b.initializeState())},{immediate:!0}),he(()=>b.collaborationsPending,()=>{b.collaborationsPending>0&&(o.value=!0,setTimeout(()=>o.value=!1,300))});const a=async()=>{if(c.value.trim())try{await l.fetchProducts({search:c.value.trim()},!0),c.value="",f.value=!1}catch(D){console.error("Erreur lors de la recherche:",D)}},i=D=>{if(_.value){_.value=!1;return}A.value&&!A.value.contains(D.target)&&(f.value=!1)},$=async()=>{f.value=!f.value,f.value&&(_.value=!0,await Ge())},w=()=>{x.push("/messages")};return(F=u.user)!=null&&F.id&&window.Echo.channel(`chat.${u.user.id}`).listen("MessageSent",D=>{var M;((M=u.user)==null?void 0:M.id)===D.receiver_id&&b.saveUnreadMessagesToLocalStorage(D.unread_messages)}),ge(()=>{u.user&&(h(),b.initializeState()),document.addEventListener("click",i)}),Se(()=>{document.removeEventListener("click",i)}),(D,M)=>{const W=be("RouterLink");return t(),s("div",qr,[e("header",Or,[e("div",Rr,[e("div",Nr,[N(W,{to:"/","aria-label":"Retour √† l'accueil"},{default:Q(()=>M[2]||(M[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Xe,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),M[3]||(M[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",Dr,[(t(!0),s(X,null,ee(j.value,C=>(t(),pe(W,{key:C.to,to:C.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:K(["fas",C.icon])},null,2),y(" "+v(C.label)+" ",1),C.badge>0?(t(),s("span",{key:0,class:K(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":C.to==="/panier"&&r.value||C.to==="/collaborations"&&o.value||C.to==="/commandes"&&n.value}]),"aria-label":C.to==="/panier"?"Nombre d'articles dans le panier":C.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},v(C.badge),11,Wr)):P("",!0)]),_:2},1032,["to"]))),128))]),N(Ke),e("div",Jr,[e("button",{onClick:$,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},M[4]||(M[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:w,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},M[5]||(M[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(X,null,ee(j.value.filter(C=>T(u).user?C.to==="/profil":["/login","/register"].includes(C.to)),C=>(t(),pe(W,{key:C.to,to:C.to,class:"relative flex items-center justify-center","aria-label":C.label},{default:Q(()=>{var se;return[(se=T(p))!=null&&se.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${T(p).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Br)):(t(),s("div",Hr,[e("i",{class:K([`fas ${C.icon}`,"text-2xl text-gray-100"])},null,2)])),C.badge>0&&C.to==="/collaborations"?(t(),s("span",{key:2,class:K(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":C.to==="/collaborations"&&o.value}]),"aria-label":"Collaborations en attente"},v(C.badge),3)):P("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),f.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:A,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",Gr,[R(e("input",{"onUpdate:modelValue":M[0]||(M[0]=C=>c.value=C),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:He(a,["enter"])},null,544),[[Y,c.value]]),e("button",{onClick:a,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},M[6]||(M[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:M[1]||(M[1]=C=>f.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},M[7]||(M[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):P("",!0)]),N(ye,{name:"slide-up"},{default:Q(()=>[e("nav",Xr,[e("div",Kr,[(t(!0),s(X,null,ee(j.value,C=>(t(),pe(W,{key:C.to,to:C.to,"aria-label":C.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:K(["fas text-lg",C.icon])},null,2),C.badge>0?(t(),s("span",{key:0,class:K(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":C.to==="/panier"&&r.value||C.to==="/collaborations"&&o.value||C.to==="/commandes"&&n.value}]),"aria-label":C.to==="/panier"?"Nombre d'articles dans le panier":C.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},v(C.badge),11,Qr)):P("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),Qe=re(Yr,[["__scopeId","data-v-c232437a"]]),Zr={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},el={class:"container mx-auto px-4 sm:px-6 py-6"},tl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},sl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ol={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},al={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},rl={key:2,class:"text-sm text-[var(--espace-gris)] italic"},ll={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},nl=["value"],il={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},ul=["value"],dl={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},cl=["value"],pl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},vl={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},ml={key:1,class:"text-base text-[var(--espace-gris)] italic"},fl={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},gl=["onClick"],xl=ae({__name:"CommercantDashboard",setup(I){const u=le(),b=de(),x=m([]),p=m([]),r=m(null),o=m(!1),n=m({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),c=m({nom:"",description:"",ville:""}),l=m(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),f=async()=>{o.value=!0;try{const[h,a,i]=await Promise.all([B.get("/commercant/produits"),B.get("/categories"),B.get("/commercant/profil")]);o.value=!1,x.value=h.data.produits.map($=>{var w;return{...$,commercant_id:((w=r.value)==null?void 0:w.id)||""}}),p.value=a.data.categories,r.value=i.data.commercant,c.value={nom:r.value.nom,description:r.value.description||"",ville:r.value.ville||""}}catch{b.error("Erreur lors du chargement des donn√©es."),o.value=!1}},A=async()=>{try{const h=await B.post("/commercant/produits",n.value);b.success("Produit ajout√© avec succ√®s."),f(),n.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{b.error("Erreur lors de l‚Äôajout du produit.")}},_=async h=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await B.delete(`/commercant/produits/${h}`),b.success("Produit supprim√© avec succ√®s."),f()}catch{b.error("Erreur lors de la suppression du produit.")}},j=async()=>{var h,a;try{await B.put("/commercant/profil",c.value),b.success("Profil mis √† jour avec succ√®s."),f()}catch(i){((a=(h=i.response)==null?void 0:h.data)==null?void 0:a.message)=="Unauthenticated."&&u.push("login"),b.error("Erreur lors de la mise √† jour du profil.")}};return ge(()=>{f()}),(h,a)=>(t(),s("div",Zr,[N(Qe),e("div",el,[a[26]||(a[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),y(" Espace Commer√ßant ")],-1)),e("div",tl,[a[14]||(a[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",sl,[r.value?(t(),s("p",ol,[a[12]||(a[12]=e("span",{class:"font-medium"},"Revenus :",-1)),y(" "+v(r.value.revenus)+" FCFA ",1)])):P("",!0),r.value?(t(),s("p",al,[a[13]||(a[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),y(" "+v(r.value.produits_vendus),1)])):(t(),s("p",rl,"Chargement..."))])]),e("div",ll,[a[17]||(a[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil Commer√ßant",-1)),e("form",{onSubmit:ue(j,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[R(e("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>c.value.nom=i),type:"text",placeholder:"Nom du commer√ßant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Y,c.value.nom]]),R(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=i=>c.value.description=i),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Y,c.value.description]]),R(e("select",{"onUpdate:modelValue":a[2]||(a[2]=i=>c.value.ville=i),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[a[15]||(a[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(X,null,ee(l.value,i=>(t(),s("option",{key:i,value:i},v(i),9,nl))),128))],512),[[ke,c.value.ville]]),a[16]||(a[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",il,[a[22]||(a[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:ue(A,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[R(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>n.value.nom=i),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Y,n.value.nom]]),R(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=i=>n.value.description=i),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Y,n.value.description]]),R(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>n.value.prix=i),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Y,n.value.prix]]),R(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>n.value.photo_url=i),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Y,n.value.photo_url]]),R(e("select",{"onUpdate:modelValue":a[7]||(a[7]=i=>n.value.category_id=i),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[a[18]||(a[18]=e("option",{value:""},"Cat√©gorie",-1)),(t(!0),s(X,null,ee(p.value,i=>(t(),s("option",{key:i.id,value:i.id},v(i.nom),9,ul))),128))],512),[[ke,n.value.category_id]]),e("label",dl,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=i=>n.value.collaboratif=i),type:"checkbox"},null,512),[[Je,n.value.collaboratif]]),a[19]||(a[19]=y(" Collaboratif "))]),R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=i=>n.value.marge_min=i),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Y,n.value.marge_min]]),R(e("input",{"onUpdate:modelValue":a[10]||(a[10]=i=>n.value.stock=i),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Y,n.value.stock]]),R(e("select",{"onUpdate:modelValue":a[11]||(a[11]=i=>n.value.ville=i),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[a[20]||(a[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(X,null,ee(l.value,i=>(t(),s("option",{key:i,value:i},v(i),9,cl))),128))],512),[[ke,n.value.ville]]),a[21]||(a[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",pl,[a[25]||(a[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),o.value?(t(),s("div",vl,a[23]||(a[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):x.value.length===0?(t(),s("div",ml," Aucun produit disponible. ")):(t(),s("div",fl,[(t(!0),s(X,null,ee(x.value,i=>(t(),s("div",{key:i.id,class:"relative"},[N(Te,{produit:i},null,8,["produit"]),e("button",{onClick:$=>_(i.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},a[24]||(a[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,gl)]))),128))]))])])]))}}),Pc=re(xl,[["__scopeId","data-v-62cb30a8"]]),bl={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},hl={class:"container mx-auto max-w-4xl"},yl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},_l={key:0,class:"ml-2"},wl={class:"w-full bg-gray-200 rounded-full h-4"},kl={class:"text-[var(--espace-gris)] text-xs mt-2"},$l={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},Cl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Al={key:0,class:"mb-4"},Pl={class:"text-sm text-[var(--espace-gris)]"},jl={class:"font-bold text-[var(--espace-or)]"},Sl={class:"text-sm text-[var(--espace-gris)] truncate"},Ml=["href"],Vl={key:1,class:"mb-4"},El=["placeholder"],zl={class:"flex flex-col sm:flex-row gap-2"},Ul=["disabled"],Il={key:0},Fl={key:1},Tl=["disabled"],Ll={key:0},ql={key:1},Ol={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},Rl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Nl={class:"mb-4"},Dl={key:0,class:"overflow-x-auto"},Wl={class:"w-full text-sm text-left text-[var(--espace-gris)]"},Jl=["onClick"],Bl={class:"px-4 py-2"},Hl={class:"px-4 py-2"},Gl={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Xl={class:"bg-white rounded-lg shadow-md p-6 text-center"},Kl={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},Ql={class:"text-[var(--espace-gris)] mt-2"},Yl=ae({__name:"Parrainage",setup(I){const u=fe(),b=le(),x=de(),p=()=>{const Z=window.location.hostname;return Z==="localhost"||Z==="127.0.0.1"?"http://localhost:4000/register":"https://api.espacecameroun.com/register"},r=m(""),o=m(""),n=m([]),c=m(0),l=m(""),f=m(""),A=m(!1),_=m(!1),j=m({}),h=m(null),a=m(0),i=m(0),$=m(0),w=m("all"),F=ve(()=>{var Z;return((Z=j.value)==null?void 0:Z.couleur)||"#6b7280"}),D=ve(()=>w.value==="commercants"?n.value.filter(Z=>Z.est_commercant):w.value==="nonCommercants"?n.value.filter(Z=>!Z.est_commercant):n.value),M=async()=>{var Z,z;if(!u.user){x.error("Veuillez vous connecter pour acc√©der √† cette page"),b.push("/login");return}try{const J=(await B.get("/parrainages/dashboard")).data;r.value=J.code||"",o.value=r.value?`${p()}/${r.value}`:"",n.value=J.parrainages||[],c.value=J.total_gains||0,j.value=J.niveau_actuel,h.value=J.niveau_suivant,a.value=J.progression,i.value=J.total_parrainages||0,$.value=J.total_parrainages_commercants||0}catch(G){((z=(Z=G.response)==null?void 0:Z.data)==null?void 0:z.message)=="Unauthenticated."&&b.push("login"),x.error("Erreur lors de la r√©cup√©ration des donn√©es de parrainage"),console.error(G)}},W=async()=>{var Z,z;if(!u.user){x.error("Veuillez vous connecter");return}A.value=!0;try{const G=await B.post("/parrainages/generateCode");l.value=G.data.suggested_code,f.value=l.value,x.success("Nouveau code sugg√©r√© avec succ√®s !"),r.value&&(o.value=`${p()}/${r.value}`)}catch(G){((z=(Z=G.response)==null?void 0:Z.data)==null?void 0:z.message)=="Unauthenticated."&&b.push("login"),x.error("Erreur lors de la g√©n√©ration du code"),console.error(G)}finally{A.value=!1}},C=async()=>{var Z,z,G,J;if(!u.user){x.error("Veuillez vous connecter");return}if(!f.value.trim()){x.error("Veuillez entrer un code valide");return}_.value=!0;try{const U=await B.post("/parrainages/createCode",{code:f.value.trim()});r.value=U.data.code,o.value=U.data.link||`${p()}/${U.data.code}`,x.success(U.data.message||"Code cr√©√© avec succ√®s !"),await M()}catch(U){((z=(Z=U.response)==null?void 0:Z.data)==null?void 0:z.message)=="Unauthenticated."&&b.push("login"),x.error(((J=(G=U.response)==null?void 0:G.data)==null?void 0:J.message)||"Erreur lors de la cr√©ation du code"),console.error(U)}finally{_.value=!1}},se=Z=>{if(!o.value){x.error("Aucun lien disponible pour le partage");return}let z="";const G=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${o.value}`);switch(Z){case"whatsapp":z=`https://api.whatsapp.com/send?text=${G}`;break;case"facebook":z=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o.value)}`;break;default:x.error("Plateforme non prise en charge");return}window.open(z,"_blank")},ne=Z=>{Z.est_commercant?b.push(`/commercants/${Z.id}`):b.push({name:"public-profile",params:{id:Z.id}})};return ge(()=>{M()}),(Z,z)=>{var G,J,U,S,q;return t(),s("div",bl,[e("div",hl,[e("div",yl,[e("h2",{class:"text-lg font-semibold mb-4",style:we({color:F.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:we({color:F.value})},[e("div",null,[z[5]||(z[5]=y(" niveau : ")),e("strong",null,[y(v(j.value?j.value.nom:"Pas de niveau")+" "+v((G=j.value)==null?void 0:G.emoji)+" ",1),e("div",null," ("+v($.value)+"/"+v(h.value?h.value.filleuls_requis:(J=j.value)==null?void 0:J.filleuls_requis)+" commer√ßants) ",1)])]),((U=h.value)==null?void 0:U.jetons_bonus)>0?(t(),s("span",_l,"+"+v((S=h.value)==null?void 0:S.jetons_bonus)+" jetons ",1)):P("",!0)],4),e("div",wl,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:we({width:`${a.value}%`,background:`${F.value}`})},null,4)]),e("p",kl," Prochain niveau : "+v(h.value?h.value.nom:"L√©gende üèÜ")+" √† "+v(h.value?h.value.filleuls_requis:"1000+")+" commer√ßants ",1),(q=j.value.avantages)!=null&&q.length?(t(),s("p",$l," Avantages : "+v(j.value.avantages.join(", ")),1)):P("",!0),e("button",{onClick:z[0]||(z[0]=g=>T(b).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},z[6]||(z[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),y(" En savoir plus ")]))]),z[24]||(z[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des r√©compenses ! Atteignez des niveaux sup√©rieurs pour d√©bloquer des jetons et des avantages. ")],-1)),e("div",Cl,[z[15]||(z[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),r.value?(t(),s("div",Al,[e("p",Pl,[z[7]||(z[7]=y(" Code : ")),e("span",jl,v(r.value),1)]),e("p",Sl,[z[8]||(z[8]=y(" Lien : ")),e("a",{href:o.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},v(o.value),9,Ml)])])):(t(),s("div",Vl,[R(e("input",{"onUpdate:modelValue":z[1]||(z[1]=g=>f.value=g),type:"text",placeholder:l.value||"Entrez ou g√©n√©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,El),[[Y,f.value]]),e("div",zl,[e("button",{onClick:W,disabled:A.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[A.value?(t(),s("span",Il,z[9]||(z[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),y(" G√©n√©ration... ")]))):(t(),s("span",Fl,z[10]||(z[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),y(" G√©n√©rer un code ")])))],8,Ul),e("button",{onClick:C,disabled:_.value||!f.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[_.value?(t(),s("span",Ll,z[11]||(z[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),y(" Cr√©ation... ")]))):(t(),s("span",ql,z[12]||(z[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),y(" Cr√©er le code ")])))],8,Tl)])])),r.value?(t(),s("div",Ol,[e("button",{onClick:z[2]||(z[2]=g=>se("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},z[13]||(z[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),y(" Partager sur WhatsApp ")])),e("button",{onClick:z[3]||(z[3]=g=>se("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},z[14]||(z[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),y(" Partager sur Facebook ")]))])):P("",!0)]),e("div",Rl,[z[18]||(z[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs Parrain√©s",-1)),e("div",Nl,[R(e("select",{"onUpdate:modelValue":z[4]||(z[4]=g=>w.value=g),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},z[16]||(z[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"Commer√ßants",-1),e("option",{value:"nonCommercants"},"Non Commer√ßants",-1)]),512),[[ke,w.value]])]),D.value.length?(t(),s("div",Dl,[e("table",Wl,[z[17]||(z[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commer√ßant")])],-1)),e("tbody",null,[(t(!0),s(X,null,ee(D.value,g=>(t(),s("tr",{key:g.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:d=>ne(g)},v(g.filleul_nom||"Anonyme"),9,Jl),e("td",Bl,v(new Date(g.date_inscription).toLocaleDateString("fr-FR")),1),e("td",Hl,v(g.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",Gl," Aucun utilisateur parrain√© correspondant au filtre. Commencez √† inviter d√®s maintenant ! "))]),e("div",Xl,[z[22]||(z[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",Kl,v(c.value)+" jetons ",1),e("p",Ql,[z[19]||(z[19]=y(" üéâ Vous avez invit√© ")),e("strong",null,v(i.value),1),z[20]||(z[20]=y(" utilisateurs, dont ")),e("strong",null,v($.value),1),z[21]||(z[21]=y(" sont commer√ßants ! "))]),z[23]||(z[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," D√©bloquez plus de jetons et d'avantages en atteignant les niveaux sup√©rieurs. ",-1))])])])}}}),jc=re(Yl,[["__scopeId","data-v-32f330af"]]),Zl={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},en={class:"container mx-auto max-w-4xl"},tn={class:"flex border-b border-gray-300 mb-6"},sn={key:0},on={key:0,class:"grid grid-cols-1 gap-4"},an={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},rn=["onClick"],ln={class:"text-sm text-[var(--espace-gris)]"},nn={class:"text-sm text-[var(--espace-gris)]"},un=["onClick"],dn={class:"flex flex gap-2"},cn=["onClick"],pn=["onClick"],vn=["onClick"],mn={key:1,class:"text-center text-[var(--espace-gris)]"},fn={key:1},gn={key:0,class:"grid grid-cols-1 gap-4"},xn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},bn=["onClick"],hn={class:"text-sm text-[var(--espace-gris)]"},yn={class:"text-sm text-[var(--espace-gris)]"},_n=["onClick"],wn=["onClick"],kn={key:1,class:"text-center text-[var(--espace-gris)]"},$n=ae({__name:"Collaborations",setup(I){const u=A=>{localStorage.setItem("pending_collaborations",JSON.stringify(A))},b=de(),x=le(),p=m({sent_collaborations:[],received_collaborations:[]}),r=m(!0),o=m("received"),n=async()=>{var A,_,j,h;try{const a=await B.get("/collaborations");p.value=a.data;const i=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(i.length>0){const $=new Set(p.value.sent_collaborations.map(F=>F.produit_id)),w=i.filter(F=>!$.has(F.produit_id));w.length!==i.length&&u(w)}}catch(a){console.log((_=(A=a.response)==null?void 0:A.data)==null?void 0:_.message),b.error("Erreur lors du chargement des collaborations"),((h=(j=a.response)==null?void 0:j.data)==null?void 0:h.message)=="Unauthenticated."&&x.push("login")}finally{r.value=!1}},c=A=>{x.push({path:`/produits/${A}`})},l=A=>{var j,h,a;const _=((j=A.commercant)==null?void 0:j.id)||((a=(h=A.produit)==null?void 0:h.commercant)==null?void 0:a.id);_?x.push({path:`/commercants/${_}`}):b.error("Profil du commer√ßant non disponible")},f=async(A,_)=>{var j;try{const h=await B.post(`/collaborations/${A}`,{statut:_});b.success(h.data.message),await n()}catch(h){b.error(`Erreur lors de la mise √† jour de la collaboration${(j=h.response)==null?void 0:j.data.message}`)}};return ge(()=>{r.value=!0,n()}),(A,_)=>{var j,h,a,i;return t(),s(X,null,[N(Ve,{isLoading:r.value},null,8,["isLoading"]),e("div",Zl,[e("div",en,[_[4]||(_[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),y(" Mes Collaborations ")],-1)),e("div",tn,[e("button",{class:K(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="received","text-[var(--espace-gris)]":o.value!=="received"}]),onClick:_[0]||(_[0]=$=>o.value="received")}," Collaborations re√ßues ",2),e("button",{class:K(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="sent","text-[var(--espace-gris)]":o.value!=="sent"}]),onClick:_[1]||(_[1]=$=>o.value="sent")}," Collaborations envoy√©es ",2)]),o.value==="received"?(t(),s("div",sn,[(h=(j=p.value)==null?void 0:j.received_collaborations)!=null&&h.length?(t(),s("div",on,[(t(!0),s(X,null,ee(p.value.received_collaborations,$=>(t(),s("div",{key:$.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",an,[e("div",null,[e("h2",{onClick:w=>c($.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},v($.produit.nom),9,rn),e("p",ln," Prix de revente propos√© : "+v($.prix_revente)+" FCFA ",1),e("p",nn,[_[2]||(_[2]=y(" Statut : ")),e("span",{class:K({"text-green-600":$.statut==="valider","text-yellow-600":$.statut==="en_attente","text-red-600":$.statut==="refuser"})},v($.statut==="en_attente"?"En attente":$.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:w=>l($),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,un)]),e("div",dn,[$.statut==="en_attente"?(t(),s("button",{key:0,onClick:w=>f($.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,cn)):P("",!0),$.statut==="en_attente"?(t(),s("button",{key:1,onClick:w=>f($.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,pn)):P("",!0),e("button",{onClick:w=>c($.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,vn)])])]))),128))])):(t(),s("p",mn," Aucune collaboration re√ßue pour le moment. "))])):P("",!0),o.value==="sent"?(t(),s("div",fn,[(i=(a=p.value)==null?void 0:a.sent_collaborations)!=null&&i.length?(t(),s("div",gn,[(t(!0),s(X,null,ee(p.value.sent_collaborations,$=>(t(),s("div",{key:$.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",xn,[e("div",null,[e("h2",{onClick:w=>c($.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},v($.produit.nom),9,bn),e("p",hn," Prix de revente propos√© : "+v($.prix_revente)+" FCFA ",1),e("p",yn,[_[3]||(_[3]=y(" Statut : ")),e("span",{class:K({"text-green-600":$.statut==="valider","text-yellow-600":$.statut==="en_attente","text-red-600":$.statut==="refuser"})},v($.statut==="en_attente"?"En attente":$.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:w=>l($),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,_n)]),e("button",{onClick:w=>c($.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,wn)])]))),128))])):(t(),s("p",kn," Aucune collaboration envoy√©e pour le moment. "))])):P("",!0)])])],64)}}}),Sc=re($n,[["__scopeId","data-v-cac76a42"]]),Cn={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},An={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},Pn={key:0,class:"mb-8"},jn={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Sn=["disabled"],Mn={key:0,class:"fas fa-spinner fa-spin mr-2"},Vn={key:1,class:"space-y-4 mb-6"},En={class:"flex items-center gap-3"},zn={class:"text-[var(--espace-vert)] font-medium"},Un={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},In={class:"flex items-center gap-2"},Fn=["onClick"],Tn=["onClick"],Ln={key:2,class:"text-center text-gray-500"},qn=ae({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(I,{emit:u}){const b=le(),x=u,p=de(),r=m(!1),o=m(!1),n=m({id:null,phone_number:"",payment_service:""}),c=()=>{o.value=!0,n.value={id:null,phone_number:"",payment_service:""}},l=j=>{o.value=!0,n.value={id:j.id,phone_number:j.phone_number,payment_service:j.payment_service}},f=()=>{o.value=!1,n.value={id:null,phone_number:"",payment_service:""}},A=async()=>{var h,a,i,$;if(!/^6[0-9]{8}$/.test(n.value.phone_number)){p.error("Le num√©ro de t√©l√©phone doit commencer par 6 et contenir 9 chiffres.");return}r.value=!0;try{n.value.id?(await B.put(`/wallets/${n.value.id}`,n.value),p.success("Portefeuille mis √† jour avec succ√®s !")):(await B.post("/wallets",n.value),p.success("Portefeuille cr√©√© avec succ√®s !")),x("refresh-wallets"),f()}catch(w){((a=(h=w.response)==null?void 0:h.data)==null?void 0:a.message)=="Unauthenticated."&&b.push("login"),p.error((($=(i=w.response)==null?void 0:i.data)==null?void 0:$.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",w)}finally{r.value=!1}},_=async j=>{var h,a,i,$;if(confirm("√ätes-vous s√ªr de vouloir supprimer ce portefeuille ?")){r.value=!0;try{await B.delete(`/wallets/${j}`),p.success("Portefeuille supprim√© avec succ√®s !"),x("refresh-wallets")}catch(w){((a=(h=w.response)==null?void 0:h.data)==null?void 0:a.message)=="Unauthenticated."&&b.push("login"),p.error((($=(i=w.response)==null?void 0:i.data)==null?void 0:$.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",w)}finally{r.value=!1}}};return(j,h)=>j.show?(t(),s("div",Cn,[e("div",An,[e("button",{onClick:h[0]||(h[0]=a=>j.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),h[9]||(h[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ G√©rer Mes Portefeuilles",-1)),o.value?(t(),s("div",Pn,[e("form",{onSubmit:ue(A,["prevent"]),class:K(["space-y-5",{"bg-green-50 p-4 rounded-lg":!n.value.id,"bg-yellow-50 p-4 rounded-lg":n.value.id}])},[e("h3",jn,v(n.value.id?"Modifier le Portefeuille":"Cr√©er un Nouveau Portefeuille"),1),e("div",null,[h[3]||(h[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),R(e("input",{"onUpdate:modelValue":h[1]||(h[1]=a=>n.value.phone_number=a),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Y,n.value.phone_number]])]),e("div",null,[h[5]||(h[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),R(e("select",{"onUpdate:modelValue":h[2]||(h[2]=a=>n.value.payment_service=a),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},h[4]||(h[4]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[ke,n.value.payment_service]])]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[r.value?(t(),s("i",Mn)):P("",!0),y(" "+v(n.value.id?"Mettre √† jour":"Cr√©er"),1)],8,Sn),e("button",{onClick:f,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):P("",!0),j.wallets&&j.wallets.length>0?(t(),s("div",Vn,[(t(!0),s(X,null,ee(j.wallets,a=>(t(),s("div",{key:a.id||a.phone_number,class:K(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":a.payment_service==="ORANGE","bg-purple-50":a.payment_service==="MTN"}])},[e("div",En,[e("span",zn,v(a.phone_number)+" ("+v(a.payment_service)+") ",1),a.is_active!==!1?(t(),s("span",Un,"Actif")):P("",!0)]),e("div",In,[e("button",{onClick:i=>l(a),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},h[6]||(h[6]=[e("i",{class:"fas fa-edit"},null,-1),y(" Modifier ")]),8,Fn),e("button",{onClick:i=>_(a.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},h[7]||(h[7]=[e("i",{class:"fas fa-trash"},null,-1),y(" Supprimer ")]),8,Tn)])],2))),128))])):(t(),s("p",Ln,"Aucun portefeuille cr√©√©.")),o.value?P("",!0):(t(),s("button",{key:3,onClick:c,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},h[8]||(h[8]=[e("i",{class:"fas fa-plus"},null,-1),y(" Ajouter un portefeuille ")])))])])):P("",!0)}}),On=re(qn,[["__scopeId","data-v-04e487e6"]]),Rn={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},Nn={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},Dn={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},Wn={key:0,class:"space-y-4"},Jn={class:"flex flex-col"},Bn={class:"text-[var(--espace-vert)] font-medium"},Hn={class:"text-xs text-gray-500"},Gn={class:"text-gray-700 text-sm sm:text-base"},Xn={class:"flex items-center gap-2"},Kn=["onClick"],Qn=["onClick"],Yn={key:1,class:"text-center text-gray-500"},Zn={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},ei={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},ti=["value"],si=["disabled"],oi={key:0,class:"fas fa-spinner fa-spin mr-2"},ai={key:1,class:"border-t pt-4 mt-2"},ri=ae({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(I,{emit:u}){const b=I,x=u,p=de(),r=m(!1),o=m([...b.offers]);he(()=>b.offers,h=>{o.value=[...h]},{deep:!0});const n=m(!1),c=m({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),l=()=>{n.value=!0,c.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},f=h=>{n.value=!0,c.value={id:h.id,nombre_jetons:h.nombre_jetons,prix_unitaire:h.prix_unitaire,description:h.description||"",wallet_id:h.wallet_id}},A=()=>{n.value=!1,c.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},_=async()=>{var h,a;r.value=!0;try{if(c.value.id){const i=await B.put(`/jeton_market/updateOffer/${c.value.id}`,c.value);p.success("Offre mise √† jour avec succ√®s !");const $=o.value.findIndex(w=>w.id===c.value.id);$!==-1&&(o.value[$]={...o.value[$],...c.value})}else{const i=await B.post("/jeton_market/offer",c.value);p.success("Offre cr√©√©e avec succ√®s !"),o.value.push(i.data)}x("refresh-offers"),A()}catch(i){p.error(((a=(h=i.response)==null?void 0:h.data)==null?void 0:a.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",i)}finally{r.value=!1}},j=async h=>{var a,i;if(confirm("√ätes-vous s√ªr de vouloir supprimer cette offre ?")){r.value=!0;try{await B.delete(`/jeton_market/deleteOffer/${h}`),p.success("Offre supprim√©e avec succ√®s !"),o.value=o.value.filter($=>$.id!==h),x("refresh-offers")}catch($){p.error(((i=(a=$.response)==null?void 0:a.data)==null?void 0:i.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",$)}finally{r.value=!1}}};return(h,a)=>h.show?(t(),s("div",Rn,[e("div",Nn,[e("button",{onClick:a[0]||(a[0]=i=>h.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),a[12]||(a[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìã Mes Offres",-1)),e("div",Dn,[o.value.length>0?(t(),s("div",Wn,[(t(!0),s(X,null,ee(o.value,i=>{var $,w;return t(),s("div",{key:i.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",Jn,[e("span",Bn,v(i.nombre_jetons)+" jetons ‚Ä¢ "+v(i.total_prix)+" FCFA ",1),e("span",Hn,"PU : "+v(i.prix_unitaire)+" FCFA",1),e("p",Gn,[a[4]||(a[4]=e("strong",null,"üí≥ ",-1)),y(" "+v(($=i.wallet)==null?void 0:$.phone_number)+" ("+v((w=i.wallet)==null?void 0:w.payment_service)+") ",1)])]),e("div",Xn,[e("button",{onClick:F=>f(i),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},a[5]||(a[5]=[e("i",{class:"fas fa-edit"},null,-1),y(" Modifier ")]),8,Kn),e("button",{onClick:F=>j(i.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},a[6]||(a[6]=[e("i",{class:"fas fa-trash"},null,-1),y(" Supprimer ")]),8,Qn)])])}),128))])):(t(),s("p",Yn,"Aucune offre cr√©√©e."))]),n.value?(t(),s("div",Zn,[e("form",{onSubmit:ue(_,["prevent"]),class:K(["space-y-4",{"bg-green-50 p-4 rounded-lg":!c.value.id,"bg-yellow-50 p-4 rounded-lg":c.value.id}])},[e("h3",ei,v(c.value.id?"Modifier l'offre":"Cr√©er une nouvelle offre"),1),e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),R(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>c.value.nombre_jetons=i),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Y,c.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[a[8]||(a[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>c.value.prix_unitaire=i),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Y,c.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=i=>c.value.wallet_id=i),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[a[9]||(a[9]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(X,null,ee(h.wallets,i=>(t(),s("option",{key:i.id,value:i.id},v(i.phone_number)+" ("+v(i.payment_service)+") ",9,ti))),128))],512),[[ke,c.value.wallet_id]])]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[r.value?(t(),s("i",oi)):P("",!0),y(" "+v(c.value.id?"Mettre √† jour":"Cr√©er"),1)],8,si),e("button",{onClick:A,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",ai,[e("button",{onClick:l,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},a[11]||(a[11]=[e("i",{class:"fas fa-plus"},null,-1),y(" Nouvelle offre ")]))]))])])):P("",!0)}}),li=re(ri,[["__scopeId","data-v-03e4f804"]]),ni={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},ii={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},ui={class:"flex items-center justify-between mb-4"},di={class:"flex items-center gap-3"},ci=["src"],pi={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},vi={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},mi={class:"text-gray-700 text-sm sm:text-base"},fi={class:"text-gray-700 text-sm sm:text-base"},gi={class:"text-xs text-gray-500 mt-3"},xi=["onClick"],bi={key:0,class:"col-span-full text-center py-4"},hi={key:1,class:"text-center text-gray-600 py-24"},yi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},_i={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},wi=["value"],ki={class:"text-sm text-gray-500"},$i={class:"font-bold"},Ci={class:"font-bold"},Ai=["disabled"],Pi={key:0,class:"fas fa-spinner fa-spin mr-2"},ji={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},Si={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},Mi={class:"space-y-4"},Vi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Ei={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},zi=["value"],Ui={class:"text-sm text-[var(--espace-gris)]"},Ii={class:"font-bold"},Fi=["disabled"],Ti={key:0,class:"fas fa-spinner fa-spin mr-2"},Li={key:1,class:""},qi={key:2,class:""},Oi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Ri={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Ni=["disabled"],Di={key:0,class:"fas fa-spinner fa-spin mr-2"},Wi={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},Ji=ae({__name:"JetonMarket",setup(I){const u=()=>{const te=window.location.hostname;return te==="localhost"||te==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},b=ve(()=>u()),x=le(),p=m([]),r=m([]),o=m({quantityMin:""}),n=m(!1),c=m(!1),l=m({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),f=m(!1),A=m(1),_=m(1),j=m(!1),h=m(!0),a=m(!1),i=m(!1),$=m({walletId:""}),w=m(null),F=m(0),D=m([]),M=m(!1),W=m({id:0,phone_number:"",payment_service:""}),C=m(!1),se=m(!1),ne=de(),Z=()=>{n.value=!1,c.value=!1,i.value=!1,M.value=!1,C.value=!1,se.value=!1},z=async()=>{try{const te=await B.get("/wallets");D.value=te.data.data||[]}catch(te){console.error("Erreur lors du chargement des portefeuilles:",te),D.value=[]}},G=async()=>{var te,k;try{const oe=await B.get("/jeton_market/my-offers");r.value=oe.data.data||[]}catch(oe){((k=(te=oe.response)==null?void 0:te.data)==null?void 0:k.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des offres de l'utilisateur:",oe),r.value=[]}},J=async()=>{await z(),Z(),D.value.length===0?M.value=!0:n.value=!0},U=async()=>{var te,k,oe,L;f.value=!0;try{Z();const xe=await B.post("/wallets",W.value);ne.success(xe.data.message||"Portefeuille cr√©√© avec succ√®s !"),M.value=!1,await z(),n.value=!0}catch(xe){((k=(te=xe.response)==null?void 0:te.data)==null?void 0:k.message)=="Unauthenticated."&&x.push("login"),ne.error(((L=(oe=xe.response)==null?void 0:oe.data)==null?void 0:L.message)||"Erreur lors de la cr√©ation du portefeuille"),console.error("Erreur:",xe)}finally{f.value=!1,W.value={id:0,phone_number:"",payment_service:""}}},S=()=>{c.value=!1,A.value=1,p.value=[],V()},q=async()=>{a.value=!0,A.value=1,p.value=[],await V(),a.value=!1},g=ve(()=>p.value.filter(te=>!o.value.quantityMin||te.nombre_jetons>=parseInt(o.value.quantityMin,10))),d=ve(()=>l.value.nombre_jetons*l.value.prix_unitaire),H=ve(()=>d.value*.1),V=async()=>{var te,k;if(!(j.value||A.value>_.value)){j.value=!0;try{const oe={page:A.value,quantity_min:o.value.quantityMin||void 0},L=await B.get("/jeton_market/offers",{params:oe});p.value=[...p.value,...L.data.data],_.value=L.data.last_page,A.value+=1}catch(oe){((k=(te=oe.response)==null?void 0:te.data)==null?void 0:k.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du chargement des offres:",oe)}finally{j.value=!1,h.value=!1}}},E=()=>{const te=document.querySelector(".grid");if(te){const{scrollTop:k,clientHeight:oe,scrollHeight:L}=te;k+oe>=L-300&&!j.value&&V()}},O=async()=>{var te,k,oe;if(!l.value.walletId){ne.error("Veuillez s√©lectionner un portefeuille.");return}f.value=!0;try{const L=await B.post("/jeton_market/offer",{...l.value,wallet_id:l.value.walletId,total_price:d.value});n.value=!1,ne.success(((te=L==null?void 0:L.data)==null?void 0:te.message)||"Offre cr√©√©e avec succ√®s !"),V()}catch(L){ne.error(((oe=(k=L.response)==null?void 0:k.data)==null?void 0:oe.message)||"Erreur lors de la cr√©ation de l'offre"),console.error("Erreur lors de la cr√©ation de l'offre:",L.response)}finally{f.value=!1}},ie=(te,k,oe)=>{Z();const L=p.value.find(xe=>xe.id===te);L&&(w.value=te,F.value=L.total_prix,$.value.walletId="",i.value=!0)},ce=async()=>{var te,k;if(!w.value||!$.value.walletId){ne.error("Veuillez s√©lectionner un portefeuille.");return}f.value=!0;try{const oe=await B.post(`/jeton_market/buy/${w.value}`,{wallet_id:$.value.walletId});console.log(oe.data),i.value=!1,V(),ne.success(oe.data.message||"Achat effectu√© avec succ√®s !")}catch(oe){console.error("Erreur lors de l'achat:",oe.response.data.message),ne.error(((k=(te=oe.response)==null?void 0:te.data)==null?void 0:k.message)||"Erreur lors de l'achat")}finally{f.value=!1,w.value=null,F.value=0}},me=te=>{var k;return(k=te.user)!=null&&k.commercant?`/commercants/${te.user.commercant.id}`:`/profile/public/${te.user_id}`};return ge(()=>{h.value=!0,V(),z(),G(),window.addEventListener("scroll",E)}),Se(()=>{window.removeEventListener("scroll",E)}),(te,k)=>{const oe=be("router-link");return t(),s(X,null,[N(Ve,{isLoading:h.value},null,8,["isLoading"]),e("div",ni,[e("div",ii,[N(oe,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:Q(()=>k[16]||(k[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),k[17]||(k[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"üåç March√©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute s√©curit√© üöÄ")],-1)),k[18]||(k[18]=e("div",{class:"w-10"},null,-1))]),p.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:E},[(t(!0),s(X,null,ee(g.value,L=>(t(),s("div",{key:L.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",ui,[e("div",di,[N(oe,{to:me(L),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:Q(()=>[L.user.photo?(t(),s("img",{key:0,src:b.value+L.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,ci)):(t(),s("i",pi))]),_:2},1032,["to"]),N(oe,{to:me(L),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:Q(()=>[y(v(L.user.nom),1)]),_:2},1032,["to"])]),e("span",vi,[y(v(L.nombre_jetons)+" ",1),k[19]||(k[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",mi,[k[20]||(k[20]=e("strong",null,"üíµ Prix :",-1)),y(" "+v(L.prix_unitaire)+" FCFA/jeton",1)]),e("p",fi,[k[21]||(k[21]=e("strong",null,"üí∞ Total :",-1)),y(" "+v(L.total_prix)+" FCFA ",1)]),e("p",gi,"üìÖ Publi√©e le "+v(new Date(L.date_creation).toLocaleDateString()),1),e("button",{onClick:xe=>{var $e,Ce;return ie(L.id,($e=L.wallet)==null?void 0:$e.phone_number,(Ce=L.wallet)==null?void 0:Ce.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," ‚ö° Acheter ",8,xi)]))),128)),f.value?(t(),s("div",bi,k[22]||(k[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):P("",!0)],32)):(t(),s("div",hi,[k[25]||(k[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),k[26]||(k[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[k[23]||(k[23]=y("Soyez le premier √† ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:J},"poster une offre"),k[24]||(k[24]=y(" üéâ"))])])),N(ye,{name:"fade"},{default:Q(()=>[n.value?(t(),s("div",yi,[e("div",_i,[e("button",{onClick:k[0]||(k[0]=L=>n.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),k[35]||(k[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìù Nouvelle Offre",-1)),e("form",{onSubmit:ue(O,["prevent"]),class:"space-y-5"},[e("div",null,[k[27]||(k[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),R(e("input",{"onUpdate:modelValue":k[1]||(k[1]=L=>l.value.nombre_jetons=L),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Y,l.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[k[28]||(k[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":k[2]||(k[2]=L=>l.value.prix_unitaire=L),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Y,l.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[k[30]||(k[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille √† utiliser",-1)),R(e("select",{"onUpdate:modelValue":k[3]||(k[3]=L=>l.value.walletId=L),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[k[29]||(k[29]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(X,null,ee(D.value,L=>(t(),s("option",{key:L.id,value:L.id},v(L.phone_number)+" ("+v(L.payment_service)+") ",9,wi))),128))],512),[[ke,l.value.walletId]])]),e("p",ki,[k[31]||(k[31]=y("üí∞ Total: ")),e("span",$i,v(d.value),1),k[32]||(k[32]=y(" FCFA | üè¶ Commission (10%): ")),e("span",Ci,v(H.value),1),k[33]||(k[33]=y(" FCFA"))]),e("button",{type:"submit",disabled:f.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[f.value?(t(),s("i",Pi)):P("",!0),k[34]||(k[34]=y(" Publier "))],8,Ai)],32)])])):P("",!0)]),_:1}),N(ye,{name:"fade"},{default:Q(()=>[c.value?(t(),s("div",ji,[e("div",Si,[e("button",{onClick:k[4]||(k[4]=L=>c.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"‚úñ"),k[36]||(k[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"üéõÔ∏è Filtres",-1)),e("div",Mi,[R(e("input",{"onUpdate:modelValue":k[5]||(k[5]=L=>o.value.quantityMin=L),type:"number",placeholder:"Quantit√© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[Y,o.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:S,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," üîç Appliquer ")])])):P("",!0)]),_:1}),N(ye,{name:"fade"},{default:Q(()=>[i.value?(t(),s("div",Vi,[e("div",Ei,[e("button",{onClick:k[6]||(k[6]=L=>i.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),k[41]||(k[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üì≤ Paiement",-1)),e("form",{onSubmit:ue(ce,["prevent"]),class:"space-y-5"},[e("div",null,[k[38]||(k[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"S√©lectionnez votre portefeuille",-1)),R(e("select",{"onUpdate:modelValue":k[7]||(k[7]=L=>$.value.walletId=L),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[k[37]||(k[37]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),s(X,null,ee(D.value,L=>(t(),s("option",{key:L.id,value:L.id},v(L.phone_number)+" ("+v(L.payment_service)+") ",9,zi))),128))],512),[[ke,$.value.walletId]])]),e("p",Ui,[k[39]||(k[39]=y("Montant total : ")),e("span",Ii,v(F.value),1),k[40]||(k[40]=y(" FCFA"))]),e("button",{type:"submit",disabled:f.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[f.value?(t(),s("i",Ti)):P("",!0),f.value?(t(),s("span",Li,"Veuillez patienter")):(t(),s("span",qi,"Confirmer le paiement"))],8,Fi)],32)])])):P("",!0)]),_:1}),N(ye,{name:"fade"},{default:Q(()=>[M.value?(t(),s("div",Oi,[e("div",Ri,[e("button",{onClick:k[8]||(k[8]=L=>M.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),k[46]||(k[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ Cr√©er un Portefeuille ",-1)),e("form",{onSubmit:ue(U,["prevent"]),class:"space-y-5"},[e("div",null,[k[42]||(k[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),R(e("input",{"onUpdate:modelValue":k[9]||(k[9]=L=>W.value.phone_number=L),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Y,W.value.phone_number]])]),e("div",null,[k[44]||(k[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),R(e("select",{"onUpdate:modelValue":k[10]||(k[10]=L=>W.value.payment_service=L),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},k[43]||(k[43]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[ke,W.value.payment_service]])]),e("button",{type:"submit",disabled:f.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[f.value?(t(),s("i",Di)):P("",!0),k[45]||(k[45]=y(" Cr√©er "))],8,Ni)],32)])])):P("",!0)]),_:1}),C.value?(t(),pe(On,{key:2,show:C.value,wallets:D.value,onClose:k[11]||(k[11]=L=>C.value=!1),onRefreshWallets:z},null,8,["show","wallets"])):P("",!0),se.value?(t(),pe(li,{key:3,show:se.value,wallets:D.value,offers:r.value,onClose:k[12]||(k[12]=L=>se.value=!1),onRefreshOffers:V},null,8,["show","wallets","offers"])):P("",!0),e("div",Wi,[e("button",{onClick:k[13]||(k[13]=L=>{Z(),c.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},k[47]||(k[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:q,class:K(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":a.value}])},[e("i",{class:K(["fas fa-sync-alt text-xl",{"fa-spin":a.value}])},null,2),k[48]||(k[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:k[14]||(k[14]=L=>{Z(),C.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},k[49]||(k[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:J,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},k[50]||(k[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:k[15]||(k[15]=L=>{Z(),se.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},k[51]||(k[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),Mc=re(Ji,[["__scopeId","data-v-c3c0370a"]]),Bi={class:"overflow-y-scroll bg-gray-100"},Hi={class:"container mx-auto px-4 sm:px-6 py-8"},Gi={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},Xi={class:"flex flex-col sm:flex-row items-center gap-6"},Ki={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Qi=["src"],Yi={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Zi={class:"flex-1"},eu={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},tu={class:"text-sm text-[var(--espace-gris)] mb-1"},su={class:"text-sm text-[var(--espace-gris)] mb-1"},ou={class:"text-sm text-[var(--espace-gris)]"},au={key:0,class:"text-sm text-[var(--espace-gris)]"},ru={class:"mt-2 flex space-x-2 flex-col"},lu={class:"text-sm text-[var(--espace-gris)]"},nu={class:"text-xs text-[var(--espace-gris)]"},iu={class:"mt-4 flex flex-col sm:flex-row gap-4"},uu={class:"mt-4 flex flex-wrap gap-4"},du={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},cu={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},pu={key:1,class:"text-base text-[var(--espace-gris)] italic"},vu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},mu={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},fu={class:"flex items-center space-x-2"},gu={key:3},xu={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},bu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},hu={key:5,class:"text-base text-[var(--espace-gris)] italic"},yu={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},_u={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},wu={class:"text-sm text-[var(--espace-gris)]"},ku={class:"text-sm text-[var(--espace-gris)]"},$u=ae({__name:"CommercantDetails",setup(I){const u=je(),b=le(),x=de(),p=m(!1),r=m(null),o=m(null),n=m(0),c=m(0),l=m(!1),f=async()=>{p.value=!0;try{const h=await B.get(`/commercant/${u.params.commercantId}`);r.value=h.data.commercant,n.value=h.data.average_rating||0,c.value=h.data.vote_count||0,r.value.produits||console.warn("Aucun produit trouv√© dans la r√©ponse de l'API pour ce commer√ßant.")}catch{x.error("Erreur lors du chargement des d√©tails du commer√ßant.")}finally{p.value=!1}},A=async()=>{var h,a,i,$;if(o.value===null||o.value<1||o.value>5){x.error("Veuillez s√©lectionner une note entre 1 et 5.");return}try{const w=await B.post(`/commercant/${u.params.commercantId}/rate`,{rating:o.value});n.value=w.data.average_rating||0,x.success("Merci pour votre note !"),o.value=null,l.value=!1,c.value=w.data.vote_count||c.value+1}catch(w){((a=(h=w.response)==null?void 0:h.data)==null?void 0:a.message)=="Unauthenticated."&&b.push("login"),x.error((($=(i=w.response)==null?void 0:i.data)==null?void 0:$.message)||"Erreur lors de la notation.")}},_=ve(()=>{var h;return((h=r.value)==null?void 0:h.produits)||[]}),j=()=>{l.value=!0};return ge(async()=>{f()}),(h,a)=>{const i=be("router-link");return t(),s(X,null,[N(Ve,{isLoading:p.value},null,8,["isLoading"]),e("div",Bi,[N(Qe),e("div",Hi,[r.value?(t(),s("div",Gi,[e("div",Xi,[e("div",Ki,[r.value.photo_url?(t(),s("img",{key:0,src:r.value.photo_url,alt:"Photo du commer√ßant",class:"w-full h-full object-cover"},null,8,Qi)):(t(),s("i",Yi))]),e("div",Zi,[e("h1",eu," Commer√ßant : "+v(r.value.nom),1),e("p",tu,[a[2]||(a[2]=e("strong",null,"Ville :",-1)),y(" "+v(r.value.ville),1)]),e("p",su,[a[3]||(a[3]=e("strong",null,"Inscrit depuis :",-1)),y(" "+v(new Date(r.value.created_at).toLocaleDateString()),1)]),e("p",ou,[a[4]||(a[4]=e("strong",null,"Contact :",-1)),y(" "+v(r.value.email||"Non disponible"),1)]),r.value.telephone?(t(),s("p",au,[a[5]||(a[5]=e("strong",null,"T√©l√©phone :",-1)),y(" "+v(r.value.telephone),1)])):P("",!0),e("div",ru,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:j},[(t(),s(X,null,ee(5,$=>e("span",{key:$,class:"relative text-yellow-400 w-5 h-5"},[a[6]||(a[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:we({width:$<=Math.floor(n.value)?"100%":$===Math.ceil(n.value)&&n.value%1!==0?`${n.value%1*100}%`:"0%"})},null,4)])),64)),e("p",lu,v(Number(n.value).toFixed(1))+"/5 ",1)]),e("span",nu,"("+v(c.value)+" votes)",1)])])]),e("div",iu,[N(i,{to:`/chat/${r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Q(()=>a[7]||(a[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),y(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),N(i,{to:`/public-profile/${r.value.user_id||r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Q(()=>a[8]||(a[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),y(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",uu,[e("span",du,"Produits : "+v(_.value.length),1),r.value.revenus?(t(),s("span",cu,"Revenus : "+v(r.value.revenus)+" FCFA",1)):P("",!0)])])):p.value?P("",!0):(t(),s("div",pu,"Commer√ßant non trouv√©.")),l.value?(t(),s("div",vu,[e("div",mu,[a[9]||(a[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce Commer√ßant",-1)),e("div",fu,[R(e("input",{"onUpdate:modelValue":a[0]||(a[0]=$=>o.value=$),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[Y,o.value,void 0,{number:!0}]]),e("button",{onClick:A,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:a[1]||(a[1]=$=>l.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):P("",!0),p.value?(t(),s("div",gu)):_.value.length>0?(t(),s("div",xu,[a[10]||(a[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du Commer√ßant",-1)),e("div",bu,[(t(!0),s(X,null,ee(_.value,$=>(t(),pe(Te,{key:$.id,produit:$},null,8,["produit"]))),128))])])):r.value&&_.value.length===0?(t(),s("div",hu,"Aucun produit disponible pour ce commer√ßant.")):P("",!0),r.value&&r.value.statistiques?(t(),s("div",yu,[a[13]||(a[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",_u,[e("p",wu,[a[11]||(a[11]=e("strong",null,"Vues totales :",-1)),y(" "+v(r.value.statistiques.total_views),1)]),e("p",ku,[a[12]||(a[12]=e("strong",null,"Produits populaires :",-1)),y(" "+v(r.value.statistiques.popular_products),1)])])])):P("",!0)])])],64)}}}),Vc=re($u,[["__scopeId","data-v-28e3885d"]]),Cu={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Au={class:"container mx-auto max-w-2xl"},Pu={class:"bg-white rounded-lg shadow-md p-6"},ju={key:0,class:"text-red-500 text-xs"},Su={key:0,class:"text-red-500 text-xs"},Mu={key:0,class:"text-red-500 text-xs"},Vu={key:0,class:"text-red-500 text-xs"},Eu={key:0,class:"text-red-500 text-xs"},zu=["disabled"],Uu={key:0},Iu={key:1},Fu=ae({__name:"CommercantCreate",setup(I){const u=le(),b=de(),x=m({nom:"",ville:"",email:"",telephone:"",photo:null}),p=m(!1),r=m({}),o=c=>{const l=c.target;l.files&&l.files[0]&&(x.value.photo=l.files[0])},n=async()=>{var c,l,f,A;p.value=!0,r.value={};try{const _=new FormData;_.append("nom",x.value.nom),_.append("ville",x.value.ville),_.append("email",x.value.email),_.append("telephone",x.value.telephone),x.value.photo&&_.append("photo",x.value.photo);const j=await B.post("/commercants",_,{headers:{"Content-Type":"multipart/form-data"}});b.success("Commer√ßant cr√©√© avec succ√®s !"),u.push("/profil")}catch(_){((l=(c=_.response)==null?void 0:c.data)==null?void 0:l.message)=="Unauthenticated."&&u.push("login"),(A=(f=_.response)==null?void 0:f.data)!=null&&A.errors?r.value=_.response.data.errors:b.error("Erreur lors de la cr√©ation du commer√ßant"),console.error(_)}finally{p.value=!1}};return(c,l)=>(t(),s("div",Cu,[e("div",Au,[l[11]||(l[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),y(" Cr√©er un Commer√ßant ")],-1)),e("div",Pu,[e("form",{onSubmit:ue(n,["prevent"]),class:"space-y-6"},[e("div",null,[l[4]||(l[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),R(e("input",{"onUpdate:modelValue":l[0]||(l[0]=f=>x.value.nom=f),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commer√ßant",required:""},null,512),[[Y,x.value.nom]]),r.value.nom?(t(),s("span",ju,v(r.value.nom),1)):P("",!0)]),e("div",null,[l[5]||(l[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),R(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>x.value.ville=f),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[Y,x.value.ville]]),r.value.ville?(t(),s("span",Su,v(r.value.ville),1)):P("",!0)]),e("div",null,[l[6]||(l[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>x.value.email=f),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[Y,x.value.email]]),r.value.email?(t(),s("span",Mu,v(r.value.email),1)):P("",!0)]),e("div",null,[l[7]||(l[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"T√©l√©phone",-1)),R(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>x.value.telephone=f),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[Y,x.value.telephone]]),r.value.telephone?(t(),s("span",Vu,v(r.value.telephone),1)):P("",!0)]),e("div",null,[l[8]||(l[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:o,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),r.value.photo?(t(),s("span",Eu,v(r.value.photo),1)):P("",!0)]),e("div",null,[e("button",{type:"submit",disabled:p.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[p.value?(t(),s("span",Uu,l[9]||(l[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),y(" Cr√©ation en cours... ")]))):(t(),s("span",Iu,l[10]||(l[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),y(" Cr√©er le commer√ßant ")])))],8,zu)])],32)])])]))}}),Ec=re(Fu,[["__scopeId","data-v-50d6542f"]]),Tu={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Lu={class:"container mx-auto max-w-4xl pb-8"},qu={class:"text-md font-semibold text-white flex items-center"},Ou={class:"ml-2 text-sm text-white/80"},Ru={class:"text-white/90 text-sm mt-2"},Nu={key:0,class:"text-white/90 text-sm mt-1"},Du={class:"list-disc list-inside ml-4"},Wu=ae({__name:"ParrainageInfo",setup(I){const u=le(),b=de(),x=m([]),p=async()=>{try{const o=await B.get("/parrainages/niveaux");x.value=o.data.niveaux}catch(o){b.error("Erreur lors de la r√©cup√©ration des niveaux de parrainage"),console.error(o)}},r=()=>{u.go(-1)};return ge(()=>{p()}),(o,n)=>(t(),s("div",Tu,[e("div",Lu,[n[4]||(n[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),y(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:r,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},n[0]||(n[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),y(" Retour ")])),n[5]||(n[5]=Ae('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-910c08f4><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-910c08f4>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-910c08f4> Le syst√®me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Vos gains d√©pendent des <strong data-v-910c08f4>niveaux de parrainage</strong>, d√©bloqu√©s par le nombre de commer√ßants parrain√©s, avec des bonus en jetons cumulatifs. Plus vous parrainez, plus vous montez de niveau ! D√©couvrez les d√©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-910c08f4><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-910c08f4>Comment √ßa fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-910c08f4><li data-v-910c08f4><strong data-v-910c08f4>Obtenez votre code unique :</strong> G√©n√©rez ou cr√©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-910c08f4><strong data-v-910c08f4>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis √† s&#39;inscrire.</li><li data-v-910c08f4><strong data-v-910c08f4>Attirez des commer√ßants :</strong> Encouragez vos filleuls √† devenir des commer√ßants actifs sur la plateforme. Seuls les commer√ßants parrain√©s comptent pour d√©bloquer les niveaux.</li><li data-v-910c08f4><strong data-v-910c08f4>Montez de niveau :</strong> Chaque niveau n√©cessite un nombre sp√©cifique de commer√ßants parrain√©s. Une fois le seuil atteint, vous d√©bloquez un bonus en jetons correspondant √† ce niveau, en plus des bonus des niveaux pr√©c√©dents.</li><li data-v-910c08f4><strong data-v-910c08f4>Suivez vos progr√®s :</strong> Consultez votre niveau actuel, vos jetons bonus et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-910c08f4><strong data-v-910c08f4>Note importante :</strong> Les jetons bonus sont cumulatifs et attribu√©s en fonction des niveaux atteints, pas directement par parrainage individuel. Par exemple, si vous atteignez le niveau 2 avec 5 commer√ßants, vous recevez les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(X,null,ee(x.value,c=>(t(),s("div",{key:c.id,class:"mb-6 p-4 border rounded-lg",style:we({backgroundColor:c.couleur||"#f0f0f0"})},[e("h3",qu,[y(v(c.nom)+" "+v(c.emoji)+" ",1),e("span",Ou,"("+v(c.filleuls_requis)+" commer√ßants requis)",1)]),e("p",Ru,[n[1]||(n[1]=e("strong",null,"Bonus en jetons :",-1)),y(" "+v(c.jetons_bonus)+" jetons ",1)]),c.avantages.length?(t(),s("p",Nu,[n[2]||(n[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",Du,[(t(!0),s(X,null,ee(c.avantages,l=>(t(),s("li",{key:l},v(l),1))),128))])])):P("",!0),n[3]||(n[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont cr√©dit√©s une fois le niveau atteint et cumul√©s avec les niveaux pr√©c√©dents. ",-1))],4))),128))])]))}}),zc=re(Wu,[["__scopeId","data-v-910c08f4"]]),Ju={class:"w-full flex relative px-0"},Bu=["onClick"],Hu={class:"flex items-center"},Gu=["onClick"],Xu=["src"],Ku={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Qu={class:"min-w-0"},Yu={class:"font-semibold text-[var(--espace-vert)] truncate"},Zu={class:"text-xs text-[var(--espace-gris)] truncate"},ed={class:"flex items-center"},td={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},sd={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},od={class:"w-full grid grid-rows-[10%_86%]"},ad={class:"flex border-b"},rd={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},ld={key:0,class:"h-full flex flex-col"},nd={class:"block text-[var(--espace-vert)]"},id={class:"text-gray-800"},ud={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},dd={key:0,class:"text-center text-[var(--espace-gris)]"},cd={class:"px-2 md:px-4 z-20"},pd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},vd={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},md={key:1,class:"flex items-center justify-center h-full"},fd=ae({__name:"Messages",setup(I){const u=()=>{const q=window.location.hostname;return q==="localhost"||q==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},b=ve(()=>u()),x=le(),p=je(),r=fe(),o=de(),n=Ie(),c=m([]),l=m([]),f=m(null),A=m(""),_=m(!0),j=m(0),h=m(!1),a=m(!1),i=m(null),$=m(null),w=m(window.innerWidth<768);let F=null;const D=()=>{Ge(()=>{var q;(q=i.value)==null||q.scrollTo({top:i.value.scrollHeight,behavior:"smooth"})})},M=()=>{$.value=null,localStorage.removeItem("chatProduct")},W=async()=>{var q,g;try{const d=await B.get("/conversations");c.value=d.data.conversations}catch(d){((g=(q=d.response)==null?void 0:q.data)==null?void 0:g.message)=="Unauthenticated."&&x.push("login"),o.error("Erreur lors de la r√©cup√©ration des conversations"),console.error(d)}},C=async(q,g=!0)=>{var d,H,V;if(!a.value){a.value=!0;try{g&&(j.value=0,l.value=[]),_.value=!1;const E=await B.get(`/chat/${q}?offset=${j.value}`);l.value=[...E.data.messages],h.value=E.data.hasMore;const O=localStorage.getItem("chatProduct"),ie=c.value.find(te=>te.user_id===q);let ce="",me="/default-avatar.png";ie?(ce=ie.is_commercant?ie.name:((d=E.data.user)==null?void 0:d.nom)||"",me=ie.profile_photo||"/default-avatar.png"):O?(ce=JSON.parse(O).commercant_name||((H=E.data.user)==null?void 0:H.nom)||"",me=(ie==null?void 0:ie.profile_photo)||"/default-avatar.png"):ce=((V=E.data.user)==null?void 0:V.nom)||"",f.value={user_id:q,name:ce,is_commercant:(ie==null?void 0:ie.is_commercant)||!1,profile_photo:me},O&&($.value=JSON.parse(O)),await G(q),D()}catch(E){o.error("Erreur lors du chargement des messages"),console.error(E)}finally{a.value=!1}}},se=q=>{x.push({name:"messages",params:{receiverId:q}}),w.value&&(_.value=!1)},ne=async()=>{var d,H,V,E,O,ie,ce,me,te,k,oe,L;if(!A.value.trim()||!f.value){o.error("Veuillez s√©lectionner une conversation et √©crire un message");return}const q=A.value.trim(),g={id:-Date.now(),sender_id:(d=r.user)==null?void 0:d.id,receiver_id:f.value.user_id,content:q,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((H=$.value)==null?void 0:H.id)||null,sender:{id:((V=r.user)==null?void 0:V.id)??0,nom:((E=r.user)==null?void 0:E.nom)??"",email:((O=r.user)==null?void 0:O.email)??"",telephone:((ie=r.user)==null?void 0:ie.telephone)??"",ville:((ce=r.user)==null?void 0:ce.ville)??"",premium:((me=r.user)==null?void 0:me.premium)??!1,parrain_id:((te=r.user)==null?void 0:te.parrain_id)??0},receiver:{id:f.value.user_id,nom:f.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:$.value||null};l.value.push(g),A.value="",D();try{const xe=await B.post(`/chat/${f.value.user_id}`,{content:q,product_id:(k=$.value)==null?void 0:k.id});$.value&&M()}catch(xe){((L=(oe=xe.response)==null?void 0:oe.data)==null?void 0:L.message)=="Unauthenticated."&&x.push("login"),o.error("√âchec d'envoi"),console.error(xe),l.value=l.value.filter($e=>$e.id!==g.id)}},Z=()=>{!i.value||!h.value||a.value||i.value.scrollTop<=100&&(j.value+=30,C(f.value.user_id,!1))},z=()=>{w.value=window.innerWidth<768,_.value=window.innerWidth>=768},G=async q=>{var g,d;try{const H=await B.put("/messages/mark-all-as-read");n.saveUnreadMessagesToLocalStorage(H.data.unread_messages)}catch(H){((d=(g=H.response)==null?void 0:g.data)==null?void 0:d.message)=="Unauthenticated."&&x.push("login"),console.error("Erreur lors du marquage des messages comme lus:",H),o.error("Erreur lors de la mise √† jour des messages lus")}},J=()=>{_.value=!_.value},U=(q,g)=>{const d=g?`/commercants/${q}`:`/users/${q}`;x.push(d)},S=q=>{var g;F&&(F.stopListening("MessageSent"),window.Echo.leave(`chat.${F.params.receiverId}`)),q&&((g=r.user)!=null&&g.id)&&(F=window.Echo.channel("public-channel").listen("message.sent",d=>{var H,V;if(((H=f.value)==null?void 0:H.user_id)===q&&d.sender_id!==((V=r.user)==null?void 0:V.id)){const E={id:d.message.id,sender_id:d.sender_id,receiver_id:d.receiver_id,content:d.message.content,created_at:d.message.created_at,updated_at:d.message.updated_at,is_read:d.message.is_read,product_id:d.message.product_id||null,sender:d.sender,receiver:d.receiver,product:d.message.product||null};l.value.push(E),D(),n.saveUnreadMessagesToLocalStorage(d.unread_messages)}}),F.params={receiverId:q})};return ge(()=>{W(),p.params.receiverId&&C(parseInt(p.params.receiverId)),window.addEventListener("resize",z)}),Se(()=>{F&&(F.stopListening("MessageSent"),window.Echo.leave(`chat.${F.params.receiverId}`)),window.removeEventListener("resize",z)}),he(()=>{var q;return(q=f.value)==null?void 0:q.user_id},q=>{q&&S(q)}),he(()=>p.params.receiverId,async q=>{q&&await C(parseInt(q))}),(q,g)=>{var H,V;const d=be("router-link");return t(),s("div",Ju,[N(ye,{name:"slide-fade"},{default:Q(()=>[_.value||!w.value?(t(),s("div",{key:0,class:K(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",w.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[g[1]||(g[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(X,null,ee(c.value,E=>(t(),s("div",{key:E.user_id,onClick:O=>se(E.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",Hu,[e("div",{onClick:ue(O=>U(E.user_id,E.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[E.profile_photo?(t(),s("img",{key:0,src:b.value+E.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Xu)):(t(),s("i",Ku))],8,Gu),e("div",Qu,[e("p",Yu,v(E.name),1),e("p",Zu,v(E.last_message),1)])]),e("div",ed,[E.unread_count>0?(t(),s("div",td,v(E.unread_count),1)):P("",!0),e("div",sd,v(new Date(E.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,Bu))),128))],2)):P("",!0)]),_:1}),e("div",od,[e("div",ad,[!_.value&&w.value&&f.value?(t(),s("button",{key:0,onClick:J,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},g[2]||(g[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):P("",!0),f.value?(t(),s("h2",rd,v(f.value.name),1)):P("",!0)]),e("div",{class:K(["bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full",_.value&&!w.value?"":"rounded-r-lg"]),onScroll:Z},[f.value?(t(),s("div",ld,[e("div",{ref_key:"messagesContainer",ref:i,class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 messages-container"},[(t(!0),s(X,null,ee(l.value,E=>{var O,ie,ce;return t(),s("div",{key:E.id,class:K(["p-3 rounded-full break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":E.sender_id===((O=T(r).user)==null?void 0:O.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":E.sender_id!==((ie=T(r).user)==null?void 0:ie.id)}])},[e("strong",nd,v(E.sender.nom)+" :",1),e("p",id,[(ce=E.product)!=null&&ce.id?(t(),pe(d,{key:0,to:{name:"produit",params:{id:E.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:Q(()=>[y("[Produit "+v(E.product.nom)+"]",1)]),_:2},1032,["to"])):P("",!0),y(" "+v(E.content),1)]),e("p",ud,v(new Date(E.created_at).toLocaleTimeString()),1)],2)}),128)),a.value?(t(),s("div",dd,"Chargement...")):P("",!0)],512),e("div",cd,[e("div",pd,[(H=$.value)!=null&&H.id?(t(),s("span",vd,[y(" Produit "+v((V=$.value)==null?void 0:V.nom)+" ",1),e("button",{onClick:M,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," √ó ")])):P("",!0),R(e("input",{"onUpdate:modelValue":g[0]||(g[0]=E=>A.value=E),onKeyup:He(ne,["enter"]),type:"text",placeholder:"√âcrivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w[200px]"},null,544),[[Y,A.value]]),e("button",{onClick:ne,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},g[3]||(g[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",md,g[4]||(g[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"S√©lectionnez une conversation pour commencer.",-1)])))],34)])])}}}),Uc=re(fd,[["__scopeId","data-v-dc36503b"]]),gd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},xd={key:0,class:"overflow-y-scroll space-y-4"},bd={class:"flex justify-between items-center"},hd={class:"text-lg font-semibold"},yd={class:"text-gray-600"},_d={class:"text-gray-600"},wd={class:"text-gray-600"},kd={class:"text-gray-600"},$d={class:"text-gray-600"},Cd={key:0,class:"text-gray-600"},Ad={class:"text-right"},Pd=["onClick"],jd={key:1,class:"text-gray-500"},Sd={class:"mt-6 flex gap-4"},Md={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vd=ae({__name:"JetonHistory",setup(I){const u=le(),x=fe().user,p=m([]),r=m(!1),o=de(),n=async()=>{try{const f=await B.get(`/jeton-transactions/${x==null?void 0:x.id}`);p.value=f.data}catch(f){console.error("Erreur lors du chargement des transactions:",f)}},c=f=>new Date(f).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=async f=>{var A,_,j,h;if(confirm(`Refaire l'achat de ${f.nombre_jetons} jetons avec le m√™me service (${f.methode_paiement}) ?`)){r.value=!0;try{const a=await B.post("/acheter-jetons",{nombre_jetons:f.nombre_jetons,payment_service:f.methode_paiement,phone_number:f.phone_number});o.success(a.data.message),n()}catch(a){((_=(A=a.response)==null?void 0:A.data)==null?void 0:_.message)=="Unauthenticated."&&u.push("login"),o.error(((h=(j=a.response)==null?void 0:j.data)==null?void 0:h.message)||"Erreur lors de l'achat."),console.error(a)}finally{r.value=!1}}};return ge(()=>{x&&n()}),(f,A)=>{const _=be("router-link");return t(),s("div",gd,[A[4]||(A[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),p.value.length>0?(t(),s("div",xd,[(t(!0),s(X,null,ee(p.value,j=>(t(),s("div",{key:j.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",bd,[e("div",null,[e("p",hd,"Achat de "+v(j.nombre_jetons)+" jetons",1),e("p",yd,"Montant: "+v(j.montant)+" FCFA",1),e("p",_d,"M√©thode: "+v(j.methode_paiement),1),e("p",wd,"Num√©ro: "+v(j.phone_number),1),e("p",kd,"Statut: "+v(j.statut),1),e("p",$d,"Date: "+v(c(j.date_transaction)),1),j.transaction_id_mesomb?(t(),s("p",Cd," ID Transaction: "+v(j.transaction_id_mesomb),1)):P("",!0)]),e("div",Ad,[e("button",{onClick:h=>l(j),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},A[0]||(A[0]=[e("i",{class:"fas fa-redo"},null,-1),y(" Refaire ")]),8,Pd)])])]))),128))])):(t(),s("p",jd,"Aucune transaction trouv√©e.")),e("div",Sd,[N(_,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Q(()=>A[1]||(A[1]=[y(" Acheter des Jetons ")])),_:1,__:[1]}),N(_,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Q(()=>A[2]||(A[2]=[y(" Booster un Produit ")])),_:1,__:[2]})]),r.value?(t(),s("div",Md,A[3]||(A[3]=[Ae('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-5312e1a5><p class="text-lg text-[var(--espace-vert)]" data-v-5312e1a5>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-5312e1a5><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-5312e1a5></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-5312e1a5></path></svg></div>',1)]))):P("",!0)])}}}),Ic=re(Vd,[["__scopeId","data-v-5312e1a5"]]),Ed={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},zd={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},Ud={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},Id={class:"relative"},Fd=["src"],Td={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},Ld={class:"flex-1"},qd={class:"text-gray-600"},Od={key:0,class:"text-sm text-gray-500"},Rd={class:"text-gray-600"},Nd={class:"text-gray-600"},Dd=ae({__name:"ProfilePublic",setup(I){const u=je(),b=le(),x=de(),p=m(null),r=async()=>{var n,c;try{const l=await B.get(`/profile/public/${u.params.id}`);p.value=l.data}catch(l){((c=(n=l.response)==null?void 0:n.data)==null?void 0:c.message)=="Unauthenticated."&&b.push("login"),x.error("Erreur lors de la r√©cup√©ration du profil."),console.error(l)}},o=()=>{var n;(n=p.value)!=null&&n.id?b.push({name:"messages",params:{receiverId:p.value.id}}):x.error("Impossible d'acc√©der au chat. Profil invalide.")};return ge(()=>{r()}),(n,c)=>{var l,f,A,_,j,h,a,i,$,w,F,D,M,W,C,se,ne,Z,z,G,J,U;return t(),s("div",Ed,[e("div",zd,[e("div",Ud,[e("div",Id,[(l=p.value)!=null&&l.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(f=p.value)==null?void 0:f.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Fd)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:we({background:`${((h=(j=(_=(A=p.value)==null?void 0:A.niveaux_users)==null?void 0:_.at(-1))==null?void 0:j.parrainage_niveau)==null?void 0:h.couleur)||"#0af"}`})},c[0]||(c[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(a=p.value)!=null&&a.premium?(t(),s("i",Td)):P("",!0)]),e("div",Ld,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:we({color:`${((F=(w=($=(i=p.value)==null?void 0:i.niveaux_users)==null?void 0:$.at(-1))==null?void 0:w.parrainage_niveau)==null?void 0:F.couleur)||"#0af"}`})},[y(v((D=p.value)==null?void 0:D.nom)+" ",1),(M=p.value)!=null&&M.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:we({background:`${((ne=(se=(C=(W=p.value)==null?void 0:W.niveaux_users)==null?void 0:C.at(-1))==null?void 0:se.parrainage_niveau)==null?void 0:ne.couleur)||"#0af"}`})}," Premium ",4)):P("",!0)],4),e("p",qd,"Statut : "+v((Z=p.value)!=null&&Z.commercant?"Commer√ßant":"Utilisateur"),1),(z=p.value)!=null&&z.subscription_ends_at?(t(),s("p",Od," Abonnement Premium jusqu'au "+v(new Date((G=p.value)==null?void 0:G.subscription_ends_at).toLocaleDateString()),1)):P("",!0),e("p",Rd,"Ville : "+v((J=p.value)==null?void 0:J.ville),1),e("p",Nd,"T√©l√©phone : "+v((U=p.value)==null?void 0:U.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:o,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},c[1]||(c[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),y(" Discuter ")]))])]),c[2]||(c[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),Fc=re(Dd,[["__scopeId","data-v-e1d303b7"]]),Wd={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},Jd={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Bd={class:"space-y-4"},Hd={class:"text-gray-700"},Gd={class:"text-gray-700"},Xd={class:"text-gray-700"},Kd={class:"text-gray-700"},Qd={class:"text-gray-700"},Yd={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Zd=["disabled"],ec={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},tc={key:0,class:"mt-4 text-green-600 text-center"},sc=ae({__name:"Doc",setup(I){le();const u=m(!1),b=m(!1),x=m({name:"",email:"",message:""}),p=async()=>{u.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x.value)})).ok)b.value=!0,x.value={name:"",email:"",message:""},setTimeout(()=>{b.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(r){console.error("Erreur lors de la soumission:",r)}finally{u.value=!1}};return(r,o)=>{const n=be("router-link");return t(),s("div",Wd,[o[33]||(o[33]=Ae('<div class="text-center mb-8" data-v-e1156810><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-e1156810>üìò Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-e1156810>Votre espace pour faciliter le commerce au Cameroun</p><p class="text-lg font-semibold text-[var(--espace-or)] mt-1" data-v-e1156810>Commerce facile, opportunit√©s infinies.</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-e1156810><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-e1156810>√Ä Propos d‚ÄôEspace Cameroun</h2><p class="text-gray-700" data-v-e1156810> Espace Cameroun est une plateforme de marketplace con√ßue pour connecter commer√ßants, acheteurs et revendeurs. Son objectif principal est de cr√©er un espace num√©rique o√π les transactions commerciales peuvent se d√©rouler facilement et en toute s√©curit√©. Notre mission est de faciliter l‚Äôactivit√© commerciale au Cameroun en offrant des outils simples et accessibles √† tous. </p></section>',2)),e("section",Jd,[o[27]||(o[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Fonctionnalit√©s Cl√©s",-1)),e("div",Bd,[e("div",null,[o[6]||(o[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",Hd,[o[4]||(o[4]=y(" Communiquez directement avec vos partenaires commerciaux pour n√©gocier ou confirmer des transactions via la section ")),N(n,{to:"/messages",class:"text-blue-500 underline"},{default:Q(()=>o[3]||(o[3]=[y("Chat")])),_:1,__:[3]}),o[5]||(o[5]=y(". "))])]),o[23]||(o[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," Cr√©ez et g√©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute s√©curit√©. ")],-1)),e("div",null,[o[10]||(o[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",Gd,[o[8]||(o[8]=y(" Participez au march√© des jetons via ")),N(n,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:Q(()=>o[7]||(o[7]=[y("March√© des Jetons")])),_:1,__:[7]}),o[9]||(o[9]=y(" pour vendre vos jetons ou en acheter, g√©n√©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[o[14]||(o[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Xd,[o[12]||(o[12]=y(" Devenez commer√ßant en cr√©ant un compte via ")),N(n,{to:"/profil",class:"text-blue-500 underline"},{default:Q(()=>o[11]||(o[11]=[y("Profil")])),_:1,__:[11]}),o[13]||(o[13]=y(", puis publiez vos produits (ex. t√©l√©phones, v√™tements) ou services (ex. r√©parations, cours) en remplissant les d√©tails (nom, prix, description, photos), s√©lectionnant un portefeuille, et soumettant votre annonce. "))])]),o[24]||(o[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagn√©s pour booster vos produits ou services, augmentant leur visibilit√© aupr√®s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[o[18]||(o[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Kd,[o[16]||(o[16]=y(" Travaillez avec d‚Äôautres commer√ßants pour proposer des produits ou services en collaboration via ")),N(n,{to:"/collaborations",class:"text-blue-500 underline"},{default:Q(()=>o[15]||(o[15]=[y("Collaborations")])),_:1,__:[15]}),o[17]||(o[17]=y(". "))])]),e("div",null,[o[22]||(o[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Syst√®me de Parrainage",-1)),e("p",Qd,[o[20]||(o[20]=y(" Invitez d‚Äôautres utilisateurs √† cr√©er un compte commer√ßant via ")),N(n,{to:"/parrainage",class:"text-blue-500 underline"},{default:Q(()=>o[19]||(o[19]=[y("√âquipe")])),_:1,__:[19]}),o[21]||(o[21]=y(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commer√ßants parrain√©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les √©changer sur le march√© des jetons. "))])]),o[25]||(o[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez √† un abonnement premium pour acc√©der √† des privil√®ges exclusifs, comme une visibilit√© accrue, des fonctionnalit√©s avanc√©es, et des avantages sp√©ciaux (d√©tails √† venir). ")],-1)),o[26]||(o[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," D√©couvrez d‚Äôautres fonctionnalit√©s au fil de votre utilisation pour optimiser votre exp√©rience commerciale. ")],-1))])]),e("section",Yd,[o[31]||(o[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),o[32]||(o[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester √† l‚Äô√©coute pour les mises √† jour et les nouvelles fonctionnalit√©s √† venir. ",-1)),e("form",{onSubmit:ue(p,["prevent"]),class:"space-y-4"},[e("div",null,[o[28]||(o[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[0]||(o[0]=c=>x.value.name=c),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Y,x.value.name]])]),e("div",null,[o[29]||(o[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":o[1]||(o[1]=c=>x.value.email=c),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Y,x.value.email]])]),e("div",null,[o[30]||(o[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),R(e("textarea",{id:"message",name:"message","onUpdate:modelValue":o[2]||(o[2]=c=>x.value.message=c),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[Y,x.value.message]])]),e("button",{type:"submit",disabled:u.value,class:K(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":u.value}])},[u.value?(t(),s("span",ec)):P("",!0),e("span",null,v(u.value?"Envoi...":"Envoyer"),1)],10,Zd)],32),b.value?(t(),s("p",tc,"Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):P("",!0)]),o[34]||(o[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines √âtapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour am√©liorer Espace Cameroun. Restez connect√©s pour d√©couvrir de nouvelles fonctionnalit√©s et opportunit√©s commerciales dans un avenir proche. ")],-1))])}}}),Tc=re(sc,[["__scopeId","data-v-e1156810"]]),oc={class:"overflow-y-scroll bg-gray-50 flex flex-col"},ac={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},rc={class:"flex items-center mb-4"},lc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},nc={class:"ml-4 text-lg font-semibold text-gray-800"},ic={key:0,class:"text-gray-700 mb-2 leading-relaxed"},uc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},dc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},cc=["disabled"],pc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},vc={key:0,class:"mt-4 text-green-600 text-center"},mc=ae({__name:"Politique",setup(I){new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});const u=m([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons √† prot√©ger vos informations personnelles et √† respecter votre vie priv√©e."},{id:"collecte",title:"Donn√©es collect√©es",icon:"fas fa-database",list:["Nom, email, t√©l√©phone","Produits publi√©s","Messages √©chang√©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donn√©es",icon:"fas fa-cogs",list:["Gestion des comptes","Am√©lioration du service","S√©curit√© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donn√©es. Elles ne sont partag√©es qu‚Äôavec nos prestataires ou si la loi l‚Äôexige."},{id:"securite",title:"S√©curit√©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des acc√®s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["Acc√®s et rectification","Suppression du compte","Opposition et portabilit√©"]}]),b=m(!1),x=m(!1),p=m({name:"",email:"",message:""}),r=async()=>{b.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p.value)})).ok)x.value=!0,p.value={name:"",email:"",message:""},setTimeout(()=>{x.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(o){console.error("Erreur envoi :",o)}finally{b.value=!1}};return(o,n)=>(t(),s("div",oc,[n[8]||(n[8]=Ae('<section class="bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white pt-6 pb-8 shadow-lg" data-v-0622a650><div class="max-w-4xl mx-auto text-center px-6" data-v-0622a650><h1 class="text-4xl sm:text-5xl font-bold mb-4" data-v-0622a650>Politique de Confidentialit√©</h1><p class="text-lg text-green-100 max-w-2xl mx-auto" data-v-0622a650> D√©couvrez comment <strong data-v-0622a650>Espace Cameroun</strong> prot√®ge vos donn√©es et respecte votre vie priv√©e. </p><p class="text-lg font-semibold text-[var(--espace-or)] mt-2" data-v-0622a650>Commerce facile, opportunit√©s infinies. </p></div></section>',1)),e("section",ac,[N(qe,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:Q(()=>[(t(!0),s(X,null,ee(u.value,c=>(t(),s("div",{key:c.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",rc,[e("div",lc,[e("i",{class:K([c.icon,"text-xl"])},null,2)]),e("h2",nc,v(c.title),1)]),c.text?(t(),s("p",ic,v(c.text),1)):P("",!0),c.list?(t(),s("ul",uc,[(t(!0),s(X,null,ee(c.list,l=>(t(),s("li",{key:l},v(l),1))),128))])):P("",!0)]))),128))]),_:1})]),e("section",dc,[n[6]||(n[6]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," üíå Une question sur vos donn√©es ? ",-1)),n[7]||(n[7]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous r√©pondrons dans les plus brefs d√©lais. ",-1)),e("form",{onSubmit:ue(r,["prevent"]),class:"space-y-4"},[e("div",null,[n[3]||(n[3]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":n[0]||(n[0]=c=>p.value.name=c),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Y,p.value.name]])]),e("div",null,[n[4]||(n[4]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":n[1]||(n[1]=c=>p.value.email=c),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Y,p.value.email]])]),e("div",null,[n[5]||(n[5]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),R(e("textarea",{id:"message",name:"message","onUpdate:modelValue":n[2]||(n[2]=c=>p.value.message=c),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[Y,p.value.message]])]),e("button",{type:"submit",disabled:b.value,class:K(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":b.value}])},[b.value?(t(),s("span",pc)):P("",!0),e("span",null,v(b.value?"Envoi...":"Envoyer"),1)],10,cc)],32),x.value?(t(),s("p",vc," ‚úÖ Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):P("",!0)])]))}}),Lc=re(mc,[["__scopeId","data-v-0622a650"]]);export{ro as A,_c as C,Tc as D,hc as F,bc as H,Ic as J,yc as L,Uc as M,kc as P,wc as R,Cc as a,Vc as b,Ec as c,Pc as d,$c as e,jc as f,zc as g,Ac as h,Sc as i,Fc as j,Mc as k,Lc as l};
