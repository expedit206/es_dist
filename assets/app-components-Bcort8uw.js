import{u as ie,r as b,a as pe,d as le,w as xe,o as ge,b as he,c as s,e as S,f as T,g as t,h as e,i as D,j as Q,k as P,t as x,l as me,m as Se,n as Ve,p as fe,F as B,q as ee,s as G,T as _e,v as de,x as $e,y as O,z as Z,A as Xe,B as je,C as Qe,D as ut,E as dt,G as ct,H as Ae,I as De,J as Ze,K as Oe}from"./vue-D22jj4LC.js";import{d as We}from"./pinia-yzfThc-V.js";import{a as Fe}from"./axios-Dq7h7Pqt.js";const pt="/assets/logoooo-C2XZdLtn.png",vt=()=>{const C=window.location.hostname;return C==="localhost"||C==="127.0.0.1"?"http://localhost:8000":"https://api.espacecameroun.com"};Fe.defaults.withCredentials=!0;Fe.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Fe.defaults.withXSRFToken=!0;const q=Fe.create({withCredentials:!0,baseURL:vt(),headers:{Accept:"application/json","Content-Type":"application/json"}}),Be=ie(),be=We("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(C){const a=await q.post("/login",C);this.user=a.data.user,this.token=a.data.token,localStorage.setItem("token",this.token??""),q.defaults.headers.common.Authorization=`Bearer ${this.token}`},async loginWithGoogle(C){try{const a=await q.get(`/auth/google/callback${C}`);this.user=a.data.user,this.token=a.data.token,localStorage.setItem("token",this.token??""),q.defaults.headers.common.Authorization=`Bearer ${this.token}`}catch{throw new Error("Erreur lors de la connexion avec Google")}},async register(C){const a=await q.post("/register",C);this.user=a.data.user,this.token=a.data.token,localStorage.setItem("token",this.token??""),q.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{q.defaults.headers.common.Authorization=`Bearer ${this.token}`;const C=await q.get("/user");return this.user=C.data.user,!0}catch(C){return console.error("Utilisateur non authentifiÃ©:",C),Be.push("/login"),this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{Be.push("/login"),this.token&&await q.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete q.defaults.headers.common.Authorization,["pending_collaborations","pending_orders","cart","token","unread_messages","viewedProducts"].forEach(a=>localStorage.removeItem(a))}}}),Ge=ie(),Te=We("userState",()=>{const C=b(0),a=b(0),c=pe(),m=()=>{const i=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");C.value=i.length;const p=localStorage.getItem("unread_messages");a.value=p?parseInt(p,10):0},u=i=>{localStorage.setItem("pending_collaborations",JSON.stringify(i)),C.value=i.length},l=i=>{localStorage.setItem("unread_messages",i.toString()),a.value=i},o=async i=>{var y,E,k;const p=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");p.push({produit_id:i.produit_id,prix_revente:i.prix_revente,status:"pending",created_at:new Date().toISOString()}),u(p);try{return await q.post("/collaborations",{produit_id:i.produit_id,prix_revente:i.prix_revente}),await n(),c.success("Demande de collaboration envoyÃ©e !"),!0}catch(w){((E=(y=w.response)==null?void 0:y.data)==null?void 0:E.message)=="Unauthenticated."&&Ge.push("login");const r=p.filter(d=>!(d.produit_id===i.produit_id&&d.prix_revente===i.prix_revente));return u(r),c.error(((k=w.response)==null?void 0:k.data.message)||"Erreur lors de la demande de collaboration"),!1}},n=async()=>{var i,p;try{const y=await q.get("/user/badges");C.value=y.data.collaborations_pending,l(y.data.unread_messages||0)}catch(y){((p=(i=y.response)==null?void 0:i.data)==null?void 0:p.message)=="Unauthenticated."&&Ge.push("login"),console.error("Erreur lors de la synchronisation des badges:",y)}};return{collaborationsPending:C,unreadMessages:a,initializeState:m,addCollaboration:o,syncCollaborationsWithBackend:n,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),C.value=0,a.value=0},saveCollaborationsToLocalStorage:u,saveUnreadMessagesToLocalStorage:l}}),Ee=We("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:C=>be().user},actions:{async fetchProducts(C={},a=!1,c=!1){var m,u;if(!(this.isLoading||!a&&!this.hasMore&&!c)){this.isLoading=!0,(a||c)&&(this.products=[],this.page=1,this.hasMore=!0);try{const l=await q.get("/produits",{params:{...C,page:this.page,sort:this.sort}});console.log("RÃ©ponse de l'API:",l.data),console.log("RÃ©ponse de l'API:",l.data.data);const o=l.data.data||[];if(!Array.isArray(o))throw new Error("Les donnÃ©es des produits ne sont pas un tableau");a||c||C.per_page==="all"?this.products=o:this.products=[...this.products,...o],this.hasMore=l.data.current_page<(l.data.last_page||1),this.page=l.data.current_page+1}catch(l){const o=ie();console.error("Erreur lors du fetch:",l),o.push("login"),(u=(m=l.response)==null?void 0:m.data)==null||u.message}finally{this.isLoading=!1}}},async toggleFavorite(C){var u,l;const a=be();if(!a.user&&(await a.checkAuth(),!a.user)){console.warn("Utilisateur non connectÃ©, redirection ou action nÃ©cessaire");return}const c=this.products.find(o=>o.id===C);let m=!1;c&&(c.is_favorited_by=!c.is_favorited_by,c.counts.favorites_count=c.is_favorited_by?c.counts.favorites_count+1:c.counts.favorites_count-1,m=!0),this.product&&this.product.id===C&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,m=!0);try{const o=await q.post(`/produits/${C}/favorite`),n=o.data.produit;if(m){const v=this.products.findIndex(i=>i.id===C);v!==-1&&(this.products[v]={...this.products[v],...n}),this.product&&this.product.id===C&&(this.product={...this.product,...n})}return o.data.message}catch(o){const n=ie();if(((l=(u=o.response)==null?void 0:u.data)==null?void 0:l.message)==="Unauthenticated."&&n.push("login"),console.error("Erreur toggleFavorite:",o),m){const v=this.products.find(i=>i.id===C);v&&(v.is_favorited_by=!v.is_favorited_by,v.counts.favorites_count=v.is_favorited_by?v.counts.favorites_count-1:v.counts.favorites_count+1),this.product&&this.product.id===C&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct(C){var a,c,m,u;try{const l=await q.get(`/produits/${C}`);this.product=l.data.produit;const o=this.products.findIndex(n=>n.id===C);o!==-1?this.products[o]={...this.products[o],...this.product}:this.products.push(this.product)}catch(l){const o=ie();throw((c=(a=l.response)==null?void 0:a.data)==null?void 0:c.message)==="Unauthenticated."&&o.push("login"),((u=(m=l.response)==null?void 0:m.data)==null?void 0:u.message)||"Erreur lors du chargement du produit"}},setSort(C){this.sort=C,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(C){this.userId=C}}}),mt={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},ft={class:"text-sm font-semibold text-[var(--espace-vert)]"},gt={class:"text-gray-800"},bt=le({__name:"SoldeUser",setup(C){ie();const a=be(),c=b(0),m=async()=>{if(a.user)try{c.value=a.user.jetons}catch(u){console.error("Erreur lors de la rÃ©cupÃ©ration des jetons:",u)}};return xe(()=>a.user,()=>{m()}),ge(()=>{m()}),(u,l)=>{const o=he("router-link");return T(a).user?(t(),s("div",mt,[l[1]||(l[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",ft,[D(o,{to:"/jeton-history"},{default:Q(()=>[l[0]||(l[0]=P(" Jetons : ")),e("span",gt,x(c.value),1)]),_:1,__:[0]})])])):S("",!0)}}}),ne=(C,a)=>{const c=C.__vccOpts||C;for(const[m,u]of a)c[m]=u;return c},Ye=ne(bt,[["__scopeId","data-v-a9413d7d"]]),xt={class:"relative bg-[var(--espace-vert)] h-full w-full"},ht={class:"text-[var(--espace-blanc)] left-0 z-50 shadow-md h-full w-full"},yt={class:"px-2 w-full sm:px-3 flex justify-between items-center gap-4 mb-4 h-full"},_t={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},wt=["aria-label"],kt={class:"flex items-center gap-2"},$t=["src"],Ct={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},At={key:0},Pt={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},jt=le({__name:"HeaderBar",setup(C){const a=()=>{const j=window.location.hostname;return j==="localhost"||j==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},c=me(()=>a()),m=be(),u=Te();ie();const l=me(()=>m.user);Se();const o=b(!1),n=b(!1);b(""),Ee();const v=b(!1),i=b(null),p=b(!1);let y=null;const E=()=>{var j;(j=m.user)!=null&&j.id&&(y&&(y.stopListening("MessageSent"),window.Echo.leave("private-chat")),console.log("ğŸ”” Abonnement au canal privÃ© private-chat"),y=window.Echo.private("chat").listen("MessageSent",V=>{var F;((F=l.value)==null?void 0:F.id)==V.message.receiver_id&&(console.log("lalalla :",V),u.saveUnreadMessagesToLocalStorage(V.unread_messages))}).error(V=>{console.error("âŒ Erreur d'abonnement au canal privÃ©:",V)}),y.params={channelId:"chat"})},k=me(()=>{var j,V;return[...l.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:u.unreadMessages},...(V=(j=l.value)==null?void 0:j.commercant)!=null&&V.email_verified_at?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:u.collaborationsPending}]:[],{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]}),w=async()=>{if(l.value)try{await u.syncCollaborationsWithBackend()}catch(j){console.error("Erreur lors du chargement des badges:",j)}},r=async()=>{if(!l.value&&m.token)try{await m.checkAuth()}catch(j){console.error("Erreur lors de la rÃ©cupÃ©ration de l'utilisateur:",j),m.logout()}l.value&&w()};xe(()=>u.collaborationsPending,j=>{j>-1&&(o.value=!0,setTimeout(()=>o.value=!1,300))}),xe(()=>u.unreadMessages,j=>{j>-1&&(n.value=!0,setTimeout(()=>n.value=!1,300))});const d=j=>{if(p.value){p.value=!1;return}i.value&&!i.value.contains(j.target)&&(v.value=!1)};ge(async()=>{var j;await r(),document.addEventListener("click",d),(j=m.user)!=null&&j.id&&E()}),Ve(()=>{var j;document.removeEventListener("click",d),(j=m.user)!=null&&j.id&&window.Echo.leave(`chat.${m.user.id}`)});const $=b(!1);let A=null;ge(()=>{window.addEventListener("beforeinstallprompt",j=>{j.preventDefault(),A=j,$.value=!0})});const J=async()=>{if(A){A.prompt();const{outcome:j}=await A.userChoice;alert(j==="accepted"?"âœ… Lâ€™application a Ã©tÃ© installÃ©e !":"âŒ Installation refusÃ©e."),A=null,$.value=!1}};return(j,V)=>{const F=he("RouterLink"),M=he("router-link");return t(),s("div",xt,[e("header",ht,[e("div",yt,[D(F,{to:"/home","aria-label":"Retour Ã  l'accueil",class:"flex items-center h-full"},{default:Q(()=>V[0]||(V[0]=[e("div",{class:"flex items-center gap-1 sm:gap-3"},[e("div",{class:"rounded-full flex items-center h-full"},[e("img",{src:pt,alt:"Logo Espace Cameroun",class:"bg-[var(--espace-vert)] md:w-50 h-10 w-30 object-contain transition-transform duration-300 hover:scale-105 hover:shadow-md"})])],-1)])),_:1,__:[0]}),e("nav",_t,[(t(!0),s(B,null,ee(k.value,X=>(t(),fe(F,{key:X.to,to:X.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:G(["fas",X.icon])},null,2),P(" "+x(X.label)+" ",1),X!=null&&X.badge&&X.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":X.to==="/collaborations"&&o.value||X.to==="/messages"&&n.value}]),"aria-label":X.to==="/collaborations"?"Collaborations en attente":X.to==="/messages"?"Messages non lus":""},x(X.badge),11,wt)):S("",!0)]),_:2},1032,["to"]))),128))]),D(Ye),e("div",kt,[l.value?(t(),fe(F,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:Q(()=>[V[1]||(V[1]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),T(u).unreadMessages>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":n.value}]),"aria-label":"Messages non lus"},x(T(u).unreadMessages),3)):S("",!0)]),_:1,__:[1]})):S("",!0),l.value?(t(),fe(F,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:Q(()=>{var X;return[(X=l.value)!=null&&X.photo?(t(),s("img",{key:0,src:c.value+l.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,$t)):(t(),s("div",Ct,V[2]||(V[2]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):S("",!0),$.value?S("",!0):(t(),s("button",{key:2,onClick:J,class:"flex items-center gap-2 px-2 py-2 bg-[var(--espace-or)] text-black rounded-lg shadow hover:bg-blue-500 transition"},[V[3]||(V[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"})],-1)),l.value?S("",!0):(t(),s("span",At,"Installer"))]))]),l.value?(t(),fe(M,{key:0,to:"/jetonMarket","aria-label":"Aller au marchÃ©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:Q(()=>V[4]||(V[4]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[4]})):S("",!0),e("div",Pt,[D(M,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:Q(()=>V[5]||(V[5]=[P(" ? ")])),_:1,__:[5]})])])])])}}}),op=ne(jt,[["__scopeId","data-v-314ef8c2"]]),St={class:"relative"},Mt={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Vt={class:"flex justify-around items-center py-2"},Et=["aria-label"],zt=le({__name:"FooterBar",setup(C){const a=be(),c=Te();ie();const m=b(!1),u=b(!1),l=me(()=>{var o;return[...a.user?[{to:"/home",label:"Accueil",icon:"fa-home"},...(o=a.user.commercant)!=null&&o.email_verified_at?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:c.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]});return xe(()=>c.collaborationsPending,o=>{o>0&&(m.value=!0,setTimeout(()=>m.value=!1,300))}),xe(()=>c.unreadMessages,o=>{o>0&&(u.value=!0,setTimeout(()=>u.value=!1,300))}),(o,n)=>{const v=he("RouterLink");return t(),s("div",St,[D(_e,{name:"slide-up"},{default:Q(()=>[e("nav",Mt,[e("div",Vt,[(t(!0),s(B,null,ee(l.value,i=>(t(),fe(v,{key:i.to,to:i.to,"aria-label":i.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:G(["fas text-lg",i.icon])},null,2),i!=null&&i.badge&&i.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":i.to==="/collaborations"&&m.value||i.to==="/messages"&&u.value}]),"aria-label":i.to==="/collaborations"?"Collaborations en attente":i.to==="/messages"?"Messages non lus":""},x(i.badge),11,Et)):S("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),ap=ne(zt,[["__scopeId","data-v-39f05306"]]),Ut={class:"mb-4"},Lt={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},Tt={class:"relative"},It={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},Ft=["type","value","required","placeholder"],Rt={key:0,class:"text-red-500 text-sm mt-1"},ke=le({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(C){return(a,c)=>(t(),s("div",Ut,[e("label",Lt,x(C.label),1),e("div",Tt,[e("span",It,[e("i",{class:G(`fas ${C.icon}`)},null,2)]),e("input",{type:C.type,value:C.modelValue,onInput:c[0]||(c[0]=m=>a.$emit("update:modelValue",m.target.value)),required:C.required,placeholder:C.placeholder,class:G(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",C.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,Ft)]),C.error?(t(),s("p",Rt,x(C.error),1)):S("",!0)]))}}),qt={class:"h-full overflow-y-scroll pb-16 pt-32 flex items-center justify-center bg-gray-50 px-4"},Ot={class:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 space-y-6"},Nt=["disabled"],Dt={class:"text-gray-700 font-medium"},Wt=["disabled"],Ht={key:0,class:"fas fa-spinner fa-spin mr-2"},Jt={class:"text-center text-sm text-gray-600"},Bt=le({__name:"Login",setup(C){const a=b({login:"",mot_de_passe:"",parrain_code:""}),c=b({}),m=b(!1),u=b(!1),l=ie(),o=Se(),n=pe(),v=be(),i=me(()=>{const E=window.location.hostname;return E==="localhost"||E==="127.0.0.1"?"http://localhost:8000/auth/google":"https://api.espacecameroun.com/auth/google"}),p=async()=>{var E,k,w;try{m.value=!0,n.info("Connexion en cours...",{timeout:2e3}),await v.login({login:a.value.login,mot_de_passe:a.value.mot_de_passe}),n.success("Connexion rÃ©ussie !"),l.push({name:"home"})}catch(r){console.error("Erreur lors de la connexion:",r);const d=((k=(E=r.response)==null?void 0:E.data)==null?void 0:k.message)||"Erreur lors de la connexion. VÃ©rifiez vos informations.";n.error(d),((w=r.response)==null?void 0:w.status)===422&&(c.value=r.response.data.errors||{})}finally{m.value=!1}},y=()=>{u.value=!0,n.info("Redirection vers Google...",{timeout:2e3});const E=new URL(i.value);a.value.parrain_code&&E.searchParams.append("parrain_code",a.value.parrain_code),window.location.href=E.toString()};return ge(()=>{const E=o.query.error;E&&n.error(decodeURIComponent(E)),v.user&&(n.info("Vous Ãªtes dÃ©jÃ  connectÃ©, redirection vers la page d'accueil."),l.push({name:"home"}))}),(E,k)=>{const w=he("router-link");return t(),s("div",qt,[e("div",Ot,[k[5]||(k[5]=e("h1",{class:"text-3xl font-bold text-center text-gray-800"}," Connexion ",-1)),k[6]||(k[6]=e("p",{class:"text-center text-sm text-gray-500"},[P(" AccÃ©dez Ã  votre compte "),e("strong",null,"Espace")],-1)),e("button",{onClick:y,disabled:u.value,class:"w-full flex items-center justify-center gap-2 bg-white border rounded-xl py-3 hover:bg-gray-50 transition shadow-sm"},[k[2]||(k[2]=e("i",{class:"fab fa-google text-red-500"},null,-1)),e("span",Dt,x(u.value?"Redirection...":"Continuer avec Google"),1)],8,Nt),k[7]||(k[7]=e("div",{class:"relative flex items-center justify-center"},[e("span",{class:"absolute bg-white px-2 text-sm text-gray-400"},"ou"),e("hr",{class:"w-full border-gray-300"})],-1)),e("form",{onSubmit:de(p,["prevent"]),class:"space-y-5"},[D(ke,{label:"Email ou TÃ©lÃ©phone",icon:"fa-envelope",modelValue:a.value.login,"onUpdate:modelValue":k[0]||(k[0]=r=>a.value.login=r),type:"text",required:"",placeholder:"Entrez votre email ou tÃ©lÃ©phone",error:c.value.login},null,8,["modelValue","error"]),D(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe,"onUpdate:modelValue":k[1]||(k[1]=r=>a.value.mot_de_passe=r),type:"password",required:"",placeholder:"Entrez votre mot de passe",error:c.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:m.value,class:"w-full bg-[var(--espace-vert)] text-white font-semibold py-3 rounded-xl hover:bg-green-700 transition shadow-md"},[m.value?(t(),s("i",Ht)):S("",!0),e("span",null,x(m.value?"Connexion...":"Se connecter"),1)],8,Wt)],32),e("p",Jt,[k[4]||(k[4]=P(" Pas de compte ? ")),D(w,{to:"/register",class:"text-[var(--espace-vert)] font-semibold hover:underline"},{default:Q(()=>k[3]||(k[3]=[P(" Inscrivez-vous ici ")])),_:1,__:[3]})])])])}}}),rp=ne(Bt,[["__scopeId","data-v-4e044c06"]]),Gt="/assets/LOGO_vert-B0A0Hs9b.png",Kt={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},Xt=le({__name:"Loader",props:{isLoading:{type:Boolean}},setup(C){return(a,c)=>(t(),fe(_e,{name:"fade"},{default:Q(()=>[a.isLoading?(t(),s("div",Kt,c[0]||(c[0]=[e("div",{class:"relative p-6"},[e("img",{src:Gt,alt:"Logo Espace Cameroun",class:"h-20 w-20 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-vert)] border-t-transparent animate-spin"})],-1)]))):S("",!0)]),_:1}))}}),ze=ne(Xt,[["__scopeId","data-v-c4102556"]]),Qt={class:"h-full bg-gray-100 pt-10 px-4 sm:px-2 pb-16"},Zt={class:"h-full w-full overflow-y-scroll"},Yt={key:0},es={key:1,class:"grid grid-cols-1 pt-15 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},ts={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},ss={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},os=["src"],as=["onClick"],rs=["onClick"],ls={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},ns={class:"p-2"},is={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},us=["onClick"],ds={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},cs={class:"text-md font-bold text-[var(--espace-or)] mt-2"},ps={class:"text-sm text-[var(--espace-gris)]"},vs={class:"text-sm text-[var(--espace-gris)] mt-2"},ms={class:"ml-4"},fs={key:2,class:"mt-16 text-center text-[var(--espace-gris)]"},gs={class:"relative bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},bs={class:"text-lg font-semibold text-[var(--espace-vert)]"},xs={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},hs={key:0,class:"grid grid-cols-3 gap-2 mb-2"},ys=["src"],_s=["onClick"],ws={class:"relative"},ks={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto"},$s=["onClick"],Cs={key:0,class:"flex items-center gap-2"},As={class:"flex gap-4 pt-2"},Ps=["disabled"],js={key:0,class:"fas fa-spinner fa-spin mr-2"},Ss=le({__name:"CommercantProduits",setup(C){const a=Ee(),c=be(),m=ie(),u=pe(),l=b(!1),o=b(!1),n=b([]),v=b([]),i=b(!1),p=b(!1),y=b(null),E=b({}),k=b({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),w=b(!1),r=b(""),d=me(()=>v.value.filter(_=>_.nom.toLowerCase().includes(r.value.toLowerCase()))),$=()=>{setTimeout(()=>{w.value=!1},150)},A=b([]),J=b([]),j=b(null),V=me(()=>[...A.value,...J.value.map(_=>URL.createObjectURL(_))]),F=async()=>{l.value=!0;try{const _=await q.get("/commercant/produits");l.value=!1,n.value=_.data.produits.map(f=>({...f,photo_url:f.photos&&f.photos.length>0?f.photos[0]:"https://via.placeholder.com/150"})),n.value.forEach(f=>{E.value[f.id]||(E.value[f.id]=0)})}catch{u.error("Erreur lors du chargement des produits")}finally{l.value=!1}},M=async()=>{try{const _=await q.get("/categories");v.value=_.data.categories}catch{u.error("Erreur lors du chargement des catÃ©gories")}finally{}},X=()=>{k.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},A.value=[],J.value=[],i.value=!0},ce=_=>{y.value=_,k.value={nom:_.nom,description:_.description||"",prix:_.prix,stock:_.quantite,category_id:_.category_id,collaboratif:!!_.collaboratif,marge_min:_.marge_min||0},A.value=_.photos?[..._.photos]:[],J.value=[],E.value[_.id]||(E.value[_.id]=0),p.value=!0},Y=_=>{const f=_.target;if(f.files){const U=Array.from(f.files);J.value.push(...U),j.value&&(j.value.value="")}},L=_=>{if(_<A.value.length)A.value.splice(_,1);else{const f=_-A.value.length;J.value.splice(f,1)}},H=async()=>{var f,U,g,z;o.value=!0;const _=new FormData;_.append("nom",k.value.nom),_.append("description",k.value.description),_.append("prix",k.value.prix.toString()),_.append("stock",k.value.stock.toString()),_.append("category_id",k.value.category_id),_.append("collaboratif",k.value.collaboratif?"1":"0"),_.append("marge_min",k.value.marge_min.toString()),A.value.forEach(R=>_.append("old_photos[]",R)),J.value.forEach(R=>_.append("photos[]",R));try{if(i.value)await q.post("/commercant/produits",_,{headers:{"Content-Type":"multipart/form-data"}}),u.success("Produit ajoutÃ© avec succÃ¨s");else{const R=await q.post(`/commercant/produits/${(f=y.value)==null?void 0:f.id}`,_,{headers:{"Content-Type":"multipart/form-data"}});console.log(R.data),u.success("Produit modifiÃ© avec succÃ¨s")}await F(),a.fetchProducts(),W()}catch(R){((g=(U=R.response)==null?void 0:U.data)==null?void 0:g.message)=="Unauthenticated."&&m.push("login"),u.error(((z=R.response)==null?void 0:z.data.message)||"Erreur lors de la sauvegarde du produit")}finally{o.value=!1}},W=()=>{i.value=!1,p.value=!1,y.value=null,A.value=[],J.value=[]},te=me(()=>_=>E.value[_]||0),ve=_=>{var g;const f=n.value.find(z=>z.id===_),U=(g=f==null?void 0:f.photos)!=null&&g.length?f.photos.length-1:0;E.value[_]=Math.min((E.value[_]||0)+1,U)},K=_=>{E.value[_]=Math.max((E.value[_]||0)-1,0)};return ge(async()=>{await F(),M(),setTimeout(()=>{var _;if(!((_=c.user)!=null&&_.commercant)){u.error("AccÃ¨s rÃ©servÃ© aux commerÃ§ants"),m.push("/");return}},2e3)}),(_,f)=>{const U=he("router-link");return t(),s(B,null,[D(ze,{isLoading:l.value},null,8,["isLoading"]),e("div",Qt,[e("div",Zt,[e("div",{class:"flex justify-between items-center fixed z-10 w-full pr-7"},[f[10]||(f[10]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),P(" Mes Produits ")],-1)),e("button",{onClick:X,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},f[9]||(f[9]=[e("i",{class:"fas fa-plus mr-2"},null,-1),P(" Ajouter un produit ")]))]),l.value?(t(),s("div",Yt,f[11]||(f[11]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):n.value.length?(t(),s("div",es,[(t(!0),s(B,null,ee(n.value,g=>(t(),s("div",{key:g.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",ts,[g.collaboratif?(t(),s("span",ss," Collaboratif ")):S("",!0),D(U,{to:`/produits/${g.id}`,class:"block relative"},{default:Q(()=>[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${te.value(g.id)*100}%)`})},[(t(!0),s(B,null,ee(g.photos,(z,R)=>(t(),s("img",{key:R,src:z,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,os))),128))],4)]),_:2},1032,["to"]),g.photos&&g.photos.length>1?(t(),s("button",{key:1,onClick:z=>K(g.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},f[12]||(f[12]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,as)):S("",!0),g.photos&&g.photos.length>1?(t(),s("button",{key:2,onClick:z=>ve(g.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},f[13]||(f[13]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,rs)):S("",!0),g.photos&&g.photos.length>1?(t(),s("div",ls,[(t(!0),s(B,null,ee(g.photos,(z,R)=>(t(),s("span",{key:R,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":R===te.value(g.id)}])},null,2))),128))])):S("",!0)]),e("div",ns,[e("h2",is,[D(U,{to:`/produits/${g.id}`,class:"block relative"},{default:Q(()=>[P(x(g.nom),1)]),_:2},1032,["to"]),e("button",{onClick:z=>ce(g),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},f[14]||(f[14]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,us)]),e("p",ds,x(g.description||"Aucune"),1),e("p",cs,x(g.prix)+" FCFA",1),e("p",ps,"Stock: "+x(g.quantite),1),e("div",vs,[e("span",null,[f[15]||(f[15]=e("i",{class:"fas fa-eye mr-1"},null,-1)),P(" "+x(g.raw_views_count||0)+" vues",1)]),e("span",ms,[f[16]||(f[16]=e("i",{class:"fas fa-bookmark mr-1"},null,-1)),P(" "+x(g.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",fs,"Aucun produit pour le moment."))]),D(_e,{name:"fade"},{default:Q(()=>{var g;return[i.value||p.value?(t(),s("div",{key:0,class:"pb-8 overflow-y-scroll fixed top-0 pt-30 rlative inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(W,["self"])},[e("div",gs,[e("h2",bs,x(i.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:de(H,["prevent"]),class:"space-y-4 pt-2"},[e("div",null,[f[20]||(f[20]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",xs,[V.value.length?(t(),s("div",hs,[(t(!0),s(B,null,ee(V.value,(z,R)=>(t(),s("div",{key:R,class:"relative w-full h-20"},[e("img",{src:z,class:"w-full h-full object-cover rounded-lg",alt:"PrÃ©visualisation"},null,8,ys),e("button",{onClick:de(ae=>L(R),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},f[17]||(f[17]=[e("i",{class:"fas fa-times"},null,-1)]),8,_s)]))),128))])):S("",!0),e("input",{ref_key:"fileInput",ref:j,type:"file",multiple:"",onChange:Y,class:"hidden",accept:"image/*"},null,544),V.value.length?(t(),s("button",{key:2,type:"button",onClick:f[1]||(f[1]=z=>{var R;return(R=j.value)==null?void 0:R.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},f[19]||(f[19]=[e("i",{class:"fas fa-plus mr-2"},null,-1),P(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:f[0]||(f[0]=z=>{var R;return(R=j.value)==null?void 0:R.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},f[18]||(f[18]=[e("i",{class:"fas fa-camera mr-2"},null,-1),P(" Ajouter une photo ")])))])]),e("div",null,[f[21]||(f[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{"onUpdate:modelValue":f[2]||(f[2]=z=>k.value.nom=z),type:"text",required:"",class:"input-style"},null,512),[[Z,k.value.nom]])]),e("div",null,[f[22]||(f[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),O(e("textarea",{"onUpdate:modelValue":f[3]||(f[3]=z=>k.value.description=z),rows:"3",class:"input-style"},null,512),[[Z,k.value.description]])]),e("div",null,[f[23]||(f[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":f[4]||(f[4]=z=>k.value.prix=z),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Z,k.value.prix,void 0,{number:!0}]])]),e("div",null,[f[24]||(f[24]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),O(e("input",{"onUpdate:modelValue":f[5]||(f[5]=z=>k.value.stock=z),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Z,k.value.stock,void 0,{number:!0}]])]),e("div",ws,[f[25]||(f[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"CatÃ©gorie",-1)),O(e("input",{"onUpdate:modelValue":f[6]||(f[6]=z=>r.value=z),type:"text",placeholder:"Rechercher une catÃ©gorie",class:"input-style",onFocus:f[7]||(f[7]=z=>w.value=!0),onBlur:$},null,544),[[Z,r.value]]),w.value&&d.value.length?(t(),s("ul",ks,[(t(!0),s(B,null,ee(d.value,z=>(t(),s("li",{key:z.id,onClick:R=>{k.value.category_id=z.id,r.value=z.nom},class:"px-2 py-1 hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] cursor-pointer"},x(z.nom),9,$s))),128))])):S("",!0)]),i.value||!((g=y.value)!=null&&g.collaboratif)?(t(),s("div",Cs,[O(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":f[8]||(f[8]=z=>k.value.collaboratif=z)},null,512),[[Xe,k.value.collaboratif]]),f[26]||(f[26]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):S("",!0),e("div",As,[e("button",{type:"submit",disabled:o.value,class:G(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[o.value?(t(),s("i",js)):S("",!0),P(" "+x(i.value?"Ajouter":"Modifier"),1)],10,Ps),e("button",{type:"button",onClick:W,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):S("",!0)]}),_:1})])],64)}}}),lp=ne(Ss,[["__scopeId","data-v-39f78e80"]]),Ms={class:"h-full overflow-y-scroll flex justify-center bg-gray-50 px-4 mb-24 pb-24 relative"},Vs={class:"max-w-md rounded-2xl relative p-8 space-y-6"},Es=["disabled"],zs={class:"text-gray-700 font-medium"},Us={class:"relative"},Ls={class:"relative"},Ts=["disabled"],Is={class:"text-center text-sm text-gray-600"},Fs=le({__name:"Register",setup(C){const a=b({nom:"",telephone:"",mot_de_passe:"",mot_de_passe_confirmation:"",parrain_code:""}),c=b({}),m=b(!1),u=b(!1),l=b(!1),o=b(!1),n=ie(),v=Se(),i=pe(),p=be(),y=me(()=>{const w=window.location.hostname;return`${w==="localhost"||w==="127.0.0.1"?"http://localhost:8000/auth/google":"https://api.espacecameroun.com/auth/google"}?action=register`}),E=async()=>{var w,r,d;try{l.value=!0,i.info("Inscription en cours...",{timeout:2e3}),await p.register(a.value),i.success("Inscription rÃ©ussie !"),n.push({name:"home"})}catch($){console.error("Erreur lors de l'inscription:",$);const A=((r=(w=$.response)==null?void 0:w.data)==null?void 0:r.message)||"Erreur lors de l'inscription. VÃ©rifiez vos informations.";i.error(A),((d=$.response)==null?void 0:d.status)===422&&(c.value=$.response.data.errors||{})}finally{l.value=!1}},k=()=>{o.value=!0,i.info("Redirection vers Google pour inscription...",{timeout:2e3});const w=new URL(y.value);a.value.parrain_code&&w.searchParams.append("parrain_code",a.value.parrain_code),window.location.href=w.toString()};return ge(()=>{const w=v.params.code;w&&(a.value.parrain_code=w);const r=v.query.error;r&&i.error(decodeURIComponent(r)),p.user&&(i.info("Vous Ãªtes dÃ©jÃ  connectÃ©, redirection vers la page d'accueil."),n.push({name:"home"}))}),(w,r)=>{const d=he("router-link");return t(),s("div",Ms,[e("div",Vs,[r[10]||(r[10]=e("h1",{class:"text-3xl font-bold text-center text-gray-800"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),P(" CrÃ©ez votre compte ")],-1)),r[11]||(r[11]=e("p",{class:"text-center text-sm text-gray-500"},[P(" Rejoignez "),e("strong",null,"Espace Cameroun"),P(" et dÃ©couvrez un rÃ©seau de commerÃ§ants et de clients partout au Cameroun. ")],-1)),e("button",{onClick:k,disabled:o.value,class:"w-full flex items-center justify-center gap-2 bg-white border rounded-xl py-3 hover:bg-gray-50 transition shadow-sm"},[r[7]||(r[7]=e("i",{class:"fab fa-google text-red-500"},null,-1)),e("span",zs,x(o.value?"Redirection...":"Sâ€™inscrire avec Google"),1)],8,Es),r[12]||(r[12]=e("div",{class:"relative flex items-center justify-center"},[e("span",{class:"absolute bg-white h-auto px-2 text-sm text-gray-400"},"ou"),e("hr",{class:"w-full border-gray-300"})],-1)),e("form",{onSubmit:de(E,["prevent"]),class:"space-y-5"},[D(ke,{label:"Nom",icon:"fa-user",modelValue:a.value.nom,"onUpdate:modelValue":r[0]||(r[0]=$=>a.value.nom=$),type:"text",required:"",placeholder:"Entrez votre nom",error:c.value.nom},null,8,["modelValue","error"]),D(ke,{label:"TÃ©lÃ©phone",icon:"fa-phone",modelValue:a.value.telephone,"onUpdate:modelValue":r[1]||(r[1]=$=>a.value.telephone=$),type:"tel",required:"",placeholder:"Entrez votre numÃ©ro de tÃ©lÃ©phone",error:c.value.telephone},null,8,["modelValue","error"]),e("div",Us,[D(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe,"onUpdate:modelValue":r[2]||(r[2]=$=>a.value.mot_de_passe=$),type:m.value?"text":"password",required:"",placeholder:"Choisissez un mot de passe",error:c.value.mot_de_passe},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:r[3]||(r[3]=$=>m.value=!m.value)},[e("i",{class:G(m.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e("div",Ls,[D(ke,{label:"Confirmer le mot de passe",icon:"fa-lock",modelValue:a.value.mot_de_passe_confirmation,"onUpdate:modelValue":r[4]||(r[4]=$=>a.value.mot_de_passe_confirmation=$),type:u.value?"text":"password",required:"",placeholder:"Confirmez votre mot de passe",error:c.value.mot_de_passe_confirmation},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:r[5]||(r[5]=$=>u.value=!u.value)},[e("i",{class:G(u.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),D(ke,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:a.value.parrain_code,"onUpdate:modelValue":r[6]||(r[6]=$=>a.value.parrain_code=$),type:"text",placeholder:"Entrez un code de parrainage si vous en avez un",error:c.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:l.value,class:"w-full bg-[var(--espace-vert)] text-white h-auto font-semibold py-3 rounded-xl hover:bg-green-700 transition shadow-md"},[e("i",{class:G([l.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,x(l.value?"Inscription...":"S'inscrire"),1)],8,Ts)],32),e("p",Is,[r[9]||(r[9]=P(" Vous avez dÃ©jÃ  un compte ? ")),D(d,{to:"/login",class:"text-[var(--espace-vert)] font-semibold hover:underline"},{default:Q(()=>r[8]||(r[8]=[P(" Connectez-vous ici ")])),_:1,__:[8]})]),r[13]||(r[13]=e("p",{class:"text-center text-xs text-gray-400 pb-24"},[P(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"}," politique de confidentialitÃ© "),P(". ")],-1))])])}}}),np=ne(Fs,[["__scopeId","data-v-cc092614"]]),Rs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},qs={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},Os={class:"p-6"},Ns={key:0,class:"grid md:grid-cols-3 gap-6"},Ds={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},Ws={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Hs={class:"font-extrabold text-lg mb-2"},Js={class:"mb-2 text-sm opacity-90"},Bs={class:"text-3xl font-extrabold"},Gs={class:"flex flex-col text-sm font-medium text-gray-700"},Ks={key:0,class:"text-xs text-red-600 mt-1"},Xs={class:"flex gap-4"},Qs=["value"],Zs=["src"],Ys={key:0,class:"text-xs text-red-600 mt-1 block"},eo=["disabled"],to={class:"text-xs text-gray-400 mt-4 text-center"},so=le({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(C,{emit:a}){const c=be().user,m=ie(),u=a,l=pe(),o=b(""),n=b(""),v=b(""),i=b(!1),p=b(!1),y=b(!1),E=r=>{o.value=r,i.value=!1,p.value=!1,n.value="",v.value=""},k=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],w=async()=>{var r,d;if(i.value=!v.value,p.value=!n.value,i.value||p.value){l.error("Veuillez remplir tous les champs correctement.");return}y.value=!0;try{const $=await q.post("/upgrade-to-premium",{subscription_type:o.value,payment_service:n.value,phone_number:v.value});y.value=!1,c&&(c.premium=!0),l.success($.data.message),u("upgraded"),u("close")}catch($){if(((d=(r=$.response)==null?void 0:r.data)==null?void 0:d.message)=="Unauthenticated."&&m.push("login"),$.response&&$.response.data){const A=$.response.data;l.error(`Paiement Ã©chouÃ© :Verifiez vos informations et rÃ©essayer${A.message}`)}else l.error("Verifiez vos informations et rÃ©essayer.");console.error($)}finally{y.value=!1}};return(r,d)=>{const $=he("router-link");return r.isOpen?(t(),s("div",Rs,[e("div",qs,[d[18]||(d[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"ğŸš€ Passez Ã  Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",Os,[o.value?(t(),s("div",Ds,[e("div",Ws,[d[12]||(d[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:G([{"bg-green-600 text-white":o.value==="monthly","bg-yellow-400 text-gray-900":o.value==="yearly"},"rounded-lg p-4"])},[e("h4",Hs,x(o.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Js,x(o.value==="monthly"?"AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s.":"Payez moins, profitez plus avec 16% dâ€™Ã©conomie !"),1),e("div",Bs,x(o.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:de(w,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[d[16]||(d[16]=e("h3",{class:"text-xl font-bold mb-2"},"DÃ©tails du paiement",-1)),e("label",Gs,[d[13]||(d[13]=P(" NumÃ©ro de tÃ©lÃ©phone ")),O(e("input",{"onUpdate:modelValue":d[4]||(d[4]=A=>v.value=A),type:"tel",placeholder:"Ex: 696828151",class:G(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":i.value}]),onInput:d[5]||(d[5]=A=>i.value=!v.value),required:""},null,34),[[Z,v.value]]),i.value?(t(),s("span",Ks,"Veuillez entrer un numÃ©ro valide.")):S("",!0)]),d[17]||(d[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Xs,[(t(),s(B,null,ee(k,A=>e("label",{key:A.value,class:G(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":n.value===A.value,"border-gray-300 bg-white":n.value!==A.value,"border-red-500":p.value&&!n.value}])},[O(e("input",{type:"radio",value:A.value,"onUpdate:modelValue":d[6]||(d[6]=J=>n.value=J),class:"hidden"},null,8,Qs),[[Qe,n.value]]),e("img",{src:A.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Zs),e("span",{class:G([{"text-[var(--espace-vert)]":n.value===A.value,"text-gray-700":n.value!==A.value},"font-semibold select-none"])},x(A.label),3)],2)),64))]),p.value&&!n.value?(t(),s("span",Ys," Veuillez sÃ©lectionner un service. ")):S("",!0),e("button",{type:"submit",disabled:y.value||!v.value||!n.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[y.value?(t(),s(B,{key:0},[d[14]||(d[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),d[15]||(d[15]=P(" Veuillez patienter... "))],64)):(t(),s(B,{key:1},[P(" Payer & Souscrire ")],64))],8,eo),e("button",{type:"button",onClick:d[7]||(d[7]=A=>o.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," â† Retour aux plans "),e("p",to," ğŸ”’ Paiement sÃ©curisÃ© via "+x(n.value||"votre service"),1)],32)])):(t(),s("div",Ns,[d[11]||(d[11]=je('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-04ff97e1><div data-v-04ff97e1><h3 class="text-xl font-bold text-gray-800" data-v-04ff97e1>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-04ff97e1>Pour dÃ©buter sans frais</p><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Pas de statistiques dÃ©taillÃ©es </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-04ff97e1> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:d[1]||(d[1]=A=>E("monthly"))},[d[8]||(d[8]=je('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>â­ Populaire</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1> AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s </p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Produits illimitÃ©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Collaborations illimitÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Statistiques dÃ©taillÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Badge â€œPremiumâ€</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:d[0]||(d[0]=de(A=>E("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:d[3]||(d[3]=A=>E("yearly"))},[d[9]||(d[9]=je('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>-16% Ã‰conomie</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Produits illimitÃ©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Collaborations illimitÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Statistiques dÃ©taillÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Badge â€œPremiumâ€</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:d[2]||(d[2]=de(A=>E("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),D($,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:Q(()=>d[10]||(d[10]=[P(" â† Retour ")])),_:1,__:[10]})]))])])])):S("",!0)}}}),oo=ne(so,[["__scopeId","data-v-04ff97e1"]]),ao={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},ro={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},lo={class:"flex justify-center gap-3 mb-4"},no=["onClick"],io={key:0,class:"text-xs text-red-600 mt-1"},uo={class:"flex gap-4"},co=["value"],po=["src"],vo={key:1,class:"text-xs text-red-600 mt-1"},mo={class:"text-center text-lg font-bold mt-6"},fo={class:"text-[var(--espace-vert)]"},go=["disabled"],bo={key:0},xo={key:1},ho={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yo={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},_o=le({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(C,{emit:a}){const c=be().user,m=a,u=pe(),l=b(10),o=b(""),n=b(""),v=b(l.value*100),i=b(!1),p=b(!1),y=b(!1),E=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],k=[10,20,50,100],w=me(()=>l.value>=10&&o.value.trim().length===9&&/^6\d{8}$/.test(o.value)&&n.value!==""),r=()=>{v.value=l.value*100},d=j=>{l.value=j,r()},$=()=>{r()},A=()=>{y.value=!(o.value.trim().length===9&&/^6\d{8}$/.test(o.value))},J=async()=>{if(p.value=!n.value,!w.value){u.error("Veuillez remplir tous les champs correctement.");return}i.value=!0;try{const j=await q.post("/acheter-jetons",{nombre_jetons:l.value,payment_service:n.value,phone_number:o.value});c&&(c.jetons+=l.value),u.success(j.data.message),m("purchased",l.value),m("close")}catch(j){if(j.response&&j.response.data){const V=j.response.data;u.error(`Erreur: ${V.error_message||"Achat Ã©chouÃ©"}. DÃ©tails: ${V.details||"Aucun dÃ©tail."}`)}else u.error("Erreur lors de l'achat. Veuillez rÃ©essayer.");console.error(j)}finally{i.value=!1}};return xe(o,()=>{A()}),(j,V)=>{const F=he("router-link");return t(),s("div",ao,[e("div",ro,[V[7]||(V[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," ğŸ« Acheter des Jetons ",-1)),V[8]||(V[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 100 FCFA",-1)),e("div",lo,[(t(),s(B,null,ee(k,M=>e("button",{key:M,type:"button",onClick:X=>d(M),class:G(["rounded-full px-4 py-2 border font-semibold transition",l.value===M?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},x(M),11,no)),64))]),V[9]||(V[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[P(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),O(e("input",{id:"jetonQuantity","onUpdate:modelValue":V[0]||(V[0]=M=>l.value=M),type:"number",min:"10",placeholder:"Ex: 10",onInput:$,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[Z,l.value,void 0,{number:!0}]]),V[10]||(V[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[P(" NumÃ©ro de tÃ©lÃ©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),O(e("input",{id:"phoneNumber","onUpdate:modelValue":V[1]||(V[1]=M=>o.value=M),type:"tel",placeholder:"Ex: 696428651",onInput:A,class:G(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",y.value?"border-red-500":"border-gray-300"])},null,34),[[Z,o.value]]),y.value?(t(),s("p",io," Veuillez entrer un numÃ©ro valide (9 chiffres, commenÃ§ant par 6). ")):S("",!0),V[11]||(V[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",uo,[(t(),s(B,null,ee(E,M=>e("label",{key:M.value,class:G(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":n.value===M.value,"border-gray-300 bg-white":n.value!==M.value}])},[O(e("input",{type:"radio",value:M.value,"onUpdate:modelValue":V[2]||(V[2]=X=>n.value=X),class:"hidden"},null,8,co),[[Qe,n.value]]),e("img",{src:M.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,po),e("span",{class:G({"text-[var(--espace-vert)] font-bold":n.value===M.value,"text-gray-700":n.value!==M.value})},x(M.label),3)],2)),64))]),p.value&&!n.value?(t(),s("p",vo," Veuillez sÃ©lectionner un service. ")):S("",!0),e("div",mo,[V[4]||(V[4]=P(" Montant total : ")),e("span",fo,x(v.value)+" FCFA",1)]),e("button",{onClick:J,disabled:!w.value||i.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[i.value?(t(),s("span",xo,"veuillez patientez")):(t(),s("span",bo,"Acheter")),i.value?(t(),s("svg",ho,V[5]||(V[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):S("",!0)],8,go),e("button",yo,[D(F,{to:"/jeton-history",onClick:V[3]||(V[3]=M=>m("close"))},{default:Q(()=>V[6]||(V[6]=[P("Annuler")])),_:1,__:[6]})])])])}}}),wo=ne(_o,[["__scopeId","data-v-05239cce"]]);class Ie{constructor(a=0,c="Network Error"){this.status=a,this.text=c}}const ko=()=>{if(!(typeof localStorage>"u"))return{get:C=>Promise.resolve(localStorage.getItem(C)),set:(C,a)=>Promise.resolve(localStorage.setItem(C,a)),remove:C=>Promise.resolve(localStorage.removeItem(C))}},ye={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ko()},He=C=>C?typeof C=="string"?{publicKey:C}:C.toString()==="[object Object]"?C:{}:{},$o=(C,a="https://api.emailjs.com")=>{if(!C)return;const c=He(C);ye.publicKey=c.publicKey,ye.blockHeadless=c.blockHeadless,ye.storageProvider=c.storageProvider,ye.blockList=c.blockList,ye.limitRate=c.limitRate,ye.origin=c.origin||a},et=async(C,a,c={})=>{const m=await fetch(ye.origin+C,{method:"POST",headers:c,body:a}),u=await m.text(),l=new Ie(m.status,u);if(m.ok)return l;throw l},tt=(C,a,c)=>{if(!C||typeof C!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!a||typeof a!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!c||typeof c!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Co=C=>{if(C&&C.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},st=C=>C.webdriver||!C.languages||C.languages.length===0,ot=()=>new Ie(451,"Unavailable For Headless Browser"),Ao=(C,a)=>{if(!Array.isArray(C))throw"The BlockList list has to be an array";if(typeof a!="string")throw"The BlockList watchVariable has to be a string"},Po=C=>{var a;return!((a=C.list)!=null&&a.length)||!C.watchVariable},jo=(C,a)=>C instanceof FormData?C.get(a):C[a],at=(C,a)=>{if(Po(C))return!1;Ao(C.list,C.watchVariable);const c=jo(a,C.watchVariable);return typeof c!="string"?!1:C.list.includes(c)},rt=()=>new Ie(403,"Forbidden"),So=(C,a)=>{if(typeof C!="number"||C<0)throw"The LimitRate throttle has to be a positive number";if(a&&typeof a!="string")throw"The LimitRate ID has to be a non-empty string"},Mo=async(C,a,c)=>{const m=Number(await c.get(C)||0);return a-Date.now()+m},lt=async(C,a,c)=>{if(!a.throttle||!c)return!1;So(a.throttle,a.id);const m=a.id||C;return await Mo(m,a.throttle,c)>0?!0:(await c.set(m,Date.now().toString()),!1)},nt=()=>new Ie(429,"Too Many Requests"),Vo=async(C,a,c,m)=>{const u=He(m),l=u.publicKey||ye.publicKey,o=u.blockHeadless||ye.blockHeadless,n=u.storageProvider||ye.storageProvider,v={...ye.blockList,...u.blockList},i={...ye.limitRate,...u.limitRate};return o&&st(navigator)?Promise.reject(ot()):(tt(l,C,a),Co(c),c&&at(v,c)?Promise.reject(rt()):await lt(location.pathname,i,n)?Promise.reject(nt()):et("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:C,template_id:a,template_params:c}),{"Content-type":"application/json"}))},Eo=C=>{if(!C||C.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},zo=C=>typeof C=="string"?document.querySelector(C):C,Uo=async(C,a,c,m)=>{const u=He(m),l=u.publicKey||ye.publicKey,o=u.blockHeadless||ye.blockHeadless,n=ye.storageProvider||u.storageProvider,v={...ye.blockList,...u.blockList},i={...ye.limitRate,...u.limitRate};if(o&&st(navigator))return Promise.reject(ot());const p=zo(c);tt(l,C,a),Eo(p);const y=new FormData(p);return at(v,y)?Promise.reject(rt()):await lt(location.pathname,i,n)?Promise.reject(nt()):(y.append("lib_version","4.4.1"),y.append("service_id",C),y.append("template_id",a),y.append("user_id",l),et("/api/v1.0/email/send-form",y))},Ne={init:$o,send:Vo,sendForm:Uo,EmailJSResponseStatus:Ie},Lo={class:"space-y-6 pb-16"},To={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},Io={key:0,class:"space-y-2 text-[var(--espace-gris)]"},Fo={class:"flex gap-2"},Ro=["disabled"],qo={key:0,class:"fas fa-spinner fa-spin mr-2"},Oo={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},No={key:0,class:"space-y-4"},Do={class:"flex gap-2"},Wo=["disabled"],Ho={key:0,class:"fas fa-spinner fa-spin mr-2"},Jo=["disabled"],Bo={key:1,class:"space-y-2 text-[var(--espace-gris)]"},Go={key:0,class:"w-24 h-24"},Ko=["src"],Xo={key:0,class:"mt-2 w-24 h-24"},Qo=["src"],Zo={class:"flex gap-2"},Yo=["disabled"],ea={key:0,class:"fas fa-spinner fa-spin mr-2"},ta=le({__name:"userProfile",setup(C){var J,j,V,F,M,X,ce,Y,L,H,W,te,ve,K,_,f;const a=ie(),c=be(),m=pe(),u=b(!1),l=b(!1),o=b(!1),n=b(!1),v=b(!1),i=b(c.user),p=b({nom:((J=i.value)==null?void 0:J.nom)||"",telephone:((j=i.value)==null?void 0:j.telephone)||"",email:((V=i.value)==null?void 0:V.email)||"",ville:((F=i.value)==null?void 0:F.ville)||""}),y=b({nom:((X=(M=i.value)==null?void 0:M.commercant)==null?void 0:X.nom)||"",description:((Y=(ce=i.value)==null?void 0:ce.commercant)==null?void 0:Y.description)||"",email:((H=(L=i.value)==null?void 0:L.commercant)==null?void 0:H.email)||"",telephone:((te=(W=i.value)==null?void 0:W.commercant)==null?void 0:te.telephone)||"",ville:((K=(ve=i.value)==null?void 0:ve.commercant)==null?void 0:K.ville)||"",logo:null,logoPreview:(f=(_=i.value)==null?void 0:_.commercant)!=null&&f.logo?`http://localhost:8000/storage/${i.value.commercant.logo}`:null}),E=b({code:""});Ne.init("oI96z_b6E-d8WjfOM");const k=U=>{var z;const g=(z=U.target.files)==null?void 0:z[0];if(g){if(!g.type.startsWith("image/")){m.error("Veuillez sÃ©lectionner une image.");return}if(g.size>2*1024*1024){m.error("Image trop volumineuse (max 2Mo).");return}y.value.logo=g,y.value.logoPreview=URL.createObjectURL(g)}},w=async(U,g)=>{try{await Ne.send("service_06884pt","template_5x962ru",{to_name:U,code:g}),m.success("Code de vÃ©rification envoyÃ©.")}catch{m.error("Erreur lors de l'envoi de l'email.")}},r=async()=>{var U,g,z;o.value=!0;try{const R=await q.post("/updateProfile",p.value);i.value&&(i.value.nom=R.data.user.nom||"",i.value.telephone=R.data.user.telephone||"",i.value.email=R.data.user.email||"",i.value.ville=R.data.user.ville||""),c.user=R.data.user,u.value=!1,m.success("Profil mis Ã  jour avec succÃ¨s.")}catch(R){((g=(U=R.response)==null?void 0:U.data)==null?void 0:g.message)==="Unauthenticated."&&a.push("login"),m.error(((z=R.response)==null?void 0:z.data.message)||"Erreur lors de la mise Ã  jour.")}finally{o.value=!1}},d=async()=>{var U,g,z,R,ae,re,se;(g=(U=i.value)==null?void 0:U.commercant)!=null&&g.email_verified_at,n.value=!0;try{const N=new FormData;N.append("nom",y.value.nom),N.append("description",y.value.description),N.append("email",y.value.email),N.append("telephone",y.value.telephone),N.append("ville",y.value.ville),y.value.logo&&N.append("logo",y.value.logo);const h=await q.post("/commercant/update",N,{headers:{"Content-Type":"multipart/form-data"}});(z=i.value)!=null&&z.commercant&&(i.value.commercant.nom=h.data.commercant.nom,i.value.commercant.description=h.data.commercant.description,i.value.commercant.email=h.data.commercant.email,i.value.commercant.telephone=h.data.commercant.telephone,i.value.commercant.ville=h.data.commercant.ville,i.value.commercant.logo=h.data.commercant.logo),c.user=i.value,y.value.logoPreview=h.data.commercant.logo?`http://localhost:8000/storage/${h.data.commercant.logo}`:null,l.value=!1,console.log(l.value),m.success("Commerce mis Ã  jour avec succÃ¨s.")}catch(N){((ae=(R=N.response)==null?void 0:R.data)==null?void 0:ae.message)==="Unauthenticated."&&a.push("login"),m.error(((se=(re=N.response)==null?void 0:re.data)==null?void 0:se.message)||"Erreur lors de la mise Ã  jour du commerce.")}finally{n.value=!1}},$=async()=>{var U,g,z,R,ae,re,se;v.value=!0;try{const N=await q.post("/commercant/verify-email",{email:(g=(U=i.value)==null?void 0:U.commercant)==null?void 0:g.email,code:E.value.code});(z=i.value)!=null&&z.commercant&&(i.value.commercant.email_verified_at=N.data.email_verified_at,c.user=i.value),E.value.code="",m.success("CommerÃ§ant crÃ©Ã© avec succÃ¨s !"),window.location.reload()}catch(N){((ae=(R=N.response)==null?void 0:R.data)==null?void 0:ae.message)==="Unauthenticated."&&a.push("login"),m.error(((se=(re=N.response)==null?void 0:re.data)==null?void 0:se.message)||"Erreur lors de la vÃ©rification.")}finally{v.value=!1}},A=async()=>{var U,g,z,R,ae,re,se,N;v.value=!0;try{const h=await q.post("/commercant/resend-verification",{email:(g=(U=i.value)==null?void 0:U.commercant)==null?void 0:g.email});await w(((R=(z=i.value)==null?void 0:z.commercant)==null?void 0:R.email)||"",h.data.verification_code)}catch(h){((re=(ae=h.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&a.push("login"),m.error(((N=(se=h.response)==null?void 0:se.data)==null?void 0:N.message)||"Erreur lors du renvoi.")}finally{v.value=!1}};return xe(()=>c.user,U=>{var g,z,R,ae,re,se;i.value=U||null,p.value={nom:(U==null?void 0:U.nom)||"",telephone:(U==null?void 0:U.telephone)||"",email:(U==null?void 0:U.email)||"",ville:(U==null?void 0:U.ville)||""},y.value={nom:((g=U==null?void 0:U.commercant)==null?void 0:g.nom)||"",description:((z=U==null?void 0:U.commercant)==null?void 0:z.description)||"",email:((R=U==null?void 0:U.commercant)==null?void 0:R.email)||"",telephone:((ae=U==null?void 0:U.commercant)==null?void 0:ae.telephone)||"",ville:((re=U==null?void 0:U.commercant)==null?void 0:re.ville)||"",logo:null,logoPreview:(se=U==null?void 0:U.commercant)!=null&&se.logo?`http://localhost:8000/storage/${U.commercant.logo}`:null}},{immediate:!0}),(U,g)=>{var z,R,ae,re,se,N;return t(),s("div",Lo,[e("section",To,[g[25]||(g[25]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),u.value?(t(),s("form",{key:1,onSubmit:de(r,["prevent"]),class:"space-y-4"},[e("div",null,[g[20]||(g[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),O(e("input",{"onUpdate:modelValue":g[1]||(g[1]=h=>p.value.nom=h),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[Z,p.value.nom]])]),e("div",null,[g[21]||(g[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"TÃ©lÃ©phone",-1)),O(e("input",{"onUpdate:modelValue":g[2]||(g[2]=h=>p.value.telephone=h),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre tÃ©lÃ©phone"},null,512),[[Z,p.value.telephone]])]),e("div",null,[g[22]||(g[22]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),O(e("input",{"onUpdate:modelValue":g[3]||(g[3]=h=>p.value.email=h),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[Z,p.value.email]])]),e("div",null,[g[23]||(g[23]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),O(e("input",{"onUpdate:modelValue":g[4]||(g[4]=h=>p.value.ville=h),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[Z,p.value.ville]])]),e("div",Fo,[e("button",{type:"submit",disabled:o.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[o.value?(t(),s("i",qo)):S("",!0),g[24]||(g[24]=P(" Enregistrer "))],10,Ro),e("button",{onClick:g[5]||(g[5]=h=>u.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",Io,[e("p",null,[g[15]||(g[15]=e("strong",null,"Nom :",-1)),P(" "+x((z=i.value)==null?void 0:z.nom),1)]),e("p",null,[g[16]||(g[16]=e("strong",null,"TÃ©lÃ©phone :",-1)),P(" "+x((R=i.value)==null?void 0:R.telephone),1)]),e("p",null,[g[17]||(g[17]=e("strong",null,"Email :",-1)),P(" "+x(((ae=i.value)==null?void 0:ae.email)||"Non dÃ©fini"),1)]),e("p",null,[g[18]||(g[18]=e("strong",null,"Ville :",-1)),P(" "+x((re=i.value)==null?void 0:re.ville),1)]),e("p",null,[g[19]||(g[19]=e("strong",null,"Statut Premium :",-1)),P(" "+x((se=i.value)!=null&&se.premium?"Actif":"Inactif"),1)]),e("button",{onClick:g[0]||(g[0]=h=>u.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(N=i.value)!=null&&N.commercant?(t(),s("section",Oo,[g[41]||(g[41]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),!i.value.commercant.email_verified_at&&!l.value?(t(),s("div",No,[g[28]||(g[28]=e("p",{class:"text-[var(--espace-gris)]"},"Veuillez vÃ©rifier votre email pour activer votre compte commerÃ§ant.",-1)),e("form",{onSubmit:de($,["prevent"]),id:"form",class:"space-y-4"},[e("div",null,[g[26]||(g[26]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"verification_code"},"Code de vÃ©rification",-1)),O(e("input",{"onUpdate:modelValue":g[6]||(g[6]=h=>E.value.code=h),id:"verification_code",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Entrez le code reÃ§u par email"},null,512),[[Z,E.value.code]])]),e("div",Do,[e("button",{type:"submit",disabled:v.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",v.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"VÃ©rifier le code"},[v.value?(t(),s("i",Ho)):S("",!0),g[27]||(g[27]=P(" VÃ©rifier "))],10,Wo),e("button",{onClick:A,type:"button",disabled:v.value,class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Renvoyer le code"}," Renvoyer ",8,Jo)])],32),e("button",{onClick:g[7]||(g[7]=h=>{console.log(l.value),l.value=!0}),class:"mt-2 w-full sm:w-auto text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors border-2 border-[var(--espace-vert)] cursor-pointer text-center","aria-label":"Modifier le commerce"}," Retour ")])):l.value?S("",!0):(t(),s("div",Bo,[i.value.commercant.logo?(t(),s("div",Go,[e("img",{src:`http://localhost:8000/storage/${i.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,Ko)])):S("",!0),e("p",null,[g[29]||(g[29]=e("strong",null,"Nom du commerce :",-1)),P(" "+x(i.value.commercant.nom),1)]),e("p",null,[g[30]||(g[30]=e("strong",null,"Description :",-1)),P(" "+x(i.value.commercant.description||"Non dÃ©finie"),1)]),e("p",null,[g[31]||(g[31]=e("strong",null,"Email :",-1)),P(" "+x(i.value.commercant.email||"Non dÃ©fini"),1)]),e("p",null,[g[32]||(g[32]=e("strong",null,"TÃ©lÃ©phone :",-1)),P(" "+x(i.value.commercant.telephone),1)]),e("p",null,[g[33]||(g[33]=e("strong",null,"Ville :",-1)),P(" "+x(i.value.commercant.ville),1)]),e("button",{onClick:g[8]||(g[8]=h=>l.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le commerce"}," Modifier ")])),l.value?(t(),s("form",{key:2,onSubmit:de(d,["prevent"]),class:"space-y-4"},[e("div",null,[g[34]||(g[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),O(e("input",{"onUpdate:modelValue":g[9]||(g[9]=h=>y.value.nom=h),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[Z,y.value.nom]])]),e("div",null,[g[35]||(g[35]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),O(e("textarea",{"onUpdate:modelValue":g[10]||(g[10]=h=>y.value.description=h),id:"description_commerce",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[Z,y.value.description]])]),e("div",null,[g[36]||(g[36]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),O(e("input",{"onUpdate:modelValue":g[11]||(g[11]=h=>y.value.email=h),id:"email_commerce",type:"email",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce"},null,512),[[Z,y.value.email]])]),e("div",null,[g[37]||(g[37]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"TÃ©lÃ©phone",-1)),O(e("input",{"onUpdate:modelValue":g[12]||(g[12]=h=>y.value.telephone=h),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"TÃ©lÃ©phone du commerce"},null,512),[[Z,y.value.telephone]])]),e("div",null,[g[38]||(g[38]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),O(e("input",{"onUpdate:modelValue":g[13]||(g[13]=h=>y.value.ville=h),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[Z,y.value.ville]])]),e("div",null,[g[39]||(g[39]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:k,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),y.value.logoPreview?(t(),s("div",Xo,[e("img",{src:y.value.logoPreview,alt:"AperÃ§u logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,Qo)])):S("",!0)]),e("div",Zo,[e("button",{type:"submit",disabled:n.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",n.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[n.value?(t(),s("i",ea)):S("",!0),g[40]||(g[40]=P(" Modifier "))],10,Yo),e("button",{onClick:g[14]||(g[14]=h=>l.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):S("",!0)])):S("",!0)])}}}),sa=ne(ta,[["__scopeId","data-v-7d31276b"]]),oa=le({__name:"MerchantProfile",props:{user:Object},setup(C){const a=pe(),c=b(null),m=b([]);return ge(async()=>{try{const u=await q.get("/commercant/profil");c.value=u.data.commercant,m.value=u.data.produits||[]}catch(u){a.error("Erreur lors du chargement des donnÃ©es du commerÃ§ant: "+(u.message||u))}}),(u,l)=>null}}),aa=ne(oa,[["__scopeId","data-v-ce205108"]]),ra={class:"overflow-y-scroll pb-8 relative bg-gray-100 py-8 sm:px-6"},la={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},na={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},ia={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},ua={class:"relative"},da=["src"],ca={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},pa={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},va={class:"space-y-1"},ma={key:0,class:"text-sm text-gray-500"},fa={key:0,class:"ml-4 flex items-center gap-2"},ga=["src"],ba=["disabled"],xa={class:"flex flex-col sm:flex-row gap-2 items-center"},ha={class:"container mx-auto max-w-4xl"},ya={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},_a={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},wa=le({__name:"Profile",setup(C){const a=()=>{const H=window.location.hostname;return H==="localhost"||H==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},c=me(()=>a()),m=ie(),u=pe(),l=be();l.checkAuth();const o=b(l.user),n=b(!1),v=b(!1),i=b(null),p=b(null),y=b(!1),E=b(!1),k=b(!1),w=me(()=>E.value?aa:sa),r=b(null),d=b(null),$=b(!1);let A=null;const J=()=>{var H;(H=r.value)==null||H.click(),n.value=!1},j=H=>{const W=H.target;if(W.files&&W.files[0]){const te=W.files[0];if(!te.type.startsWith("image/")){u.error("Veuillez sÃ©lectionner une image.");return}if(te.size>2*1024*1024){u.error("Image trop volumineuse (max 2Mo).");return}p.value=te,i.value=URL.createObjectURL(te)}},V=async()=>{try{A=await navigator.mediaDevices.getUserMedia({video:!0}),$.value=!0,n.value=!1,setTimeout(()=>{d.value&&(d.value.srcObject=A)},100)}catch(H){u.error("Impossible d'accÃ©der Ã  la camÃ©ra."),console.error(H)}},F=()=>{if(!d.value)return;const H=d.value,W=document.createElement("canvas");W.width=H.videoWidth,W.height=H.videoHeight;const te=W.getContext("2d");te&&(te.drawImage(H,0,0,W.width,W.height),W.toBlob(ve=>{ve&&(p.value=new File([ve],"photo.jpg",{type:"image/jpeg"}),i.value=URL.createObjectURL(p.value),M())},"image/jpeg"))},M=()=>{A&&(A.getTracks().forEach(H=>H.stop()),A=null),$.value=!1},X=()=>{p.value=null,i.value=null},ce=async()=>{var H,W,te,ve;if(p.value){v.value=!0;try{const K=new FormData;K.append("photo",p.value);const _=await q.post("/profile/photo",K,{headers:{"Content-Type":"multipart/form-data"}});_.data.photo&&(o.value&&(o.value.photo=_.data.photo,l.user=o.value),u.success("Photo mise Ã  jour."),X())}catch(K){((W=(H=K.response)==null?void 0:H.data)==null?void 0:W.message)=="Unauthenticated."&&m.push("login"),u.error(((ve=(te=K.response)==null?void 0:te.data)==null?void 0:ve.message)||"Erreur lors de l'envoi.")}finally{v.value=!1}}},Y=async()=>{y.value=!1},L=H=>{u.success(`Vous avez achetÃ© ${H} jetons !`)};return xe(()=>l.user,H=>{o.value=H||null},{immediate:!0}),ge(()=>{}),Ve(()=>{i.value&&URL.revokeObjectURL(i.value),A&&A.getTracks().forEach(H=>H.stop())}),(H,W)=>{var te,ve,K,_,f,U,g,z,R,ae,re,se,N,h,oe,I,ue,we,Ce,Pe,Ue;return t(),s("div",ra,[e("div",la,[e("div",na,[e("div",ia,[e("div",ua,[(te=o.value)!=null&&te.photo?(t(),s("img",{key:0,src:c.value+((ve=o.value)==null?void 0:ve.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,da)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((U=(f=(_=(K=o.value)==null?void 0:K.niveaux_users)==null?void 0:_.at(-1))==null?void 0:f.parrainage_niveau)==null?void 0:U.couleur)||"#0af"}`})},W[5]||(W[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(g=o.value)!=null&&g.premium?(t(),s("i",ca)):S("",!0),e("button",{onClick:W[0]||(W[0]=Me=>n.value=!n.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},W[6]||(W[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),n.value?(t(),s("div",pa,[e("button",{onClick:V,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," CamÃ©ra "),e("button",{onClick:J,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):S("",!0)]),e("input",{ref_key:"galleryInput",ref:r,type:"file",accept:"image/*",class:"hidden",onChange:j},null,544),e("div",va,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:$e({color:`${((re=(ae=(R=(z=o.value)==null?void 0:z.niveaux_users)==null?void 0:R.at(-1))==null?void 0:ae.parrainage_niveau)==null?void 0:re.couleur)||"#0af"}`})},[P(x((se=o.value)==null?void 0:se.nom)+" ",1),(N=o.value)!=null&&N.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:$e({background:`${((ue=(I=(oe=(h=o.value)==null?void 0:h.niveaux_users)==null?void 0:oe.at(-1))==null?void 0:I.parrainage_niveau)==null?void 0:ue.couleur)||"#0af"}`})}," Premium ",4)):S("",!0)],4),(we=o.value)!=null&&we.subscription_ends_at?(t(),s("span",ma," Jusqu'au "+x(new Date((Ce=o.value)==null?void 0:Ce.subscription_ends_at).toLocaleDateString()),1)):S("",!0)])]),i.value?(t(),s("div",fa,[e("img",{src:i.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,ga),e("button",{onClick:ce,disabled:v.value,class:G(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":v.value}])},x(v.value?"Upload...":"Confirmer"),11,ba),e("button",{onClick:X,class:"text-red-500 hover:text-red-700"}," Annuler ")])):S("",!0)]),e("div",xa,[(Pe=o.value)!=null&&Pe.commercant?S("",!0):(t(),s("button",{key:0,onClick:W[1]||(W[1]=Me=>T(m).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commerÃ§ant ")),(Ue=o.value)!=null&&Ue.premium?S("",!0):(t(),s("button",{key:1,onClick:W[2]||(W[2]=Me=>y.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",ha,[(t(),fe(ut(w.value)))]),y.value?(t(),fe(oo,{key:0,"is-open":y.value,onClose:W[3]||(W[3]=Me=>y.value=!1),onUpgraded:Y},null,8,["is-open"])):S("",!0),k.value?(t(),fe(wo,{key:1,"is-open":k.value,onClose:W[4]||(W[4]=Me=>k.value=!1),onPurchased:L},null,8,["is-open"])):S("",!0),$.value?(t(),s("div",ya,[e("div",_a,[e("video",{ref_key:"videoRef",ref:d,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:F,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:M,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):S("",!0)])}}}),ip=ne(wa,[["__scopeId","data-v-d3d7ca02"]]),ka={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},$a={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},Ca={class:"space-y-2"},Aa=["onClick"],Pa={class:"font-poppins"},ja={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Sa={class:"lg:hidden mb-4"},Ma={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Va=["onClick"],Ea={key:0,class:"space-y-6"},za={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ua={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},La={class:"flex items-center gap-4 mb-4"},Ta=["src"],Ia={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},Fa={class:"text-[var(--espace-vert)] font-semibold"},Ra={class:"text-sm text-[var(--espace-gris)]"},qa={class:"text-sm text-[var(--espace-gris)]"},Oa={class:"text-sm text-[var(--espace-gris)]"},Na={key:0,class:"space-y-6"},Da={key:0,class:"space-y-6"},Wa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ha={class:"text-base font-medium font-poppins"},Ja={class:"text-sm text-[var(--espace-gris)]"},Ba=le({__name:"Parametres",setup(C){const a=b(!1),c=be(),m=ie(),u=pe(),l=c.user,o=b("profile"),n=b({id:(l==null?void 0:l.id)??0,nom:(l==null?void 0:l.nom)??"",email:(l==null?void 0:l.email)??"",telephone:(l==null?void 0:l.telephone)??"",ville:(l==null?void 0:l.ville)??""});c.user={...c.user,...n.value};const v=b({current_password:"",new_password:"",confirm_new_password:""});b({});const i=()=>{const $=window.location.hostname;return $==="localhost"||$==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},p=me(()=>i()),y=b(""),E=me(()=>[...l!=null&&l.commercant?[{to:"/commercant/produits",label:"Espace CommerÃ§ant",icon:"fa-store-alt",description:"GÃ©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des rÃ©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"GÃ©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"GÃ©rez vos collaborations sur des produits"}]),k=async()=>{var $,A,J,j;a.value=!0;try{await q.post("/updateProfile",n.value),localStorage.setItem("user",JSON.stringify(c.user)),u.success("Profil mis Ã  jour avec succÃ¨s",{timeout:3e3})}catch(V){((A=($=V.response)==null?void 0:$.data)==null?void 0:A.message)=="Unauthenticated."&&m.push("login"),u.error(((j=(J=V.response)==null?void 0:J.data)==null?void 0:j.message)||"Erreur lors de la mise Ã  jour du profil")}finally{a.value=!1}},w=async()=>{var $,A,J,j;a.value=!0;try{if(v.value.new_password!==v.value.confirm_new_password){u.error("Les mots de passe ne correspondent pas");return}await q.post("/updatePassword",v.value),u.success("Mot de passe mis Ã  jour avec succÃ¨s",{timeout:3e3}),v.value={current_password:"",new_password:"",confirm_new_password:""},y.value=""}catch(V){((A=($=V.response)==null?void 0:$.data)==null?void 0:A.message)=="Unauthenticated."&&m.push("login"),u.error(((j=(J=V.response)==null?void 0:J.data)==null?void 0:j.message)||"Erreur lors de la mise Ã  jour du mot de passe")}finally{a.value=!1}},r=()=>{c.logout(),m.push({name:"login"})},d=()=>{const $=v.value.new_password;$.length===0?y.value="":$.length<8||!/[A-Za-z]/.test($)||!/[0-9]/.test($)?y.value="weak":/[!@#$%^&*]/.test($)?y.value="strong":y.value="medium"};return xe(()=>v.value.new_password,d),($,A)=>{const J=he("RouterLink");return t(),s(B,null,[D(ze,{isLoading:a.value},null,8,["isLoading"]),e("div",ka,[e("aside",$a,[A[7]||(A[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"ParamÃ¨tres",-1)),e("nav",Ca,[(t(),s(B,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"SÃ©curitÃ©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"DÃ©connexion",icon:"fa-sign-out-alt"}],j=>e("button",{key:j.id,onClick:V=>j.id==="logout"?r():o.value=j.id,class:G(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":o.value===j.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":o.value!==j.id}])},[e("i",{class:G(["fas",j.icon])},null,2),e("span",Pa,x(j.label),1)],10,Aa)),64))])]),e("main",ja,[e("div",Sa,[e("div",Ma,[(t(),s(B,null,ee([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"SÃ©curitÃ©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"DÃ©connexion",icon:"fa-sign-out-alt"}],j=>e("button",{key:j.id,onClick:V=>j.id==="logout"?r():o.value=j.id,class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":o.value===j.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":o.value!==j.id}])},[e("i",{class:G(["fas",j.icon])},null,2),P(" "+x(j.label),1)],10,Va)),64))])]),D(_e,{name:"slide"},{default:Q(()=>[o.value==="profile"?(t(),s("section",Ea,[A[11]||(A[11]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",za,[e("form",{onSubmit:de(k,["prevent"]),class:"space-y-4"},[D(ke,{label:"Nom",icon:"fa-user",modelValue:n.value.nom,"onUpdate:modelValue":A[0]||(A[0]=j=>n.value.nom=j),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),D(ke,{label:"Email",icon:"fa-envelope",modelValue:n.value.email,"onUpdate:modelValue":A[1]||(A[1]=j=>n.value.email=j),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),D(ke,{label:"TÃ©lÃ©phone",icon:"fa-phone",modelValue:n.value.telephone,"onUpdate:modelValue":A[2]||(A[2]=j=>n.value.telephone=j),type:"tel",required:"",placeholder:"Votre numÃ©ro de tÃ©lÃ©phone"},null,8,["modelValue"]),D(ke,{label:"Ville",icon:"fa-city",modelValue:n.value.ville,"onUpdate:modelValue":A[3]||(A[3]=j=>n.value.ville=j),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),A[8]||(A[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre Ã  jour ",-1))],32),e("div",Ua,[A[10]||(A[10]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"AperÃ§u",-1)),e("div",La,[T(l)?(t(),fe(J,{key:0,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:Q(()=>{var j;return[(j=T(l))!=null&&j.photo?(t(),s("img",{key:0,src:p.value+T(l).photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Ta)):(t(),s("div",Ia,A[9]||(A[9]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):S("",!0),e("div",null,[e("p",Fa,x(n.value.nom||"Nonni"),1),e("p",Ra,x(n.value.email||"Non dÃ©fini"),1)])]),e("p",qa,"TÃ©lÃ©phone: "+x(n.value.telephone||"Nonni"),1),e("p",Oa,"Ville: "+x(n.value.ville||"Non dÃ©fini"),1)])])])):S("",!0)]),_:1}),D(_e,{name:"slide"},{default:Q(()=>[o.value==="security"?(t(),s("section",Na,[A[13]||(A[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"SÃ©curitÃ©",-1)),e("form",{onSubmit:de(w,["prevent"]),class:"space-y-4"},[D(ke,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:v.value.current_password,"onUpdate:modelValue":A[4]||(A[4]=j=>v.value.current_password=j),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),D(ke,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:v.value.new_password,"onUpdate:modelValue":A[5]||(A[5]=j=>v.value.new_password=j),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:d},null,8,["modelValue"]),y.value?(t(),s("div",{key:0,class:G(["text-sm",{"text-red-500":y.value==="weak","text-yellow-500":y.value==="medium","text-green-500":y.value==="strong"}])}," Force du mot de passe : "+x(y.value==="weak"?"Faible":y.value==="medium"?"Moyen":"Fort"),3)):S("",!0),D(ke,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:v.value.confirm_new_password,"onUpdate:modelValue":A[6]||(A[6]=j=>v.value.confirm_new_password=j),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),A[12]||(A[12]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):S("",!0)]),_:1}),D(_e,{name:"slide"},{default:Q(()=>[o.value==="links"?(t(),s("section",Da,[A[14]||(A[14]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",Wa,[(t(!0),s(B,null,ee(E.value,j=>(t(),fe(J,{key:j.to,to:j.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:Q(()=>[e("i",{class:G(["fas",j.icon])},null,2),e("div",null,[e("h3",Ha,x(j.label),1),e("p",Ja,x(j.description),1)])]),_:2},1032,["to"]))),128))])])):S("",!0)]),_:1})])])],64)}}}),up=ne(Ba,[["__scopeId","data-v-cbf0dd7b"]]),Ga={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},Ka={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},Xa=["src","alt"],Qa={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},Za={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Ya={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boostÃ©"},er={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},tr={class:"text-xs text-[var(--espace-gris)] truncate"},sr={class:"text-sm font-medium text-[var(--espace-or)]"},or={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},ar={class:"flex items-center gap-1"},rr={class:"flex items-center gap-1"},lr=["aria-label"],nr=le({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(C,{emit:a}){const c=C,m=a,u=pe(),l=Ee(),o=i=>{if(i==null||isNaN(i)||i===0)return"0";const p=Math.abs(i);return p<1e3?i.toString():p<1e4?(i/1e3).toFixed(1).replace(/\.0$/,"")+"k":p<1e6?Math.floor(i/1e3)+"k":p<1e9?(i/1e6).toFixed(1).replace(/\.0$/,"")+"M":(i/1e9).toFixed(1).replace(/\.0$/,"")+"B"},n=b(0),v=async()=>{var i,p;try{console.log(c.produit.id),await l.toggleFavorite(c.produit.id),m("toggle-favorite",c.produit.id)}catch(y){console.error("Erreur lors de la mise Ã  jour des favoris :",y),u.error(((p=(i=y.response)==null?void 0:i.data)==null?void 0:p.message)||"Erreur lors de la mise Ã  jour des favori.")}};return(i,p)=>{var E,k;const y=he("router-link");return t(),s("div",Ga,[D(y,{to:`/produits/${i.produit.id}`,class:"block relative"},{default:Q(()=>[e("div",Ka,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${n.value*100}%)`})},[(t(!0),s(B,null,ee(i.produit.photos||[i.produit.photo_url||"https://via.placeholder.com/150"],(w,r)=>(t(),s("img",{key:r,src:w,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${i.produit.nom} - ${r+1}`},null,8,Xa))),128))],4),i.produit.photos&&i.produit.photos.length>1?(t(),s("div",Qa,[(t(!0),s(B,null,ee(i.produit.photos,(w,r)=>(t(),s("span",{key:r,class:G(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":r===n.value}])},null,2))),128))])):S("",!0)]),i.produit.collaboratif?(t(),s("span",Za," Collaboratif ")):S("",!0),i.produit.boosted?(t(),s("span",Ya," BoostÃ© ")):S("",!0),e("h3",er,x(i.produit.nom),1),e("p",tr,x(i.produit.description||"Aucune description"),1),e("p",sr,x(i.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",or,[e("div",ar,[p[0]||(p[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,x(o((E=i.produit.counts)==null?void 0:E.views_count)),1)]),e("div",rr,[e("button",{onClick:v,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":i.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":i.produit.is_favorited_by}])},null,2)],8,lr),e("span",null,x(o((k=i.produit.counts)==null?void 0:k.favorites_count)),1)])])])}}}),Re=ne(nr,[["__scopeId","data-v-f669a30f"]]),ir={},ur={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm animate-pulse"};function dr(C,a){return t(),s("div",ur,a[0]||(a[0]=[je('<div class="w-full h-32 bg-gray-300 rounded-lg mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-3/4 mb-2" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/2 mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-1/3 mb-2" data-v-4ed20fce></div><div class="flex justify-between mt-2" data-v-4ed20fce><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div></div>',5)]))}const Ke=ne(ir,[["render",dr],["__scopeId","data-v-4ed20fce"]]),cr={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},pr={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},vr={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},mr=["onClick","aria-label","aria-current"],fr=["aria-label","aria-expanded"],gr={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},br={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},xr={class:"flex-1 min-w-[120px]"},hr={class:"flex-1 min-w-[120px]"},yr=["value"],_r={class:"flex-1 min-w-[100px]"},wr={class:"flex-1 min-w-[100px]"},kr={class:"flex-1 min-w-[120px]"},$r=["value"],Cr={class:"flex-1 min-w-[100px]"},Ar=["aria-busy"],Pr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},jr=le({__name:"Home",setup(C){const a=ie(),c=Ee(),m=be(),u=b([]),l=pe(),o=b(!1),n=b({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),v=b(["Douala","YaoundÃ©","Bamenda","Buea","Garoua"]),i=b(null),p=b(null),y=b(!1);let E=0;const k=async()=>{try{const V=await q.get("/categories");u.value=V.data.categories}catch(V){console.error("Erreur lors du chargement des catÃ©gories:",V),l.error("Erreur lors du chargement des catÃ©gories.")}},w=()=>{if(n.value.prix_min&&n.value.prix_max&&parseFloat(n.value.prix_min)>parseFloat(n.value.prix_max)){l.error("Le prix minimum doit Ãªtre infÃ©rieur au prix maximum.");return}c.fetchProducts(n.value,!0),o.value=!1},r=()=>{n.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},o.value=!1},d=V=>{c.setSort(V)},$=()=>Object.values(n.value).filter(V=>V!=="").length,A=V=>{j(V)},J=V=>{j(V)},j=async V=>{var Y,L,H;const F=(Y=m.user)==null?void 0:Y.id,M=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),X=new Date().toISOString().split("T")[0],ce=localStorage.getItem("lastResetDate");if((!ce||ce!==X)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",X)),!M[V])try{setTimeout(async()=>{const W=await q.post("/record_view",{product_id:V,user_id:F??null})},1e3),M[V]=!0,localStorage.setItem("viewedProducts",JSON.stringify(M))}catch(W){console.error("Erreur lors de l'enregistrement de la vue:",W),l.error(((H=(L=W.response)==null?void 0:L.data)==null?void 0:H.message)||"Erreur lors de l'enregistrement de la vue.")}};return ge(async()=>{try{if(console.log("Produits au montage:",c.products),await c.fetchProducts({},!0,!0),console.log("Produits chargÃ©s:",c.products,"isLoading:",c.isLoading),await k(),!m.user){a.push("/login");return}}catch(V){console.error("Erreur lors du chargement des produits ou catÃ©gories:",V),V==="Unauthenticated."&&a.push("login"),l.error("Erreur lors du chargement des produits. Veuillez rÃ©essayer.")}i.value=new IntersectionObserver(V=>{console.log("Observer dÃ©clenchÃ©, isLoadingMore:",y.value,"hasMore:",c.hasMore),V[0].isIntersecting&&!y.value&&c.hasMore&&(y.value=!0,dt(()=>{E=window.scrollY}),c.fetchProducts(n.value).finally(()=>{y.value=!1}))},{threshold:.1}),p.value&&i.value.observe(p.value)}),+ct(()=>{window.scrollTo(0,E)}),Ve(()=>{i.value&&p.value&&i.value.unobserve(p.value)}),(V,F)=>(t(),s("div",cr,[e("div",pr,[e("div",vr,[(t(),s(B,null,ee([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-bookmark"}],M=>e("button",{key:M.id,onClick:X=>d(M.id),class:G(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":T(c).sort===M.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":T(c).sort!==M.id}]),"aria-label":`Trier par ${M.label}`,"aria-current":T(c).sort===M.id?"true":void 0},[e("i",{class:G(["fas",M.icon])},null,2),P(" "+x(M.label),1)],10,mr)),64)),e("button",{onClick:F[0]||(F[0]=M=>o.value=!o.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":o.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":o.value},[F[7]||(F[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),$()>0?(t(),s("span",gr,x($()),1)):S("",!0)],8,fr)]),D(_e,{name:"slide-up"},{default:Q(()=>[o.value?(t(),s("div",br,[e("form",{onSubmit:de(w,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",xr,[O(e("input",{"onUpdate:modelValue":F[1]||(F[1]=M=>n.value.search=M),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[Z,n.value.search]])]),e("div",hr,[O(e("select",{"onUpdate:modelValue":F[2]||(F[2]=M=>n.value.category=M),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[F[8]||(F[8]=e("option",{value:""},"Toutes les CatÃ©gories",-1)),(t(!0),s(B,null,ee(u.value,M=>(t(),s("option",{key:M.id,value:M.id},x(M.nom),9,yr))),128))],512),[[Ae,n.value.category]])]),e("div",_r,[O(e("input",{"onUpdate:modelValue":F[3]||(F[3]=M=>n.value.prix_min=M),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[Z,n.value.prix_min]])]),e("div",wr,[O(e("input",{"onUpdate:modelValue":F[4]||(F[4]=M=>n.value.prix_max=M),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[Z,n.value.prix_max]])]),e("div",kr,[O(e("select",{"onUpdate:modelValue":F[5]||(F[5]=M=>n.value.ville=M),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[F[9]||(F[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(B,null,ee(v.value,M=>(t(),s("option",{key:M,value:M},x(M),9,$r))),128))],512),[[Ae,n.value.ville]])]),e("div",Cr,[O(e("select",{"onUpdate:modelValue":F[6]||(F[6]=M=>n.value.collaboratif=M),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},F[10]||(F[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[Ae,n.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[F[12]||(F[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:r,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"RÃ©initialiser les filtres"},F[11]||(F[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):S("",!0)]),_:1}),D(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:Q(()=>[T(c).isLoading&&T(c).products.length===0?(t(!0),s(B,{key:0},ee(T(c).isLoading?8:0,M=>(t(),fe(Ke,{key:"skeleton-init-"+M}))),128)):S("",!0),(t(!0),s(B,null,ee(T(c).products,M=>(t(),fe(Re,{key:M.id,produit:M,onMouseover:X=>A(M.id),onTouchstart:X=>J(M.id)},null,8,["produit","onMouseover","onTouchstart"]))),128)),y.value?(t(!0),s(B,{key:1},ee(y.value?4:0,M=>(t(),fe(Ke,{key:"skeleton-more-"+M}))),128)):S("",!0)]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:p,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":y.value},[T(c).hasMore?S("",!0):(t(),s("p",Pr,"Aucun produit supplÃ©mentaire"))],8,Ar)])]))}}),dp=ne(jr,[["__scopeId","data-v-a0d08221"]]),Sr={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},Mr={class:"container mx-auto max-w-5xl"},Vr={key:0,class:"text-center text-[var(--espace-gris)]"},Er={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},zr={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},Ur={class:"w-full lg:w-1/2 relative"},Lr={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},Tr=["src","alt"],Ir={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Fr={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boostÃ©"},Rr={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},qr={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"CommerÃ§ant Pro"},Or={class:"w-full lg:w-1/2"},Nr={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},Dr={class:"text-sm text-[var(--espace-gris)] mb-3"},Wr={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},Hr={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},Jr={class:"flex items-center gap-3"},Br={class:"flex items-center gap-1"},Gr={class:"flex items-center gap-1"},Kr=["aria-label"],Xr={class:"border-t pt-3 mt-3"},Qr={class:"text-xs text-[var(--espace-gris)] mb-1"},Zr={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"CommerÃ§ant vÃ©rifiÃ©",title:"CommerÃ§ant vÃ©rifiÃ©"},Yr={class:"text-xs text-[var(--espace-gris)] mb-1"},el={class:"text-xs text-[var(--espace-gris)] mb-1"},tl={class:"text-xs text-[var(--espace-gris)] mb-2"},sl={class:"flex flex-col sm:flex-row gap-3 mt-4"},ol=["disabled","aria-label"],al={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},rl={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},ll={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},nl={class:"text-xs text-[var(--espace-gris)] mb-3"},il=["aria-label"],ul={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},dl={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},cl={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},pl={class:"text-sm text-[var(--espace-gris)]"},vl={class:"text-[var(--espace-or)]"},ml={class:"flex gap-4"},fl={key:0,class:"mt-6"},gl=["aria-busy"],bl={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},xl=le({__name:"Produit",setup(C){const a=Ee(),c=Se(),m=ie(),u=be(),l=Te(),o=pe();b([]);const n=b(!1),v=b(null),i=b(null),p=b(null),y=b(!1),E=b(0),k=b(0),w=[0,500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],d=_=>{if(_==null||isNaN(_)||_===0)return"0";const f=Math.abs(_);return f<1e3?_.toString():f<1e4?(_/1e3).toFixed(1).replace(/\.0$/,"")+"k":f<1e6?Math.floor(_/1e3)+"k":f<1e9?(_/1e6).toFixed(1).replace(/\.0$/,"")+"M":(_/1e9).toFixed(1).replace(/\.0$/,"")+"B"},$=async()=>{try{a.isLoading=!0,await a.viewProduct(c.params.id),a.isLoading=!1,a.product.photos&&!a.product.photo_url&&(a.product.photo_url=a.product.photos[0]),await a.fetchProducts({category:a.product.category_id,per_page:8},!0)}catch(_){o.error(_||"Erreur lors du chargement du produit"),m.push({name:"home"})}finally{a.isLoading=!1}},A=()=>{var _;if(!u.user){o.error("Veuillez vous connecter pour collaborer"),m.push({name:"login"});return}if(((_=u.user.commercant)==null?void 0:_.id)===a.product.commercant_id){o.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!a.product.collaboratif){o.error("Ce produit nâ€™est pas ouvert Ã  la collaboration");return}v.value=a.product.prix+(a.product.marge_min||500),n.value=!0},J=async()=>{if(!v.value||v.value<a.product.prix+(a.product.marge_min||0)){o.error(`Le prix de revente doit Ãªtre supÃ©rieur ou Ã©gal Ã  ${a.product.prix+(a.product.marge_min||0)} XAF`);return}await l.addCollaboration({produit_id:a.product.id,prix_revente:v.value})&&(o.success("Demande de collaboration envoyÃ©e",{timeout:3e3}),n.value=!1,v.value=null)},j=()=>{n.value=!1,v.value=null},V=()=>{m.push({path:`/commercant/produits/${a.product.id}/edit`})},F=async()=>{var _,f,U;if(!u.user||((_=u.user.commercant)==null?void 0:_.id)!==a.product.commercant_id){o.error("Seul le commerÃ§ant propriÃ©taire peut booster ce produit");return}if(u.user.jetons<k.value){o.error(`Pas assez de Jetons. Il vous faut ${k.value} Jetons pour ce boost.`);return}try{const g=await q.post(`/produits/${a.product.id}/boost`,{target_views:E.value});u.user.jetons-=k.value,a.product.boosted=!0,o.success(g.data.message||"Produit boostÃ© avec succÃ¨s !"),y.value=!1}catch(g){o.error(((U=(f=g.response)==null?void 0:f.data)==null?void 0:U.message)||"Erreur lors du boostage du produit")}},M=()=>{var _;if(!u.user||((_=u.user.commercant)==null?void 0:_.id)!==a.product.commercant_id){o.error("Seul le commerÃ§ant propriÃ©taire peut booster ce produit");return}y.value=!0,X()},X=()=>{const _=w.indexOf(E.value);k.value=_!==-1?Math.max(5,r[_]):5};xe(E,()=>{X()});const ce=_=>{L(_)},Y=_=>{L(_)},L=async _=>{var R,ae,re;const f=(R=u.user)==null?void 0:R.id;if(!f){o.error("Connexion requise pour enregistrer la vue.");return}const U=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),g=new Date().toISOString().split("T")[0],z=localStorage.getItem("lastResetDate");if((!z||z!==g)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",g)),!U[_])try{setTimeout(async()=>{const se=await q.post("/record_view",{product_id:_,user_id:f})},1e3),U[_]=!0,localStorage.setItem("viewedProducts",JSON.stringify(U))}catch(se){console.error("Erreur lors de l'enregistrement de la vue:",se),o.error(((re=(ae=se.response)==null?void 0:ae.data)==null?void 0:re.message)||"Erreur lors de l'enregistrement de la vue.")}},H=async()=>{var _,f;try{await a.toggleFavorite(a.product.id)}catch(U){o.error(((f=(_=U.response)==null?void 0:_.data)==null?void 0:f.message)||"Erreur lors de la mise Ã  jour des favoris.")}},W=(_,f,U)=>{var z;if(!u.user){o.error("Veuillez vous connecter pour dÃ©marrer une conversation"),m.push({name:"login"});return}const g={id:_,name:f,commercant_id:a.product.commercant_id,name_user:((z=u.user)==null?void 0:z.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(g)),m.push(`/messages/${U}`)},te=b(0),ve=()=>{var f;const _=(((f=a.product.photos)==null?void 0:f.length)||1)-1;te.value=Math.min(te.value+1,_)},K=()=>{te.value=Math.max(te.value-1,0)};return ge(()=>{$(),l.initializeState(),i.value=new IntersectionObserver(_=>{_[0].isIntersecting&&!a.isLoading&&a.hasMore&&a.fetchProducts({category:a.product.category_id,per_page:8},!1)},{threshold:.1}),p.value&&i.value.observe(p.value)}),Ve(()=>{i.value&&p.value&&i.value.unobserve(p.value)}),xe(()=>c.params.id,_=>{_&&($(),te.value=0)}),xe(a.product,_=>{_&&(a.page=1,a.fetchProducts({category:_.category_id,per_page:4},!0),te.value=0)}),(_,f)=>{const U=he("router-link");return t(),s(B,null,[D(ze,{isLoading:T(a).isLoading},null,8,["isLoading"]),e("div",Sr,[e("div",Mr,[T(a).isLoading?(t(),s("div",Vr)):T(a).product?(t(),s("div",Er,[D(_e,{name:"slide-up"},{default:Q(()=>{var g,z,R,ae,re,se,N,h,oe,I,ue,we,Ce,Pe,Ue,Me,Je;return[e("div",zr,[e("div",Ur,[e("div",Lr,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${te.value*100}%)`})},[(t(!0),s(B,null,ee(T(a).product.photos||[T(a).product.photo_url||"https://via.placeholder.com/300"],(qe,Le)=>(t(),s("img",{key:Le,src:qe,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${T(a).product.nom} - ${Le+1}`},null,8,Tr))),128))],4),T(a).product.photos&&T(a).product.photos.length>1?(t(),s("button",{key:0,onClick:K,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image prÃ©cÃ©dente"},f[5]||(f[5]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):S("",!0),T(a).product.photos&&T(a).product.photos.length>1?(t(),s("button",{key:1,onClick:ve,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},f[6]||(f[6]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):S("",!0),T(a).product.photos&&T(a).product.photos.length>1?(t(),s("div",Ir,[(t(!0),s(B,null,ee(T(a).product.photos,(qe,Le)=>(t(),s("span",{key:Le,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Le===te.value}])},null,2))),128))])):S("",!0)]),T(a).product.boosted?(t(),s("span",Fr," BoostÃ© ")):S("",!0),T(a).product.collaboratif?(t(),s("span",Rr," Collaboratif ")):S("",!0),(g=T(u).user)!=null&&g.premium?(t(),s("span",qr," Premium ")):S("",!0)]),e("div",Or,[e("h1",Nr,x(T(a).product.nom),1),e("p",Dr,x(T(a).product.description||"Aucune description disponible"),1),e("p",Wr,x(T(a).product.prix)+" XAF ",1),e("div",Hr,[e("p",null,[f[7]||(f[7]=e("strong",null,"CatÃ©gorie :",-1)),P(" "+x(((z=T(a).product.category)==null?void 0:z.nom)||"Non spÃ©cifiÃ©e"),1)]),e("p",null,[f[8]||(f[8]=e("strong",null,"QuantitÃ© :",-1)),P(" "+x(T(a).product.quantite),1)]),e("p",null,[f[9]||(f[9]=e("strong",null,"Ville :",-1)),P(" "+x(T(a).product.ville||"Non spÃ©cifiÃ©e"),1)]),e("p",null,[f[10]||(f[10]=e("strong",null,"AjoutÃ© le :",-1)),P(" "+x(new Date(T(a).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",Jr,[e("div",Br,[f[11]||(f[11]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,x(d((R=T(a).product.counts)==null?void 0:R.views_count))+" vues",1)]),e("div",Gr,[e("i",{class:G(["fas fa-bookmark text-[10px]",{"text-[var(--espace-or)]":T(a).product.is_favorited_by}])},null,2),e("span",null,x(d((ae=T(a).product.counts)==null?void 0:ae.favorites_count))+" favoris",1)])])]),e("button",{onClick:H,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":T(a).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark mr-2 text-sm",{"text-[var(--espace-or)]":T(a).product.is_favorited_by}])},null,2),P(" "+x(T(a).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,Kr),e("div",Xr,[f[16]||(f[16]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," Ã€ propos du commerÃ§ant ",-1)),e("p",Qr,[e("strong",null,x((re=T(a).product.commercant)==null?void 0:re.nom),1),(se=T(a).product.commercant)!=null&&se.verified?(t(),s("span",Zr,f[12]||(f[12]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):S("",!0)]),e("p",Yr,x(((N=T(a).product.commercant)==null?void 0:N.description)||"Aucune description disponible"),1),e("p",el,[f[13]||(f[13]=e("strong",null,"Ville :",-1)),P(" "+x(((h=T(a).product.commercant)==null?void 0:h.ville)||"NonspÃ©cifiÃ©e"),1)]),e("p",tl,[f[14]||(f[14]=e("strong",null,"Note :",-1)),P(" "+x(Number((oe=T(a).product.commercant)==null?void 0:oe.rating).toFixed(1)||"Non Ã©valuÃ©")+" / 5 ",1)]),D(U,{to:`/commercants/${T(a).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commerÃ§ant"},{default:Q(()=>f[15]||(f[15]=[P(" Voir le profil du commerÃ§ant ")])),_:1,__:[15]},8,["to"])]),e("div",sl,[T(a).product.collaboratif&&((ue=(I=T(u).user)==null?void 0:I.commercant)==null?void 0:ue.id)!==T(a).product.commercant_id?(t(),s("button",{key:0,onClick:A,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},f[17]||(f[17]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),P(" Collaborer ")]))):S("",!0),((Ce=(we=T(u).user)==null?void 0:we.commercant)==null?void 0:Ce.id)===T(a).product.commercant_id?(t(),s("button",{key:1,onClick:V,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},f[18]||(f[18]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),P(" Modifier le produit ")]))):S("",!0),((Ue=(Pe=T(u).user)==null?void 0:Pe.commercant)==null?void 0:Ue.id)===T(a).product.commercant_id?(t(),s("button",{key:2,onClick:M,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!T(a).product.boosted,"aria-label":T(a).product.boosted?"Boost dÃ©jÃ  actif":"Personnaliser le boost"},f[19]||(f[19]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,ol)):S("",!0),((Je=(Me=T(u).user)==null?void 0:Me.commercant)==null?void 0:Je.id)!==T(a).product.commercant_id?(t(),s("button",{key:3,onClick:f[0]||(f[0]=qe=>W(T(a).product.id,T(a).product.nom,T(a).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},f[20]||(f[20]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),P(" Envoyer un message ")]))):S("",!0)])])])]}),_:1})])):(t(),s("div",al," Produit non trouvÃ©. ")),D(_e,{name:"fade"},{default:Q(()=>[n.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(j,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",rl,[e("h2",ll," Collaborer sur "+x(T(a).product.nom),1),e("p",nl," Proposez un prix de revente (minimum : "+x(T(a).product.prix+(T(a).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:de(J,["prevent"]),class:"space-y-3"},[e("div",null,[f[21]||(f[21]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),O(e("input",{id:"prix_revente","onUpdate:modelValue":f[1]||(f[1]=g=>v.value=g),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${T(a).product.nom}`,required:""},null,8,il),[[Z,v.value,void 0,{number:!0}]]),v.value?(t(),s("p",ul," Marge potentielle : "+x(v.value-T(a).product.prix)+" XAF ",1)):S("",!0)]),e("div",{class:"flex gap-3"},[f[22]||(f[22]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:j,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):S("",!0)]),_:1}),D(_e,{name:"fade"},{default:Q(()=>[y.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f[4]||(f[4]=de(g=>y.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",dl,[f[27]||(f[27]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:de(F,["prevent"]),class:"space-y-6"},[e("div",null,[f[23]||(f[23]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),O(e("input",{type:"range","onUpdate:modelValue":f[2]||(f[2]=g=>E.value=g),min:"0",max:"10000",step:"500",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:X},null,544),[[Z,E.value,void 0,{number:!0}]]),e("p",cl,x(E.value)+" vues ",1)]),e("p",pl,[f[24]||(f[24]=P("CoÃ»t estimÃ© : ")),e("strong",vl,x(k.value),1),f[25]||(f[25]=P(" Jetons"))]),e("div",ml,[f[26]||(f[26]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:f[3]||(f[3]=g=>y.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):S("",!0)]),_:1})]),T(a).products?(t(),s("div",fl,[f[28]||(f[28]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),D(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:Q(()=>[(t(!0),s(B,null,ee(T(a).products,g=>(t(),fe(Re,{key:g.id,produit:g,onMouseover:z=>ce(g.id),onTouchstart:z=>Y(g.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:p,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":T(a).isLoading},[T(a).hasMore?S("",!0):(t(),s("p",bl," Aucun produit supplÃ©mentaire "))],8,gl)])):S("",!0)])],64)}}}),cp=ne(xl,[["__scopeId","data-v-e258f430"]]),hl="/assets/LOGO_blanc-Ckb3us16.png",yl={class:"relative bg-green-500"},_l={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},wl={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},kl={class:"flex items-center gap-1 sm:gap-3"},$l={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},Cl=["aria-label"],Al={class:"flex items-center gap-2"},Pl=["src"],jl={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},Sl={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},Ml={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Vl={class:"flex justify-around items-center py-2"},El=["aria-label"],zl=le({__name:"AppHeader",setup(C){var J;const a=be(),c=Te(),m=ie(),u=a.user;Se();const l=b(!1),o=b(!1),n=b(!1),v=b(""),i=Ee(),p=b(!1),y=b(null),E=b(!1),k=me(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...a.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...a.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:c.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),w=async()=>{var j,V;if(a.user)try{const F=await q.get("/user/badges");c.saveCollaborationsToLocalStorage(F.data.collaborations_pending.map(M=>({produit_id:M.produit_id,prix_revente:M.prix_revente,status:M.status,created_at:M.created_at})))}catch(F){((V=(j=F.response)==null?void 0:j.data)==null?void 0:V.message)=="Unauthenticated."&&m.push("login"),console.error("Erreur lors du chargement des badges:",F)}};xe(()=>a.user,j=>{j&&(w(),c.initializeState())},{immediate:!0}),xe(()=>c.collaborationsPending,()=>{c.collaborationsPending>0&&(o.value=!0,setTimeout(()=>o.value=!1,300))});const r=async()=>{if(v.value.trim())try{await i.fetchProducts({search:v.value.trim()},!0),v.value="",p.value=!1}catch(j){console.error("Erreur lors de la recherche:",j)}},d=j=>{if(E.value){E.value=!1;return}y.value&&!y.value.contains(j.target)&&(p.value=!1)},$=async()=>{p.value=!p.value,p.value&&(E.value=!0,await Oe())},A=()=>{m.push("/messages")};return(J=a.user)!=null&&J.id&&window.Echo.channel(`chat.${a.user.id}`).listen("MessageSent",j=>{var V;((V=a.user)==null?void 0:V.id)===j.receiver_id&&c.saveUnreadMessagesToLocalStorage(j.unread_messages)}),ge(()=>{a.user&&(w(),c.initializeState()),document.addEventListener("click",d)}),Ve(()=>{document.removeEventListener("click",d)}),(j,V)=>{const F=he("RouterLink");return t(),s("div",yl,[e("header",_l,[e("div",wl,[e("div",kl,[D(F,{to:"/","aria-label":"Retour Ã  l'accueil"},{default:Q(()=>V[2]||(V[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:hl,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),V[3]||(V[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",$l,[(t(!0),s(B,null,ee(k.value,M=>(t(),fe(F,{key:M.to,to:M.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:G(["fas",M.icon])},null,2),P(" "+x(M.label)+" ",1),M.badge>0?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":M.to==="/panier"&&l.value||M.to==="/collaborations"&&o.value||M.to==="/commandes"&&n.value}]),"aria-label":M.to==="/panier"?"Nombre d'articles dans le panier":M.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},null,10,Cl)):S("",!0)]),_:2},1032,["to"]))),128))]),D(Ye),e("div",Al,[e("button",{onClick:$,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},V[4]||(V[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:A,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},V[5]||(V[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(B,null,ee(k.value.filter(M=>T(a).user?M.to==="/profil":["/login","/register"].includes(M.to)),M=>(t(),fe(F,{key:M.to,to:M.to,class:"relative flex items-center justify-center","aria-label":M.label},{default:Q(()=>{var X;return[(X=T(u))!=null&&X.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${T(u).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Pl)):(t(),s("div",jl,[e("i",{class:G([`fas ${M.icon}`,"text-2xl text-gray-100"])},null,2)])),M.badge>0&&M.to==="/collaborations"?(t(),s("span",{key:2,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":M.to==="/collaborations"&&o.value}]),"aria-label":"Collaborations en attente"},x(M.badge),3)):S("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),p.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:y,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",Sl,[O(e("input",{"onUpdate:modelValue":V[0]||(V[0]=M=>v.value=M),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ze(r,["enter"])},null,544),[[Z,v.value]]),e("button",{onClick:r,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},V[6]||(V[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:V[1]||(V[1]=M=>p.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},V[7]||(V[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):S("",!0)]),D(_e,{name:"slide-up"},{default:Q(()=>[e("nav",Ml,[e("div",Vl,[(t(!0),s(B,null,ee(k.value,M=>(t(),fe(F,{key:M.to,to:M.to,"aria-label":M.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:Q(()=>[e("i",{class:G(["fas text-lg",M.icon])},null,2),M.badge>0?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":M.to==="/panier"&&l.value||M.to==="/collaborations"&&o.value||M.to==="/commandes"&&n.value}]),"aria-label":M.to==="/panier"?"Nombre d'articles dans le panier":M.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},x(M.badge),11,El)):S("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),it=ne(zl,[["__scopeId","data-v-843f6d31"]]),Ul={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},Ll={class:"container mx-auto px-4 sm:px-6 py-6"},Tl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Il={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Fl={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Rl={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},ql={key:2,class:"text-sm text-[var(--espace-gris)] italic"},Ol={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Nl=["value"],Dl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Wl=["value"],Hl={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},Jl=["value"],Bl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},Gl={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},Kl={key:1,class:"text-base text-[var(--espace-gris)] italic"},Xl={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Ql=["onClick"],Zl=le({__name:"CommercantDashboard",setup(C){const a=ie(),c=pe(),m=b([]),u=b([]),l=b(null),o=b(!1),n=b({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),v=b({nom:"",description:"",ville:""}),i=b(["Douala","YaoundÃ©","Bamenda","Buea","Garoua"]),p=async()=>{o.value=!0;try{const[w,r,d]=await Promise.all([q.get("/commercant/produits"),q.get("/categories"),q.get("/commercant/profil")]);o.value=!1,m.value=w.data.produits.map($=>{var A;return{...$,commercant_id:((A=l.value)==null?void 0:A.id)||""}}),u.value=r.data.categories,l.value=d.data.commercant,v.value={nom:l.value.nom,description:l.value.description||"",ville:l.value.ville||""}}catch{c.error("Erreur lors du chargement des donnÃ©es."),o.value=!1}},y=async()=>{try{const w=await q.post("/commercant/produits",n.value);c.success("Produit ajoutÃ© avec succÃ¨s."),p(),n.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{c.error("Erreur lors de lâ€™ajout du produit.")}},E=async w=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await q.delete(`/commercant/produits/${w}`),c.success("Produit supprimÃ© avec succÃ¨s."),p()}catch{c.error("Erreur lors de la suppression du produit.")}},k=async()=>{var w,r;try{await q.put("/commercant/profil",v.value),c.success("Profil mis Ã  jour avec succÃ¨s."),p()}catch(d){((r=(w=d.response)==null?void 0:w.data)==null?void 0:r.message)=="Unauthenticated."&&a.push("login"),c.error("Erreur lors de la mise Ã  jour du profil.")}};return ge(()=>{p()}),(w,r)=>(t(),s("div",Ul,[D(it),e("div",Ll,[r[26]||(r[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),P(" Espace CommerÃ§ant ")],-1)),e("div",Tl,[r[14]||(r[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",Il,[l.value?(t(),s("p",Fl,[r[12]||(r[12]=e("span",{class:"font-medium"},"Revenus :",-1)),P(" "+x(l.value.revenus)+" FCFA ",1)])):S("",!0),l.value?(t(),s("p",Rl,[r[13]||(r[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),P(" "+x(l.value.produits_vendus),1)])):(t(),s("p",ql,"Chargement..."))])]),e("div",Ol,[r[17]||(r[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil CommerÃ§ant",-1)),e("form",{onSubmit:de(k,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[O(e("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>v.value.nom=d),type:"text",placeholder:"Nom du commerÃ§ant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,v.value.nom]]),O(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=d=>v.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Z,v.value.description]]),O(e("select",{"onUpdate:modelValue":r[2]||(r[2]=d=>v.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[r[15]||(r[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,ee(i.value,d=>(t(),s("option",{key:d,value:d},x(d),9,Nl))),128))],512),[[Ae,v.value.ville]]),r[16]||(r[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",Dl,[r[22]||(r[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:de(y,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[O(e("input",{"onUpdate:modelValue":r[3]||(r[3]=d=>n.value.nom=d),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.nom]]),O(e("textarea",{"onUpdate:modelValue":r[4]||(r[4]=d=>n.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Z,n.value.description]]),O(e("input",{"onUpdate:modelValue":r[5]||(r[5]=d=>n.value.prix=d),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.prix]]),O(e("input",{"onUpdate:modelValue":r[6]||(r[6]=d=>n.value.photo_url=d),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Z,n.value.photo_url]]),O(e("select",{"onUpdate:modelValue":r[7]||(r[7]=d=>n.value.category_id=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[r[18]||(r[18]=e("option",{value:""},"CatÃ©gorie",-1)),(t(!0),s(B,null,ee(u.value,d=>(t(),s("option",{key:d.id,value:d.id},x(d.nom),9,Wl))),128))],512),[[Ae,n.value.category_id]]),e("label",Hl,[O(e("input",{"onUpdate:modelValue":r[8]||(r[8]=d=>n.value.collaboratif=d),type:"checkbox"},null,512),[[Xe,n.value.collaboratif]]),r[19]||(r[19]=P(" Collaboratif "))]),O(e("input",{"onUpdate:modelValue":r[9]||(r[9]=d=>n.value.marge_min=d),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Z,n.value.marge_min]]),O(e("input",{"onUpdate:modelValue":r[10]||(r[10]=d=>n.value.stock=d),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Z,n.value.stock]]),O(e("select",{"onUpdate:modelValue":r[11]||(r[11]=d=>n.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[r[20]||(r[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,ee(i.value,d=>(t(),s("option",{key:d,value:d},x(d),9,Jl))),128))],512),[[Ae,n.value.ville]]),r[21]||(r[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",Bl,[r[25]||(r[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),o.value?(t(),s("div",Gl,r[23]||(r[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):m.value.length===0?(t(),s("div",Kl," Aucun produit disponible. ")):(t(),s("div",Xl,[(t(!0),s(B,null,ee(m.value,d=>(t(),s("div",{key:d.id,class:"relative"},[D(Re,{produit:d},null,8,["produit"]),e("button",{onClick:$=>E(d.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},r[24]||(r[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,Ql)]))),128))]))])])]))}}),pp=ne(Zl,[["__scopeId","data-v-62cb30a8"]]),Yl={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},en={class:"container mx-auto max-w-4xl"},tn={class:"bg-white rounded-lg shadow-md p-6 mb-6"},sn={key:0,class:"ml-2"},on={class:"w-full bg-gray-200 rounded-full h-4"},an={class:"text-[var(--espace-gris)] text-xs mt-2"},rn={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},ln={class:"bg-white rounded-lg shadow-md p-6 mb-6"},nn={key:0,class:"mb-4"},un={class:"text-sm text-[var(--espace-gris)]"},dn={class:"font-bold text-[var(--espace-or)]"},cn={class:"text-sm text-[var(--espace-gris)] truncate"},pn=["href"],vn={key:1,class:"mb-4"},mn=["placeholder"],fn={class:"flex flex-col sm:flex-row gap-2"},gn=["disabled"],bn={key:0},xn={key:1},hn=["disabled"],yn={key:0},_n={key:1},wn={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},kn={class:"bg-white rounded-lg shadow-md p-6 mb-6"},$n={class:"mb-4"},Cn={key:0,class:"overflow-x-auto"},An={class:"w-full text-sm text-left text-[var(--espace-gris)]"},Pn=["onClick"],jn={class:"px-4 py-2"},Sn={class:"px-4 py-2"},Mn={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Vn={class:"bg-white rounded-lg shadow-md p-6 text-center"},En={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},zn={class:"text-[var(--espace-gris)] mt-2"},Un=le({__name:"Parrainage",setup(C){const a=be(),c=ie(),m=pe(),u=()=>{const Y=window.location.hostname;return Y==="localhost"||Y==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.com/register"},l=b(""),o=b(""),n=b([]),v=b(0),i=b(""),p=b(""),y=b(!1),E=b(!1),k=b({}),w=b(null),r=b(0),d=b(0),$=b(0),A=b("all"),J=me(()=>{var Y;return((Y=k.value)==null?void 0:Y.couleur)||"#6b7280"}),j=me(()=>A.value==="commercants"?n.value.filter(Y=>Y.est_commercant):A.value==="nonCommercants"?n.value.filter(Y=>!Y.est_commercant):n.value),V=async()=>{var Y,L;try{const H=await q.get("/parrainages/dashboard");if(!a.user){m.error("Veuillez vous connecter pour accÃ©der Ã  cette page"),c.push("/login");return}const W=H.data;l.value=W.code||"",o.value=l.value?`${u()}/${l.value}`:"",n.value=W.parrainages||[],v.value=W.total_gains||0,k.value=W.niveau_actuel,w.value=W.niveau_suivant,r.value=W.progression,d.value=W.total_parrainages||0,$.value=W.total_parrainages_commercants||0}catch(H){((L=(Y=H.response)==null?void 0:Y.data)==null?void 0:L.message)=="Unauthenticated."&&c.push("login"),m.error("Erreur lors de la rÃ©cupÃ©ration des donnÃ©es de parrainage"),console.error(H)}},F=async()=>{var Y,L;if(!a.user){m.error("Veuillez vous connecter");return}y.value=!0;try{const H=await q.post("/parrainages/generateCode");i.value=H.data.suggested_code,p.value=i.value,m.success("Nouveau code suggÃ©rÃ© avec succÃ¨s !"),l.value&&(o.value=`${u()}/${l.value}`)}catch(H){((L=(Y=H.response)==null?void 0:Y.data)==null?void 0:L.message)=="Unauthenticated."&&c.push("login"),m.error("Erreur lors de la gÃ©nÃ©ration du code"),console.error(H)}finally{y.value=!1}},M=async()=>{var Y,L,H,W;if(!a.user){m.error("Veuillez vous connecter");return}if(!p.value.trim()){m.error("Veuillez entrer un code valide");return}E.value=!0;try{const te=await q.post("/parrainages/createCode",{code:p.value.trim()});l.value=te.data.code,o.value=te.data.link||`${u()}/${te.data.code}`,m.success(te.data.message||"Code crÃ©Ã© avec succÃ¨s !"),await V()}catch(te){((L=(Y=te.response)==null?void 0:Y.data)==null?void 0:L.message)=="Unauthenticated."&&c.push("login"),m.error(((W=(H=te.response)==null?void 0:H.data)==null?void 0:W.message)||"Erreur lors de la crÃ©ation du code"),console.error(te)}finally{E.value=!1}},X=Y=>{if(!o.value){m.error("Aucun lien disponible pour le partage");return}let L="";const H=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${o.value}`);switch(Y){case"whatsapp":L=`https://api.whatsapp.com/send?text=${H}`;break;case"facebook":L=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o.value)}`;break;default:m.error("Plateforme non prise en charge");return}window.open(L,"_blank")},ce=Y=>{Y.est_commercant?c.push(`/commercants/${Y.id}`):c.push({name:"public-profile",params:{id:Y.id}})};return ge(()=>{V()}),(Y,L)=>{var H,W,te,ve,K;return t(),s("div",Yl,[e("div",en,[e("div",tn,[e("h2",{class:"text-lg font-semibold mb-4",style:$e({color:J.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:$e({color:J.value})},[e("div",null,[L[5]||(L[5]=P(" niveau : ")),e("strong",null,[P(x(k.value?k.value.nom:"Pas de niveau")+" "+x((H=k.value)==null?void 0:H.emoji)+" ",1),e("div",null," ("+x($.value)+"/"+x(w.value?w.value.filleuls_requis:(W=k.value)==null?void 0:W.filleuls_requis)+" commerÃ§ants) ",1)])]),((te=w.value)==null?void 0:te.jetons_bonus)>0?(t(),s("span",sn,"+"+x((ve=w.value)==null?void 0:ve.jetons_bonus)+" jetons ",1)):S("",!0)],4),e("div",on,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:$e({width:`${r.value}%`,background:`${J.value}`})},null,4)]),e("p",an," Prochain niveau : "+x(w.value?w.value.nom:"LÃ©gende ğŸ†")+" Ã  "+x(w.value?w.value.filleuls_requis:"1000+")+" commerÃ§ants ",1),(K=k.value.avantages)!=null&&K.length?(t(),s("p",rn," Avantages : "+x(k.value.avantages.join(", ")),1)):S("",!0),e("button",{onClick:L[0]||(L[0]=_=>T(c).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},L[6]||(L[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),P(" En savoir plus ")]))]),L[24]||(L[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des rÃ©compenses ! Atteignez des niveaux supÃ©rieurs pour dÃ©bloquer des jetons et des avantages. ")],-1)),e("div",ln,[L[15]||(L[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),l.value?(t(),s("div",nn,[e("p",un,[L[7]||(L[7]=P(" Code : ")),e("span",dn,x(l.value),1)]),e("p",cn,[L[8]||(L[8]=P(" Lien : ")),e("a",{href:o.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},x(o.value),9,pn)])])):(t(),s("div",vn,[O(e("input",{"onUpdate:modelValue":L[1]||(L[1]=_=>p.value=_),type:"text",placeholder:i.value||"Entrez ou gÃ©nÃ©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,mn),[[Z,p.value]]),e("div",fn,[e("button",{onClick:F,disabled:y.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[y.value?(t(),s("span",bn,L[9]||(L[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),P(" GÃ©nÃ©ration... ")]))):(t(),s("span",xn,L[10]||(L[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),P(" GÃ©nÃ©rer un code ")])))],8,gn),e("button",{onClick:M,disabled:E.value||!p.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[E.value?(t(),s("span",yn,L[11]||(L[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),P(" CrÃ©ation... ")]))):(t(),s("span",_n,L[12]||(L[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),P(" CrÃ©er le code ")])))],8,hn)])])),l.value?(t(),s("div",wn,[e("button",{onClick:L[2]||(L[2]=_=>X("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},L[13]||(L[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),P(" Partager sur WhatsApp ")])),e("button",{onClick:L[3]||(L[3]=_=>X("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},L[14]||(L[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),P(" Partager sur Facebook ")]))])):S("",!0)]),e("div",kn,[L[18]||(L[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs ParrainÃ©s",-1)),e("div",$n,[O(e("select",{"onUpdate:modelValue":L[4]||(L[4]=_=>A.value=_),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},L[16]||(L[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"CommerÃ§ants",-1),e("option",{value:"nonCommercants"},"Non CommerÃ§ants",-1)]),512),[[Ae,A.value]])]),j.value.length?(t(),s("div",Cn,[e("table",An,[L[17]||(L[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commerÃ§ant")])],-1)),e("tbody",null,[(t(!0),s(B,null,ee(j.value,_=>(t(),s("tr",{key:_.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:f=>ce(_)},x(_.filleul_nom||"Anonyme"),9,Pn),e("td",jn,x(new Date(_.date_inscription).toLocaleDateString("fr-FR")),1),e("td",Sn,x(_.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",Mn," Aucun utilisateur parrainÃ© correspondant au filtre. Commencez Ã  inviter dÃ¨s maintenant ! "))]),e("div",Vn,[L[22]||(L[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",En,x(v.value)+" jetons ",1),e("p",zn,[L[19]||(L[19]=P(" ğŸ‰ Vous avez invitÃ© ")),e("strong",null,x(d.value),1),L[20]||(L[20]=P(" utilisateurs, dont ")),e("strong",null,x($.value),1),L[21]||(L[21]=P(" sont commerÃ§ants ! "))]),L[23]||(L[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," DÃ©bloquez plus de jetons et d'avantages en atteignant les niveaux supÃ©rieurs. ",-1))])])])}}}),vp=ne(Un,[["__scopeId","data-v-f14a4574"]]),Ln={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Tn={class:"container mx-auto max-w-4xl"},In={class:"flex border-b border-gray-300 mb-6"},Fn={key:0},Rn={key:0,class:"grid grid-cols-1 gap-4"},qn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},On=["onClick"],Nn={class:"text-sm text-[var(--espace-gris)]"},Dn={class:"text-sm text-[var(--espace-gris)]"},Wn=["onClick"],Hn={class:"flex flex gap-2"},Jn=["onClick"],Bn=["onClick"],Gn=["onClick"],Kn={key:1,class:"text-center text-[var(--espace-gris)]"},Xn={key:1},Qn={key:0,class:"grid grid-cols-1 gap-4"},Zn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Yn=["onClick"],ei={class:"text-sm text-[var(--espace-gris)]"},ti={class:"text-sm text-[var(--espace-gris)]"},si=["onClick"],oi=["onClick"],ai={key:1,class:"text-center text-[var(--espace-gris)]"},ri=le({__name:"Collaborations",setup(C){const a=y=>{localStorage.setItem("pending_collaborations",JSON.stringify(y))},c=pe(),m=ie(),u=b({sent_collaborations:[],received_collaborations:[]}),l=b(!0),o=b("received"),n=async()=>{var y,E,k,w;try{const r=await q.get("/collaborations");u.value=r.data;const d=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(d.length>0){const $=new Set(u.value.sent_collaborations.map(J=>J.produit_id)),A=d.filter(J=>!$.has(J.produit_id));A.length!==d.length&&a(A)}}catch(r){console.log((E=(y=r.response)==null?void 0:y.data)==null?void 0:E.message),c.error("Erreur lors du chargement des collaborations"),((w=(k=r.response)==null?void 0:k.data)==null?void 0:w.message)=="Unauthenticated."&&m.push("login")}finally{l.value=!1}},v=y=>{m.push({path:`/produits/${y}`})},i=y=>{var k,w,r;const E=((k=y.commercant)==null?void 0:k.id)||((r=(w=y.produit)==null?void 0:w.commercant)==null?void 0:r.id);E?m.push({path:`/commercants/${E}`}):c.error("Profil du commerÃ§ant non disponible")},p=async(y,E)=>{var k;try{const w=await q.post(`/collaborations/${y}`,{statut:E});c.success(w.data.message),await n()}catch(w){c.error(`Erreur lors de la mise Ã  jour de la collaboration${(k=w.response)==null?void 0:k.data.message}`)}};return ge(()=>{l.value=!0,n()}),(y,E)=>{var k,w,r,d;return t(),s(B,null,[D(ze,{isLoading:l.value},null,8,["isLoading"]),e("div",Ln,[e("div",Tn,[E[4]||(E[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),P(" Mes Collaborations ")],-1)),e("div",In,[e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="received","text-[var(--espace-gris)]":o.value!=="received"}]),onClick:E[0]||(E[0]=$=>o.value="received")}," Collaborations reÃ§ues ",2),e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="sent","text-[var(--espace-gris)]":o.value!=="sent"}]),onClick:E[1]||(E[1]=$=>o.value="sent")}," Collaborations envoyÃ©es ",2)]),o.value==="received"?(t(),s("div",Fn,[(w=(k=u.value)==null?void 0:k.received_collaborations)!=null&&w.length?(t(),s("div",Rn,[(t(!0),s(B,null,ee(u.value.received_collaborations,$=>(t(),s("div",{key:$.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",qn,[e("div",null,[e("h2",{onClick:A=>v($.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},x($.produit.nom),9,On),e("p",Nn," Prix de revente proposÃ© : "+x($.prix_revente)+" FCFA ",1),e("p",Dn,[E[2]||(E[2]=P(" Statut : ")),e("span",{class:G({"text-green-600":$.statut==="valider","text-yellow-600":$.statut==="en_attente","text-red-600":$.statut==="refuser"})},x($.statut==="en_attente"?"En attente":$.statut==="valider"?"Valider":"RefusÃ©e"),3)]),e("button",{onClick:A=>i($),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerÃ§ant ",8,Wn)]),e("div",Hn,[$.statut==="en_attente"?(t(),s("button",{key:0,onClick:A=>p($.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,Jn)):S("",!0),$.statut==="en_attente"?(t(),s("button",{key:1,onClick:A=>p($.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,Bn)):S("",!0),e("button",{onClick:A=>v($.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Gn)])])]))),128))])):(t(),s("p",Kn," Aucune collaboration reÃ§ue pour le moment. "))])):S("",!0),o.value==="sent"?(t(),s("div",Xn,[(d=(r=u.value)==null?void 0:r.sent_collaborations)!=null&&d.length?(t(),s("div",Qn,[(t(!0),s(B,null,ee(u.value.sent_collaborations,$=>(t(),s("div",{key:$.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Zn,[e("div",null,[e("h2",{onClick:A=>v($.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},x($.produit.nom),9,Yn),e("p",ei," Prix de revente proposÃ© : "+x($.prix_revente)+" FCFA ",1),e("p",ti,[E[3]||(E[3]=P(" Statut : ")),e("span",{class:G({"text-green-600":$.statut==="valider","text-yellow-600":$.statut==="en_attente","text-red-600":$.statut==="refuser"})},x($.statut==="en_attente"?"En attente":$.statut==="valider"?"Valider":"RefusÃ©e"),3)]),e("button",{onClick:A=>i($),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerÃ§ant ",8,si)]),e("button",{onClick:A=>v($.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,oi)])]))),128))])):(t(),s("p",ai," Aucune collaboration envoyÃ©e pour le moment. "))])):S("",!0)])])],64)}}}),mp=ne(ri,[["__scopeId","data-v-cac76a42"]]),li={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},ni={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},ii={key:0,class:"mb-8"},ui={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},di=["disabled"],ci={key:0,class:"fas fa-spinner fa-spin mr-2"},pi={key:1,class:"space-y-4 mb-6"},vi={class:"flex items-center gap-3"},mi={class:"text-[var(--espace-vert)] font-medium"},fi={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},gi={class:"flex items-center gap-2"},bi=["onClick"],xi=["onClick"],hi={key:2,class:"text-center text-gray-500"},yi=le({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(C,{emit:a}){const c=ie(),m=a,u=pe(),l=b(!1),o=b(!1),n=b({id:null,phone_number:"",payment_service:""}),v=()=>{o.value=!0,n.value={id:null,phone_number:"",payment_service:""}},i=k=>{o.value=!0,n.value={id:k.id,phone_number:k.phone_number,payment_service:k.payment_service}},p=()=>{o.value=!1,n.value={id:null,phone_number:"",payment_service:""}},y=async()=>{var w,r,d,$;if(!/^6[0-9]{8}$/.test(n.value.phone_number)){u.error("Le numÃ©ro de tÃ©lÃ©phone doit commencer par 6 et contenir 9 chiffres.");return}l.value=!0;try{n.value.id?(await q.put(`/wallets/${n.value.id}`,n.value),u.success("Portefeuille mis Ã  jour avec succÃ¨s !")):(await q.post("/wallets",n.value),u.success("Portefeuille crÃ©Ã© avec succÃ¨s !")),m("refresh-wallets"),p()}catch(A){((r=(w=A.response)==null?void 0:w.data)==null?void 0:r.message)=="Unauthenticated."&&c.push("login"),u.error((($=(d=A.response)==null?void 0:d.data)==null?void 0:$.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",A)}finally{l.value=!1}},E=async k=>{var w,r,d,$;if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce portefeuille ?")){l.value=!0;try{await q.delete(`/wallets/${k}`),u.success("Portefeuille supprimÃ© avec succÃ¨s !"),m("refresh-wallets")}catch(A){((r=(w=A.response)==null?void 0:w.data)==null?void 0:r.message)=="Unauthenticated."&&c.push("login"),u.error((($=(d=A.response)==null?void 0:d.data)==null?void 0:$.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",A)}finally{l.value=!1}}};return(k,w)=>k.show?(t(),s("div",li,[e("div",ni,[e("button",{onClick:w[0]||(w[0]=r=>k.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),w[9]||(w[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ’³ GÃ©rer Mes Portefeuilles",-1)),o.value?(t(),s("div",ii,[e("form",{onSubmit:de(y,["prevent"]),class:G(["space-y-5",{"bg-green-50 p-4 rounded-lg":!n.value.id,"bg-yellow-50 p-4 rounded-lg":n.value.id}])},[e("h3",ui,x(n.value.id?"Modifier le Portefeuille":"CrÃ©er un Nouveau Portefeuille"),1),e("div",null,[w[3]||(w[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"NumÃ©ro de tÃ©lÃ©phone",-1)),O(e("input",{"onUpdate:modelValue":w[1]||(w[1]=r=>n.value.phone_number=r),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Z,n.value.phone_number]])]),e("div",null,[w[5]||(w[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),O(e("select",{"onUpdate:modelValue":w[2]||(w[2]=r=>n.value.payment_service=r),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},w[4]||(w[4]=[e("option",{value:"",disabled:""},"SÃ©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,n.value.payment_service]])]),e("button",{type:"submit",disabled:l.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[l.value?(t(),s("i",ci)):S("",!0),P(" "+x(n.value.id?"Mettre Ã  jour":"CrÃ©er"),1)],8,di),e("button",{onClick:p,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):S("",!0),k.wallets&&k.wallets.length>0?(t(),s("div",pi,[(t(!0),s(B,null,ee(k.wallets,r=>(t(),s("div",{key:r.id||r.phone_number,class:G(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":r.payment_service==="ORANGE","bg-purple-50":r.payment_service==="MTN"}])},[e("div",vi,[e("span",mi,x(r.phone_number)+" ("+x(r.payment_service)+") ",1),r.is_active!==!1?(t(),s("span",fi,"Actif")):S("",!0)]),e("div",gi,[e("button",{onClick:d=>i(r),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},w[6]||(w[6]=[e("i",{class:"fas fa-edit"},null,-1),P(" Modifier ")]),8,bi),e("button",{onClick:d=>E(r.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},w[7]||(w[7]=[e("i",{class:"fas fa-trash"},null,-1),P(" Supprimer ")]),8,xi)])],2))),128))])):(t(),s("p",hi,"Aucun portefeuille crÃ©Ã©.")),o.value?S("",!0):(t(),s("button",{key:3,onClick:v,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},w[8]||(w[8]=[e("i",{class:"fas fa-plus"},null,-1),P(" Ajouter un portefeuille ")])))])])):S("",!0)}}),_i=ne(yi,[["__scopeId","data-v-04e487e6"]]),wi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},ki={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},$i={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},Ci={key:0,class:"space-y-4"},Ai={class:"flex flex-col"},Pi={class:"text-[var(--espace-vert)] font-medium"},ji={class:"text-xs text-gray-500"},Si={class:"text-gray-700 text-sm sm:text-base"},Mi={class:"flex items-center gap-2"},Vi=["onClick"],Ei=["onClick"],zi={key:1,class:"text-center text-gray-500"},Ui={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},Li={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Ti=["value"],Ii=["disabled"],Fi={key:0,class:"fas fa-spinner fa-spin mr-2"},Ri={key:1,class:"border-t pt-4 mt-2"},qi=le({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(C,{emit:a}){const c=C,m=a,u=pe(),l=b(!1),o=b([...c.offers]);xe(()=>c.offers,w=>{o.value=[...w]},{deep:!0});const n=b(!1),v=b({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),i=()=>{n.value=!0,v.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},p=w=>{n.value=!0,v.value={id:w.id,nombre_jetons:w.nombre_jetons,prix_unitaire:w.prix_unitaire,description:w.description||"",wallet_id:w.wallet_id}},y=()=>{n.value=!1,v.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},E=async()=>{var w,r;l.value=!0;try{if(v.value.id){const d=await q.put(`/jeton_market/updateOffer/${v.value.id}`,v.value);u.success("Offre mise Ã  jour avec succÃ¨s !");const $=o.value.findIndex(A=>A.id===v.value.id);$!==-1&&(o.value[$]={...o.value[$],...v.value})}else{const d=await q.post("/jeton_market/offer",v.value);u.success("Offre crÃ©Ã©e avec succÃ¨s !"),o.value.push(d.data)}m("refresh-offers"),y()}catch(d){u.error(((r=(w=d.response)==null?void 0:w.data)==null?void 0:r.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",d)}finally{l.value=!1}},k=async w=>{var r,d;if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette offre ?")){l.value=!0;try{await q.delete(`/jeton_market/deleteOffer/${w}`),u.success("Offre supprimÃ©e avec succÃ¨s !"),o.value=o.value.filter($=>$.id!==w),m("refresh-offers")}catch($){u.error(((d=(r=$.response)==null?void 0:r.data)==null?void 0:d.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",$)}finally{l.value=!1}}};return(w,r)=>w.show?(t(),s("div",wi,[e("div",ki,[e("button",{onClick:r[0]||(r[0]=d=>w.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),r[12]||(r[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“‹ Mes Offres",-1)),e("div",$i,[o.value.length>0?(t(),s("div",Ci,[(t(!0),s(B,null,ee(o.value,d=>{var $,A;return t(),s("div",{key:d.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",Ai,[e("span",Pi,x(d.nombre_jetons)+" jetons â€¢ "+x(d.total_prix)+" FCFA ",1),e("span",ji,"PU : "+x(d.prix_unitaire)+" FCFA",1),e("p",Si,[r[4]||(r[4]=e("strong",null,"ğŸ’³ ",-1)),P(" "+x(($=d.wallet)==null?void 0:$.phone_number)+" ("+x((A=d.wallet)==null?void 0:A.payment_service)+") ",1)])]),e("div",Mi,[e("button",{onClick:J=>p(d),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},r[5]||(r[5]=[e("i",{class:"fas fa-edit"},null,-1),P(" Modifier ")]),8,Vi),e("button",{onClick:J=>k(d.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},r[6]||(r[6]=[e("i",{class:"fas fa-trash"},null,-1),P(" Supprimer ")]),8,Ei)])])}),128))])):(t(),s("p",zi,"Aucune offre crÃ©Ã©e."))]),n.value?(t(),s("div",Ui,[e("form",{onSubmit:de(E,["prevent"]),class:G(["space-y-4",{"bg-green-50 p-4 rounded-lg":!v.value.id,"bg-yellow-50 p-4 rounded-lg":v.value.id}])},[e("h3",Li,x(v.value.id?"Modifier l'offre":"CrÃ©er une nouvelle offre"),1),e("div",null,[r[7]||(r[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"QuantitÃ©",-1)),O(e("input",{"onUpdate:modelValue":r[1]||(r[1]=d=>v.value.nombre_jetons=d),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,v.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[r[8]||(r[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":r[2]||(r[2]=d=>v.value.prix_unitaire=d),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,v.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[r[10]||(r[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),O(e("select",{"onUpdate:modelValue":r[3]||(r[3]=d=>v.value.wallet_id=d),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[r[9]||(r[9]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,ee(w.wallets,d=>(t(),s("option",{key:d.id,value:d.id},x(d.phone_number)+" ("+x(d.payment_service)+") ",9,Ti))),128))],512),[[Ae,v.value.wallet_id]])]),e("button",{type:"submit",disabled:l.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[l.value?(t(),s("i",Fi)):S("",!0),P(" "+x(v.value.id?"Mettre Ã  jour":"CrÃ©er"),1)],8,Ii),e("button",{onClick:y,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",Ri,[e("button",{onClick:i,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},r[11]||(r[11]=[e("i",{class:"fas fa-plus"},null,-1),P(" Nouvelle offre ")]))]))])])):S("",!0)}}),Oi=ne(qi,[["__scopeId","data-v-03e4f804"]]),Ni={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},Di={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},Wi={class:"flex items-center justify-between mb-4"},Hi={class:"flex items-center gap-3"},Ji=["src"],Bi={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Gi={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},Ki={class:"text-gray-700 text-sm sm:text-base"},Xi={class:"text-gray-700 text-sm sm:text-base"},Qi={class:"text-xs text-gray-500 mt-3"},Zi=["onClick"],Yi={key:0,class:"col-span-full text-center py-4"},eu={key:1,class:"text-center text-gray-600 py-24"},tu={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},su={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},ou=["value"],au={class:"text-sm text-gray-500"},ru={class:"font-bold"},lu={class:"font-bold"},nu=["disabled"],iu={key:0,class:"fas fa-spinner fa-spin mr-2"},uu={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},du={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},cu={class:"space-y-4"},pu={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},vu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},mu=["value"],fu={class:"text-sm text-[var(--espace-gris)]"},gu={class:"font-bold"},bu=["disabled"],xu={key:0,class:"fas fa-spinner fa-spin mr-2"},hu={key:1,class:""},yu={key:2,class:""},_u={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},wu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},ku=["disabled"],$u={key:0,class:"fas fa-spinner fa-spin mr-2"},Cu={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},Au=le({__name:"JetonMarket",setup(C){const a=()=>{const N=window.location.hostname;return N==="localhost"||N==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},c=me(()=>a()),m=ie(),u=b([]),l=b([]),o=b({quantityMin:""}),n=b(!1),v=b(!1),i=b({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),p=b(!1),y=b(1),E=b(1),k=b(!1),w=b(!0),r=b(!1),d=b(!1),$=b({walletId:""}),A=b(null),J=b(0),j=b([]),V=b(!1),F=b({id:0,phone_number:"",payment_service:""}),M=b(!1),X=b(!1),ce=pe(),Y=()=>{n.value=!1,v.value=!1,d.value=!1,V.value=!1,M.value=!1,X.value=!1},L=async()=>{try{const N=await q.get("/wallets");j.value=N.data.data||[]}catch(N){console.error("Erreur lors du chargement des portefeuilles:",N),j.value=[]}},H=async()=>{var N,h;try{const oe=await q.get("/jeton_market/my-offers");l.value=oe.data.data||[]}catch(oe){((h=(N=oe.response)==null?void 0:N.data)==null?void 0:h.message)=="Unauthenticated."&&m.push("login"),console.error("Erreur lors du chargement des offres de l'utilisateur:",oe),l.value=[]}},W=async()=>{await L(),Y(),j.value.length===0?V.value=!0:n.value=!0},te=async()=>{var N,h,oe,I;p.value=!0;try{Y();const ue=await q.post("/wallets",F.value);ce.success(ue.data.message||"Portefeuille crÃ©Ã© avec succÃ¨s !"),V.value=!1,await L(),n.value=!0}catch(ue){((h=(N=ue.response)==null?void 0:N.data)==null?void 0:h.message)=="Unauthenticated."&&m.push("login"),ce.error(((I=(oe=ue.response)==null?void 0:oe.data)==null?void 0:I.message)||"Erreur lors de la crÃ©ation du portefeuille"),console.error("Erreur:",ue)}finally{p.value=!1,F.value={id:0,phone_number:"",payment_service:""}}},ve=()=>{v.value=!1,y.value=1,u.value=[],g()},K=async()=>{r.value=!0,y.value=1,u.value=[],await g(),r.value=!1},_=me(()=>u.value.filter(N=>!o.value.quantityMin||N.nombre_jetons>=parseInt(o.value.quantityMin,10))),f=me(()=>i.value.nombre_jetons*i.value.prix_unitaire),U=me(()=>f.value*.1),g=async()=>{var N,h;if(!(k.value||y.value>E.value)){k.value=!0;try{const oe={page:y.value,quantity_min:o.value.quantityMin||void 0},I=await q.get("/jeton_market/offers",{params:oe});u.value=[...u.value,...I.data.data],E.value=I.data.last_page,y.value+=1}catch(oe){((h=(N=oe.response)==null?void 0:N.data)==null?void 0:h.message)=="Unauthenticated."&&m.push("login"),console.error("Erreur lors du chargement des offres:",oe)}finally{k.value=!1,w.value=!1}}},z=()=>{const N=document.querySelector(".grid");if(N){const{scrollTop:h,clientHeight:oe,scrollHeight:I}=N;h+oe>=I-300&&!k.value&&g()}},R=async()=>{var N,h,oe;if(!i.value.walletId){ce.error("Veuillez sÃ©lectionner un portefeuille.");return}p.value=!0;try{const I=await q.post("/jeton_market/offer",{...i.value,wallet_id:i.value.walletId,total_price:f.value});n.value=!1,ce.success(((N=I==null?void 0:I.data)==null?void 0:N.message)||"Offre crÃ©Ã©e avec succÃ¨s !"),g()}catch(I){ce.error(((oe=(h=I.response)==null?void 0:h.data)==null?void 0:oe.message)||"Erreur lors de la crÃ©ation de l'offre"),console.error("Erreur lors de la crÃ©ation de l'offre:",I.response)}finally{p.value=!1}},ae=(N,h,oe)=>{Y();const I=u.value.find(ue=>ue.id===N);I&&(A.value=N,J.value=I.total_prix,$.value.walletId="",d.value=!0)},re=async()=>{var N,h;if(!A.value||!$.value.walletId){ce.error("Veuillez sÃ©lectionner un portefeuille.");return}p.value=!0;try{const oe=await q.post(`/jeton_market/buy/${A.value}`,{wallet_id:$.value.walletId});console.log(oe.data),d.value=!1,g(),ce.success(oe.data.message||"Achat effectuÃ© avec succÃ¨s !")}catch(oe){console.error("Erreur lors de l'achat:",oe.response.data.message),ce.error(((h=(N=oe.response)==null?void 0:N.data)==null?void 0:h.message)||"Erreur lors de l'achat")}finally{p.value=!1,A.value=null,J.value=0}},se=N=>{var h;return(h=N.user)!=null&&h.commercant?`/commercants/${N.user.commercant.id}`:`/profile/public/${N.user_id}`};return ge(()=>{w.value=!0,g(),L(),H(),window.addEventListener("scroll",z)}),Ve(()=>{window.removeEventListener("scroll",z)}),(N,h)=>{const oe=he("router-link");return t(),s(B,null,[D(ze,{isLoading:w.value},null,8,["isLoading"]),e("div",Ni,[e("div",Di,[D(oe,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:Q(()=>h[16]||(h[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),h[17]||(h[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"ğŸŒ MarchÃ©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute sÃ©curitÃ© ğŸš€")],-1)),h[18]||(h[18]=e("div",{class:"w-10"},null,-1))]),u.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:z},[(t(!0),s(B,null,ee(_.value,I=>(t(),s("div",{key:I.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",Wi,[e("div",Hi,[D(oe,{to:se(I),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:Q(()=>[I.user.photo?(t(),s("img",{key:0,src:c.value+I.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Ji)):(t(),s("i",Bi))]),_:2},1032,["to"]),D(oe,{to:se(I),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:Q(()=>[P(x(I.user.nom),1)]),_:2},1032,["to"])]),e("span",Gi,[P(x(I.nombre_jetons)+" ",1),h[19]||(h[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",Ki,[h[20]||(h[20]=e("strong",null,"ğŸ’µ Prix :",-1)),P(" "+x(I.prix_unitaire)+" FCFA/jeton",1)]),e("p",Xi,[h[21]||(h[21]=e("strong",null,"ğŸ’° Total :",-1)),P(" "+x(I.total_prix)+" FCFA ",1)]),e("p",Qi,"ğŸ“… PubliÃ©e le "+x(new Date(I.date_creation).toLocaleDateString()),1),e("button",{onClick:ue=>{var we,Ce;return ae(I.id,(we=I.wallet)==null?void 0:we.phone_number,(Ce=I.wallet)==null?void 0:Ce.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," âš¡ Acheter ",8,Zi)]))),128)),p.value?(t(),s("div",Yi,h[22]||(h[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):S("",!0)],32)):(t(),s("div",eu,[h[25]||(h[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),h[26]||(h[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[h[23]||(h[23]=P("Soyez le premier Ã  ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:W},"poster une offre"),h[24]||(h[24]=P(" ğŸ‰"))])])),D(_e,{name:"fade"},{default:Q(()=>[n.value?(t(),s("div",tu,[e("div",su,[e("button",{onClick:h[0]||(h[0]=I=>n.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[35]||(h[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“ Nouvelle Offre",-1)),e("form",{onSubmit:de(R,["prevent"]),class:"space-y-5"},[e("div",null,[h[27]||(h[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"QuantitÃ©",-1)),O(e("input",{"onUpdate:modelValue":h[1]||(h[1]=I=>i.value.nombre_jetons=I),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,i.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[h[28]||(h[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":h[2]||(h[2]=I=>i.value.prix_unitaire=I),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Z,i.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[h[30]||(h[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille Ã  utiliser",-1)),O(e("select",{"onUpdate:modelValue":h[3]||(h[3]=I=>i.value.walletId=I),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[29]||(h[29]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,ee(j.value,I=>(t(),s("option",{key:I.id,value:I.id},x(I.phone_number)+" ("+x(I.payment_service)+") ",9,ou))),128))],512),[[Ae,i.value.walletId]])]),e("p",au,[h[31]||(h[31]=P("ğŸ’° Total: ")),e("span",ru,x(f.value),1),h[32]||(h[32]=P(" FCFA | ğŸ¦ Commission (10%): ")),e("span",lu,x(U.value),1),h[33]||(h[33]=P(" FCFA"))]),e("button",{type:"submit",disabled:p.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[p.value?(t(),s("i",iu)):S("",!0),h[34]||(h[34]=P(" Publier "))],8,nu)],32)])])):S("",!0)]),_:1}),D(_e,{name:"fade"},{default:Q(()=>[v.value?(t(),s("div",uu,[e("div",du,[e("button",{onClick:h[4]||(h[4]=I=>v.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"âœ–"),h[36]||(h[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"ğŸ›ï¸ Filtres",-1)),e("div",cu,[O(e("input",{"onUpdate:modelValue":h[5]||(h[5]=I=>o.value.quantityMin=I),type:"number",placeholder:"QuantitÃ© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[Z,o.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:ve,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," ğŸ” Appliquer ")])])):S("",!0)]),_:1}),D(_e,{name:"fade"},{default:Q(()=>[d.value?(t(),s("div",pu,[e("div",vu,[e("button",{onClick:h[6]||(h[6]=I=>d.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[41]||(h[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“² Paiement",-1)),e("form",{onSubmit:de(re,["prevent"]),class:"space-y-5"},[e("div",null,[h[38]||(h[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"SÃ©lectionnez votre portefeuille",-1)),O(e("select",{"onUpdate:modelValue":h[7]||(h[7]=I=>$.value.walletId=I),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[37]||(h[37]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,ee(j.value,I=>(t(),s("option",{key:I.id,value:I.id},x(I.phone_number)+" ("+x(I.payment_service)+") ",9,mu))),128))],512),[[Ae,$.value.walletId]])]),e("p",fu,[h[39]||(h[39]=P("Montant total : ")),e("span",gu,x(J.value),1),h[40]||(h[40]=P(" FCFA"))]),e("button",{type:"submit",disabled:p.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[p.value?(t(),s("i",xu)):S("",!0),p.value?(t(),s("span",hu,"Veuillez patienter")):(t(),s("span",yu,"Confirmer le paiement"))],8,bu)],32)])])):S("",!0)]),_:1}),D(_e,{name:"fade"},{default:Q(()=>[V.value?(t(),s("div",_u,[e("div",wu,[e("button",{onClick:h[8]||(h[8]=I=>V.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[46]||(h[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ’³ CrÃ©er un Portefeuille ",-1)),e("form",{onSubmit:de(te,["prevent"]),class:"space-y-5"},[e("div",null,[h[42]||(h[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"NumÃ©ro de tÃ©lÃ©phone",-1)),O(e("input",{"onUpdate:modelValue":h[9]||(h[9]=I=>F.value.phone_number=I),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Z,F.value.phone_number]])]),e("div",null,[h[44]||(h[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),O(e("select",{"onUpdate:modelValue":h[10]||(h[10]=I=>F.value.payment_service=I),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},h[43]||(h[43]=[e("option",{value:"",disabled:""},"SÃ©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,F.value.payment_service]])]),e("button",{type:"submit",disabled:p.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[p.value?(t(),s("i",$u)):S("",!0),h[45]||(h[45]=P(" CrÃ©er "))],8,ku)],32)])])):S("",!0)]),_:1}),M.value?(t(),fe(_i,{key:2,show:M.value,wallets:j.value,onClose:h[11]||(h[11]=I=>M.value=!1),onRefreshWallets:L},null,8,["show","wallets"])):S("",!0),X.value?(t(),fe(Oi,{key:3,show:X.value,wallets:j.value,offers:l.value,onClose:h[12]||(h[12]=I=>X.value=!1),onRefreshOffers:g},null,8,["show","wallets","offers"])):S("",!0),e("div",Cu,[e("button",{onClick:h[13]||(h[13]=I=>{Y(),v.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},h[47]||(h[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:K,class:G(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":r.value}])},[e("i",{class:G(["fas fa-sync-alt text-xl",{"fa-spin":r.value}])},null,2),h[48]||(h[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:h[14]||(h[14]=I=>{Y(),M.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},h[49]||(h[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:W,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[50]||(h[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:h[15]||(h[15]=I=>{Y(),X.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[51]||(h[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),fp=ne(Au,[["__scopeId","data-v-c3c0370a"]]),Pu={class:"overflow-y-scroll bg-gray-100"},ju={class:"container mx-auto px-4 sm:px-6 py-8"},Su={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},Mu={class:"flex flex-col sm:flex-row items-center gap-6"},Vu={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Eu=["src"],zu={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Uu={class:"flex-1"},Lu={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Tu={class:"text-sm text-[var(--espace-gris)] mb-1"},Iu={class:"text-sm text-[var(--espace-gris)] mb-1"},Fu={class:"text-sm text-[var(--espace-gris)]"},Ru={key:0,class:"text-sm text-[var(--espace-gris)]"},qu={class:"mt-2 flex space-x-2 flex-col"},Ou={class:"text-sm text-[var(--espace-gris)]"},Nu={class:"text-xs text-[var(--espace-gris)]"},Du={class:"mt-4 flex flex-col sm:flex-row gap-4"},Wu={class:"mt-4 flex flex-wrap gap-4"},Hu={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Ju={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Bu={key:1,class:"text-base text-[var(--espace-gris)] italic"},Gu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ku={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},Xu={class:"flex items-center space-x-2"},Qu={key:3},Zu={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},Yu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},ed={key:5,class:"text-base text-[var(--espace-gris)] italic"},td={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},sd={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},od={class:"text-sm text-[var(--espace-gris)]"},ad={class:"text-sm text-[var(--espace-gris)]"},rd=le({__name:"CommercantDetails",setup(C){const a=Se(),c=ie(),m=pe(),u=b(!1),l=b(null),o=b(null),n=b(0),v=b(0),i=b(!1),p=async()=>{u.value=!0;try{const w=await q.get(`/commercant/${a.params.commercantId}`);l.value=w.data.commercant,n.value=w.data.average_rating||0,v.value=w.data.vote_count||0,l.value.produits||console.warn("Aucun produit trouvÃ© dans la rÃ©ponse de l'API pour ce commerÃ§ant.")}catch{m.error("Erreur lors du chargement des dÃ©tails du commerÃ§ant.")}finally{u.value=!1}},y=async()=>{var w,r,d,$;if(o.value===null||o.value<1||o.value>5){m.error("Veuillez sÃ©lectionner une note entre 1 et 5.");return}try{const A=await q.post(`/commercant/${a.params.commercantId}/rate`,{rating:o.value});n.value=A.data.average_rating||0,m.success("Merci pour votre note !"),o.value=null,i.value=!1,v.value=A.data.vote_count||v.value+1}catch(A){((r=(w=A.response)==null?void 0:w.data)==null?void 0:r.message)=="Unauthenticated."&&c.push("login"),m.error((($=(d=A.response)==null?void 0:d.data)==null?void 0:$.message)||"Erreur lors de la notation.")}},E=me(()=>{var w;return((w=l.value)==null?void 0:w.produits)||[]}),k=()=>{i.value=!0};return ge(async()=>{p()}),(w,r)=>{const d=he("router-link");return t(),s(B,null,[D(ze,{isLoading:u.value},null,8,["isLoading"]),e("div",Pu,[D(it),e("div",ju,[l.value?(t(),s("div",Su,[e("div",Mu,[e("div",Vu,[l.value.photo_url?(t(),s("img",{key:0,src:l.value.photo_url,alt:"Photo du commerÃ§ant",class:"w-full h-full object-cover"},null,8,Eu)):(t(),s("i",zu))]),e("div",Uu,[e("h1",Lu," CommerÃ§ant : "+x(l.value.nom),1),e("p",Tu,[r[2]||(r[2]=e("strong",null,"Ville :",-1)),P(" "+x(l.value.ville),1)]),e("p",Iu,[r[3]||(r[3]=e("strong",null,"Inscrit depuis :",-1)),P(" "+x(new Date(l.value.created_at).toLocaleDateString()),1)]),e("p",Fu,[r[4]||(r[4]=e("strong",null,"Contact :",-1)),P(" "+x(l.value.email||"Non disponible"),1)]),l.value.telephone?(t(),s("p",Ru,[r[5]||(r[5]=e("strong",null,"TÃ©lÃ©phone :",-1)),P(" "+x(l.value.telephone),1)])):S("",!0),e("div",qu,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:k},[(t(),s(B,null,ee(5,$=>e("span",{key:$,class:"relative text-yellow-400 w-5 h-5"},[r[6]||(r[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:$e({width:$<=Math.floor(n.value)?"100%":$===Math.ceil(n.value)&&n.value%1!==0?`${n.value%1*100}%`:"0%"})},null,4)])),64)),e("p",Ou,x(Number(n.value).toFixed(1))+"/5 ",1)]),e("span",Nu,"("+x(v.value)+" votes)",1)])])]),e("div",Du,[D(d,{to:`/chat/${l.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Q(()=>r[7]||(r[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),P(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),D(d,{to:`/public-profile/${l.value.user_id||l.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:Q(()=>r[8]||(r[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),P(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",Wu,[e("span",Hu,"Produits : "+x(E.value.length),1),l.value.revenus?(t(),s("span",Ju,"Revenus : "+x(l.value.revenus)+" FCFA",1)):S("",!0)])])):u.value?S("",!0):(t(),s("div",Bu,"CommerÃ§ant non trouvÃ©.")),i.value?(t(),s("div",Gu,[e("div",Ku,[r[9]||(r[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce CommerÃ§ant",-1)),e("div",Xu,[O(e("input",{"onUpdate:modelValue":r[0]||(r[0]=$=>o.value=$),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[Z,o.value,void 0,{number:!0}]]),e("button",{onClick:y,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:r[1]||(r[1]=$=>i.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):S("",!0),u.value?(t(),s("div",Qu)):E.value.length>0?(t(),s("div",Zu,[r[10]||(r[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du CommerÃ§ant",-1)),e("div",Yu,[(t(!0),s(B,null,ee(E.value,$=>(t(),fe(Re,{key:$.id,produit:$},null,8,["produit"]))),128))])])):l.value&&E.value.length===0?(t(),s("div",ed,"Aucun produit disponible pour ce commerÃ§ant.")):S("",!0),l.value&&l.value.statistiques?(t(),s("div",td,[r[13]||(r[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",sd,[e("p",od,[r[11]||(r[11]=e("strong",null,"Vues totales :",-1)),P(" "+x(l.value.statistiques.total_views),1)]),e("p",ad,[r[12]||(r[12]=e("strong",null,"Produits populaires :",-1)),P(" "+x(l.value.statistiques.popular_products),1)])])])):S("",!0)])])],64)}}}),gp=ne(rd,[["__scopeId","data-v-28e3885d"]]),ld={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},nd={class:"container mx-auto max-w-2xl"},id={class:"bg-white rounded-lg shadow-md p-6"},ud={key:0,class:"text-red-500 text-xs"},dd={key:0,class:"text-red-500 text-xs"},cd={key:0,class:"text-red-500 text-xs"},pd={key:0,class:"text-red-500 text-xs"},vd={key:0,class:"text-red-500 text-xs"},md=["disabled"],fd={key:0},gd={key:1},bd=le({__name:"CommercantCreate",setup(C){const a=ie(),c=pe(),m=b({nom:"",ville:"",email:"",telephone:"",photo:null}),u=b(!1),l=b({}),o=i=>{const p=i.target;p.files&&p.files[0]&&(m.value.photo=p.files[0])},n=async(i,p)=>{console.log(i,p);try{await Ne.send("service_06884pt","template_5x962ru",{to_name:i,code:p}),c.success("Code de vÃ©rification envoyÃ©.")}catch{c.error("Erreur lors de l'envoi de l'email.")}},v=async()=>{var i,p,y,E;u.value=!0,l.value={};try{const k=new FormData;k.append("nom",m.value.nom),k.append("ville",m.value.ville),k.append("email",m.value.email),k.append("telephone",m.value.telephone),m.value.photo&&k.append("photo",m.value.photo);const w=await q.post("/commercants",k,{headers:{"Content-Type":"multipart/form-data"}});await n(w.data.commercant.email,w.data.verification_code),a.push("/profil")}catch(k){((p=(i=k.response)==null?void 0:i.data)==null?void 0:p.message)=="Unauthenticated."&&a.push("login"),(E=(y=k.response)==null?void 0:y.data)!=null&&E.errors?l.value=k.response.data.errors:c.error("Erreur lors de la crÃ©ation du commerÃ§ant"),console.error(k)}finally{u.value=!1}};return(i,p)=>(t(),s("div",ld,[e("div",nd,[p[11]||(p[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),P(" CrÃ©er un CommerÃ§ant ")],-1)),e("div",id,[e("form",{onSubmit:de(v,["prevent"]),class:"space-y-6"},[e("div",null,[p[4]||(p[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),O(e("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>m.value.nom=y),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerÃ§ant",required:""},null,512),[[Z,m.value.nom]]),l.value.nom?(t(),s("span",ud,x(l.value.nom),1)):S("",!0)]),e("div",null,[p[5]||(p[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),O(e("input",{"onUpdate:modelValue":p[1]||(p[1]=y=>m.value.ville=y),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[Z,m.value.ville]]),l.value.ville?(t(),s("span",dd,x(l.value.ville),1)):S("",!0)]),e("div",null,[p[6]||(p[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{"onUpdate:modelValue":p[2]||(p[2]=y=>m.value.email=y),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[Z,m.value.email]]),l.value.email?(t(),s("span",cd,x(l.value.email),1)):S("",!0)]),e("div",null,[p[7]||(p[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"TÃ©lÃ©phone",-1)),O(e("input",{"onUpdate:modelValue":p[3]||(p[3]=y=>m.value.telephone=y),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[Z,m.value.telephone]]),l.value.telephone?(t(),s("span",pd,x(l.value.telephone),1)):S("",!0)]),e("div",null,[p[8]||(p[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:o,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),l.value.photo?(t(),s("span",vd,x(l.value.photo),1)):S("",!0)]),e("div",null,[e("button",{type:"submit",disabled:u.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[u.value?(t(),s("span",fd,p[9]||(p[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),P(" CrÃ©ation en cours... ")]))):(t(),s("span",gd,p[10]||(p[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),P(" CrÃ©er le commerÃ§ant ")])))],8,md)])],32)])])]))}}),bp=ne(bd,[["__scopeId","data-v-1b677a0b"]]),xd={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},hd={class:"container mx-auto max-w-4xl pb-8"},yd={class:"text-md font-semibold text-white flex items-center"},_d={class:"ml-2 text-sm text-white/80"},wd={class:"text-white/90 text-sm mt-2"},kd={key:0,class:"text-white/90 text-sm mt-1"},$d={class:"list-disc list-inside ml-4"},Cd=le({__name:"ParrainageInfo",setup(C){const a=ie(),c=pe(),m=b([]),u=async()=>{try{const o=await q.get("/parrainages/niveaux");m.value=o.data.niveaux}catch(o){c.error("Erreur lors de la rÃ©cupÃ©ration des niveaux de parrainage"),console.error(o)}},l=()=>{a.go(-1)};return ge(()=>{u()}),(o,n)=>(t(),s("div",xd,[e("div",hd,[n[4]||(n[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),P(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:l,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},n[0]||(n[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),P(" Retour ")])),n[5]||(n[5]=je('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-21e0049a><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-21e0049a>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-21e0049a> Le systÃ¨me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Gagnez <strong data-v-21e0049a>1 jeton</strong> par commerÃ§ant parrainÃ©, plus des <strong data-v-21e0049a>bonus en jetons cumulatifs</strong> en fonction des <strong data-v-21e0049a>niveaux de parrainage</strong> dÃ©bloquÃ©s par le nombre de commerÃ§ants parrainÃ©s. Plus vous parrainez, plus vous montez de niveau et accumulez de jetons ! DÃ©couvrez les dÃ©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-21e0049a><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-21e0049a>Comment Ã§a fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-21e0049a><li data-v-21e0049a><strong data-v-21e0049a>Obtenez votre code unique :</strong> GÃ©nÃ©rez ou crÃ©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-21e0049a><strong data-v-21e0049a>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis Ã  s&#39;inscrire.</li><li data-v-21e0049a><strong data-v-21e0049a>Attirez des commerÃ§ants :</strong> Encouragez vos filleuls Ã  devenir des commerÃ§ants actifs sur la plateforme. Chaque commerÃ§ant parrainÃ© vous rapporte <strong data-v-21e0049a>1 jeton</strong>. Seuls les commerÃ§ants parrainÃ©s comptent pour dÃ©bloquer les niveaux.</li><li data-v-21e0049a><strong data-v-21e0049a>Montez de niveau :</strong> Chaque niveau nÃ©cessite un nombre spÃ©cifique de commerÃ§ants parrainÃ©s. Une fois le seuil atteint, vous dÃ©bloquez un bonus en jetons correspondant Ã  ce niveau, en plus des bonus des niveaux prÃ©cÃ©dents et des jetons individuels par commerÃ§ant.</li><li data-v-21e0049a><strong data-v-21e0049a>Suivez vos progrÃ¨s :</strong> Consultez votre niveau actuel, vos jetons gagnÃ©s (1 par commerÃ§ant + bonus de niveau), et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-21e0049a><strong data-v-21e0049a>Note importante :</strong> Vous gagnez <strong data-v-21e0049a>1 jeton</strong> par commerÃ§ant parrainÃ©, plus des bonus cumulatifs attribuÃ©s en fonction des niveaux atteints. Par exemple, si vous atteignez le niveau 2 avec 5 commerÃ§ants, vous recevez 5 jetons (1 par commerÃ§ant) plus les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(B,null,ee(m.value,v=>(t(),s("div",{key:v.id,class:"mb-6 p-4 border rounded-lg",style:$e({backgroundColor:v.couleur||"#f0f0f0"})},[e("h3",yd,[P(x(v.nom)+" "+x(v.emoji)+" ",1),e("span",_d,"("+x(v.filleuls_requis)+" commerÃ§ants requis)",1)]),e("p",wd,[n[1]||(n[1]=e("strong",null,"Bonus en jetons :",-1)),P(" "+x(v.jetons_bonus)+" jetons ",1)]),v.avantages.length?(t(),s("p",kd,[n[2]||(n[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",$d,[(t(!0),s(B,null,ee(v.avantages,i=>(t(),s("li",{key:i},x(i),1))),128))])])):S("",!0),n[3]||(n[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont crÃ©ditÃ©s une fois le niveau atteint et cumulÃ©s avec les niveaux prÃ©cÃ©dents. Vous gagnez Ã©galement 1 jeton par commerÃ§ant parrainÃ©. ",-1))],4))),128))])]))}}),xp=ne(Cd,[["__scopeId","data-v-21e0049a"]]),Ad={class:"w-full flex relative px-0"},Pd=["onClick"],jd={class:"flex items-center"},Sd=["onClick"],Md=["src"],Vd={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Ed={class:"min-w-0"},zd={class:"font-semibold text-[var(--espace-vert)] truncate"},Ud={class:"text-xs text-[var(--espace-gris)] truncate"},Ld={class:"flex items-center"},Td={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Id={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Fd={class:"w-full grid grid-rows-[10%_86%]"},Rd={class:"flex border-b"},qd={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},Od={class:"bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full"},Nd={key:0,class:"h-full flex flex-col"},Dd={class:"block text-[var(--espace-vert)]"},Wd={class:"text-gray-800"},Hd={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},Jd={key:0,class:"text-center text-[var(--espace-gris)]"},Bd={class:"px-2 md:px-4 pb-8 sm:pb-4 md:pb-0 z-100"},Gd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},Kd={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},Xd={key:1,class:"flex items-center justify-center h-full"},Qd=le({__name:"Messages",setup(C){const a=()=>{const K=window.location.hostname;return K==="localhost"||K==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},c=me(()=>a()),m=ie(),u=Se(),l=be(),o=pe(),n=Te(),v=b([]),i=b([]),p=b(null),y=b(""),E=b(!0),k=b(0),w=b(!1),r=b(!1),d=b(null),$=b(null),A=b(window.innerWidth<768);let J=null;const j=()=>{Oe(()=>{d.value&&d.value.scrollTo({top:d.value.scrollHeight,behavior:"smooth"})})},V=()=>{$.value=null,localStorage.removeItem("chatProduct")},F=async()=>{var K,_;try{const f=await q.get("/conversations");v.value=f.data.conversations}catch(f){((_=(K=f.response)==null?void 0:K.data)==null?void 0:_.message)==="Unauthenticated."&&m.push("login"),o.error("Erreur lors de la rÃ©cupÃ©ration des conversations"),console.error(f)}},M=async(K,_=!0)=>{var f,U,g,z,R,ae,re;if(!r.value){r.value=!0;try{_&&(k.value=0,i.value=[]),E.value=!1;const se=await q.get(`/chat/${K}?offset=${k.value}`),N=se.data.messages,h=((f=d.value)==null?void 0:f.scrollHeight)||0,oe=((U=d.value)==null?void 0:U.scrollTop)||0;i.value=[...N,...i.value],w.value=se.data.hasMore;const I=localStorage.getItem("chatProduct"),ue=v.value.find(Pe=>Pe.user_id===K);let we="",Ce="/default-avatar.png";ue?(we=ue.is_commercant?ue.name:((g=se.data.user)==null?void 0:g.nom)||"",Ce=ue.profile_photo||"/default-avatar.png"):I?(we=JSON.parse(I).commercant_name||((z=se.data.user)==null?void 0:z.nom)||"",Ce=(ue==null?void 0:ue.profile_photo)||"/default-avatar.png"):we=((R=se.data.user)==null?void 0:R.nom)||"",p.value={user_id:K,name:we,is_commercant:(ue==null?void 0:ue.is_commercant)||!1,profile_photo:Ce},I&&($.value=JSON.parse(I)),await H(K),Oe(()=>{if(d.value&&!_){const Pe=d.value.scrollHeight;d.value.scrollTop=oe+(Pe-h)}else j()})}catch(se){((re=(ae=se.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&m.push("login"),o.error("Erreur lors du chargement des messages"),console.error(se)}finally{r.value=!1}}},X=K=>{m.push({name:"messages",params:{receiverId:K}}),A.value&&(E.value=!1)},ce=async()=>{var f,U,g,z,R,ae,re,se,N,h,oe,I;if(!y.value.trim()||!p.value){o.error("Veuillez sÃ©lectionner une conversation et Ã©crire un message");return}const K=y.value.trim(),_={id:-Date.now(),sender_id:(f=l.user)==null?void 0:f.id,receiver_id:p.value.user_id,content:K,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((U=$.value)==null?void 0:U.id)||null,sender:{id:((g=l.user)==null?void 0:g.id)??0,nom:((z=l.user)==null?void 0:z.nom)??"",email:((R=l.user)==null?void 0:R.email)??"",telephone:((ae=l.user)==null?void 0:ae.telephone)??"",ville:((re=l.user)==null?void 0:re.ville)??"",premium:((se=l.user)==null?void 0:se.premium)??!1,parrain_id:((N=l.user)==null?void 0:N.parrain_id)??0},receiver:{id:p.value.user_id,nom:p.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:$.value||null};i.value.push(_),y.value="",j();try{const ue=await q.post(`/chat/${p.value.user_id}`,{content:K,product_id:(h=$.value)==null?void 0:h.id});$.value&&V()}catch(ue){((I=(oe=ue.response)==null?void 0:oe.data)==null?void 0:I.message)==="Unauthenticated."&&m.push("login"),o.error("Ã‰chec d'envoi"),console.error(ue),i.value=i.value.filter(we=>we.id!==_.id)}},Y=()=>{!d.value||!w.value||r.value||d.value.scrollTop<=100&&(k.value+=30,M(p.value.user_id,!1))},L=()=>{A.value=window.innerWidth<768,E.value=window.innerWidth>=768},H=async K=>{var _,f;try{const U=await q.put("/messages/mark-all-as-read");n.saveUnreadMessagesToLocalStorage(U.data.unread_messages)}catch(U){((f=(_=U.response)==null?void 0:_.data)==null?void 0:f.message)==="Unauthenticated."&&m.push("login"),console.error("Erreur lors du marquage des messages comme lus:",U),o.error("Erreur lors de la mise Ã  jour des messages lus")}},W=()=>{E.value=!E.value},te=(K,_)=>{const f=_?`/commercants/${K}`:`/users/${K}`;m.push(f)},ve=()=>{var K;if(!((K=l.user)!=null&&K.id)){console.error("Utilisateur non authentifiÃ©");return}J&&(J.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),J=window.Echo.private("chat").listen(".App\\Events\\MessageSent",_=>{var f,U;if(((f=p.value)==null?void 0:f.user_id)===_.message.receiver_id||((U=p.value)==null?void 0:U.user_id)===_.message.sender_id){const g={id:_.message.id,sender_id:_.message.sender_id,receiver_id:_.message.receiver_id,content:_.message.content,created_at:_.message.created_at,updated_at:_.message.updated_at,is_read:_.message.is_read,product_id:_.message.product_id||null,sender:_.message.sender,receiver:_.message.receiver,product:_.message.product||null};i.value.push(g),j(),n.saveUnreadMessagesToLocalStorage(_.unread_messages)}}).error(_=>{}),J.params={channelId:"chat"}};return ge(()=>{var K;F(),u.params.receiverId&&M(parseInt(u.params.receiverId)),(K=l.user)!=null&&K.id&&ve(),window.addEventListener("resize",L),xe(()=>d.value,_=>{_&&_.addEventListener("scroll",Y)})}),Ve(()=>{J&&(J.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),window.removeEventListener("resize",L),d.value&&d.value.removeEventListener("scroll",Y)}),xe(()=>u.params.receiverId,async K=>{K&&await M(parseInt(K))}),xe(()=>{var K;return(K=l.user)==null?void 0:K.id},K=>{K&&ve()}),(K,_)=>{var U,g;const f=he("router-link");return t(),s("div",Ad,[D(_e,{name:"slide-fade"},{default:Q(()=>[E.value||!A.value?(t(),s("div",{key:0,class:G(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",A.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[_[1]||(_[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(B,null,ee(v.value,z=>(t(),s("div",{key:z.user_id,onClick:R=>X(z.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",jd,[e("div",{onClick:de(R=>te(z.user_id,z.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[z.profile_photo?(t(),s("img",{key:0,src:c.value+z.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Md)):(t(),s("i",Vd))],8,Sd),e("div",Ed,[e("p",zd,x(z.name),1),e("p",Ud,x(z.last_message),1)])]),e("div",Ld,[z.unread_count>0?(t(),s("div",Td,x(z.unread_count),1)):S("",!0),e("div",Id,x(new Date(z.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,Pd))),128))],2)):S("",!0)]),_:1}),e("div",Fd,[e("div",Rd,[!E.value&&A.value&&p.value?(t(),s("button",{key:0,onClick:W,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},_[2]||(_[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):S("",!0),p.value?(t(),s("h2",qd,x(p.value.name),1)):S("",!0)]),e("div",Od,[p.value?(t(),s("div",Nd,[e("div",{class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 z-50 messages-container",ref_key:"messagesContainer",ref:d},[(t(!0),s(B,null,ee(i.value,z=>{var R,ae,re,se;return t(),s("div",{key:z.id,class:G(["p-3 rounded-lg break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":z.sender_id===((R=T(l).user)==null?void 0:R.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":z.sender_id!==((ae=T(l).user)==null?void 0:ae.id)}])},[e("strong",Dd,x((re=z.sender)==null?void 0:re.nom)+" :",1),e("p",Wd,[(se=z.product)!=null&&se.id?(t(),fe(f,{key:0,to:{name:"produit",params:{id:z.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:Q(()=>[P(" [Produit "+x(z.product.nom)+"] ",1)]),_:2},1032,["to"])):S("",!0),P(" "+x(z.content),1)]),e("p",Hd,x(new Date(z.created_at).toLocaleTimeString()),1)],2)}),128)),r.value?(t(),s("div",Jd,"Chargement...")):S("",!0)],512),e("div",Bd,[e("div",Gd,[(U=$.value)!=null&&U.id?(t(),s("span",Kd,[P(" Produit "+x((g=$.value)==null?void 0:g.nom)+" ",1),e("button",{onClick:V,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," Ã— ")])):S("",!0),O(e("input",{"onUpdate:modelValue":_[0]||(_[0]=z=>y.value=z),onKeyup:Ze(ce,["enter"]),type:"text",placeholder:"Ã‰crivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w-[200px]"},null,544),[[Z,y.value]]),e("button",{onClick:ce,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},_[3]||(_[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",Xd,_[4]||(_[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"SÃ©lectionnez une conversation pour commencer.",-1)])))])])])}}}),hp=ne(Qd,[["__scopeId","data-v-e04fc4c7"]]),Zd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},Yd={key:0,class:"overflow-y-scroll space-y-4"},ec={class:"flex justify-between items-center"},tc={class:"text-lg font-semibold"},sc={class:"text-gray-600"},oc={class:"text-gray-600"},ac={class:"text-gray-600"},rc={class:"text-gray-600"},lc={class:"text-gray-600"},nc={key:0,class:"text-gray-600"},ic={class:"text-right"},uc=["onClick"],dc={key:1,class:"text-gray-500"},cc={class:"mt-6 flex gap-4"},pc={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vc=le({__name:"JetonHistory",setup(C){const a=ie(),m=be().user,u=b([]),l=b(!1),o=pe(),n=async()=>{try{const p=await q.get(`/jeton-transactions/${m==null?void 0:m.id}`);u.value=p.data}catch(p){console.error("Erreur lors du chargement des transactions:",p)}},v=p=>new Date(p).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=async p=>{var y,E,k,w;if(confirm(`Refaire l'achat de ${p.nombre_jetons} jetons avec le mÃªme service (${p.methode_paiement}) ?`)){l.value=!0;try{const r=await q.post("/acheter-jetons",{nombre_jetons:p.nombre_jetons,payment_service:p.methode_paiement,phone_number:p.phone_number});o.success(r.data.message),n()}catch(r){((E=(y=r.response)==null?void 0:y.data)==null?void 0:E.message)=="Unauthenticated."&&a.push("login"),o.error(((w=(k=r.response)==null?void 0:k.data)==null?void 0:w.message)||"Erreur lors de l'achat."),console.error(r)}finally{l.value=!1}}};return ge(()=>{m&&n()}),(p,y)=>{const E=he("router-link");return t(),s("div",Zd,[y[4]||(y[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),u.value.length>0?(t(),s("div",Yd,[(t(!0),s(B,null,ee(u.value,k=>(t(),s("div",{key:k.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",ec,[e("div",null,[e("p",tc,"Achat de "+x(k.nombre_jetons)+" jetons",1),e("p",sc,"Montant: "+x(k.montant)+" FCFA",1),e("p",oc,"MÃ©thode: "+x(k.methode_paiement),1),e("p",ac,"NumÃ©ro: "+x(k.phone_number),1),e("p",rc,"Statut: "+x(k.statut),1),e("p",lc,"Date: "+x(v(k.date_transaction)),1),k.transaction_id_mesomb?(t(),s("p",nc," ID Transaction: "+x(k.transaction_id_mesomb),1)):S("",!0)]),e("div",ic,[e("button",{onClick:w=>i(k),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},y[0]||(y[0]=[e("i",{class:"fas fa-redo"},null,-1),P(" Refaire ")]),8,uc)])])]))),128))])):(t(),s("p",dc,"Aucune transaction trouvÃ©e.")),e("div",cc,[D(E,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Q(()=>y[1]||(y[1]=[P(" Acheter des Jetons ")])),_:1,__:[1]}),D(E,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:Q(()=>y[2]||(y[2]=[P(" Booster un Produit ")])),_:1,__:[2]})]),l.value?(t(),s("div",pc,y[3]||(y[3]=[je('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-5312e1a5><p class="text-lg text-[var(--espace-vert)]" data-v-5312e1a5>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-5312e1a5><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-5312e1a5></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-5312e1a5></path></svg></div>',1)]))):S("",!0)])}}}),yp=ne(vc,[["__scopeId","data-v-5312e1a5"]]),mc={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},fc={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},gc={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},bc={class:"relative"},xc=["src"],hc={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},yc={class:"flex-1"},_c={class:"text-gray-600"},wc={key:0,class:"text-sm text-gray-500"},kc={class:"text-gray-600"},$c={class:"text-gray-600"},Cc=le({__name:"ProfilePublic",setup(C){const a=Se(),c=ie(),m=pe(),u=b(null),l=async()=>{var n,v;try{const i=await q.get(`/profile/public/${a.params.id}`);u.value=i.data}catch(i){((v=(n=i.response)==null?void 0:n.data)==null?void 0:v.message)=="Unauthenticated."&&c.push("login"),m.error("Erreur lors de la rÃ©cupÃ©ration du profil."),console.error(i)}},o=()=>{var n;(n=u.value)!=null&&n.id?c.push({name:"messages",params:{receiverId:u.value.id}}):m.error("Impossible d'accÃ©der au chat. Profil invalide.")};return ge(()=>{l()}),(n,v)=>{var i,p,y,E,k,w,r,d,$,A,J,j,V,F,M,X,ce,Y,L,H,W,te;return t(),s("div",mc,[e("div",fc,[e("div",gc,[e("div",bc,[(i=u.value)!=null&&i.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(p=u.value)==null?void 0:p.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,xc)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((w=(k=(E=(y=u.value)==null?void 0:y.niveaux_users)==null?void 0:E.at(-1))==null?void 0:k.parrainage_niveau)==null?void 0:w.couleur)||"#0af"}`})},v[0]||(v[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(r=u.value)!=null&&r.premium?(t(),s("i",hc)):S("",!0)]),e("div",yc,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:$e({color:`${((J=(A=($=(d=u.value)==null?void 0:d.niveaux_users)==null?void 0:$.at(-1))==null?void 0:A.parrainage_niveau)==null?void 0:J.couleur)||"#0af"}`})},[P(x((j=u.value)==null?void 0:j.nom)+" ",1),(V=u.value)!=null&&V.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:$e({background:`${((ce=(X=(M=(F=u.value)==null?void 0:F.niveaux_users)==null?void 0:M.at(-1))==null?void 0:X.parrainage_niveau)==null?void 0:ce.couleur)||"#0af"}`})}," Premium ",4)):S("",!0)],4),e("p",_c,"Statut : "+x((Y=u.value)!=null&&Y.commercant?"CommerÃ§ant":"Utilisateur"),1),(L=u.value)!=null&&L.subscription_ends_at?(t(),s("p",wc," Abonnement Premium jusqu'au "+x(new Date((H=u.value)==null?void 0:H.subscription_ends_at).toLocaleDateString()),1)):S("",!0),e("p",kc,"Ville : "+x((W=u.value)==null?void 0:W.ville),1),e("p",$c,"TÃ©lÃ©phone : "+x((te=u.value)==null?void 0:te.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:o,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},v[1]||(v[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),P(" Discuter ")]))])]),v[2]||(v[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),_p=ne(Cc,[["__scopeId","data-v-e1d303b7"]]),Ac={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},Pc={class:"bg-white p-6 rounded-lg shadow-md mb-6"},jc={class:"space-y-4"},Sc={class:"text-gray-700"},Mc={class:"text-gray-700"},Vc={class:"text-gray-700"},Ec={class:"text-gray-700"},zc={class:"text-gray-700"},Uc={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Lc=["disabled"],Tc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Ic={key:0,class:"mt-4 text-green-600 text-center"},Fc=le({__name:"Doc",setup(C){ie();const a=b(!1),c=b(!1),m=b({name:"",email:"",message:""}),u=async()=>{a.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m.value)})).ok)c.value=!0,m.value={name:"",email:"",message:""},setTimeout(()=>{c.value=!1},5e3);else throw new Error("Ã‰chec de lâ€™envoi")}catch(l){console.error("Erreur lors de la soumission:",l)}finally{a.value=!1}};return(l,o)=>{const n=he("router-link");return t(),s("div",Ac,[o[33]||(o[33]=je('<div class="text-center mb-8" data-v-e1156810><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-e1156810>ğŸ“˜ Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-e1156810>Votre espace pour faciliter le commerce au Cameroun</p><p class="text-lg font-semibold text-[var(--espace-or)] mt-1" data-v-e1156810>Commerce facile, opportunitÃ©s infinies.</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-e1156810><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-e1156810>Ã€ Propos dâ€™Espace Cameroun</h2><p class="text-gray-700" data-v-e1156810> Espace Cameroun est une plateforme de marketplace conÃ§ue pour connecter commerÃ§ants, acheteurs et revendeurs. Son objectif principal est de crÃ©er un espace numÃ©rique oÃ¹ les transactions commerciales peuvent se dÃ©rouler facilement et en toute sÃ©curitÃ©. Notre mission est de faciliter lâ€™activitÃ© commerciale au Cameroun en offrant des outils simples et accessibles Ã  tous. </p></section>',2)),e("section",Pc,[o[27]||(o[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"FonctionnalitÃ©s ClÃ©s",-1)),e("div",jc,[e("div",null,[o[6]||(o[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",Sc,[o[4]||(o[4]=P(" Communiquez directement avec vos partenaires commerciaux pour nÃ©gocier ou confirmer des transactions via la section ")),D(n,{to:"/messages",class:"text-blue-500 underline"},{default:Q(()=>o[3]||(o[3]=[P("Chat")])),_:1,__:[3]}),o[5]||(o[5]=P(". "))])]),o[23]||(o[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," CrÃ©ez et gÃ©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute sÃ©curitÃ©. ")],-1)),e("div",null,[o[10]||(o[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",Mc,[o[8]||(o[8]=P(" Participez au marchÃ© des jetons via ")),D(n,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:Q(()=>o[7]||(o[7]=[P("MarchÃ© des Jetons")])),_:1,__:[7]}),o[9]||(o[9]=P(" pour vendre vos jetons ou en acheter, gÃ©nÃ©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[o[14]||(o[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Vc,[o[12]||(o[12]=P(" Devenez commerÃ§ant en crÃ©ant un compte via ")),D(n,{to:"/profil",class:"text-blue-500 underline"},{default:Q(()=>o[11]||(o[11]=[P("Profil")])),_:1,__:[11]}),o[13]||(o[13]=P(", puis publiez vos produits (ex. tÃ©lÃ©phones, vÃªtements) ou services (ex. rÃ©parations, cours) en remplissant les dÃ©tails (nom, prix, description, photos), sÃ©lectionnant un portefeuille, et soumettant votre annonce. "))])]),o[24]||(o[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagnÃ©s pour booster vos produits ou services, augmentant leur visibilitÃ© auprÃ¨s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[o[18]||(o[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Ec,[o[16]||(o[16]=P(" Travaillez avec dâ€™autres commerÃ§ants pour proposer des produits ou services en collaboration via ")),D(n,{to:"/collaborations",class:"text-blue-500 underline"},{default:Q(()=>o[15]||(o[15]=[P("Collaborations")])),_:1,__:[15]}),o[17]||(o[17]=P(". "))])]),e("div",null,[o[22]||(o[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"SystÃ¨me de Parrainage",-1)),e("p",zc,[o[20]||(o[20]=P(" Invitez dâ€™autres utilisateurs Ã  crÃ©er un compte commerÃ§ant via ")),D(n,{to:"/parrainage",class:"text-blue-500 underline"},{default:Q(()=>o[19]||(o[19]=[P("Ã‰quipe")])),_:1,__:[19]}),o[21]||(o[21]=P(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commerÃ§ants parrainÃ©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les Ã©changer sur le marchÃ© des jetons. "))])]),o[25]||(o[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez Ã  un abonnement premium pour accÃ©der Ã  des privilÃ¨ges exclusifs, comme une visibilitÃ© accrue, des fonctionnalitÃ©s avancÃ©es, et des avantages spÃ©ciaux (dÃ©tails Ã  venir). ")],-1)),o[26]||(o[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," DÃ©couvrez dâ€™autres fonctionnalitÃ©s au fil de votre utilisation pour optimiser votre expÃ©rience commerciale. ")],-1))])]),e("section",Uc,[o[31]||(o[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),o[32]||(o[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester Ã  lâ€™Ã©coute pour les mises Ã  jour et les nouvelles fonctionnalitÃ©s Ã  venir. ",-1)),e("form",{onSubmit:de(u,["prevent"]),class:"space-y-4"},[e("div",null,[o[28]||(o[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[0]||(o[0]=v=>m.value.name=v),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Z,m.value.name]])]),e("div",null,[o[29]||(o[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":o[1]||(o[1]=v=>m.value.email=v),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Z,m.value.email]])]),e("div",null,[o[30]||(o[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),O(e("textarea",{id:"message",name:"message","onUpdate:modelValue":o[2]||(o[2]=v=>m.value.message=v),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[Z,m.value.message]])]),e("button",{type:"submit",disabled:a.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":a.value}])},[a.value?(t(),s("span",Tc)):S("",!0),e("span",null,x(a.value?"Envoi...":"Envoyer"),1)],10,Lc)],32),c.value?(t(),s("p",Ic,"Merci ! Votre message a Ã©tÃ© envoyÃ© avec succÃ¨s. ")):S("",!0)]),o[34]||(o[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines Ã‰tapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour amÃ©liorer Espace Cameroun. Restez connectÃ©s pour dÃ©couvrir de nouvelles fonctionnalitÃ©s et opportunitÃ©s commerciales dans un avenir proche. ")],-1))])}}}),wp=ne(Fc,[["__scopeId","data-v-e1156810"]]),Rc={class:"overflow-y-scroll bg-gray-50 flex flex-col"},qc={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},Oc={class:"flex items-center mb-4"},Nc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},Dc={class:"ml-4 text-lg font-semibold text-gray-800"},Wc={key:0,class:"text-gray-700 mb-2 leading-relaxed"},Hc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},Jc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},Bc=["disabled"],Gc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Kc={key:0,class:"mt-4 text-green-600 text-center"},Xc=le({__name:"Politique",setup(C){new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});const a=b([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons Ã  protÃ©ger vos informations personnelles et Ã  respecter votre vie privÃ©e."},{id:"collecte",title:"DonnÃ©es collectÃ©es",icon:"fas fa-database",list:["Nom, email, tÃ©lÃ©phone","Produits publiÃ©s","Messages Ã©changÃ©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donnÃ©es",icon:"fas fa-cogs",list:["Gestion des comptes","AmÃ©lioration du service","SÃ©curitÃ© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donnÃ©es. Elles ne sont partagÃ©es quâ€™avec nos prestataires ou si la loi lâ€™exige."},{id:"securite",title:"SÃ©curitÃ©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des accÃ¨s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["AccÃ¨s et rectification","Suppression du compte","Opposition et portabilitÃ©"]}]),c=b(!1),m=b(!1),u=b({name:"",email:"",message:""}),l=async()=>{c.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u.value)})).ok)m.value=!0,u.value={name:"",email:"",message:""},setTimeout(()=>{m.value=!1},5e3);else throw new Error("Ã‰chec de lâ€™envoi")}catch(o){console.error("Erreur envoi :",o)}finally{c.value=!1}};return(o,n)=>(t(),s("div",Rc,[n[8]||(n[8]=je('<section class="bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white pt-6 pb-8 shadow-lg" data-v-0622a650><div class="max-w-4xl mx-auto text-center px-6" data-v-0622a650><h1 class="text-4xl sm:text-5xl font-bold mb-4" data-v-0622a650>Politique de ConfidentialitÃ©</h1><p class="text-lg text-green-100 max-w-2xl mx-auto" data-v-0622a650> DÃ©couvrez comment <strong data-v-0622a650>Espace Cameroun</strong> protÃ¨ge vos donnÃ©es et respecte votre vie privÃ©e. </p><p class="text-lg font-semibold text-[var(--espace-or)] mt-2" data-v-0622a650>Commerce facile, opportunitÃ©s infinies. </p></div></section>',1)),e("section",qc,[D(De,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:Q(()=>[(t(!0),s(B,null,ee(a.value,v=>(t(),s("div",{key:v.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",Oc,[e("div",Nc,[e("i",{class:G([v.icon,"text-xl"])},null,2)]),e("h2",Dc,x(v.title),1)]),v.text?(t(),s("p",Wc,x(v.text),1)):S("",!0),v.list?(t(),s("ul",Hc,[(t(!0),s(B,null,ee(v.list,i=>(t(),s("li",{key:i},x(i),1))),128))])):S("",!0)]))),128))]),_:1})]),e("section",Jc,[n[6]||(n[6]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," ğŸ’Œ Une question sur vos donnÃ©es ? ",-1)),n[7]||(n[7]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous rÃ©pondrons dans les plus brefs dÃ©lais. ",-1)),e("form",{onSubmit:de(l,["prevent"]),class:"space-y-4"},[e("div",null,[n[3]||(n[3]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":n[0]||(n[0]=v=>u.value.name=v),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Z,u.value.name]])]),e("div",null,[n[4]||(n[4]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":n[1]||(n[1]=v=>u.value.email=v),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Z,u.value.email]])]),e("div",null,[n[5]||(n[5]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),O(e("textarea",{id:"message",name:"message","onUpdate:modelValue":n[2]||(n[2]=v=>u.value.message=v),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[Z,u.value.message]])]),e("button",{type:"submit",disabled:c.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":c.value}])},[c.value?(t(),s("span",Gc)):S("",!0),e("span",null,x(c.value?"Envoi...":"Envoyer"),1)],10,Bc)],32),m.value?(t(),s("p",Kc," âœ… Merci ! Votre message a Ã©tÃ© envoyÃ© avec succÃ¨s. ")):S("",!0)])]))}}),kp=ne(Xc,[["__scopeId","data-v-0622a650"]]),Qc={class:"flex items-center justify-center h-screen"},Zc=le({__name:"GoogleCallback",setup(C){const a=ie(),c=pe(),m=be();return ge(async()=>{try{const u=new URLSearchParams(window.location.search),l=u.get("token"),o=u.get("user"),n=u.get("error");if(n)throw new Error(decodeURIComponent(n));if(!l||!o)throw new Error("Token ou donnÃ©es utilisateur manquants");m.token=l,m.user=JSON.parse(decodeURIComponent(o)),localStorage.setItem("token",l),q.defaults.headers.common.Authorization=`Bearer ${l}`,c.success("Bienvenue sur Espace Cameroun !"),a.push({name:"home"})}catch(u){c.error(u.message||"Erreur lors de la connexion avec Google"),console.error(u),a.push("/login")}}),(u,l)=>(t(),s("div",Qc,l[0]||(l[0]=[e("div",{class:"text-center"},[e("i",{class:"fas fa-spinner fa-spin text-3xl text-[var(--espace-vert)]"}),e("p",{class:"mt-4 text-[var(--espace-gris)]"},"Redirection en cours...")],-1)])))}}),Yc=ne(Zc,[["__scopeId","data-v-70486c5b"]]),$p=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"}));export{wo as A,lp as C,wp as D,ap as F,$p as G,op as H,yp as J,rp as L,hp as M,ip as P,np as R,dp as a,gp as b,bp as c,pp as d,up as e,vp as f,xp as g,cp as h,mp as i,_p as j,fp as k,kp as l,q as m};
