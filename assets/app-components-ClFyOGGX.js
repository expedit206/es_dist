import{u as ie,r as b,a as pe,d as le,w as xe,o as be,b as he,c as s,e as j,f as I,g as t,h as e,i as O,j as K,k as A,t as x,l as me,m as Se,n as Ve,p as fe,F as B,q as Z,s as G,T as _e,v as de,x as $e,y as R,z as X,A as Xe,B as je,C as Qe,D as ut,E as dt,G as ct,H as Ae,I as De,J as Ze,K as Oe}from"./vue-D22jj4LC.js";import{d as We}from"./pinia-yzfThc-V.js";import{a as Fe}from"./axios-Dq7h7Pqt.js";const pt="/assets/logoooo-C2XZdLtn.png",vt=()=>{const C=window.location.hostname;return C==="localhost"||C==="127.0.0.1"?"http://localhost:8000":"https://api.espacecameroun.com"};Fe.defaults.withCredentials=!0;Fe.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Fe.defaults.withXSRFToken=!0;const F=Fe.create({withCredentials:!0,baseURL:vt(),headers:{Accept:"application/json","Content-Type":"application/json"}}),Be=ie(),ge=We("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(C){const r=await F.post("/login",C);this.user=r.data.user,this.token=r.data.token,localStorage.setItem("token",this.token??""),F.defaults.headers.common.Authorization=`Bearer ${this.token}`},async loginWithGoogle(C){try{const r=await F.get(`/auth/google/callback${C}`);this.user=r.data.user,this.token=r.data.token,localStorage.setItem("token",this.token??""),F.defaults.headers.common.Authorization=`Bearer ${this.token}`}catch{throw new Error("Erreur lors de la connexion avec Google")}},async register(C){const r=await F.post("/register",C);this.user=r.data.user,this.token=r.data.token,localStorage.setItem("token",this.token??""),F.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{F.defaults.headers.common.Authorization=`Bearer ${this.token}`;const C=await F.get("/user");return this.user=C.data.user,!0}catch(C){return console.error("Utilisateur non authentifiÃ©:",C),Be.push("/login"),this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{Be.push("/login"),this.token&&await F.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete F.defaults.headers.common.Authorization,["pending_collaborations","pending_orders","cart","token","unread_messages","viewedProducts"].forEach(r=>localStorage.removeItem(r))}}}),Ge=ie(),Te=We("userState",()=>{const C=b(0),r=b(0),p=pe(),g=()=>{const l=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");C.value=l.length;const v=localStorage.getItem("unread_messages");r.value=v?parseInt(v,10):0},d=l=>{localStorage.setItem("pending_collaborations",JSON.stringify(l)),C.value=l.length},n=l=>{localStorage.setItem("unread_messages",l.toString()),r.value=l},o=async l=>{var _,S,$;const v=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");v.push({produit_id:l.produit_id,prix_revente:l.prix_revente,status:"pending",created_at:new Date().toISOString()}),d(v);try{return await F.post("/collaborations",{produit_id:l.produit_id,prix_revente:l.prix_revente}),await i(),p.success("Demande de collaboration envoyÃ©e !"),!0}catch(w){((S=(_=w.response)==null?void 0:_.data)==null?void 0:S.message)=="Unauthenticated."&&Ge.push("login");const a=v.filter(u=>!(u.produit_id===l.produit_id&&u.prix_revente===l.prix_revente));return d(a),p.error((($=w.response)==null?void 0:$.data.message)||"Erreur lors de la demande de collaboration"),!1}},i=async()=>{var l,v;try{const _=await F.get("/user/badges");C.value=_.data.collaborations_pending,n(_.data.unread_messages||0)}catch(_){((v=(l=_.response)==null?void 0:l.data)==null?void 0:v.message)=="Unauthenticated."&&Ge.push("login"),console.error("Erreur lors de la synchronisation des badges:",_)}};return{collaborationsPending:C,unreadMessages:r,initializeState:g,addCollaboration:o,syncCollaborationsWithBackend:i,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),C.value=0,r.value=0},saveCollaborationsToLocalStorage:d,saveUnreadMessagesToLocalStorage:n}}),Ee=We("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:C=>ge().user},actions:{async fetchProducts(C={},r=!1,p=!1){var g,d;if(!(this.isLoading||!r&&!this.hasMore&&!p)){this.isLoading=!0,(r||p)&&(this.products=[],this.page=1,this.hasMore=!0);try{const n=await F.get("/produits",{params:{...C,page:this.page,sort:this.sort}});console.log("RÃ©ponse de l'API:",n.data),console.log("RÃ©ponse de l'API:",n.data.data);const o=n.data.data||[];if(!Array.isArray(o))throw new Error("Les donnÃ©es des produits ne sont pas un tableau");r||p||C.per_page==="all"?this.products=o:this.products=[...this.products,...o],this.hasMore=n.data.current_page<(n.data.last_page||1),this.page=n.data.current_page+1}catch(n){const o=ie();console.error("Erreur lors du fetch:",n),o.push("login"),(d=(g=n.response)==null?void 0:g.data)==null||d.message}finally{this.isLoading=!1}}},async toggleFavorite(C){var d,n;const r=ge();if(!r.user&&(await r.checkAuth(),!r.user)){console.warn("Utilisateur non connectÃ©, redirection ou action nÃ©cessaire");return}const p=this.products.find(o=>o.id===C);let g=!1;p&&(p.is_favorited_by=!p.is_favorited_by,p.counts.favorites_count=p.is_favorited_by?p.counts.favorites_count+1:p.counts.favorites_count-1,g=!0),this.product&&this.product.id===C&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,g=!0);try{const o=await F.post(`/produits/${C}/favorite`),i=o.data.produit;if(g){const m=this.products.findIndex(l=>l.id===C);m!==-1&&(this.products[m]={...this.products[m],...i}),this.product&&this.product.id===C&&(this.product={...this.product,...i})}return o.data.message}catch(o){const i=ie();if(((n=(d=o.response)==null?void 0:d.data)==null?void 0:n.message)==="Unauthenticated."&&i.push("login"),console.error("Erreur toggleFavorite:",o),g){const m=this.products.find(l=>l.id===C);m&&(m.is_favorited_by=!m.is_favorited_by,m.counts.favorites_count=m.is_favorited_by?m.counts.favorites_count-1:m.counts.favorites_count+1),this.product&&this.product.id===C&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct(C){var r,p,g,d;try{const n=await F.get(`/produits/${C}`);this.product=n.data.produit;const o=this.products.findIndex(i=>i.id===C);o!==-1?this.products[o]={...this.products[o],...this.product}:this.products.push(this.product)}catch(n){const o=ie();throw((p=(r=n.response)==null?void 0:r.data)==null?void 0:p.message)==="Unauthenticated."&&o.push("login"),((d=(g=n.response)==null?void 0:g.data)==null?void 0:d.message)||"Erreur lors du chargement du produit"}},setSort(C){this.sort=C,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(C){this.userId=C}}}),mt={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},ft={class:"text-sm font-semibold text-[var(--espace-vert)]"},gt={class:"text-gray-800"},bt=le({__name:"SoldeUser",setup(C){ie();const r=ge(),p=b(0),g=async()=>{if(r.user)try{p.value=r.user.jetons}catch(d){console.error("Erreur lors de la rÃ©cupÃ©ration des jetons:",d)}};return xe(()=>r.user,()=>{g()}),be(()=>{g()}),(d,n)=>{const o=he("router-link");return I(r).user?(t(),s("div",mt,[n[1]||(n[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",ft,[O(o,{to:"/jeton-history"},{default:K(()=>[n[0]||(n[0]=A(" Jetons : ")),e("span",gt,x(p.value),1)]),_:1,__:[0]})])])):j("",!0)}}}),ne=(C,r)=>{const p=C.__vccOpts||C;for(const[g,d]of r)p[g]=d;return p},Ye=ne(bt,[["__scopeId","data-v-a9413d7d"]]),xt={class:"relative bg-[var(--espace-vert)] w-full"},ht={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 z-50 shadow-md h-full"},yt={class:"px-2 w-full sm:px-3 py-2 flex justify-between items-center gap-4 mb-4"},_t={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},wt=["aria-label"],kt={class:"flex items-center gap-2"},$t=["src"],Ct={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},At={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},Pt=le({__name:"HeaderBar",setup(C){const r=()=>{const y=window.location.hostname;return y==="localhost"||y==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},p=me(()=>r()),g=ge(),d=Te();ie();const n=me(()=>g.user);Se();const o=b(!1),i=b(!1);b(""),Ee();const m=b(!1),l=b(null),v=b(!1);let _=null;const S=()=>{var y;(y=g.user)!=null&&y.id&&(_&&(_.stopListening("MessageSent"),window.Echo.leave("private-chat")),console.log("ğŸ”” Abonnement au canal privÃ© private-chat"),_=window.Echo.private("chat").listen("MessageSent",k=>{var D;((D=n.value)==null?void 0:D.id)==k.message.receiver_id&&(console.log("lalalla :",k),d.saveUnreadMessagesToLocalStorage(k.unread_messages))}).error(k=>{console.error("âŒ Erreur d'abonnement au canal privÃ©:",k)}),_.params={channelId:"chat"})},$=me(()=>{var y,k;return[...n.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:d.unreadMessages},...(k=(y=n.value)==null?void 0:y.commercant)!=null&&k.email_verified_at?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:d.collaborationsPending}]:[],{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]}),w=async()=>{if(n.value)try{await d.syncCollaborationsWithBackend()}catch(y){console.error("Erreur lors du chargement des badges:",y)}},a=async()=>{if(!n.value&&g.token)try{await g.checkAuth()}catch(y){console.error("Erreur lors de la rÃ©cupÃ©ration de l'utilisateur:",y),g.logout()}n.value&&w()};xe(()=>d.collaborationsPending,y=>{y>-1&&(o.value=!0,setTimeout(()=>o.value=!1,300))}),xe(()=>d.unreadMessages,y=>{y>-1&&(i.value=!0,setTimeout(()=>i.value=!1,300))});const u=y=>{if(v.value){v.value=!1;return}l.value&&!l.value.contains(y.target)&&(m.value=!1)};return be(async()=>{var y;await a(),document.addEventListener("click",u),(y=g.user)!=null&&y.id&&S()}),Ve(()=>{var y;document.removeEventListener("click",u),(y=g.user)!=null&&y.id&&window.Echo.leave(`chat.${g.user.id}`)}),(y,k)=>{const D=he("RouterLink"),N=he("router-link");return t(),s("div",xt,[e("header",ht,[e("div",yt,[O(D,{to:"/","aria-label":"Retour Ã  l'accueil"},{default:K(()=>k[0]||(k[0]=[e("div",{class:"flex items-center gap-1 sm:gap-3"},[e("div",{class:"rounded-full pb-5 pt-2"},[e("img",{src:pt,alt:"Logo Espace Cameroun",class:"bg-[var(--espace-vert)] md:w-50 h-10 w-30 object-contain transition-transform duration-300 hover:scale-105 hover:shadow-md"})])],-1)])),_:1,__:[0]}),e("nav",_t,[(t(!0),s(B,null,Z($.value,E=>(t(),fe(D,{key:E.to,to:E.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas",E.icon])},null,2),A(" "+x(E.label)+" ",1),E!=null&&E.badge&&E.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":E.to==="/collaborations"&&o.value||E.to==="/messages"&&i.value}]),"aria-label":E.to==="/collaborations"?"Collaborations en attente":E.to==="/messages"?"Messages non lus":""},x(E.badge),11,wt)):j("",!0)]),_:2},1032,["to"]))),128))]),O(Ye),e("div",kt,[n.value?(t(),fe(D,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:K(()=>[k[1]||(k[1]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),I(d).unreadMessages>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":i.value}]),"aria-label":"Messages non lus"},x(I(d).unreadMessages),3)):j("",!0)]),_:1,__:[1]})):j("",!0),n.value?(t(),fe(D,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:K(()=>{var E;return[(E=n.value)!=null&&E.photo?(t(),s("img",{key:0,src:p.value+n.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,$t)):(t(),s("div",Ct,k[2]||(k[2]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):j("",!0)]),n.value?(t(),fe(N,{key:0,to:"/jetonMarket","aria-label":"Aller au marchÃ©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:K(()=>k[3]||(k[3]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[3]})):j("",!0),e("div",At,[O(N,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:K(()=>k[4]||(k[4]=[A(" ? ")])),_:1,__:[4]})])])])])}}}),tp=ne(Pt,[["__scopeId","data-v-6fef8e73"]]),jt={class:"relative"},St={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Mt={class:"flex justify-around items-center py-2"},Vt=["aria-label"],Et=le({__name:"FooterBar",setup(C){const r=ge(),p=Te();ie();const g=b(!1),d=b(!1),n=me(()=>{var o;return[...r.user?[{to:"/",label:"Accueil",icon:"fa-home"},...(o=r.user.commercant)!=null&&o.email_verified_at?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:p.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]});return xe(()=>p.collaborationsPending,o=>{o>0&&(g.value=!0,setTimeout(()=>g.value=!1,300))}),xe(()=>p.unreadMessages,o=>{o>0&&(d.value=!0,setTimeout(()=>d.value=!1,300))}),(o,i)=>{const m=he("RouterLink");return t(),s("div",jt,[O(_e,{name:"slide-up"},{default:K(()=>[e("nav",St,[e("div",Mt,[(t(!0),s(B,null,Z(n.value,l=>(t(),fe(m,{key:l.to,to:l.to,"aria-label":l.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas text-lg",l.icon])},null,2),l!=null&&l.badge&&l.badge>-1?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":l.to==="/collaborations"&&g.value||l.to==="/messages"&&d.value}]),"aria-label":l.to==="/collaborations"?"Collaborations en attente":l.to==="/messages"?"Messages non lus":""},x(l.badge),11,Vt)):j("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),sp=ne(Et,[["__scopeId","data-v-39c0c38a"]]),zt={class:"mb-4"},Ut={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},Lt={class:"relative"},Tt={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},It=["type","value","required","placeholder"],Ft={key:0,class:"text-red-500 text-sm mt-1"},ke=le({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(C){return(r,p)=>(t(),s("div",zt,[e("label",Ut,x(C.label),1),e("div",Lt,[e("span",Tt,[e("i",{class:G(`fas ${C.icon}`)},null,2)]),e("input",{type:C.type,value:C.modelValue,onInput:p[0]||(p[0]=g=>r.$emit("update:modelValue",g.target.value)),required:C.required,placeholder:C.placeholder,class:G(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",C.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,It)]),C.error?(t(),s("p",Ft,x(C.error),1)):j("",!0)]))}}),Rt={class:"h-full overflow-y-scroll pb-16 flex items-center justify-center bg-gray-50 px-4"},qt={class:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 space-y-6"},Ot=["disabled"],Nt={class:"text-gray-700 font-medium"},Dt=["disabled"],Wt={key:0,class:"fas fa-spinner fa-spin mr-2"},Ht={class:"text-center text-sm text-gray-600"},Jt=le({__name:"Login",setup(C){const r=b({login:"",mot_de_passe:"",parrain_code:""}),p=b({}),g=b(!1),d=b(!1),n=ie(),o=Se(),i=pe(),m=ge(),l=me(()=>{const S=window.location.hostname;return S==="localhost"||S==="127.0.0.1"?"http://localhost:8000/auth/google":"https://api.espacecameroun.com/auth/google"}),v=async()=>{var S,$,w;try{g.value=!0,i.info("Connexion en cours...",{timeout:2e3}),await m.login({login:r.value.login,mot_de_passe:r.value.mot_de_passe}),i.success("Connexion rÃ©ussie !"),n.push({name:"home"})}catch(a){console.error("Erreur lors de la connexion:",a);const u=(($=(S=a.response)==null?void 0:S.data)==null?void 0:$.message)||"Erreur lors de la connexion. VÃ©rifiez vos informations.";i.error(u),((w=a.response)==null?void 0:w.status)===422&&(p.value=a.response.data.errors||{})}finally{g.value=!1}},_=()=>{d.value=!0,i.info("Redirection vers Google...",{timeout:2e3});const S=new URL(l.value);r.value.parrain_code&&S.searchParams.append("parrain_code",r.value.parrain_code),window.location.href=S.toString()};return be(()=>{const S=o.query.error;S&&i.error(decodeURIComponent(S)),m.user&&(i.info("Vous Ãªtes dÃ©jÃ  connectÃ©, redirection vers la page d'accueil."),n.push({name:"home"}))}),(S,$)=>{const w=he("router-link");return t(),s("div",Rt,[e("div",qt,[$[5]||($[5]=e("h1",{class:"text-3xl font-bold text-center text-gray-800"}," Connexion ",-1)),$[6]||($[6]=e("p",{class:"text-center text-sm text-gray-500"},[A(" AccÃ©dez Ã  votre compte "),e("strong",null,"Espace")],-1)),e("button",{onClick:_,disabled:d.value,class:"w-full flex items-center justify-center gap-2 bg-white border rounded-xl py-3 hover:bg-gray-50 transition shadow-sm"},[$[2]||($[2]=e("i",{class:"fab fa-google text-red-500"},null,-1)),e("span",Nt,x(d.value?"Redirection...":"Continuer avec Google"),1)],8,Ot),$[7]||($[7]=e("div",{class:"relative flex items-center justify-center"},[e("span",{class:"absolute bg-white px-2 text-sm text-gray-400"},"ou"),e("hr",{class:"w-full border-gray-300"})],-1)),e("form",{onSubmit:de(v,["prevent"]),class:"space-y-5"},[O(ke,{label:"Email ou TÃ©lÃ©phone",icon:"fa-envelope",modelValue:r.value.login,"onUpdate:modelValue":$[0]||($[0]=a=>r.value.login=a),type:"text",required:"",placeholder:"Entrez votre email ou tÃ©lÃ©phone",error:p.value.login},null,8,["modelValue","error"]),O(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:r.value.mot_de_passe,"onUpdate:modelValue":$[1]||($[1]=a=>r.value.mot_de_passe=a),type:"password",required:"",placeholder:"Entrez votre mot de passe",error:p.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:g.value,class:"w-full bg-[var(--espace-vert)] text-white font-semibold py-3 rounded-xl hover:bg-green-700 transition shadow-md"},[g.value?(t(),s("i",Wt)):j("",!0),e("span",null,x(g.value?"Connexion...":"Se connecter"),1)],8,Dt)],32),e("p",Ht,[$[4]||($[4]=A(" Pas de compte ? ")),O(w,{to:"/register",class:"text-[var(--espace-vert)] font-semibold hover:underline"},{default:K(()=>$[3]||($[3]=[A(" Inscrivez-vous ici ")])),_:1,__:[3]})])])])}}}),op=ne(Jt,[["__scopeId","data-v-260958be"]]),Bt="/assets/LOGO_vert-B0A0Hs9b.png",Gt={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},Kt=le({__name:"Loader",props:{isLoading:{type:Boolean}},setup(C){return(r,p)=>(t(),fe(_e,{name:"fade"},{default:K(()=>[r.isLoading?(t(),s("div",Gt,p[0]||(p[0]=[e("div",{class:"relative p-6"},[e("img",{src:Bt,alt:"Logo Espace Cameroun",class:"h-20 w-20 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-vert)] border-t-transparent animate-spin"})],-1)]))):j("",!0)]),_:1}))}}),ze=ne(Kt,[["__scopeId","data-v-c4102556"]]),Xt={class:"h-full bg-gray-100 pt-10 px-4 sm:px-2 pb-16"},Qt={class:"h-full w-full overflow-y-scroll"},Zt={key:0},Yt={key:1,class:"grid grid-cols-1 pt-15 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},es={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},ts={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},ss=["src"],os=["onClick"],as=["onClick"],rs={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},ls={class:"p-2"},ns={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},is=["onClick"],us={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},ds={class:"text-md font-bold text-[var(--espace-or)] mt-2"},cs={class:"text-sm text-[var(--espace-gris)]"},ps={class:"text-sm text-[var(--espace-gris)] mt-2"},vs={class:"ml-4"},ms={key:2,class:"text-center text-[var(--espace-gris)]"},fs={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},gs={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},bs={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},xs={key:0,class:"grid grid-cols-3 gap-2 mb-2"},hs=["src"],ys=["onClick"],_s={class:"relative"},ws={key:0,class:"absolute z-50 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto"},ks=["onClick"],$s={key:0,class:"flex items-center gap-2"},Cs={class:"flex gap-4 pt-2"},As=["disabled"],Ps={key:0,class:"fas fa-spinner fa-spin mr-2"},js=le({__name:"CommercantProduits",setup(C){const r=Ee(),p=ge(),g=ie(),d=pe(),n=b(!1),o=b(!1),i=b([]),m=b([]),l=b(!1),v=b(!1),_=b(null),S=b({}),$=b({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),w=b(!1),a=b(""),u=me(()=>m.value.filter(z=>z.nom.toLowerCase().includes(a.value.toLowerCase()))),y=b([]),k=b([]),D=b(null),N=me(()=>[...y.value,...k.value.map(z=>URL.createObjectURL(z))]),E=async()=>{n.value=!0;try{const z=await F.get("/commercant/produits");n.value=!1,i.value=z.data.produits.map(c=>({...c,photo_url:c.photos&&c.photos.length>0?c.photos[0]:"https://via.placeholder.com/150"})),i.value.forEach(c=>{S.value[c.id]||(S.value[c.id]=0)})}catch{d.error("Erreur lors du chargement des produits")}finally{n.value=!1}},W=async()=>{try{const z=await F.get("/categories");m.value=z.data.categories}catch{d.error("Erreur lors du chargement des catÃ©gories")}finally{}},P=()=>{$.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},y.value=[],k.value=[],l.value=!0},oe=z=>{_.value=z,$.value={nom:z.nom,description:z.description||"",prix:z.prix,stock:z.quantite,category_id:z.category_id,collaboratif:!!z.collaboratif,marge_min:z.marge_min||0},y.value=z.photos?[...z.photos]:[],k.value=[],S.value[z.id]||(S.value[z.id]=0),v.value=!0},ce=z=>{const c=z.target;if(c.files){const M=Array.from(c.files);k.value.push(...M),D.value&&(D.value.value="")}},Q=z=>{if(z<y.value.length)y.value.splice(z,1);else{const c=z-y.value.length;k.value.splice(c,1)}},L=async()=>{var c,M,V,f;o.value=!0;const z=new FormData;z.append("nom",$.value.nom),z.append("description",$.value.description),z.append("prix",$.value.prix.toString()),z.append("stock",$.value.stock.toString()),z.append("category_id",$.value.category_id),z.append("collaboratif",$.value.collaboratif?"1":"0"),z.append("marge_min",$.value.marge_min.toString()),y.value.forEach(U=>z.append("old_photos[]",U)),k.value.forEach(U=>z.append("photos[]",U));try{if(l.value)await F.post("/commercant/produits",z,{headers:{"Content-Type":"multipart/form-data"}}),d.success("Produit ajoutÃ© avec succÃ¨s");else{const U=await F.post(`/commercant/produits/${(c=_.value)==null?void 0:c.id}`,z,{headers:{"Content-Type":"multipart/form-data"}});console.log(U.data),d.success("Produit modifiÃ© avec succÃ¨s")}await E(),r.fetchProducts(),J()}catch(U){((V=(M=U.response)==null?void 0:M.data)==null?void 0:V.message)=="Unauthenticated."&&g.push("login"),d.error(((f=U.response)==null?void 0:f.data.message)||"Erreur lors de la sauvegarde du produit")}finally{o.value=!1}},J=()=>{l.value=!1,v.value=!1,_.value=null,y.value=[],k.value=[]},H=me(()=>z=>S.value[z]||0),Y=z=>{var V;const c=i.value.find(f=>f.id===z),M=(V=c==null?void 0:c.photos)!=null&&V.length?c.photos.length-1:0;S.value[z]=Math.min((S.value[z]||0)+1,M)},ve=z=>{S.value[z]=Math.max((S.value[z]||0)-1,0)};return be(async()=>{await E(),W(),setTimeout(()=>{var z;if(!((z=p.user)!=null&&z.commercant)){d.error("AccÃ¨s rÃ©servÃ© aux commerÃ§ants"),g.push("/");return}},2e3)}),(z,c)=>{const M=he("router-link");return t(),s(B,null,[O(ze,{isLoading:n.value},null,8,["isLoading"]),e("div",Xt,[e("div",Qt,[e("div",{class:"flex justify-between items-center fixed z-10 w-full pr-7"},[c[11]||(c[11]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),A(" Mes Produits ")],-1)),e("button",{onClick:P,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},c[10]||(c[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),A(" Ajouter un produit ")]))]),n.value?(t(),s("div",Zt,c[12]||(c[12]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):i.value.length?(t(),s("div",Yt,[(t(!0),s(B,null,Z(i.value,V=>(t(),s("div",{key:V.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",es,[V.collaboratif?(t(),s("span",ts," Collaboratif ")):j("",!0),O(M,{to:`/produits/${V.id}`,class:"block relative"},{default:K(()=>[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${H.value(V.id)*100}%)`})},[(t(!0),s(B,null,Z(V.photos,(f,U)=>(t(),s("img",{key:U,src:f,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,ss))),128))],4)]),_:2},1032,["to"]),V.photos&&V.photos.length>1?(t(),s("button",{key:1,onClick:f=>ve(V.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},c[13]||(c[13]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,os)):j("",!0),V.photos&&V.photos.length>1?(t(),s("button",{key:2,onClick:f=>Y(V.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},c[14]||(c[14]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,as)):j("",!0),V.photos&&V.photos.length>1?(t(),s("div",rs,[(t(!0),s(B,null,Z(V.photos,(f,U)=>(t(),s("span",{key:U,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":U===H.value(V.id)}])},null,2))),128))])):j("",!0)]),e("div",ls,[e("h2",ns,[O(M,{to:`/produits/${V.id}`,class:"block relative"},{default:K(()=>[A(x(V.nom),1)]),_:2},1032,["to"]),e("button",{onClick:f=>oe(V),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},c[15]||(c[15]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,is)]),e("p",us,x(V.description||"Aucune"),1),e("p",ds,x(V.prix)+" FCFA",1),e("p",cs,"Stock: "+x(V.quantite),1),e("div",ps,[e("span",null,[c[16]||(c[16]=e("i",{class:"fas fa-eye mr-1"},null,-1)),A(" "+x(V.raw_views_count||0)+" vues",1)]),e("span",vs,[c[17]||(c[17]=e("i",{class:"fas fa-bookmark mr-1"},null,-1)),A(" "+x(V.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),s("p",ms,"Aucun produit pour le moment."))]),O(_e,{name:"fade"},{default:K(()=>{var V;return[l.value||v.value?(t(),s("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(J,["self"])},[e("div",fs,[e("h2",gs,x(l.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:de(L,["prevent"]),class:"space-y-4 pt-12"},[e("div",null,[c[21]||(c[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",bs,[N.value.length?(t(),s("div",xs,[(t(!0),s(B,null,Z(N.value,(f,U)=>(t(),s("div",{key:U,class:"relative w-full h-20"},[e("img",{src:f,class:"w-full h-full object-cover rounded-lg",alt:"PrÃ©visualisation"},null,8,hs),e("button",{onClick:de(ee=>Q(U),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},c[18]||(c[18]=[e("i",{class:"fas fa-times"},null,-1)]),8,ys)]))),128))])):j("",!0),e("input",{ref_key:"fileInput",ref:D,type:"file",multiple:"",onChange:ce,class:"hidden",accept:"image/*"},null,544),N.value.length?(t(),s("button",{key:2,type:"button",onClick:c[1]||(c[1]=f=>{var U;return(U=D.value)==null?void 0:U.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},c[20]||(c[20]=[e("i",{class:"fas fa-plus mr-2"},null,-1),A(" Ajouter une autre photo ")]))):(t(),s("button",{key:1,type:"button",onClick:c[0]||(c[0]=f=>{var U;return(U=D.value)==null?void 0:U.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},c[19]||(c[19]=[e("i",{class:"fas fa-camera mr-2"},null,-1),A(" Ajouter une photo ")])))])]),e("div",null,[c[22]||(c[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{"onUpdate:modelValue":c[2]||(c[2]=f=>$.value.nom=f),type:"text",required:"",class:"input-style"},null,512),[[X,$.value.nom]])]),e("div",null,[c[23]||(c[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),R(e("textarea",{"onUpdate:modelValue":c[3]||(c[3]=f=>$.value.description=f),rows:"3",class:"input-style"},null,512),[[X,$.value.description]])]),e("div",null,[c[24]||(c[24]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":c[4]||(c[4]=f=>$.value.prix=f),type:"number",min:"0",required:"",class:"input-style"},null,512),[[X,$.value.prix,void 0,{number:!0}]])]),e("div",null,[c[25]||(c[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),R(e("input",{"onUpdate:modelValue":c[5]||(c[5]=f=>$.value.stock=f),type:"number",min:"0",required:"",class:"input-style"},null,512),[[X,$.value.stock,void 0,{number:!0}]])]),e("div",_s,[c[26]||(c[26]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"CatÃ©gorie",-1)),R(e("input",{"onUpdate:modelValue":c[6]||(c[6]=f=>a.value=f),type:"text",placeholder:"Rechercher une catÃ©gorie",class:"input-style",onFocus:c[7]||(c[7]=f=>w.value=!0),onBlur:c[8]||(c[8]=f=>z.setTimeout(()=>w.value=!1,150))},null,544),[[X,a.value]]),w.value&&u.value.length?(t(),s("ul",ws,[(t(!0),s(B,null,Z(u.value,f=>(t(),s("li",{key:f.id,onClick:U=>{$.value.category_id=f.id,a.value=f.nom},class:"px-2 py-1 hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] cursor-pointer"},x(f.nom),9,ks))),128))])):j("",!0)]),l.value||!((V=_.value)!=null&&V.collaboratif)?(t(),s("div",$s,[R(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":c[9]||(c[9]=f=>$.value.collaboratif=f)},null,512),[[Xe,$.value.collaboratif]]),c[27]||(c[27]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):j("",!0),e("div",Cs,[e("button",{type:"submit",disabled:o.value,class:G(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[o.value?(t(),s("i",Ps)):j("",!0),A(" "+x(l.value?"Ajouter":"Modifier"),1)],10,As),e("button",{type:"button",onClick:J,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):j("",!0)]}),_:1})])],64)}}}),ap=ne(js,[["__scopeId","data-v-1d92796d"]]),Ss={class:"h-full overflow-y-scroll flex items-center justify-center bg-gray-50 px-4 pb-24"},Ms={class:"w-full max-w-md h-full bg-white rounded-2xl shadow-lg p-8 space-y-6"},Vs=["disabled"],Es={class:"text-gray-700 font-medium"},zs={class:"relative"},Us={class:"relative"},Ls=["disabled"],Ts={class:"text-center text-sm text-gray-600"},Is=le({__name:"Register",setup(C){const r=b({nom:"",telephone:"",mot_de_passe:"",mot_de_passe_confirmation:"",parrain_code:""}),p=b({}),g=b(!1),d=b(!1),n=b(!1),o=b(!1),i=ie(),m=Se(),l=pe(),v=ge(),_=me(()=>{const w=window.location.hostname;return`${w==="localhost"||w==="127.0.0.1"?"http://localhost:8000/auth/google":"https://api.espacecameroun.com/auth/google"}?action=register`}),S=async()=>{var w,a,u;try{n.value=!0,l.info("Inscription en cours...",{timeout:2e3}),await v.register(r.value),l.success("Inscription rÃ©ussie !"),i.push({name:"home"})}catch(y){console.error("Erreur lors de l'inscription:",y);const k=((a=(w=y.response)==null?void 0:w.data)==null?void 0:a.message)||"Erreur lors de l'inscription. VÃ©rifiez vos informations.";l.error(k),((u=y.response)==null?void 0:u.status)===422&&(p.value=y.response.data.errors||{})}finally{n.value=!1}},$=()=>{o.value=!0,l.info("Redirection vers Google pour inscription...",{timeout:2e3});const w=new URL(_.value);r.value.parrain_code&&w.searchParams.append("parrain_code",r.value.parrain_code),window.location.href=w.toString()};return be(()=>{const w=m.params.code;w&&(r.value.parrain_code=w);const a=m.query.error;a&&l.error(decodeURIComponent(a)),v.user&&(l.info("Vous Ãªtes dÃ©jÃ  connectÃ©, redirection vers la page d'accueil."),i.push({name:"home"}))}),(w,a)=>{const u=he("router-link");return t(),s("div",Ss,[e("div",Ms,[a[10]||(a[10]=e("h1",{class:"text-3xl font-bold text-center text-gray-800"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),A(" CrÃ©ez votre compte ")],-1)),a[11]||(a[11]=e("p",{class:"text-center text-sm text-gray-500"},[A(" Rejoignez "),e("strong",null,"Espace Cameroun"),A(" et dÃ©couvrez un rÃ©seau de commerÃ§ants et de clients partout au Cameroun. ")],-1)),e("button",{onClick:$,disabled:o.value,class:"w-full flex items-center justify-center gap-2 bg-white border rounded-xl py-3 hover:bg-gray-50 transition shadow-sm"},[a[7]||(a[7]=e("i",{class:"fab fa-google text-red-500"},null,-1)),e("span",Es,x(o.value?"Redirection...":"Sâ€™inscrire avec Google"),1)],8,Vs),a[12]||(a[12]=e("div",{class:"relative flex items-center justify-center"},[e("span",{class:"absolute bg-white px-2 text-sm text-gray-400"},"ou"),e("hr",{class:"w-full border-gray-300"})],-1)),e("form",{onSubmit:de(S,["prevent"]),class:"space-y-5"},[O(ke,{label:"Nom",icon:"fa-user",modelValue:r.value.nom,"onUpdate:modelValue":a[0]||(a[0]=y=>r.value.nom=y),type:"text",required:"",placeholder:"Entrez votre nom",error:p.value.nom},null,8,["modelValue","error"]),O(ke,{label:"TÃ©lÃ©phone",icon:"fa-phone",modelValue:r.value.telephone,"onUpdate:modelValue":a[1]||(a[1]=y=>r.value.telephone=y),type:"tel",required:"",placeholder:"Entrez votre numÃ©ro de tÃ©lÃ©phone",error:p.value.telephone},null,8,["modelValue","error"]),e("div",zs,[O(ke,{label:"Mot de passe",icon:"fa-lock",modelValue:r.value.mot_de_passe,"onUpdate:modelValue":a[2]||(a[2]=y=>r.value.mot_de_passe=y),type:g.value?"text":"password",required:"",placeholder:"Choisissez un mot de passe",error:p.value.mot_de_passe},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:a[3]||(a[3]=y=>g.value=!g.value)},[e("i",{class:G(g.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e("div",Us,[O(ke,{label:"Confirmer le mot de passe",icon:"fa-lock",modelValue:r.value.mot_de_passe_confirmation,"onUpdate:modelValue":a[4]||(a[4]=y=>r.value.mot_de_passe_confirmation=y),type:d.value?"text":"password",required:"",placeholder:"Confirmez votre mot de passe",error:p.value.mot_de_passe_confirmation},null,8,["modelValue","type","error"]),e("button",{type:"button",class:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",onClick:a[5]||(a[5]=y=>d.value=!d.value)},[e("i",{class:G(d.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),O(ke,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:r.value.parrain_code,"onUpdate:modelValue":a[6]||(a[6]=y=>r.value.parrain_code=y),type:"text",placeholder:"Entrez un code de parrainage si vous en avez un",error:p.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:n.value,class:"w-full bg-[var(--espace-vert)] text-white font-semibold py-3 rounded-xl hover:bg-green-700 transition shadow-md"},[e("i",{class:G([n.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,x(n.value?"Inscription...":"S'inscrire"),1)],8,Ls)],32),e("p",Ts,[a[9]||(a[9]=A(" Vous avez dÃ©jÃ  un compte ? ")),O(u,{to:"/login",class:"text-[var(--espace-vert)] font-semibold hover:underline"},{default:K(()=>a[8]||(a[8]=[A(" Connectez-vous ici ")])),_:1,__:[8]})]),a[13]||(a[13]=e("p",{class:"text-center text-xs text-gray-400"},[A(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"}," politique de confidentialitÃ© "),A(". ")],-1))])])}}}),rp=ne(Is,[["__scopeId","data-v-31be1944"]]),Fs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},Rs={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},qs={class:"p-6"},Os={key:0,class:"grid md:grid-cols-3 gap-6"},Ns={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},Ds={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Ws={class:"font-extrabold text-lg mb-2"},Hs={class:"mb-2 text-sm opacity-90"},Js={class:"text-3xl font-extrabold"},Bs={class:"flex flex-col text-sm font-medium text-gray-700"},Gs={key:0,class:"text-xs text-red-600 mt-1"},Ks={class:"flex gap-4"},Xs=["value"],Qs=["src"],Zs={key:0,class:"text-xs text-red-600 mt-1 block"},Ys=["disabled"],eo={class:"text-xs text-gray-400 mt-4 text-center"},to=le({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(C,{emit:r}){const p=ge().user,g=ie(),d=r,n=pe(),o=b(""),i=b(""),m=b(""),l=b(!1),v=b(!1),_=b(!1),S=a=>{o.value=a,l.value=!1,v.value=!1,i.value="",m.value=""},$=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],w=async()=>{var a,u;if(l.value=!m.value,v.value=!i.value,l.value||v.value){n.error("Veuillez remplir tous les champs correctement.");return}_.value=!0;try{const y=await F.post("/upgrade-to-premium",{subscription_type:o.value,payment_service:i.value,phone_number:m.value});_.value=!1,p&&(p.premium=!0),n.success(y.data.message),d("upgraded"),d("close")}catch(y){if(((u=(a=y.response)==null?void 0:a.data)==null?void 0:u.message)=="Unauthenticated."&&g.push("login"),y.response&&y.response.data){const k=y.response.data;n.error(`Paiement Ã©chouÃ© :Verifiez vos informations et rÃ©essayer${k.message}`)}else n.error("Verifiez vos informations et rÃ©essayer.");console.error(y)}finally{_.value=!1}};return(a,u)=>{const y=he("router-link");return a.isOpen?(t(),s("div",Fs,[e("div",Rs,[u[18]||(u[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"ğŸš€ Passez Ã  Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",qs,[o.value?(t(),s("div",Ns,[e("div",Ds,[u[12]||(u[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:G([{"bg-green-600 text-white":o.value==="monthly","bg-yellow-400 text-gray-900":o.value==="yearly"},"rounded-lg p-4"])},[e("h4",Ws,x(o.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",Hs,x(o.value==="monthly"?"AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s.":"Payez moins, profitez plus avec 16% dâ€™Ã©conomie !"),1),e("div",Js,x(o.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:de(w,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[u[16]||(u[16]=e("h3",{class:"text-xl font-bold mb-2"},"DÃ©tails du paiement",-1)),e("label",Bs,[u[13]||(u[13]=A(" NumÃ©ro de tÃ©lÃ©phone ")),R(e("input",{"onUpdate:modelValue":u[4]||(u[4]=k=>m.value=k),type:"tel",placeholder:"Ex: 696828151",class:G(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":l.value}]),onInput:u[5]||(u[5]=k=>l.value=!m.value),required:""},null,34),[[X,m.value]]),l.value?(t(),s("span",Gs,"Veuillez entrer un numÃ©ro valide.")):j("",!0)]),u[17]||(u[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Ks,[(t(),s(B,null,Z($,k=>e("label",{key:k.value,class:G(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":i.value===k.value,"border-gray-300 bg-white":i.value!==k.value,"border-red-500":v.value&&!i.value}])},[R(e("input",{type:"radio",value:k.value,"onUpdate:modelValue":u[6]||(u[6]=D=>i.value=D),class:"hidden"},null,8,Xs),[[Qe,i.value]]),e("img",{src:k.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Qs),e("span",{class:G([{"text-[var(--espace-vert)]":i.value===k.value,"text-gray-700":i.value!==k.value},"font-semibold select-none"])},x(k.label),3)],2)),64))]),v.value&&!i.value?(t(),s("span",Zs," Veuillez sÃ©lectionner un service. ")):j("",!0),e("button",{type:"submit",disabled:_.value||!m.value||!i.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[_.value?(t(),s(B,{key:0},[u[14]||(u[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),u[15]||(u[15]=A(" Veuillez patienter... "))],64)):(t(),s(B,{key:1},[A(" Payer & Souscrire ")],64))],8,Ys),e("button",{type:"button",onClick:u[7]||(u[7]=k=>o.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," â† Retour aux plans "),e("p",eo," ğŸ”’ Paiement sÃ©curisÃ© via "+x(i.value||"votre service"),1)],32)])):(t(),s("div",Os,[u[11]||(u[11]=je('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-04ff97e1><div data-v-04ff97e1><h3 class="text-xl font-bold text-gray-800" data-v-04ff97e1>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-04ff97e1>Pour dÃ©buter sans frais</p><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Pas de statistiques dÃ©taillÃ©es </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-04ff97e1><span data-v-04ff97e1>âŒ</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-04ff97e1> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:u[1]||(u[1]=k=>S("monthly"))},[u[8]||(u[8]=je('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>â­ Populaire</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1> AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s </p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Produits illimitÃ©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Collaborations illimitÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Statistiques dÃ©taillÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Badge â€œPremiumâ€</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:u[0]||(u[0]=de(k=>S("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:u[3]||(u[3]=k=>S("yearly"))},[u[9]||(u[9]=je('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-04ff97e1>-16% Ã‰conomie</span><div data-v-04ff97e1><h3 class="text-xl font-bold" data-v-04ff97e1>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-04ff97e1>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-04ff97e1>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-04ff97e1><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Produits illimitÃ©s</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Collaborations illimitÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Statistiques dÃ©taillÃ©es</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Badge â€œPremiumâ€</li><li class="flex items-center gap-2" data-v-04ff97e1><span data-v-04ff97e1>âœ”</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:u[2]||(u[2]=de(k=>S("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),O(y,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:K(()=>u[10]||(u[10]=[A(" â† Retour ")])),_:1,__:[10]})]))])])])):j("",!0)}}}),so=ne(to,[["__scopeId","data-v-04ff97e1"]]),oo={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},ao={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},ro={class:"flex justify-center gap-3 mb-4"},lo=["onClick"],no={key:0,class:"text-xs text-red-600 mt-1"},io={class:"flex gap-4"},uo=["value"],co=["src"],po={key:1,class:"text-xs text-red-600 mt-1"},vo={class:"text-center text-lg font-bold mt-6"},mo={class:"text-[var(--espace-vert)]"},fo=["disabled"],go={key:0},bo={key:1},xo={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ho={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},yo=le({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(C,{emit:r}){const p=ge().user,g=r,d=pe(),n=b(10),o=b(""),i=b(""),m=b(n.value*100),l=b(!1),v=b(!1),_=b(!1),S=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],$=[10,20,50,100],w=me(()=>n.value>=10&&o.value.trim().length===9&&/^6\d{8}$/.test(o.value)&&i.value!==""),a=()=>{m.value=n.value*100},u=N=>{n.value=N,a()},y=()=>{a()},k=()=>{_.value=!(o.value.trim().length===9&&/^6\d{8}$/.test(o.value))},D=async()=>{if(v.value=!i.value,!w.value){d.error("Veuillez remplir tous les champs correctement.");return}l.value=!0;try{const N=await F.post("/acheter-jetons",{nombre_jetons:n.value,payment_service:i.value,phone_number:o.value});p&&(p.jetons+=n.value),d.success(N.data.message),g("purchased",n.value),g("close")}catch(N){if(N.response&&N.response.data){const E=N.response.data;d.error(`Erreur: ${E.error_message||"Achat Ã©chouÃ©"}. DÃ©tails: ${E.details||"Aucun dÃ©tail."}`)}else d.error("Erreur lors de l'achat. Veuillez rÃ©essayer.");console.error(N)}finally{l.value=!1}};return xe(o,()=>{k()}),(N,E)=>{const W=he("router-link");return t(),s("div",oo,[e("div",ao,[E[7]||(E[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," ğŸ« Acheter des Jetons ",-1)),E[8]||(E[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 100 FCFA",-1)),e("div",ro,[(t(),s(B,null,Z($,P=>e("button",{key:P,type:"button",onClick:oe=>u(P),class:G(["rounded-full px-4 py-2 border font-semibold transition",n.value===P?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},x(P),11,lo)),64))]),E[9]||(E[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[A(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),R(e("input",{id:"jetonQuantity","onUpdate:modelValue":E[0]||(E[0]=P=>n.value=P),type:"number",min:"10",placeholder:"Ex: 10",onInput:y,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[X,n.value,void 0,{number:!0}]]),E[10]||(E[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[A(" NumÃ©ro de tÃ©lÃ©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),R(e("input",{id:"phoneNumber","onUpdate:modelValue":E[1]||(E[1]=P=>o.value=P),type:"tel",placeholder:"Ex: 696428651",onInput:k,class:G(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",_.value?"border-red-500":"border-gray-300"])},null,34),[[X,o.value]]),_.value?(t(),s("p",no," Veuillez entrer un numÃ©ro valide (9 chiffres, commenÃ§ant par 6). ")):j("",!0),E[11]||(E[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",io,[(t(),s(B,null,Z(S,P=>e("label",{key:P.value,class:G(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":i.value===P.value,"border-gray-300 bg-white":i.value!==P.value}])},[R(e("input",{type:"radio",value:P.value,"onUpdate:modelValue":E[2]||(E[2]=oe=>i.value=oe),class:"hidden"},null,8,uo),[[Qe,i.value]]),e("img",{src:P.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,co),e("span",{class:G({"text-[var(--espace-vert)] font-bold":i.value===P.value,"text-gray-700":i.value!==P.value})},x(P.label),3)],2)),64))]),v.value&&!i.value?(t(),s("p",po," Veuillez sÃ©lectionner un service. ")):j("",!0),e("div",vo,[E[4]||(E[4]=A(" Montant total : ")),e("span",mo,x(m.value)+" FCFA",1)]),e("button",{onClick:D,disabled:!w.value||l.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[l.value?(t(),s("span",bo,"veuillez patientez")):(t(),s("span",go,"Acheter")),l.value?(t(),s("svg",xo,E[5]||(E[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):j("",!0)],8,fo),e("button",ho,[O(W,{to:"/jeton-history",onClick:E[3]||(E[3]=P=>g("close"))},{default:K(()=>E[6]||(E[6]=[A("Annuler")])),_:1,__:[6]})])])])}}}),_o=ne(yo,[["__scopeId","data-v-05239cce"]]);class Ie{constructor(r=0,p="Network Error"){this.status=r,this.text=p}}const wo=()=>{if(!(typeof localStorage>"u"))return{get:C=>Promise.resolve(localStorage.getItem(C)),set:(C,r)=>Promise.resolve(localStorage.setItem(C,r)),remove:C=>Promise.resolve(localStorage.removeItem(C))}},ye={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:wo()},He=C=>C?typeof C=="string"?{publicKey:C}:C.toString()==="[object Object]"?C:{}:{},ko=(C,r="https://api.emailjs.com")=>{if(!C)return;const p=He(C);ye.publicKey=p.publicKey,ye.blockHeadless=p.blockHeadless,ye.storageProvider=p.storageProvider,ye.blockList=p.blockList,ye.limitRate=p.limitRate,ye.origin=p.origin||r},et=async(C,r,p={})=>{const g=await fetch(ye.origin+C,{method:"POST",headers:p,body:r}),d=await g.text(),n=new Ie(g.status,d);if(g.ok)return n;throw n},tt=(C,r,p)=>{if(!C||typeof C!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!r||typeof r!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!p||typeof p!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$o=C=>{if(C&&C.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},st=C=>C.webdriver||!C.languages||C.languages.length===0,ot=()=>new Ie(451,"Unavailable For Headless Browser"),Co=(C,r)=>{if(!Array.isArray(C))throw"The BlockList list has to be an array";if(typeof r!="string")throw"The BlockList watchVariable has to be a string"},Ao=C=>{var r;return!((r=C.list)!=null&&r.length)||!C.watchVariable},Po=(C,r)=>C instanceof FormData?C.get(r):C[r],at=(C,r)=>{if(Ao(C))return!1;Co(C.list,C.watchVariable);const p=Po(r,C.watchVariable);return typeof p!="string"?!1:C.list.includes(p)},rt=()=>new Ie(403,"Forbidden"),jo=(C,r)=>{if(typeof C!="number"||C<0)throw"The LimitRate throttle has to be a positive number";if(r&&typeof r!="string")throw"The LimitRate ID has to be a non-empty string"},So=async(C,r,p)=>{const g=Number(await p.get(C)||0);return r-Date.now()+g},lt=async(C,r,p)=>{if(!r.throttle||!p)return!1;jo(r.throttle,r.id);const g=r.id||C;return await So(g,r.throttle,p)>0?!0:(await p.set(g,Date.now().toString()),!1)},nt=()=>new Ie(429,"Too Many Requests"),Mo=async(C,r,p,g)=>{const d=He(g),n=d.publicKey||ye.publicKey,o=d.blockHeadless||ye.blockHeadless,i=d.storageProvider||ye.storageProvider,m={...ye.blockList,...d.blockList},l={...ye.limitRate,...d.limitRate};return o&&st(navigator)?Promise.reject(ot()):(tt(n,C,r),$o(p),p&&at(m,p)?Promise.reject(rt()):await lt(location.pathname,l,i)?Promise.reject(nt()):et("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:n,service_id:C,template_id:r,template_params:p}),{"Content-type":"application/json"}))},Vo=C=>{if(!C||C.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Eo=C=>typeof C=="string"?document.querySelector(C):C,zo=async(C,r,p,g)=>{const d=He(g),n=d.publicKey||ye.publicKey,o=d.blockHeadless||ye.blockHeadless,i=ye.storageProvider||d.storageProvider,m={...ye.blockList,...d.blockList},l={...ye.limitRate,...d.limitRate};if(o&&st(navigator))return Promise.reject(ot());const v=Eo(p);tt(n,C,r),Vo(v);const _=new FormData(v);return at(m,_)?Promise.reject(rt()):await lt(location.pathname,l,i)?Promise.reject(nt()):(_.append("lib_version","4.4.1"),_.append("service_id",C),_.append("template_id",r),_.append("user_id",n),et("/api/v1.0/email/send-form",_))},Ne={init:ko,send:Mo,sendForm:zo,EmailJSResponseStatus:Ie},Uo={class:"space-y-6 pb-16"},Lo={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},To={key:0,class:"space-y-2 text-[var(--espace-gris)]"},Io={class:"flex gap-2"},Fo=["disabled"],Ro={key:0,class:"fas fa-spinner fa-spin mr-2"},qo={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},Oo={key:0,class:"space-y-4"},No={class:"flex gap-2"},Do=["disabled"],Wo={key:0,class:"fas fa-spinner fa-spin mr-2"},Ho=["disabled"],Jo={key:1,class:"space-y-2 text-[var(--espace-gris)]"},Bo={key:0,class:"w-24 h-24"},Go=["src"],Ko={key:0,class:"mt-2 w-24 h-24"},Xo=["src"],Qo={class:"flex gap-2"},Zo=["disabled"],Yo={key:0,class:"fas fa-spinner fa-spin mr-2"},ea=le({__name:"userProfile",setup(C){var D,N,E,W,P,oe,ce,Q,L,J,H,Y,ve,z,c,M;const r=ie(),p=ge(),g=pe(),d=b(!1),n=b(!1),o=b(!1),i=b(!1),m=b(!1),l=b(p.user),v=b({nom:((D=l.value)==null?void 0:D.nom)||"",telephone:((N=l.value)==null?void 0:N.telephone)||"",email:((E=l.value)==null?void 0:E.email)||"",ville:((W=l.value)==null?void 0:W.ville)||""}),_=b({nom:((oe=(P=l.value)==null?void 0:P.commercant)==null?void 0:oe.nom)||"",description:((Q=(ce=l.value)==null?void 0:ce.commercant)==null?void 0:Q.description)||"",email:((J=(L=l.value)==null?void 0:L.commercant)==null?void 0:J.email)||"",telephone:((Y=(H=l.value)==null?void 0:H.commercant)==null?void 0:Y.telephone)||"",ville:((z=(ve=l.value)==null?void 0:ve.commercant)==null?void 0:z.ville)||"",logo:null,logoPreview:(M=(c=l.value)==null?void 0:c.commercant)!=null&&M.logo?`http://localhost:8000/storage/${l.value.commercant.logo}`:null}),S=b({code:""});Ne.init("oI96z_b6E-d8WjfOM");const $=V=>{var U;const f=(U=V.target.files)==null?void 0:U[0];if(f){if(!f.type.startsWith("image/")){g.error("Veuillez sÃ©lectionner une image.");return}if(f.size>2*1024*1024){g.error("Image trop volumineuse (max 2Mo).");return}_.value.logo=f,_.value.logoPreview=URL.createObjectURL(f)}},w=async(V,f)=>{try{await Ne.send("service_06884pt","template_5x962ru",{to_name:V,code:f}),g.success("Code de vÃ©rification envoyÃ©.")}catch{g.error("Erreur lors de l'envoi de l'email.")}},a=async()=>{var V,f,U;o.value=!0;try{const ee=await F.post("/updateProfile",v.value);l.value&&(l.value.nom=ee.data.user.nom||"",l.value.telephone=ee.data.user.telephone||"",l.value.email=ee.data.user.email||"",l.value.ville=ee.data.user.ville||""),p.user=ee.data.user,d.value=!1,g.success("Profil mis Ã  jour avec succÃ¨s.")}catch(ee){((f=(V=ee.response)==null?void 0:V.data)==null?void 0:f.message)==="Unauthenticated."&&r.push("login"),g.error(((U=ee.response)==null?void 0:U.data.message)||"Erreur lors de la mise Ã  jour.")}finally{o.value=!1}},u=async()=>{var V,f,U,ee,ae,re,te;(f=(V=l.value)==null?void 0:V.commercant)!=null&&f.email_verified_at,i.value=!0;try{const q=new FormData;q.append("nom",_.value.nom),q.append("description",_.value.description),q.append("email",_.value.email),q.append("telephone",_.value.telephone),q.append("ville",_.value.ville),_.value.logo&&q.append("logo",_.value.logo);const h=await F.post("/commercant/update",q,{headers:{"Content-Type":"multipart/form-data"}});(U=l.value)!=null&&U.commercant&&(l.value.commercant.nom=h.data.commercant.nom,l.value.commercant.description=h.data.commercant.description,l.value.commercant.email=h.data.commercant.email,l.value.commercant.telephone=h.data.commercant.telephone,l.value.commercant.ville=h.data.commercant.ville,l.value.commercant.logo=h.data.commercant.logo),p.user=l.value,_.value.logoPreview=h.data.commercant.logo?`http://localhost:8000/storage/${h.data.commercant.logo}`:null,n.value=!1,console.log(n.value),g.success("Commerce mis Ã  jour avec succÃ¨s.")}catch(q){((ae=(ee=q.response)==null?void 0:ee.data)==null?void 0:ae.message)==="Unauthenticated."&&r.push("login"),g.error(((te=(re=q.response)==null?void 0:re.data)==null?void 0:te.message)||"Erreur lors de la mise Ã  jour du commerce.")}finally{i.value=!1}},y=async()=>{var V,f,U,ee,ae,re,te;m.value=!0;try{const q=await F.post("/commercant/verify-email",{email:(f=(V=l.value)==null?void 0:V.commercant)==null?void 0:f.email,code:S.value.code});(U=l.value)!=null&&U.commercant&&(l.value.commercant.email_verified_at=q.data.email_verified_at,p.user=l.value),S.value.code="",g.success("Email vÃ©rifiÃ© avec succÃ¨s."),window.location.reload()}catch(q){((ae=(ee=q.response)==null?void 0:ee.data)==null?void 0:ae.message)==="Unauthenticated."&&r.push("login"),g.error(((te=(re=q.response)==null?void 0:re.data)==null?void 0:te.message)||"Erreur lors de la vÃ©rification.")}finally{m.value=!1}},k=async()=>{var V,f,U,ee,ae,re,te,q;m.value=!0;try{const h=await F.post("/commercant/resend-verification",{email:(f=(V=l.value)==null?void 0:V.commercant)==null?void 0:f.email});await w(((ee=(U=l.value)==null?void 0:U.commercant)==null?void 0:ee.email)||"",h.data.verification_code)}catch(h){((re=(ae=h.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&r.push("login"),g.error(((q=(te=h.response)==null?void 0:te.data)==null?void 0:q.message)||"Erreur lors du renvoi.")}finally{m.value=!1}};return xe(()=>p.user,V=>{var f,U,ee,ae,re,te;l.value=V||null,v.value={nom:(V==null?void 0:V.nom)||"",telephone:(V==null?void 0:V.telephone)||"",email:(V==null?void 0:V.email)||"",ville:(V==null?void 0:V.ville)||""},_.value={nom:((f=V==null?void 0:V.commercant)==null?void 0:f.nom)||"",description:((U=V==null?void 0:V.commercant)==null?void 0:U.description)||"",email:((ee=V==null?void 0:V.commercant)==null?void 0:ee.email)||"",telephone:((ae=V==null?void 0:V.commercant)==null?void 0:ae.telephone)||"",ville:((re=V==null?void 0:V.commercant)==null?void 0:re.ville)||"",logo:null,logoPreview:(te=V==null?void 0:V.commercant)!=null&&te.logo?`http://localhost:8000/storage/${V.commercant.logo}`:null}},{immediate:!0}),(V,f)=>{var U,ee,ae,re,te,q;return t(),s("div",Uo,[e("section",Lo,[f[25]||(f[25]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),d.value?(t(),s("form",{key:1,onSubmit:de(a,["prevent"]),class:"space-y-4"},[e("div",null,[f[20]||(f[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),R(e("input",{"onUpdate:modelValue":f[1]||(f[1]=h=>v.value.nom=h),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[X,v.value.nom]])]),e("div",null,[f[21]||(f[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"TÃ©lÃ©phone",-1)),R(e("input",{"onUpdate:modelValue":f[2]||(f[2]=h=>v.value.telephone=h),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre tÃ©lÃ©phone"},null,512),[[X,v.value.telephone]])]),e("div",null,[f[22]||(f[22]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),R(e("input",{"onUpdate:modelValue":f[3]||(f[3]=h=>v.value.email=h),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[X,v.value.email]])]),e("div",null,[f[23]||(f[23]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),R(e("input",{"onUpdate:modelValue":f[4]||(f[4]=h=>v.value.ville=h),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[X,v.value.ville]])]),e("div",Io,[e("button",{type:"submit",disabled:o.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",o.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[o.value?(t(),s("i",Ro)):j("",!0),f[24]||(f[24]=A(" Enregistrer "))],10,Fo),e("button",{onClick:f[5]||(f[5]=h=>d.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),s("div",To,[e("p",null,[f[15]||(f[15]=e("strong",null,"Nom :",-1)),A(" "+x((U=l.value)==null?void 0:U.nom),1)]),e("p",null,[f[16]||(f[16]=e("strong",null,"TÃ©lÃ©phone :",-1)),A(" "+x((ee=l.value)==null?void 0:ee.telephone),1)]),e("p",null,[f[17]||(f[17]=e("strong",null,"Email :",-1)),A(" "+x(((ae=l.value)==null?void 0:ae.email)||"Non dÃ©fini"),1)]),e("p",null,[f[18]||(f[18]=e("strong",null,"Ville :",-1)),A(" "+x((re=l.value)==null?void 0:re.ville),1)]),e("p",null,[f[19]||(f[19]=e("strong",null,"Statut Premium :",-1)),A(" "+x((te=l.value)!=null&&te.premium?"Actif":"Inactif"),1)]),e("button",{onClick:f[0]||(f[0]=h=>d.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(q=l.value)!=null&&q.commercant?(t(),s("section",qo,[f[41]||(f[41]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),!l.value.commercant.email_verified_at&&!n.value?(t(),s("div",Oo,[f[28]||(f[28]=e("p",{class:"text-[var(--espace-gris)]"},"Veuillez vÃ©rifier votre email pour activer votre compte commerÃ§ant.",-1)),e("form",{onSubmit:de(y,["prevent"]),id:"form",class:"space-y-4"},[e("div",null,[f[26]||(f[26]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"verification_code"},"Code de vÃ©rification",-1)),R(e("input",{"onUpdate:modelValue":f[6]||(f[6]=h=>S.value.code=h),id:"verification_code",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Entrez le code reÃ§u par email"},null,512),[[X,S.value.code]])]),e("div",No,[e("button",{type:"submit",disabled:m.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",m.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"VÃ©rifier le code"},[m.value?(t(),s("i",Wo)):j("",!0),f[27]||(f[27]=A(" VÃ©rifier "))],10,Do),e("button",{onClick:k,type:"button",disabled:m.value,class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Renvoyer le code"}," Renvoyer ",8,Ho)])],32),e("button",{onClick:f[7]||(f[7]=h=>{console.log(n.value),n.value=!0}),class:"mt-2 w-full sm:w-auto text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors border-2 border-[var(--espace-vert)] cursor-pointer text-center","aria-label":"Modifier le commerce"}," Retour ")])):n.value?j("",!0):(t(),s("div",Jo,[l.value.commercant.logo?(t(),s("div",Bo,[e("img",{src:`http://localhost:8000/storage/${l.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,Go)])):j("",!0),e("p",null,[f[29]||(f[29]=e("strong",null,"Nom du commerce :",-1)),A(" "+x(l.value.commercant.nom),1)]),e("p",null,[f[30]||(f[30]=e("strong",null,"Description :",-1)),A(" "+x(l.value.commercant.description||"Non dÃ©finie"),1)]),e("p",null,[f[31]||(f[31]=e("strong",null,"Email :",-1)),A(" "+x(l.value.commercant.email||"Non dÃ©fini"),1)]),e("p",null,[f[32]||(f[32]=e("strong",null,"TÃ©lÃ©phone :",-1)),A(" "+x(l.value.commercant.telephone),1)]),e("p",null,[f[33]||(f[33]=e("strong",null,"Ville :",-1)),A(" "+x(l.value.commercant.ville),1)]),e("button",{onClick:f[8]||(f[8]=h=>n.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le commerce"}," Modifier ")])),n.value?(t(),s("form",{key:2,onSubmit:de(u,["prevent"]),class:"space-y-4"},[e("div",null,[f[34]||(f[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),R(e("input",{"onUpdate:modelValue":f[9]||(f[9]=h=>_.value.nom=h),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[X,_.value.nom]])]),e("div",null,[f[35]||(f[35]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),R(e("textarea",{"onUpdate:modelValue":f[10]||(f[10]=h=>_.value.description=h),id:"description_commerce",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[X,_.value.description]])]),e("div",null,[f[36]||(f[36]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),R(e("input",{"onUpdate:modelValue":f[11]||(f[11]=h=>_.value.email=h),id:"email_commerce",type:"email",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce"},null,512),[[X,_.value.email]])]),e("div",null,[f[37]||(f[37]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"TÃ©lÃ©phone",-1)),R(e("input",{"onUpdate:modelValue":f[12]||(f[12]=h=>_.value.telephone=h),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"TÃ©lÃ©phone du commerce"},null,512),[[X,_.value.telephone]])]),e("div",null,[f[38]||(f[38]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),R(e("input",{"onUpdate:modelValue":f[13]||(f[13]=h=>_.value.ville=h),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[X,_.value.ville]])]),e("div",null,[f[39]||(f[39]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:$,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),_.value.logoPreview?(t(),s("div",Ko,[e("img",{src:_.value.logoPreview,alt:"AperÃ§u logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,Xo)])):j("",!0)]),e("div",Qo,[e("button",{type:"submit",disabled:i.value,class:G(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",i.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[i.value?(t(),s("i",Yo)):j("",!0),f[40]||(f[40]=A(" Modifier "))],10,Zo),e("button",{onClick:f[14]||(f[14]=h=>n.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):j("",!0)])):j("",!0)])}}}),ta=ne(ea,[["__scopeId","data-v-ad9d3ddf"]]),sa=le({__name:"MerchantProfile",props:{user:Object},setup(C){const r=pe(),p=b(null),g=b([]);return be(async()=>{try{const d=await F.get("/commercant/profil");p.value=d.data.commercant,g.value=d.data.produits||[]}catch(d){r.error("Erreur lors du chargement des donnÃ©es du commerÃ§ant: "+(d.message||d))}}),(d,n)=>null}}),oa=ne(sa,[["__scopeId","data-v-ce205108"]]),aa={class:"overflow-y-scroll pb-8 relative bg-gray-100 py-8 sm:px-6"},ra={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},la={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},na={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},ia={class:"relative"},ua=["src"],da={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},ca={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},pa={class:"space-y-1"},va={key:0,class:"text-sm text-gray-500"},ma={key:0,class:"ml-4 flex items-center gap-2"},fa=["src"],ga=["disabled"],ba={class:"flex flex-col sm:flex-row gap-2 items-center"},xa={class:"container mx-auto max-w-4xl"},ha={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},ya={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},_a=le({__name:"Profile",setup(C){const r=()=>{const J=window.location.hostname;return J==="localhost"||J==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},p=me(()=>r()),g=ie(),d=pe(),n=ge();n.checkAuth();const o=b(n.user),i=b(!1),m=b(!1),l=b(null),v=b(null),_=b(!1),S=b(!1),$=b(!1),w=me(()=>S.value?oa:ta),a=b(null),u=b(null),y=b(!1);let k=null;const D=()=>{var J;(J=a.value)==null||J.click(),i.value=!1},N=J=>{const H=J.target;if(H.files&&H.files[0]){const Y=H.files[0];if(!Y.type.startsWith("image/")){d.error("Veuillez sÃ©lectionner une image.");return}if(Y.size>2*1024*1024){d.error("Image trop volumineuse (max 2Mo).");return}v.value=Y,l.value=URL.createObjectURL(Y)}},E=async()=>{try{k=await navigator.mediaDevices.getUserMedia({video:!0}),y.value=!0,i.value=!1,setTimeout(()=>{u.value&&(u.value.srcObject=k)},100)}catch(J){d.error("Impossible d'accÃ©der Ã  la camÃ©ra."),console.error(J)}},W=()=>{if(!u.value)return;const J=u.value,H=document.createElement("canvas");H.width=J.videoWidth,H.height=J.videoHeight;const Y=H.getContext("2d");Y&&(Y.drawImage(J,0,0,H.width,H.height),H.toBlob(ve=>{ve&&(v.value=new File([ve],"photo.jpg",{type:"image/jpeg"}),l.value=URL.createObjectURL(v.value),P())},"image/jpeg"))},P=()=>{k&&(k.getTracks().forEach(J=>J.stop()),k=null),y.value=!1},oe=()=>{v.value=null,l.value=null},ce=async()=>{var J,H,Y,ve;if(v.value){m.value=!0;try{const z=new FormData;z.append("photo",v.value);const c=await F.post("/profile/photo",z,{headers:{"Content-Type":"multipart/form-data"}});c.data.photo&&(o.value&&(o.value.photo=c.data.photo,n.user=o.value),d.success("Photo mise Ã  jour."),oe())}catch(z){((H=(J=z.response)==null?void 0:J.data)==null?void 0:H.message)=="Unauthenticated."&&g.push("login"),d.error(((ve=(Y=z.response)==null?void 0:Y.data)==null?void 0:ve.message)||"Erreur lors de l'envoi.")}finally{m.value=!1}}},Q=async()=>{_.value=!1},L=J=>{d.success(`Vous avez achetÃ© ${J} jetons !`)};return xe(()=>n.user,J=>{o.value=J||null},{immediate:!0}),be(()=>{}),Ve(()=>{l.value&&URL.revokeObjectURL(l.value),k&&k.getTracks().forEach(J=>J.stop())}),(J,H)=>{var Y,ve,z,c,M,V,f,U,ee,ae,re,te,q,h,se,T,ue,we,Ce,Pe,Ue;return t(),s("div",aa,[e("div",ra,[e("div",la,[e("div",na,[e("div",ia,[(Y=o.value)!=null&&Y.photo?(t(),s("img",{key:0,src:p.value+((ve=o.value)==null?void 0:ve.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,ua)):(t(),s("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((V=(M=(c=(z=o.value)==null?void 0:z.niveaux_users)==null?void 0:c.at(-1))==null?void 0:M.parrainage_niveau)==null?void 0:V.couleur)||"#0af"}`})},H[5]||(H[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(f=o.value)!=null&&f.premium?(t(),s("i",da)):j("",!0),e("button",{onClick:H[0]||(H[0]=Me=>i.value=!i.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},H[6]||(H[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),i.value?(t(),s("div",ca,[e("button",{onClick:E,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," CamÃ©ra "),e("button",{onClick:D,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):j("",!0)]),e("input",{ref_key:"galleryInput",ref:a,type:"file",accept:"image/*",class:"hidden",onChange:N},null,544),e("div",pa,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:$e({color:`${((re=(ae=(ee=(U=o.value)==null?void 0:U.niveaux_users)==null?void 0:ee.at(-1))==null?void 0:ae.parrainage_niveau)==null?void 0:re.couleur)||"#0af"}`})},[A(x((te=o.value)==null?void 0:te.nom)+" ",1),(q=o.value)!=null&&q.premium?(t(),s("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:$e({background:`${((ue=(T=(se=(h=o.value)==null?void 0:h.niveaux_users)==null?void 0:se.at(-1))==null?void 0:T.parrainage_niveau)==null?void 0:ue.couleur)||"#0af"}`})}," Premium ",4)):j("",!0)],4),(we=o.value)!=null&&we.subscription_ends_at?(t(),s("span",va," Jusqu'au "+x(new Date((Ce=o.value)==null?void 0:Ce.subscription_ends_at).toLocaleDateString()),1)):j("",!0)])]),l.value?(t(),s("div",ma,[e("img",{src:l.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,fa),e("button",{onClick:ce,disabled:m.value,class:G(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":m.value}])},x(m.value?"Upload...":"Confirmer"),11,ga),e("button",{onClick:oe,class:"text-red-500 hover:text-red-700"}," Annuler ")])):j("",!0)]),e("div",ba,[(Pe=o.value)!=null&&Pe.commercant?j("",!0):(t(),s("button",{key:0,onClick:H[1]||(H[1]=Me=>I(g).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commerÃ§ant ")),(Ue=o.value)!=null&&Ue.premium?j("",!0):(t(),s("button",{key:1,onClick:H[2]||(H[2]=Me=>_.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",xa,[(t(),fe(ut(w.value)))]),_.value?(t(),fe(so,{key:0,"is-open":_.value,onClose:H[3]||(H[3]=Me=>_.value=!1),onUpgraded:Q},null,8,["is-open"])):j("",!0),$.value?(t(),fe(_o,{key:1,"is-open":$.value,onClose:H[4]||(H[4]=Me=>$.value=!1),onPurchased:L},null,8,["is-open"])):j("",!0),y.value?(t(),s("div",ha,[e("div",ya,[e("video",{ref_key:"videoRef",ref:u,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:W,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:P,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):j("",!0)])}}}),lp=ne(_a,[["__scopeId","data-v-d3d7ca02"]]),wa={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},ka={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},$a={class:"space-y-2"},Ca=["onClick"],Aa={class:"font-poppins"},Pa={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},ja={class:"lg:hidden mb-4"},Sa={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Ma=["onClick"],Va={key:0,class:"space-y-6"},Ea={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},za={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Ua={class:"flex items-center gap-4 mb-4"},La=["src"],Ta={class:"text-[var(--espace-vert)] font-semibold"},Ia={class:"text-sm text-[var(--espace-gris)]"},Fa={class:"text-sm text-[var(--espace-gris)]"},Ra={class:"text-sm text-[var(--espace-gris)]"},qa={key:0,class:"space-y-6"},Oa={key:0,class:"space-y-6"},Na={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Da={class:"text-base font-medium font-poppins"},Wa={class:"text-sm text-[var(--espace-gris)]"},Ha=le({__name:"Parametres",setup(C){const r=b(!1),p=ge(),g=ie(),d=pe(),n=p.user,o=b("profile"),i=b({id:(n==null?void 0:n.id)??0,nom:(n==null?void 0:n.nom)??"",email:(n==null?void 0:n.email)??"",telephone:(n==null?void 0:n.telephone)??"",ville:(n==null?void 0:n.ville)??""});p.user={...p.user,...i.value};const m=b({current_password:"",new_password:"",confirm_new_password:""});b({});const l=b(""),v=me(()=>[...n!=null&&n.commercant?[{to:"/commercant/produits",label:"Espace CommerÃ§ant",icon:"fa-store-alt",description:"GÃ©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des rÃ©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"GÃ©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"GÃ©rez vos collaborations sur des produits"}]),_=async()=>{var a,u,y,k;r.value=!0;try{await F.post("/updateProfile",i.value),localStorage.setItem("user",JSON.stringify(p.user)),d.success("Profil mis Ã  jour avec succÃ¨s",{timeout:3e3})}catch(D){((u=(a=D.response)==null?void 0:a.data)==null?void 0:u.message)=="Unauthenticated."&&g.push("login"),d.error(((k=(y=D.response)==null?void 0:y.data)==null?void 0:k.message)||"Erreur lors de la mise Ã  jour du profil")}finally{r.value=!1}},S=async()=>{var a,u,y,k;r.value=!0;try{if(m.value.new_password!==m.value.confirm_new_password){d.error("Les mots de passe ne correspondent pas");return}await F.post("/updatePassword",m.value),d.success("Mot de passe mis Ã  jour avec succÃ¨s",{timeout:3e3}),m.value={current_password:"",new_password:"",confirm_new_password:""},l.value=""}catch(D){((u=(a=D.response)==null?void 0:a.data)==null?void 0:u.message)=="Unauthenticated."&&g.push("login"),d.error(((k=(y=D.response)==null?void 0:y.data)==null?void 0:k.message)||"Erreur lors de la mise Ã  jour du mot de passe")}finally{r.value=!1}},$=()=>{p.logout(),g.push({name:"login"})},w=()=>{const a=m.value.new_password;a.length===0?l.value="":a.length<8||!/[A-Za-z]/.test(a)||!/[0-9]/.test(a)?l.value="weak":/[!@#$%^&*]/.test(a)?l.value="strong":l.value="medium"};return xe(()=>m.value.new_password,w),(a,u)=>{const y=he("RouterLink");return t(),s(B,null,[O(ze,{isLoading:r.value},null,8,["isLoading"]),e("div",wa,[e("aside",ka,[u[7]||(u[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"ParamÃ¨tres",-1)),e("nav",$a,[(t(),s(B,null,Z([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"SÃ©curitÃ©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"DÃ©connexion",icon:"fa-sign-out-alt"}],k=>e("button",{key:k.id,onClick:D=>k.id==="logout"?$():o.value=k.id,class:G(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":o.value===k.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":o.value!==k.id}])},[e("i",{class:G(["fas",k.icon])},null,2),e("span",Aa,x(k.label),1)],10,Ca)),64))])]),e("main",Pa,[e("div",ja,[e("div",Sa,[(t(),s(B,null,Z([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"SÃ©curitÃ©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"DÃ©connexion",icon:"fa-sign-out-alt"}],k=>e("button",{key:k.id,onClick:D=>k.id==="logout"?$():o.value=k.id,class:G(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":o.value===k.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":o.value!==k.id}])},[e("i",{class:G(["fas",k.icon])},null,2),A(" "+x(k.label),1)],10,Ma)),64))])]),O(_e,{name:"slide"},{default:K(()=>{var k,D;return[o.value==="profile"?(t(),s("section",Va,[u[10]||(u[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",Ea,[e("form",{onSubmit:de(_,["prevent"]),class:"space-y-4"},[O(ke,{label:"Nom",icon:"fa-user",modelValue:i.value.nom,"onUpdate:modelValue":u[0]||(u[0]=N=>i.value.nom=N),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),O(ke,{label:"Email",icon:"fa-envelope",modelValue:i.value.email,"onUpdate:modelValue":u[1]||(u[1]=N=>i.value.email=N),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),O(ke,{label:"TÃ©lÃ©phone",icon:"fa-phone",modelValue:i.value.telephone,"onUpdate:modelValue":u[2]||(u[2]=N=>i.value.telephone=N),type:"tel",required:"",placeholder:"Votre numÃ©ro de tÃ©lÃ©phone"},null,8,["modelValue"]),O(ke,{label:"Ville",icon:"fa-city",modelValue:i.value.ville,"onUpdate:modelValue":u[3]||(u[3]=N=>i.value.ville=N),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),u[8]||(u[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre Ã  jour ",-1))],32),e("div",za,[u[9]||(u[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"AperÃ§u",-1)),e("div",Ua,[e("img",{src:((D=(k=I(n))==null?void 0:k.commercant)==null?void 0:D.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,La),e("div",null,[e("p",Ta,x(i.value.nom||"Nonni"),1),e("p",Ia,x(i.value.email||"Non dÃ©fini"),1)])]),e("p",Fa,"TÃ©lÃ©phone: "+x(i.value.telephone||"Nonni"),1),e("p",Ra,"Ville: "+x(i.value.ville||"Non dÃ©fini"),1)])])])):j("",!0)]}),_:1}),O(_e,{name:"slide"},{default:K(()=>[o.value==="security"?(t(),s("section",qa,[u[12]||(u[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"SÃ©curitÃ©",-1)),e("form",{onSubmit:de(S,["prevent"]),class:"space-y-4"},[O(ke,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:m.value.current_password,"onUpdate:modelValue":u[4]||(u[4]=k=>m.value.current_password=k),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),O(ke,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:m.value.new_password,"onUpdate:modelValue":u[5]||(u[5]=k=>m.value.new_password=k),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:w},null,8,["modelValue"]),l.value?(t(),s("div",{key:0,class:G(["text-sm",{"text-red-500":l.value==="weak","text-yellow-500":l.value==="medium","text-green-500":l.value==="strong"}])}," Force du mot de passe : "+x(l.value==="weak"?"Faible":l.value==="medium"?"Moyen":"Fort"),3)):j("",!0),O(ke,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:m.value.confirm_new_password,"onUpdate:modelValue":u[6]||(u[6]=k=>m.value.confirm_new_password=k),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),u[11]||(u[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):j("",!0)]),_:1}),O(_e,{name:"slide"},{default:K(()=>[o.value==="links"?(t(),s("section",Oa,[u[13]||(u[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",Na,[(t(!0),s(B,null,Z(v.value,k=>(t(),fe(y,{key:k.to,to:k.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:K(()=>[e("i",{class:G(["fas",k.icon])},null,2),e("div",null,[e("h3",Da,x(k.label),1),e("p",Wa,x(k.description),1)])]),_:2},1032,["to"]))),128))])])):j("",!0)]),_:1})])])],64)}}}),np=ne(Ha,[["__scopeId","data-v-ce56f428"]]),Ja={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},Ba={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},Ga=["src","alt"],Ka={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},Xa={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Qa={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boostÃ©"},Za={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},Ya={class:"text-xs text-[var(--espace-gris)] truncate"},er={class:"text-sm font-medium text-[var(--espace-or)]"},tr={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},sr={class:"flex items-center gap-1"},or={class:"flex items-center gap-1"},ar=["aria-label"],rr=le({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(C,{emit:r}){const p=C,g=r,d=pe(),n=Ee(),o=l=>{if(l==null||isNaN(l)||l===0)return"0";const v=Math.abs(l);return v<1e3?l.toString():v<1e4?(l/1e3).toFixed(1).replace(/\.0$/,"")+"k":v<1e6?Math.floor(l/1e3)+"k":v<1e9?(l/1e6).toFixed(1).replace(/\.0$/,"")+"M":(l/1e9).toFixed(1).replace(/\.0$/,"")+"B"},i=b(0),m=async()=>{var l,v;try{console.log(p.produit.id),await n.toggleFavorite(p.produit.id),g("toggle-favorite",p.produit.id)}catch(_){console.error("Erreur lors de la mise Ã  jour des favoris :",_),d.error(((v=(l=_.response)==null?void 0:l.data)==null?void 0:v.message)||"Erreur lors de la mise Ã  jour des favori.")}};return(l,v)=>{var S,$;const _=he("router-link");return t(),s("div",Ja,[O(_,{to:`/produits/${l.produit.id}`,class:"block relative"},{default:K(()=>[e("div",Ba,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${i.value*100}%)`})},[(t(!0),s(B,null,Z(l.produit.photos||[l.produit.photo_url||"https://via.placeholder.com/150"],(w,a)=>(t(),s("img",{key:a,src:w,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${l.produit.nom} - ${a+1}`},null,8,Ga))),128))],4),l.produit.photos&&l.produit.photos.length>1?(t(),s("div",Ka,[(t(!0),s(B,null,Z(l.produit.photos,(w,a)=>(t(),s("span",{key:a,class:G(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":a===i.value}])},null,2))),128))])):j("",!0)]),l.produit.collaboratif?(t(),s("span",Xa," Collaboratif ")):j("",!0),l.produit.boosted?(t(),s("span",Qa," BoostÃ© ")):j("",!0),e("h3",Za,x(l.produit.nom),1),e("p",Ya,x(l.produit.description||"Aucune description"),1),e("p",er,x(l.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",tr,[e("div",sr,[v[0]||(v[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,x(o((S=l.produit.counts)==null?void 0:S.views_count)),1)]),e("div",or,[e("button",{onClick:m,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":l.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":l.produit.is_favorited_by}])},null,2)],8,ar),e("span",null,x(o(($=l.produit.counts)==null?void 0:$.favorites_count)),1)])])])}}}),Re=ne(rr,[["__scopeId","data-v-f669a30f"]]),lr={},nr={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm animate-pulse"};function ir(C,r){return t(),s("div",nr,r[0]||(r[0]=[je('<div class="w-full h-32 bg-gray-300 rounded-lg mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-3/4 mb-2" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/2 mb-2" data-v-4ed20fce></div><div class="h-4 bg-gray-300 rounded w-1/3 mb-2" data-v-4ed20fce></div><div class="flex justify-between mt-2" data-v-4ed20fce><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div><div class="h-3 bg-gray-300 rounded w-1/4" data-v-4ed20fce></div></div>',5)]))}const Ke=ne(lr,[["render",ir],["__scopeId","data-v-4ed20fce"]]),ur={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},dr={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},cr={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},pr=["onClick","aria-label","aria-current"],vr=["aria-label","aria-expanded"],mr={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},fr={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},gr={class:"flex-1 min-w-[120px]"},br={class:"flex-1 min-w-[120px]"},xr=["value"],hr={class:"flex-1 min-w-[100px]"},yr={class:"flex-1 min-w-[100px]"},_r={class:"flex-1 min-w-[120px]"},wr=["value"],kr={class:"flex-1 min-w-[100px]"},$r=["aria-busy"],Cr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Ar=le({__name:"Home",setup(C){const r=ie(),p=Ee(),g=ge(),d=b([]),n=pe(),o=b(!1),i=b({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),m=b(["Douala","YaoundÃ©","Bamenda","Buea","Garoua"]),l=b(null),v=b(null),_=b(!1);let S=0;const $=async()=>{try{const E=await F.get("/categories");d.value=E.data.categories}catch(E){console.error("Erreur lors du chargement des catÃ©gories:",E),n.error("Erreur lors du chargement des catÃ©gories.")}},w=()=>{if(i.value.prix_min&&i.value.prix_max&&parseFloat(i.value.prix_min)>parseFloat(i.value.prix_max)){n.error("Le prix minimum doit Ãªtre infÃ©rieur au prix maximum.");return}p.fetchProducts(i.value,!0),o.value=!1},a=()=>{i.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},o.value=!1},u=E=>{p.setSort(E)},y=()=>Object.values(i.value).filter(E=>E!=="").length,k=E=>{N(E)},D=E=>{N(E)},N=async E=>{var Q,L,J;const W=(Q=g.user)==null?void 0:Q.id,P=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),oe=new Date().toISOString().split("T")[0],ce=localStorage.getItem("lastResetDate");if((!ce||ce!==oe)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",oe)),!P[E])try{setTimeout(async()=>{const H=await F.post("/record_view",{product_id:E,user_id:W??null})},1e3),P[E]=!0,localStorage.setItem("viewedProducts",JSON.stringify(P))}catch(H){console.error("Erreur lors de l'enregistrement de la vue:",H),n.error(((J=(L=H.response)==null?void 0:L.data)==null?void 0:J.message)||"Erreur lors de l'enregistrement de la vue.")}};return be(async()=>{try{if(console.log("Produits au montage:",p.products),await p.fetchProducts({},!0,!0),console.log("Produits chargÃ©s:",p.products,"isLoading:",p.isLoading),await $(),!g.user){r.push("/login");return}}catch(E){console.error("Erreur lors du chargement des produits ou catÃ©gories:",E),E==="Unauthenticated."&&r.push("login"),n.error("Erreur lors du chargement des produits. Veuillez rÃ©essayer.")}l.value=new IntersectionObserver(E=>{console.log("Observer dÃ©clenchÃ©, isLoadingMore:",_.value,"hasMore:",p.hasMore),E[0].isIntersecting&&!_.value&&p.hasMore&&(_.value=!0,dt(()=>{S=window.scrollY}),p.fetchProducts(i.value).finally(()=>{_.value=!1}))},{threshold:.1}),v.value&&l.value.observe(v.value)}),+ct(()=>{window.scrollTo(0,S)}),Ve(()=>{l.value&&v.value&&l.value.unobserve(v.value)}),(E,W)=>(t(),s("div",ur,[e("div",dr,[e("div",cr,[(t(),s(B,null,Z([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-bookmark"}],P=>e("button",{key:P.id,onClick:oe=>u(P.id),class:G(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":I(p).sort===P.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":I(p).sort!==P.id}]),"aria-label":`Trier par ${P.label}`,"aria-current":I(p).sort===P.id?"true":void 0},[e("i",{class:G(["fas",P.icon])},null,2),A(" "+x(P.label),1)],10,pr)),64)),e("button",{onClick:W[0]||(W[0]=P=>o.value=!o.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":o.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":o.value},[W[7]||(W[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),y()>0?(t(),s("span",mr,x(y()),1)):j("",!0)],8,vr)]),O(_e,{name:"slide-up"},{default:K(()=>[o.value?(t(),s("div",fr,[e("form",{onSubmit:de(w,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",gr,[R(e("input",{"onUpdate:modelValue":W[1]||(W[1]=P=>i.value.search=P),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[X,i.value.search]])]),e("div",br,[R(e("select",{"onUpdate:modelValue":W[2]||(W[2]=P=>i.value.category=P),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[8]||(W[8]=e("option",{value:""},"Toutes les CatÃ©gories",-1)),(t(!0),s(B,null,Z(d.value,P=>(t(),s("option",{key:P.id,value:P.id},x(P.nom),9,xr))),128))],512),[[Ae,i.value.category]])]),e("div",hr,[R(e("input",{"onUpdate:modelValue":W[3]||(W[3]=P=>i.value.prix_min=P),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[X,i.value.prix_min]])]),e("div",yr,[R(e("input",{"onUpdate:modelValue":W[4]||(W[4]=P=>i.value.prix_max=P),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[X,i.value.prix_max]])]),e("div",_r,[R(e("select",{"onUpdate:modelValue":W[5]||(W[5]=P=>i.value.ville=P),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[W[9]||(W[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),s(B,null,Z(m.value,P=>(t(),s("option",{key:P,value:P},x(P),9,wr))),128))],512),[[Ae,i.value.ville]])]),e("div",kr,[R(e("select",{"onUpdate:modelValue":W[6]||(W[6]=P=>i.value.collaboratif=P),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},W[10]||(W[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[Ae,i.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[W[12]||(W[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:a,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"RÃ©initialiser les filtres"},W[11]||(W[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):j("",!0)]),_:1}),O(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:K(()=>[I(p).isLoading&&I(p).products.length===0?(t(!0),s(B,{key:0},Z(I(p).isLoading?8:0,P=>(t(),fe(Ke,{key:"skeleton-init-"+P}))),128)):j("",!0),(t(!0),s(B,null,Z(I(p).products,P=>(t(),fe(Re,{key:P.id,produit:P,onMouseover:oe=>k(P.id),onTouchstart:oe=>D(P.id)},null,8,["produit","onMouseover","onTouchstart"]))),128)),_.value?(t(!0),s(B,{key:1},Z(_.value?4:0,P=>(t(),fe(Ke,{key:"skeleton-more-"+P}))),128)):j("",!0)]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:v,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":_.value},[I(p).hasMore?j("",!0):(t(),s("p",Cr,"Aucun produit supplÃ©mentaire"))],8,$r)])]))}}),ip=ne(Ar,[["__scopeId","data-v-a0d08221"]]),Pr={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},jr={class:"container mx-auto max-w-5xl"},Sr={key:0,class:"text-center text-[var(--espace-gris)]"},Mr={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Vr={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},Er={class:"w-full lg:w-1/2 relative"},zr={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},Ur=["src","alt"],Lr={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Tr={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boostÃ©"},Ir={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Fr={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"CommerÃ§ant Pro"},Rr={class:"w-full lg:w-1/2"},qr={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},Or={class:"text-sm text-[var(--espace-gris)] mb-3"},Nr={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},Dr={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},Wr={class:"flex items-center gap-3"},Hr={class:"flex items-center gap-1"},Jr={class:"flex items-center gap-1"},Br=["aria-label"],Gr={class:"border-t pt-3 mt-3"},Kr={class:"text-xs text-[var(--espace-gris)] mb-1"},Xr={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"CommerÃ§ant vÃ©rifiÃ©",title:"CommerÃ§ant vÃ©rifiÃ©"},Qr={class:"text-xs text-[var(--espace-gris)] mb-1"},Zr={class:"text-xs text-[var(--espace-gris)] mb-1"},Yr={class:"text-xs text-[var(--espace-gris)] mb-2"},el={class:"flex flex-col sm:flex-row gap-3 mt-4"},tl=["disabled","aria-label"],sl={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},ol={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},al={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},rl={class:"text-xs text-[var(--espace-gris)] mb-3"},ll=["aria-label"],nl={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},il={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},ul={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},dl={class:"text-sm text-[var(--espace-gris)]"},cl={class:"text-[var(--espace-or)]"},pl={class:"flex gap-4"},vl={key:0,class:"mt-6"},ml=["aria-busy"],fl={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},gl=le({__name:"Produit",setup(C){const r=Ee(),p=Se(),g=ie(),d=ge(),n=Te(),o=pe();b([]);const i=b(!1),m=b(null),l=b(null),v=b(null),_=b(!1),S=b(0),$=b(0),w=[0,500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],u=c=>{if(c==null||isNaN(c)||c===0)return"0";const M=Math.abs(c);return M<1e3?c.toString():M<1e4?(c/1e3).toFixed(1).replace(/\.0$/,"")+"k":M<1e6?Math.floor(c/1e3)+"k":M<1e9?(c/1e6).toFixed(1).replace(/\.0$/,"")+"M":(c/1e9).toFixed(1).replace(/\.0$/,"")+"B"},y=async()=>{try{r.isLoading=!0,await r.viewProduct(p.params.id),r.isLoading=!1,r.product.photos&&!r.product.photo_url&&(r.product.photo_url=r.product.photos[0]),await r.fetchProducts({category:r.product.category_id,per_page:8},!0)}catch(c){o.error(c||"Erreur lors du chargement du produit"),g.push({name:"home"})}finally{r.isLoading=!1}},k=()=>{var c;if(!d.user){o.error("Veuillez vous connecter pour collaborer"),g.push({name:"login"});return}if(((c=d.user.commercant)==null?void 0:c.id)===r.product.commercant_id){o.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!r.product.collaboratif){o.error("Ce produit nâ€™est pas ouvert Ã  la collaboration");return}m.value=r.product.prix+(r.product.marge_min||500),i.value=!0},D=async()=>{if(!m.value||m.value<r.product.prix+(r.product.marge_min||0)){o.error(`Le prix de revente doit Ãªtre supÃ©rieur ou Ã©gal Ã  ${r.product.prix+(r.product.marge_min||0)} XAF`);return}await n.addCollaboration({produit_id:r.product.id,prix_revente:m.value})&&(o.success("Demande de collaboration envoyÃ©e",{timeout:3e3}),i.value=!1,m.value=null)},N=()=>{i.value=!1,m.value=null},E=()=>{g.push({path:`/commercant/produits/${r.product.id}/edit`})},W=async()=>{var c,M,V;if(!d.user||((c=d.user.commercant)==null?void 0:c.id)!==r.product.commercant_id){o.error("Seul le commerÃ§ant propriÃ©taire peut booster ce produit");return}if(d.user.jetons<$.value){o.error(`Pas assez de Jetons. Il vous faut ${$.value} Jetons pour ce boost.`);return}try{const f=await F.post(`/produits/${r.product.id}/boost`,{target_views:S.value});d.user.jetons-=$.value,r.product.boosted=!0,o.success(f.data.message||"Produit boostÃ© avec succÃ¨s !"),_.value=!1}catch(f){o.error(((V=(M=f.response)==null?void 0:M.data)==null?void 0:V.message)||"Erreur lors du boostage du produit")}},P=()=>{var c;if(!d.user||((c=d.user.commercant)==null?void 0:c.id)!==r.product.commercant_id){o.error("Seul le commerÃ§ant propriÃ©taire peut booster ce produit");return}_.value=!0,oe()},oe=()=>{const c=w.indexOf(S.value);$.value=c!==-1?Math.max(5,a[c]):5};xe(S,()=>{oe()});const ce=c=>{L(c)},Q=c=>{L(c)},L=async c=>{var ee,ae,re;const M=(ee=d.user)==null?void 0:ee.id;if(!M){o.error("Connexion requise pour enregistrer la vue.");return}const V=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),f=new Date().toISOString().split("T")[0],U=localStorage.getItem("lastResetDate");if((!U||U!==f)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",f)),!V[c])try{setTimeout(async()=>{const te=await F.post("/record_view",{product_id:c,user_id:M})},1e3),V[c]=!0,localStorage.setItem("viewedProducts",JSON.stringify(V))}catch(te){console.error("Erreur lors de l'enregistrement de la vue:",te),o.error(((re=(ae=te.response)==null?void 0:ae.data)==null?void 0:re.message)||"Erreur lors de l'enregistrement de la vue.")}},J=async()=>{var c,M;try{await r.toggleFavorite(r.product.id)}catch(V){o.error(((M=(c=V.response)==null?void 0:c.data)==null?void 0:M.message)||"Erreur lors de la mise Ã  jour des favoris.")}},H=(c,M,V)=>{var U;if(!d.user){o.error("Veuillez vous connecter pour dÃ©marrer une conversation"),g.push({name:"login"});return}const f={id:c,name:M,commercant_id:r.product.commercant_id,name_user:((U=d.user)==null?void 0:U.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(f)),g.push(`/messages/${V}`)},Y=b(0),ve=()=>{var M;const c=(((M=r.product.photos)==null?void 0:M.length)||1)-1;Y.value=Math.min(Y.value+1,c)},z=()=>{Y.value=Math.max(Y.value-1,0)};return be(()=>{y(),n.initializeState(),l.value=new IntersectionObserver(c=>{c[0].isIntersecting&&!r.isLoading&&r.hasMore&&r.fetchProducts({category:r.product.category_id,per_page:8},!1)},{threshold:.1}),v.value&&l.value.observe(v.value)}),Ve(()=>{l.value&&v.value&&l.value.unobserve(v.value)}),xe(()=>p.params.id,c=>{c&&(y(),Y.value=0)}),xe(r.product,c=>{c&&(r.page=1,r.fetchProducts({category:c.category_id,per_page:4},!0),Y.value=0)}),(c,M)=>{const V=he("router-link");return t(),s(B,null,[O(ze,{isLoading:I(r).isLoading},null,8,["isLoading"]),e("div",Pr,[e("div",jr,[I(r).isLoading?(t(),s("div",Sr)):I(r).product?(t(),s("div",Mr,[O(_e,{name:"slide-up"},{default:K(()=>{var f,U,ee,ae,re,te,q,h,se,T,ue,we,Ce,Pe,Ue,Me,Je;return[e("div",Vr,[e("div",Er,[e("div",zr,[e("div",{class:"flex w-full h-full slider-container",style:$e({transform:`translateX(-${Y.value*100}%)`})},[(t(!0),s(B,null,Z(I(r).product.photos||[I(r).product.photo_url||"https://via.placeholder.com/300"],(qe,Le)=>(t(),s("img",{key:Le,src:qe,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${I(r).product.nom} - ${Le+1}`},null,8,Ur))),128))],4),I(r).product.photos&&I(r).product.photos.length>1?(t(),s("button",{key:0,onClick:z,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image prÃ©cÃ©dente"},M[5]||(M[5]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):j("",!0),I(r).product.photos&&I(r).product.photos.length>1?(t(),s("button",{key:1,onClick:ve,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},M[6]||(M[6]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):j("",!0),I(r).product.photos&&I(r).product.photos.length>1?(t(),s("div",Lr,[(t(!0),s(B,null,Z(I(r).product.photos,(qe,Le)=>(t(),s("span",{key:Le,class:G(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Le===Y.value}])},null,2))),128))])):j("",!0)]),I(r).product.boosted?(t(),s("span",Tr," BoostÃ© ")):j("",!0),I(r).product.collaboratif?(t(),s("span",Ir," Collaboratif ")):j("",!0),(f=I(d).user)!=null&&f.premium?(t(),s("span",Fr," Premium ")):j("",!0)]),e("div",Rr,[e("h1",qr,x(I(r).product.nom),1),e("p",Or,x(I(r).product.description||"Aucune description disponible"),1),e("p",Nr,x(I(r).product.prix)+" XAF ",1),e("div",Dr,[e("p",null,[M[7]||(M[7]=e("strong",null,"CatÃ©gorie :",-1)),A(" "+x(((U=I(r).product.category)==null?void 0:U.nom)||"Non spÃ©cifiÃ©e"),1)]),e("p",null,[M[8]||(M[8]=e("strong",null,"QuantitÃ© :",-1)),A(" "+x(I(r).product.quantite),1)]),e("p",null,[M[9]||(M[9]=e("strong",null,"Ville :",-1)),A(" "+x(I(r).product.ville||"Non spÃ©cifiÃ©e"),1)]),e("p",null,[M[10]||(M[10]=e("strong",null,"AjoutÃ© le :",-1)),A(" "+x(new Date(I(r).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",Wr,[e("div",Hr,[M[11]||(M[11]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,x(u((ee=I(r).product.counts)==null?void 0:ee.views_count))+" vues",1)]),e("div",Jr,[e("i",{class:G(["fas fa-bookmark text-[10px]",{"text-[var(--espace-or)]":I(r).product.is_favorited_by}])},null,2),e("span",null,x(u((ae=I(r).product.counts)==null?void 0:ae.favorites_count))+" favoris",1)])])]),e("button",{onClick:J,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":I(r).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:G(["fas fa-bookmark mr-2 text-sm",{"text-[var(--espace-or)]":I(r).product.is_favorited_by}])},null,2),A(" "+x(I(r).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,Br),e("div",Gr,[M[16]||(M[16]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," Ã€ propos du commerÃ§ant ",-1)),e("p",Kr,[e("strong",null,x((re=I(r).product.commercant)==null?void 0:re.nom),1),(te=I(r).product.commercant)!=null&&te.verified?(t(),s("span",Xr,M[12]||(M[12]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):j("",!0)]),e("p",Qr,x(((q=I(r).product.commercant)==null?void 0:q.description)||"Aucune description disponible"),1),e("p",Zr,[M[13]||(M[13]=e("strong",null,"Ville :",-1)),A(" "+x(((h=I(r).product.commercant)==null?void 0:h.ville)||"NonspÃ©cifiÃ©e"),1)]),e("p",Yr,[M[14]||(M[14]=e("strong",null,"Note :",-1)),A(" "+x(Number((se=I(r).product.commercant)==null?void 0:se.rating).toFixed(1)||"Non Ã©valuÃ©")+" / 5 ",1)]),O(V,{to:`/commercants/${I(r).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commerÃ§ant"},{default:K(()=>M[15]||(M[15]=[A(" Voir le profil du commerÃ§ant ")])),_:1,__:[15]},8,["to"])]),e("div",el,[I(r).product.collaboratif&&((ue=(T=I(d).user)==null?void 0:T.commercant)==null?void 0:ue.id)!==I(r).product.commercant_id?(t(),s("button",{key:0,onClick:k,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},M[17]||(M[17]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),A(" Collaborer ")]))):j("",!0),((Ce=(we=I(d).user)==null?void 0:we.commercant)==null?void 0:Ce.id)===I(r).product.commercant_id?(t(),s("button",{key:1,onClick:E,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},M[18]||(M[18]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),A(" Modifier le produit ")]))):j("",!0),((Ue=(Pe=I(d).user)==null?void 0:Pe.commercant)==null?void 0:Ue.id)===I(r).product.commercant_id?(t(),s("button",{key:2,onClick:P,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!I(r).product.boosted,"aria-label":I(r).product.boosted?"Boost dÃ©jÃ  actif":"Personnaliser le boost"},M[19]||(M[19]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,tl)):j("",!0),((Je=(Me=I(d).user)==null?void 0:Me.commercant)==null?void 0:Je.id)!==I(r).product.commercant_id?(t(),s("button",{key:3,onClick:M[0]||(M[0]=qe=>H(I(r).product.id,I(r).product.nom,I(r).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},M[20]||(M[20]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),A(" Envoyer un message ")]))):j("",!0)])])])]}),_:1})])):(t(),s("div",sl," Produit non trouvÃ©. ")),O(_e,{name:"fade"},{default:K(()=>[i.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:de(N,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",ol,[e("h2",al," Collaborer sur "+x(I(r).product.nom),1),e("p",rl," Proposez un prix de revente (minimum : "+x(I(r).product.prix+(I(r).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:de(D,["prevent"]),class:"space-y-3"},[e("div",null,[M[21]||(M[21]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),R(e("input",{id:"prix_revente","onUpdate:modelValue":M[1]||(M[1]=f=>m.value=f),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${I(r).product.nom}`,required:""},null,8,ll),[[X,m.value,void 0,{number:!0}]]),m.value?(t(),s("p",nl," Marge potentielle : "+x(m.value-I(r).product.prix)+" XAF ",1)):j("",!0)]),e("div",{class:"flex gap-3"},[M[22]||(M[22]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:N,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):j("",!0)]),_:1}),O(_e,{name:"fade"},{default:K(()=>[_.value?(t(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:M[4]||(M[4]=de(f=>_.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",il,[M[27]||(M[27]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:de(W,["prevent"]),class:"space-y-6"},[e("div",null,[M[23]||(M[23]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),R(e("input",{type:"range","onUpdate:modelValue":M[2]||(M[2]=f=>S.value=f),min:"0",max:"10000",step:"500",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:oe},null,544),[[X,S.value,void 0,{number:!0}]]),e("p",ul,x(S.value)+" vues ",1)]),e("p",dl,[M[24]||(M[24]=A("CoÃ»t estimÃ© : ")),e("strong",cl,x($.value),1),M[25]||(M[25]=A(" Jetons"))]),e("div",pl,[M[26]||(M[26]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:M[3]||(M[3]=f=>_.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):j("",!0)]),_:1})]),I(r).products?(t(),s("div",vl,[M[28]||(M[28]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),O(De,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:K(()=>[(t(!0),s(B,null,Z(I(r).products,f=>(t(),fe(Re,{key:f.id,produit:f,onMouseover:U=>ce(f.id),onTouchstart:U=>Q(f.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:v,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":I(r).isLoading},[I(r).hasMore?j("",!0):(t(),s("p",fl," Aucun produit supplÃ©mentaire "))],8,ml)])):j("",!0)])],64)}}}),up=ne(gl,[["__scopeId","data-v-e258f430"]]),bl="/assets/logoOrangeweb-C9Cko1mf.webp",xl={class:"relative bg-green-500"},hl={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},yl={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},_l={class:"flex items-center gap-1 sm:gap-3"},wl={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},kl=["aria-label"],$l={class:"flex items-center gap-2"},Cl=["src"],Al={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},Pl={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},jl={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Sl={class:"flex justify-around items-center py-2"},Ml=["aria-label"],Vl=le({__name:"AppHeader",setup(C){var D;const r=ge(),p=Te(),g=ie(),d=r.user;Se();const n=b(!1),o=b(!1),i=b(!1),m=b(""),l=Ee(),v=b(!1),_=b(null),S=b(!1),$=me(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...r.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...r.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:p.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),w=async()=>{var N,E;if(r.user)try{const W=await F.get("/user/badges");p.saveCollaborationsToLocalStorage(W.data.collaborations_pending.map(P=>({produit_id:P.produit_id,prix_revente:P.prix_revente,status:P.status,created_at:P.created_at})))}catch(W){((E=(N=W.response)==null?void 0:N.data)==null?void 0:E.message)=="Unauthenticated."&&g.push("login"),console.error("Erreur lors du chargement des badges:",W)}};xe(()=>r.user,N=>{N&&(w(),p.initializeState())},{immediate:!0}),xe(()=>p.collaborationsPending,()=>{p.collaborationsPending>0&&(o.value=!0,setTimeout(()=>o.value=!1,300))});const a=async()=>{if(m.value.trim())try{await l.fetchProducts({search:m.value.trim()},!0),m.value="",v.value=!1}catch(N){console.error("Erreur lors de la recherche:",N)}},u=N=>{if(S.value){S.value=!1;return}_.value&&!_.value.contains(N.target)&&(v.value=!1)},y=async()=>{v.value=!v.value,v.value&&(S.value=!0,await Oe())},k=()=>{g.push("/messages")};return(D=r.user)!=null&&D.id&&window.Echo.channel(`chat.${r.user.id}`).listen("MessageSent",N=>{var E;((E=r.user)==null?void 0:E.id)===N.receiver_id&&p.saveUnreadMessagesToLocalStorage(N.unread_messages)}),be(()=>{r.user&&(w(),p.initializeState()),document.addEventListener("click",u)}),Ve(()=>{document.removeEventListener("click",u)}),(N,E)=>{const W=he("RouterLink");return t(),s("div",xl,[e("header",hl,[e("div",yl,[e("div",_l,[O(W,{to:"/","aria-label":"Retour Ã  l'accueil"},{default:K(()=>E[2]||(E[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:bl,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),E[3]||(E[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",wl,[(t(!0),s(B,null,Z($.value,P=>(t(),fe(W,{key:P.to,to:P.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas",P.icon])},null,2),A(" "+x(P.label)+" ",1),P.badge>0?(t(),s("span",{key:0,class:G(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":P.to==="/panier"&&n.value||P.to==="/collaborations"&&o.value||P.to==="/commandes"&&i.value}]),"aria-label":P.to==="/panier"?"Nombre d'articles dans le panier":P.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},x(P.badge),11,kl)):j("",!0)]),_:2},1032,["to"]))),128))]),O(Ye),e("div",$l,[e("button",{onClick:y,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},E[4]||(E[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:k,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},E[5]||(E[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),s(B,null,Z($.value.filter(P=>I(r).user?P.to==="/profil":["/login","/register"].includes(P.to)),P=>(t(),fe(W,{key:P.to,to:P.to,class:"relative flex items-center justify-center","aria-label":P.label},{default:K(()=>{var oe;return[(oe=I(d))!=null&&oe.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${I(d).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Cl)):(t(),s("div",Al,[e("i",{class:G([`fas ${P.icon}`,"text-2xl text-gray-100"])},null,2)])),P.badge>0&&P.to==="/collaborations"?(t(),s("span",{key:2,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":P.to==="/collaborations"&&o.value}]),"aria-label":"Collaborations en attente"},x(P.badge),3)):j("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),v.value?(t(),s("div",{key:0,ref_key:"searchOverlayRef",ref:_,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",Pl,[R(e("input",{"onUpdate:modelValue":E[0]||(E[0]=P=>m.value=P),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ze(a,["enter"])},null,544),[[X,m.value]]),e("button",{onClick:a,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},E[6]||(E[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:E[1]||(E[1]=P=>v.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},E[7]||(E[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):j("",!0)]),O(_e,{name:"slide-up"},{default:K(()=>[e("nav",jl,[e("div",Sl,[(t(!0),s(B,null,Z($.value,P=>(t(),fe(W,{key:P.to,to:P.to,"aria-label":P.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:K(()=>[e("i",{class:G(["fas text-lg",P.icon])},null,2),P.badge>0?(t(),s("span",{key:0,class:G(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":P.to==="/panier"&&n.value||P.to==="/collaborations"&&o.value||P.to==="/commandes"&&i.value}]),"aria-label":P.to==="/panier"?"Nombre d'articles dans le panier":P.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},x(P.badge),11,Ml)):j("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),it=ne(Vl,[["__scopeId","data-v-c232437a"]]),El={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},zl={class:"container mx-auto px-4 sm:px-6 py-6"},Ul={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Ll={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Tl={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Il={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Fl={key:2,class:"text-sm text-[var(--espace-gris)] italic"},Rl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},ql=["value"],Ol={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Nl=["value"],Dl={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},Wl=["value"],Hl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},Jl={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},Bl={key:1,class:"text-base text-[var(--espace-gris)] italic"},Gl={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Kl=["onClick"],Xl=le({__name:"CommercantDashboard",setup(C){const r=ie(),p=pe(),g=b([]),d=b([]),n=b(null),o=b(!1),i=b({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),m=b({nom:"",description:"",ville:""}),l=b(["Douala","YaoundÃ©","Bamenda","Buea","Garoua"]),v=async()=>{o.value=!0;try{const[w,a,u]=await Promise.all([F.get("/commercant/produits"),F.get("/categories"),F.get("/commercant/profil")]);o.value=!1,g.value=w.data.produits.map(y=>{var k;return{...y,commercant_id:((k=n.value)==null?void 0:k.id)||""}}),d.value=a.data.categories,n.value=u.data.commercant,m.value={nom:n.value.nom,description:n.value.description||"",ville:n.value.ville||""}}catch{p.error("Erreur lors du chargement des donnÃ©es."),o.value=!1}},_=async()=>{try{const w=await F.post("/commercant/produits",i.value);p.success("Produit ajoutÃ© avec succÃ¨s."),v(),i.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{p.error("Erreur lors de lâ€™ajout du produit.")}},S=async w=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await F.delete(`/commercant/produits/${w}`),p.success("Produit supprimÃ© avec succÃ¨s."),v()}catch{p.error("Erreur lors de la suppression du produit.")}},$=async()=>{var w,a;try{await F.put("/commercant/profil",m.value),p.success("Profil mis Ã  jour avec succÃ¨s."),v()}catch(u){((a=(w=u.response)==null?void 0:w.data)==null?void 0:a.message)=="Unauthenticated."&&r.push("login"),p.error("Erreur lors de la mise Ã  jour du profil.")}};return be(()=>{v()}),(w,a)=>(t(),s("div",El,[O(it),e("div",zl,[a[26]||(a[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),A(" Espace CommerÃ§ant ")],-1)),e("div",Ul,[a[14]||(a[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",Ll,[n.value?(t(),s("p",Tl,[a[12]||(a[12]=e("span",{class:"font-medium"},"Revenus :",-1)),A(" "+x(n.value.revenus)+" FCFA ",1)])):j("",!0),n.value?(t(),s("p",Il,[a[13]||(a[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),A(" "+x(n.value.produits_vendus),1)])):(t(),s("p",Fl,"Chargement..."))])]),e("div",Rl,[a[17]||(a[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil CommerÃ§ant",-1)),e("form",{onSubmit:de($,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[R(e("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>m.value.nom=u),type:"text",placeholder:"Nom du commerÃ§ant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,m.value.nom]]),R(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=u=>m.value.description=u),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[X,m.value.description]]),R(e("select",{"onUpdate:modelValue":a[2]||(a[2]=u=>m.value.ville=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[a[15]||(a[15]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,Z(l.value,u=>(t(),s("option",{key:u,value:u},x(u),9,ql))),128))],512),[[Ae,m.value.ville]]),a[16]||(a[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",Ol,[a[22]||(a[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:de(_,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[R(e("input",{"onUpdate:modelValue":a[3]||(a[3]=u=>i.value.nom=u),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,i.value.nom]]),R(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=u=>i.value.description=u),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[X,i.value.description]]),R(e("input",{"onUpdate:modelValue":a[5]||(a[5]=u=>i.value.prix=u),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,i.value.prix]]),R(e("input",{"onUpdate:modelValue":a[6]||(a[6]=u=>i.value.photo_url=u),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[X,i.value.photo_url]]),R(e("select",{"onUpdate:modelValue":a[7]||(a[7]=u=>i.value.category_id=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[a[18]||(a[18]=e("option",{value:""},"CatÃ©gorie",-1)),(t(!0),s(B,null,Z(d.value,u=>(t(),s("option",{key:u.id,value:u.id},x(u.nom),9,Nl))),128))],512),[[Ae,i.value.category_id]]),e("label",Dl,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=u=>i.value.collaboratif=u),type:"checkbox"},null,512),[[Xe,i.value.collaboratif]]),a[19]||(a[19]=A(" Collaboratif "))]),R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=u=>i.value.marge_min=u),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[X,i.value.marge_min]]),R(e("input",{"onUpdate:modelValue":a[10]||(a[10]=u=>i.value.stock=u),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[X,i.value.stock]]),R(e("select",{"onUpdate:modelValue":a[11]||(a[11]=u=>i.value.ville=u),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[a[20]||(a[20]=e("option",{value:""},"Ville",-1)),(t(!0),s(B,null,Z(l.value,u=>(t(),s("option",{key:u,value:u},x(u),9,Wl))),128))],512),[[Ae,i.value.ville]]),a[21]||(a[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",Hl,[a[25]||(a[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),o.value?(t(),s("div",Jl,a[23]||(a[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):g.value.length===0?(t(),s("div",Bl," Aucun produit disponible. ")):(t(),s("div",Gl,[(t(!0),s(B,null,Z(g.value,u=>(t(),s("div",{key:u.id,class:"relative"},[O(Re,{produit:u},null,8,["produit"]),e("button",{onClick:y=>S(u.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},a[24]||(a[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,Kl)]))),128))]))])])]))}}),dp=ne(Xl,[["__scopeId","data-v-62cb30a8"]]),Ql={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},Zl={class:"container mx-auto max-w-4xl"},Yl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},en={key:0,class:"ml-2"},tn={class:"w-full bg-gray-200 rounded-full h-4"},sn={class:"text-[var(--espace-gris)] text-xs mt-2"},on={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},an={class:"bg-white rounded-lg shadow-md p-6 mb-6"},rn={key:0,class:"mb-4"},ln={class:"text-sm text-[var(--espace-gris)]"},nn={class:"font-bold text-[var(--espace-or)]"},un={class:"text-sm text-[var(--espace-gris)] truncate"},dn=["href"],cn={key:1,class:"mb-4"},pn=["placeholder"],vn={class:"flex flex-col sm:flex-row gap-2"},mn=["disabled"],fn={key:0},gn={key:1},bn=["disabled"],xn={key:0},hn={key:1},yn={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},_n={class:"bg-white rounded-lg shadow-md p-6 mb-6"},wn={class:"mb-4"},kn={key:0,class:"overflow-x-auto"},$n={class:"w-full text-sm text-left text-[var(--espace-gris)]"},Cn=["onClick"],An={class:"px-4 py-2"},Pn={class:"px-4 py-2"},jn={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Sn={class:"bg-white rounded-lg shadow-md p-6 text-center"},Mn={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},Vn={class:"text-[var(--espace-gris)] mt-2"},En=le({__name:"Parrainage",setup(C){const r=ge(),p=ie(),g=pe(),d=()=>{const Q=window.location.hostname;return Q==="localhost"||Q==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.com/register"},n=b(""),o=b(""),i=b([]),m=b(0),l=b(""),v=b(""),_=b(!1),S=b(!1),$=b({}),w=b(null),a=b(0),u=b(0),y=b(0),k=b("all"),D=me(()=>{var Q;return((Q=$.value)==null?void 0:Q.couleur)||"#6b7280"}),N=me(()=>k.value==="commercants"?i.value.filter(Q=>Q.est_commercant):k.value==="nonCommercants"?i.value.filter(Q=>!Q.est_commercant):i.value),E=async()=>{var Q,L;try{const J=await F.get("/parrainages/dashboard");if(!r.user){g.error("Veuillez vous connecter pour accÃ©der Ã  cette page"),p.push("/login");return}const H=J.data;n.value=H.code||"",o.value=n.value?`${d()}/${n.value}`:"",i.value=H.parrainages||[],m.value=H.total_gains||0,$.value=H.niveau_actuel,w.value=H.niveau_suivant,a.value=H.progression,u.value=H.total_parrainages||0,y.value=H.total_parrainages_commercants||0}catch(J){((L=(Q=J.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&p.push("login"),g.error("Erreur lors de la rÃ©cupÃ©ration des donnÃ©es de parrainage"),console.error(J)}},W=async()=>{var Q,L;if(!r.user){g.error("Veuillez vous connecter");return}_.value=!0;try{const J=await F.post("/parrainages/generateCode");l.value=J.data.suggested_code,v.value=l.value,g.success("Nouveau code suggÃ©rÃ© avec succÃ¨s !"),n.value&&(o.value=`${d()}/${n.value}`)}catch(J){((L=(Q=J.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&p.push("login"),g.error("Erreur lors de la gÃ©nÃ©ration du code"),console.error(J)}finally{_.value=!1}},P=async()=>{var Q,L,J,H;if(!r.user){g.error("Veuillez vous connecter");return}if(!v.value.trim()){g.error("Veuillez entrer un code valide");return}S.value=!0;try{const Y=await F.post("/parrainages/createCode",{code:v.value.trim()});n.value=Y.data.code,o.value=Y.data.link||`${d()}/${Y.data.code}`,g.success(Y.data.message||"Code crÃ©Ã© avec succÃ¨s !"),await E()}catch(Y){((L=(Q=Y.response)==null?void 0:Q.data)==null?void 0:L.message)=="Unauthenticated."&&p.push("login"),g.error(((H=(J=Y.response)==null?void 0:J.data)==null?void 0:H.message)||"Erreur lors de la crÃ©ation du code"),console.error(Y)}finally{S.value=!1}},oe=Q=>{if(!o.value){g.error("Aucun lien disponible pour le partage");return}let L="";const J=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${o.value}`);switch(Q){case"whatsapp":L=`https://api.whatsapp.com/send?text=${J}`;break;case"facebook":L=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o.value)}`;break;default:g.error("Plateforme non prise en charge");return}window.open(L,"_blank")},ce=Q=>{Q.est_commercant?p.push(`/commercants/${Q.id}`):p.push({name:"public-profile",params:{id:Q.id}})};return be(()=>{E()}),(Q,L)=>{var J,H,Y,ve,z;return t(),s("div",Ql,[e("div",Zl,[e("div",Yl,[e("h2",{class:"text-lg font-semibold mb-4",style:$e({color:D.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:$e({color:D.value})},[e("div",null,[L[5]||(L[5]=A(" niveau : ")),e("strong",null,[A(x($.value?$.value.nom:"Pas de niveau")+" "+x((J=$.value)==null?void 0:J.emoji)+" ",1),e("div",null," ("+x(y.value)+"/"+x(w.value?w.value.filleuls_requis:(H=$.value)==null?void 0:H.filleuls_requis)+" commerÃ§ants) ",1)])]),((Y=w.value)==null?void 0:Y.jetons_bonus)>0?(t(),s("span",en,"+"+x((ve=w.value)==null?void 0:ve.jetons_bonus)+" jetons ",1)):j("",!0)],4),e("div",tn,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:$e({width:`${a.value}%`,background:`${D.value}`})},null,4)]),e("p",sn," Prochain niveau : "+x(w.value?w.value.nom:"LÃ©gende ğŸ†")+" Ã  "+x(w.value?w.value.filleuls_requis:"1000+")+" commerÃ§ants ",1),(z=$.value.avantages)!=null&&z.length?(t(),s("p",on," Avantages : "+x($.value.avantages.join(", ")),1)):j("",!0),e("button",{onClick:L[0]||(L[0]=c=>I(p).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},L[6]||(L[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),A(" En savoir plus ")]))]),L[24]||(L[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des rÃ©compenses ! Atteignez des niveaux supÃ©rieurs pour dÃ©bloquer des jetons et des avantages. ")],-1)),e("div",an,[L[15]||(L[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),n.value?(t(),s("div",rn,[e("p",ln,[L[7]||(L[7]=A(" Code : ")),e("span",nn,x(n.value),1)]),e("p",un,[L[8]||(L[8]=A(" Lien : ")),e("a",{href:o.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},x(o.value),9,dn)])])):(t(),s("div",cn,[R(e("input",{"onUpdate:modelValue":L[1]||(L[1]=c=>v.value=c),type:"text",placeholder:l.value||"Entrez ou gÃ©nÃ©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,pn),[[X,v.value]]),e("div",vn,[e("button",{onClick:W,disabled:_.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[_.value?(t(),s("span",fn,L[9]||(L[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),A(" GÃ©nÃ©ration... ")]))):(t(),s("span",gn,L[10]||(L[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),A(" GÃ©nÃ©rer un code ")])))],8,mn),e("button",{onClick:P,disabled:S.value||!v.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[S.value?(t(),s("span",xn,L[11]||(L[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),A(" CrÃ©ation... ")]))):(t(),s("span",hn,L[12]||(L[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),A(" CrÃ©er le code ")])))],8,bn)])])),n.value?(t(),s("div",yn,[e("button",{onClick:L[2]||(L[2]=c=>oe("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},L[13]||(L[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),A(" Partager sur WhatsApp ")])),e("button",{onClick:L[3]||(L[3]=c=>oe("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},L[14]||(L[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),A(" Partager sur Facebook ")]))])):j("",!0)]),e("div",_n,[L[18]||(L[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs ParrainÃ©s",-1)),e("div",wn,[R(e("select",{"onUpdate:modelValue":L[4]||(L[4]=c=>k.value=c),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},L[16]||(L[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"CommerÃ§ants",-1),e("option",{value:"nonCommercants"},"Non CommerÃ§ants",-1)]),512),[[Ae,k.value]])]),N.value.length?(t(),s("div",kn,[e("table",$n,[L[17]||(L[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commerÃ§ant")])],-1)),e("tbody",null,[(t(!0),s(B,null,Z(N.value,c=>(t(),s("tr",{key:c.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:M=>ce(c)},x(c.filleul_nom||"Anonyme"),9,Cn),e("td",An,x(new Date(c.date_inscription).toLocaleDateString("fr-FR")),1),e("td",Pn,x(c.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),s("p",jn," Aucun utilisateur parrainÃ© correspondant au filtre. Commencez Ã  inviter dÃ¨s maintenant ! "))]),e("div",Sn,[L[22]||(L[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",Mn,x(m.value)+" jetons ",1),e("p",Vn,[L[19]||(L[19]=A(" ğŸ‰ Vous avez invitÃ© ")),e("strong",null,x(u.value),1),L[20]||(L[20]=A(" utilisateurs, dont ")),e("strong",null,x(y.value),1),L[21]||(L[21]=A(" sont commerÃ§ants ! "))]),L[23]||(L[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," DÃ©bloquez plus de jetons et d'avantages en atteignant les niveaux supÃ©rieurs. ",-1))])])])}}}),cp=ne(En,[["__scopeId","data-v-f14a4574"]]),zn={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Un={class:"container mx-auto max-w-4xl"},Ln={class:"flex border-b border-gray-300 mb-6"},Tn={key:0},In={key:0,class:"grid grid-cols-1 gap-4"},Fn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Rn=["onClick"],qn={class:"text-sm text-[var(--espace-gris)]"},On={class:"text-sm text-[var(--espace-gris)]"},Nn=["onClick"],Dn={class:"flex flex gap-2"},Wn=["onClick"],Hn=["onClick"],Jn=["onClick"],Bn={key:1,class:"text-center text-[var(--espace-gris)]"},Gn={key:1},Kn={key:0,class:"grid grid-cols-1 gap-4"},Xn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Qn=["onClick"],Zn={class:"text-sm text-[var(--espace-gris)]"},Yn={class:"text-sm text-[var(--espace-gris)]"},ei=["onClick"],ti=["onClick"],si={key:1,class:"text-center text-[var(--espace-gris)]"},oi=le({__name:"Collaborations",setup(C){const r=_=>{localStorage.setItem("pending_collaborations",JSON.stringify(_))},p=pe(),g=ie(),d=b({sent_collaborations:[],received_collaborations:[]}),n=b(!0),o=b("received"),i=async()=>{var _,S,$,w;try{const a=await F.get("/collaborations");d.value=a.data;const u=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(u.length>0){const y=new Set(d.value.sent_collaborations.map(D=>D.produit_id)),k=u.filter(D=>!y.has(D.produit_id));k.length!==u.length&&r(k)}}catch(a){console.log((S=(_=a.response)==null?void 0:_.data)==null?void 0:S.message),p.error("Erreur lors du chargement des collaborations"),((w=($=a.response)==null?void 0:$.data)==null?void 0:w.message)=="Unauthenticated."&&g.push("login")}finally{n.value=!1}},m=_=>{g.push({path:`/produits/${_}`})},l=_=>{var $,w,a;const S=(($=_.commercant)==null?void 0:$.id)||((a=(w=_.produit)==null?void 0:w.commercant)==null?void 0:a.id);S?g.push({path:`/commercants/${S}`}):p.error("Profil du commerÃ§ant non disponible")},v=async(_,S)=>{var $;try{const w=await F.post(`/collaborations/${_}`,{statut:S});p.success(w.data.message),await i()}catch(w){p.error(`Erreur lors de la mise Ã  jour de la collaboration${($=w.response)==null?void 0:$.data.message}`)}};return be(()=>{n.value=!0,i()}),(_,S)=>{var $,w,a,u;return t(),s(B,null,[O(ze,{isLoading:n.value},null,8,["isLoading"]),e("div",zn,[e("div",Un,[S[4]||(S[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),A(" Mes Collaborations ")],-1)),e("div",Ln,[e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="received","text-[var(--espace-gris)]":o.value!=="received"}]),onClick:S[0]||(S[0]=y=>o.value="received")}," Collaborations reÃ§ues ",2),e("button",{class:G(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":o.value==="sent","text-[var(--espace-gris)]":o.value!=="sent"}]),onClick:S[1]||(S[1]=y=>o.value="sent")}," Collaborations envoyÃ©es ",2)]),o.value==="received"?(t(),s("div",Tn,[(w=($=d.value)==null?void 0:$.received_collaborations)!=null&&w.length?(t(),s("div",In,[(t(!0),s(B,null,Z(d.value.received_collaborations,y=>(t(),s("div",{key:y.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Fn,[e("div",null,[e("h2",{onClick:k=>m(y.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},x(y.produit.nom),9,Rn),e("p",qn," Prix de revente proposÃ© : "+x(y.prix_revente)+" FCFA ",1),e("p",On,[S[2]||(S[2]=A(" Statut : ")),e("span",{class:G({"text-green-600":y.statut==="valider","text-yellow-600":y.statut==="en_attente","text-red-600":y.statut==="refuser"})},x(y.statut==="en_attente"?"En attente":y.statut==="valider"?"Valider":"RefusÃ©e"),3)]),e("button",{onClick:k=>l(y),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerÃ§ant ",8,Nn)]),e("div",Dn,[y.statut==="en_attente"?(t(),s("button",{key:0,onClick:k=>v(y.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,Wn)):j("",!0),y.statut==="en_attente"?(t(),s("button",{key:1,onClick:k=>v(y.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,Hn)):j("",!0),e("button",{onClick:k=>m(y.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,Jn)])])]))),128))])):(t(),s("p",Bn," Aucune collaboration reÃ§ue pour le moment. "))])):j("",!0),o.value==="sent"?(t(),s("div",Gn,[(u=(a=d.value)==null?void 0:a.sent_collaborations)!=null&&u.length?(t(),s("div",Kn,[(t(!0),s(B,null,Z(d.value.sent_collaborations,y=>(t(),s("div",{key:y.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Xn,[e("div",null,[e("h2",{onClick:k=>m(y.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},x(y.produit.nom),9,Qn),e("p",Zn," Prix de revente proposÃ© : "+x(y.prix_revente)+" FCFA ",1),e("p",Yn,[S[3]||(S[3]=A(" Statut : ")),e("span",{class:G({"text-green-600":y.statut==="valider","text-yellow-600":y.statut==="en_attente","text-red-600":y.statut==="refuser"})},x(y.statut==="en_attente"?"En attente":y.statut==="valider"?"Valider":"RefusÃ©e"),3)]),e("button",{onClick:k=>l(y),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commerÃ§ant ",8,ei)]),e("button",{onClick:k=>m(y.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,ti)])]))),128))])):(t(),s("p",si," Aucune collaboration envoyÃ©e pour le moment. "))])):j("",!0)])])],64)}}}),pp=ne(oi,[["__scopeId","data-v-cac76a42"]]),ai={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},ri={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},li={key:0,class:"mb-8"},ni={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},ii=["disabled"],ui={key:0,class:"fas fa-spinner fa-spin mr-2"},di={key:1,class:"space-y-4 mb-6"},ci={class:"flex items-center gap-3"},pi={class:"text-[var(--espace-vert)] font-medium"},vi={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},mi={class:"flex items-center gap-2"},fi=["onClick"],gi=["onClick"],bi={key:2,class:"text-center text-gray-500"},xi=le({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(C,{emit:r}){const p=ie(),g=r,d=pe(),n=b(!1),o=b(!1),i=b({id:null,phone_number:"",payment_service:""}),m=()=>{o.value=!0,i.value={id:null,phone_number:"",payment_service:""}},l=$=>{o.value=!0,i.value={id:$.id,phone_number:$.phone_number,payment_service:$.payment_service}},v=()=>{o.value=!1,i.value={id:null,phone_number:"",payment_service:""}},_=async()=>{var w,a,u,y;if(!/^6[0-9]{8}$/.test(i.value.phone_number)){d.error("Le numÃ©ro de tÃ©lÃ©phone doit commencer par 6 et contenir 9 chiffres.");return}n.value=!0;try{i.value.id?(await F.put(`/wallets/${i.value.id}`,i.value),d.success("Portefeuille mis Ã  jour avec succÃ¨s !")):(await F.post("/wallets",i.value),d.success("Portefeuille crÃ©Ã© avec succÃ¨s !")),g("refresh-wallets"),v()}catch(k){((a=(w=k.response)==null?void 0:w.data)==null?void 0:a.message)=="Unauthenticated."&&p.push("login"),d.error(((y=(u=k.response)==null?void 0:u.data)==null?void 0:y.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",k)}finally{n.value=!1}},S=async $=>{var w,a,u,y;if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce portefeuille ?")){n.value=!0;try{await F.delete(`/wallets/${$}`),d.success("Portefeuille supprimÃ© avec succÃ¨s !"),g("refresh-wallets")}catch(k){((a=(w=k.response)==null?void 0:w.data)==null?void 0:a.message)=="Unauthenticated."&&p.push("login"),d.error(((y=(u=k.response)==null?void 0:u.data)==null?void 0:y.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",k)}finally{n.value=!1}}};return($,w)=>$.show?(t(),s("div",ai,[e("div",ri,[e("button",{onClick:w[0]||(w[0]=a=>$.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),w[9]||(w[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ’³ GÃ©rer Mes Portefeuilles",-1)),o.value?(t(),s("div",li,[e("form",{onSubmit:de(_,["prevent"]),class:G(["space-y-5",{"bg-green-50 p-4 rounded-lg":!i.value.id,"bg-yellow-50 p-4 rounded-lg":i.value.id}])},[e("h3",ni,x(i.value.id?"Modifier le Portefeuille":"CrÃ©er un Nouveau Portefeuille"),1),e("div",null,[w[3]||(w[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"NumÃ©ro de tÃ©lÃ©phone",-1)),R(e("input",{"onUpdate:modelValue":w[1]||(w[1]=a=>i.value.phone_number=a),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[X,i.value.phone_number]])]),e("div",null,[w[5]||(w[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),R(e("select",{"onUpdate:modelValue":w[2]||(w[2]=a=>i.value.payment_service=a),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},w[4]||(w[4]=[e("option",{value:"",disabled:""},"SÃ©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,i.value.payment_service]])]),e("button",{type:"submit",disabled:n.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[n.value?(t(),s("i",ui)):j("",!0),A(" "+x(i.value.id?"Mettre Ã  jour":"CrÃ©er"),1)],8,ii),e("button",{onClick:v,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):j("",!0),$.wallets&&$.wallets.length>0?(t(),s("div",di,[(t(!0),s(B,null,Z($.wallets,a=>(t(),s("div",{key:a.id||a.phone_number,class:G(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":a.payment_service==="ORANGE","bg-purple-50":a.payment_service==="MTN"}])},[e("div",ci,[e("span",pi,x(a.phone_number)+" ("+x(a.payment_service)+") ",1),a.is_active!==!1?(t(),s("span",vi,"Actif")):j("",!0)]),e("div",mi,[e("button",{onClick:u=>l(a),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},w[6]||(w[6]=[e("i",{class:"fas fa-edit"},null,-1),A(" Modifier ")]),8,fi),e("button",{onClick:u=>S(a.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},w[7]||(w[7]=[e("i",{class:"fas fa-trash"},null,-1),A(" Supprimer ")]),8,gi)])],2))),128))])):(t(),s("p",bi,"Aucun portefeuille crÃ©Ã©.")),o.value?j("",!0):(t(),s("button",{key:3,onClick:m,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},w[8]||(w[8]=[e("i",{class:"fas fa-plus"},null,-1),A(" Ajouter un portefeuille ")])))])])):j("",!0)}}),hi=ne(xi,[["__scopeId","data-v-04e487e6"]]),yi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},_i={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},wi={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},ki={key:0,class:"space-y-4"},$i={class:"flex flex-col"},Ci={class:"text-[var(--espace-vert)] font-medium"},Ai={class:"text-xs text-gray-500"},Pi={class:"text-gray-700 text-sm sm:text-base"},ji={class:"flex items-center gap-2"},Si=["onClick"],Mi=["onClick"],Vi={key:1,class:"text-center text-gray-500"},Ei={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},zi={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Ui=["value"],Li=["disabled"],Ti={key:0,class:"fas fa-spinner fa-spin mr-2"},Ii={key:1,class:"border-t pt-4 mt-2"},Fi=le({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(C,{emit:r}){const p=C,g=r,d=pe(),n=b(!1),o=b([...p.offers]);xe(()=>p.offers,w=>{o.value=[...w]},{deep:!0});const i=b(!1),m=b({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),l=()=>{i.value=!0,m.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},v=w=>{i.value=!0,m.value={id:w.id,nombre_jetons:w.nombre_jetons,prix_unitaire:w.prix_unitaire,description:w.description||"",wallet_id:w.wallet_id}},_=()=>{i.value=!1,m.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},S=async()=>{var w,a;n.value=!0;try{if(m.value.id){const u=await F.put(`/jeton_market/updateOffer/${m.value.id}`,m.value);d.success("Offre mise Ã  jour avec succÃ¨s !");const y=o.value.findIndex(k=>k.id===m.value.id);y!==-1&&(o.value[y]={...o.value[y],...m.value})}else{const u=await F.post("/jeton_market/offer",m.value);d.success("Offre crÃ©Ã©e avec succÃ¨s !"),o.value.push(u.data)}g("refresh-offers"),_()}catch(u){d.error(((a=(w=u.response)==null?void 0:w.data)==null?void 0:a.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",u)}finally{n.value=!1}},$=async w=>{var a,u;if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette offre ?")){n.value=!0;try{await F.delete(`/jeton_market/deleteOffer/${w}`),d.success("Offre supprimÃ©e avec succÃ¨s !"),o.value=o.value.filter(y=>y.id!==w),g("refresh-offers")}catch(y){d.error(((u=(a=y.response)==null?void 0:a.data)==null?void 0:u.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",y)}finally{n.value=!1}}};return(w,a)=>w.show?(t(),s("div",yi,[e("div",_i,[e("button",{onClick:a[0]||(a[0]=u=>w.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),a[12]||(a[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“‹ Mes Offres",-1)),e("div",wi,[o.value.length>0?(t(),s("div",ki,[(t(!0),s(B,null,Z(o.value,u=>{var y,k;return t(),s("div",{key:u.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",$i,[e("span",Ci,x(u.nombre_jetons)+" jetons â€¢ "+x(u.total_prix)+" FCFA ",1),e("span",Ai,"PU : "+x(u.prix_unitaire)+" FCFA",1),e("p",Pi,[a[4]||(a[4]=e("strong",null,"ğŸ’³ ",-1)),A(" "+x((y=u.wallet)==null?void 0:y.phone_number)+" ("+x((k=u.wallet)==null?void 0:k.payment_service)+") ",1)])]),e("div",ji,[e("button",{onClick:D=>v(u),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},a[5]||(a[5]=[e("i",{class:"fas fa-edit"},null,-1),A(" Modifier ")]),8,Si),e("button",{onClick:D=>$(u.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},a[6]||(a[6]=[e("i",{class:"fas fa-trash"},null,-1),A(" Supprimer ")]),8,Mi)])])}),128))])):(t(),s("p",Vi,"Aucune offre crÃ©Ã©e."))]),i.value?(t(),s("div",Ei,[e("form",{onSubmit:de(S,["prevent"]),class:G(["space-y-4",{"bg-green-50 p-4 rounded-lg":!m.value.id,"bg-yellow-50 p-4 rounded-lg":m.value.id}])},[e("h3",zi,x(m.value.id?"Modifier l'offre":"CrÃ©er une nouvelle offre"),1),e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"QuantitÃ©",-1)),R(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>m.value.nombre_jetons=u),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,m.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[a[8]||(a[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=u=>m.value.prix_unitaire=u),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,m.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=u=>m.value.wallet_id=u),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[a[9]||(a[9]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Z(w.wallets,u=>(t(),s("option",{key:u.id,value:u.id},x(u.phone_number)+" ("+x(u.payment_service)+") ",9,Ui))),128))],512),[[Ae,m.value.wallet_id]])]),e("button",{type:"submit",disabled:n.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[n.value?(t(),s("i",Ti)):j("",!0),A(" "+x(m.value.id?"Mettre Ã  jour":"CrÃ©er"),1)],8,Li),e("button",{onClick:_,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),s("div",Ii,[e("button",{onClick:l,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},a[11]||(a[11]=[e("i",{class:"fas fa-plus"},null,-1),A(" Nouvelle offre ")]))]))])])):j("",!0)}}),Ri=ne(Fi,[["__scopeId","data-v-03e4f804"]]),qi={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},Oi={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},Ni={class:"flex items-center justify-between mb-4"},Di={class:"flex items-center gap-3"},Wi=["src"],Hi={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Ji={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},Bi={class:"text-gray-700 text-sm sm:text-base"},Gi={class:"text-gray-700 text-sm sm:text-base"},Ki={class:"text-xs text-gray-500 mt-3"},Xi=["onClick"],Qi={key:0,class:"col-span-full text-center py-4"},Zi={key:1,class:"text-center text-gray-600 py-24"},Yi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},eu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},tu=["value"],su={class:"text-sm text-gray-500"},ou={class:"font-bold"},au={class:"font-bold"},ru=["disabled"],lu={key:0,class:"fas fa-spinner fa-spin mr-2"},nu={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},iu={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},uu={class:"space-y-4"},du={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},cu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},pu=["value"],vu={class:"text-sm text-[var(--espace-gris)]"},mu={class:"font-bold"},fu=["disabled"],gu={key:0,class:"fas fa-spinner fa-spin mr-2"},bu={key:1,class:""},xu={key:2,class:""},hu={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},yu={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},_u=["disabled"],wu={key:0,class:"fas fa-spinner fa-spin mr-2"},ku={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},$u=le({__name:"JetonMarket",setup(C){const r=()=>{const q=window.location.hostname;return q==="localhost"||q==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},p=me(()=>r()),g=ie(),d=b([]),n=b([]),o=b({quantityMin:""}),i=b(!1),m=b(!1),l=b({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),v=b(!1),_=b(1),S=b(1),$=b(!1),w=b(!0),a=b(!1),u=b(!1),y=b({walletId:""}),k=b(null),D=b(0),N=b([]),E=b(!1),W=b({id:0,phone_number:"",payment_service:""}),P=b(!1),oe=b(!1),ce=pe(),Q=()=>{i.value=!1,m.value=!1,u.value=!1,E.value=!1,P.value=!1,oe.value=!1},L=async()=>{try{const q=await F.get("/wallets");N.value=q.data.data||[]}catch(q){console.error("Erreur lors du chargement des portefeuilles:",q),N.value=[]}},J=async()=>{var q,h;try{const se=await F.get("/jeton_market/my-offers");n.value=se.data.data||[]}catch(se){((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&g.push("login"),console.error("Erreur lors du chargement des offres de l'utilisateur:",se),n.value=[]}},H=async()=>{await L(),Q(),N.value.length===0?E.value=!0:i.value=!0},Y=async()=>{var q,h,se,T;v.value=!0;try{Q();const ue=await F.post("/wallets",W.value);ce.success(ue.data.message||"Portefeuille crÃ©Ã© avec succÃ¨s !"),E.value=!1,await L(),i.value=!0}catch(ue){((h=(q=ue.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&g.push("login"),ce.error(((T=(se=ue.response)==null?void 0:se.data)==null?void 0:T.message)||"Erreur lors de la crÃ©ation du portefeuille"),console.error("Erreur:",ue)}finally{v.value=!1,W.value={id:0,phone_number:"",payment_service:""}}},ve=()=>{m.value=!1,_.value=1,d.value=[],f()},z=async()=>{a.value=!0,_.value=1,d.value=[],await f(),a.value=!1},c=me(()=>d.value.filter(q=>!o.value.quantityMin||q.nombre_jetons>=parseInt(o.value.quantityMin,10))),M=me(()=>l.value.nombre_jetons*l.value.prix_unitaire),V=me(()=>M.value*.1),f=async()=>{var q,h;if(!($.value||_.value>S.value)){$.value=!0;try{const se={page:_.value,quantity_min:o.value.quantityMin||void 0},T=await F.get("/jeton_market/offers",{params:se});d.value=[...d.value,...T.data.data],S.value=T.data.last_page,_.value+=1}catch(se){((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)=="Unauthenticated."&&g.push("login"),console.error("Erreur lors du chargement des offres:",se)}finally{$.value=!1,w.value=!1}}},U=()=>{const q=document.querySelector(".grid");if(q){const{scrollTop:h,clientHeight:se,scrollHeight:T}=q;h+se>=T-300&&!$.value&&f()}},ee=async()=>{var q,h,se;if(!l.value.walletId){ce.error("Veuillez sÃ©lectionner un portefeuille.");return}v.value=!0;try{const T=await F.post("/jeton_market/offer",{...l.value,wallet_id:l.value.walletId,total_price:M.value});i.value=!1,ce.success(((q=T==null?void 0:T.data)==null?void 0:q.message)||"Offre crÃ©Ã©e avec succÃ¨s !"),f()}catch(T){ce.error(((se=(h=T.response)==null?void 0:h.data)==null?void 0:se.message)||"Erreur lors de la crÃ©ation de l'offre"),console.error("Erreur lors de la crÃ©ation de l'offre:",T.response)}finally{v.value=!1}},ae=(q,h,se)=>{Q();const T=d.value.find(ue=>ue.id===q);T&&(k.value=q,D.value=T.total_prix,y.value.walletId="",u.value=!0)},re=async()=>{var q,h;if(!k.value||!y.value.walletId){ce.error("Veuillez sÃ©lectionner un portefeuille.");return}v.value=!0;try{const se=await F.post(`/jeton_market/buy/${k.value}`,{wallet_id:y.value.walletId});console.log(se.data),u.value=!1,f(),ce.success(se.data.message||"Achat effectuÃ© avec succÃ¨s !")}catch(se){console.error("Erreur lors de l'achat:",se.response.data.message),ce.error(((h=(q=se.response)==null?void 0:q.data)==null?void 0:h.message)||"Erreur lors de l'achat")}finally{v.value=!1,k.value=null,D.value=0}},te=q=>{var h;return(h=q.user)!=null&&h.commercant?`/commercants/${q.user.commercant.id}`:`/profile/public/${q.user_id}`};return be(()=>{w.value=!0,f(),L(),J(),window.addEventListener("scroll",U)}),Ve(()=>{window.removeEventListener("scroll",U)}),(q,h)=>{const se=he("router-link");return t(),s(B,null,[O(ze,{isLoading:w.value},null,8,["isLoading"]),e("div",qi,[e("div",Oi,[O(se,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:K(()=>h[16]||(h[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),h[17]||(h[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"ğŸŒ MarchÃ©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute sÃ©curitÃ© ğŸš€")],-1)),h[18]||(h[18]=e("div",{class:"w-10"},null,-1))]),d.value.length>0?(t(),s("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:U},[(t(!0),s(B,null,Z(c.value,T=>(t(),s("div",{key:T.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",Ni,[e("div",Di,[O(se,{to:te(T),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:K(()=>[T.user.photo?(t(),s("img",{key:0,src:p.value+T.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Wi)):(t(),s("i",Hi))]),_:2},1032,["to"]),O(se,{to:te(T),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:K(()=>[A(x(T.user.nom),1)]),_:2},1032,["to"])]),e("span",Ji,[A(x(T.nombre_jetons)+" ",1),h[19]||(h[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",Bi,[h[20]||(h[20]=e("strong",null,"ğŸ’µ Prix :",-1)),A(" "+x(T.prix_unitaire)+" FCFA/jeton",1)]),e("p",Gi,[h[21]||(h[21]=e("strong",null,"ğŸ’° Total :",-1)),A(" "+x(T.total_prix)+" FCFA ",1)]),e("p",Ki,"ğŸ“… PubliÃ©e le "+x(new Date(T.date_creation).toLocaleDateString()),1),e("button",{onClick:ue=>{var we,Ce;return ae(T.id,(we=T.wallet)==null?void 0:we.phone_number,(Ce=T.wallet)==null?void 0:Ce.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," âš¡ Acheter ",8,Xi)]))),128)),v.value?(t(),s("div",Qi,h[22]||(h[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):j("",!0)],32)):(t(),s("div",Zi,[h[25]||(h[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),h[26]||(h[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[h[23]||(h[23]=A("Soyez le premier Ã  ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:H},"poster une offre"),h[24]||(h[24]=A(" ğŸ‰"))])])),O(_e,{name:"fade"},{default:K(()=>[i.value?(t(),s("div",Yi,[e("div",eu,[e("button",{onClick:h[0]||(h[0]=T=>i.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[35]||(h[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“ Nouvelle Offre",-1)),e("form",{onSubmit:de(ee,["prevent"]),class:"space-y-5"},[e("div",null,[h[27]||(h[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"QuantitÃ©",-1)),R(e("input",{"onUpdate:modelValue":h[1]||(h[1]=T=>l.value.nombre_jetons=T),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,l.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[h[28]||(h[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),R(e("input",{"onUpdate:modelValue":h[2]||(h[2]=T=>l.value.prix_unitaire=T),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[X,l.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[h[30]||(h[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille Ã  utiliser",-1)),R(e("select",{"onUpdate:modelValue":h[3]||(h[3]=T=>l.value.walletId=T),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[29]||(h[29]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Z(N.value,T=>(t(),s("option",{key:T.id,value:T.id},x(T.phone_number)+" ("+x(T.payment_service)+") ",9,tu))),128))],512),[[Ae,l.value.walletId]])]),e("p",su,[h[31]||(h[31]=A("ğŸ’° Total: ")),e("span",ou,x(M.value),1),h[32]||(h[32]=A(" FCFA | ğŸ¦ Commission (10%): ")),e("span",au,x(V.value),1),h[33]||(h[33]=A(" FCFA"))]),e("button",{type:"submit",disabled:v.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[v.value?(t(),s("i",lu)):j("",!0),h[34]||(h[34]=A(" Publier "))],8,ru)],32)])])):j("",!0)]),_:1}),O(_e,{name:"fade"},{default:K(()=>[m.value?(t(),s("div",nu,[e("div",iu,[e("button",{onClick:h[4]||(h[4]=T=>m.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"âœ–"),h[36]||(h[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"ğŸ›ï¸ Filtres",-1)),e("div",uu,[R(e("input",{"onUpdate:modelValue":h[5]||(h[5]=T=>o.value.quantityMin=T),type:"number",placeholder:"QuantitÃ© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[X,o.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:ve,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," ğŸ” Appliquer ")])])):j("",!0)]),_:1}),O(_e,{name:"fade"},{default:K(()=>[u.value?(t(),s("div",du,[e("div",cu,[e("button",{onClick:h[6]||(h[6]=T=>u.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[41]||(h[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ“² Paiement",-1)),e("form",{onSubmit:de(re,["prevent"]),class:"space-y-5"},[e("div",null,[h[38]||(h[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"SÃ©lectionnez votre portefeuille",-1)),R(e("select",{"onUpdate:modelValue":h[7]||(h[7]=T=>y.value.walletId=T),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[h[37]||(h[37]=e("option",{value:"",disabled:""},"SÃ©lectionnez un portefeuille",-1)),(t(!0),s(B,null,Z(N.value,T=>(t(),s("option",{key:T.id,value:T.id},x(T.phone_number)+" ("+x(T.payment_service)+") ",9,pu))),128))],512),[[Ae,y.value.walletId]])]),e("p",vu,[h[39]||(h[39]=A("Montant total : ")),e("span",mu,x(D.value),1),h[40]||(h[40]=A(" FCFA"))]),e("button",{type:"submit",disabled:v.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[v.value?(t(),s("i",gu)):j("",!0),v.value?(t(),s("span",bu,"Veuillez patienter")):(t(),s("span",xu,"Confirmer le paiement"))],8,fu)],32)])])):j("",!0)]),_:1}),O(_e,{name:"fade"},{default:K(()=>[E.value?(t(),s("div",hu,[e("div",yu,[e("button",{onClick:h[8]||(h[8]=T=>E.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"âœ–"),h[46]||(h[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"ğŸ’³ CrÃ©er un Portefeuille ",-1)),e("form",{onSubmit:de(Y,["prevent"]),class:"space-y-5"},[e("div",null,[h[42]||(h[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"NumÃ©ro de tÃ©lÃ©phone",-1)),R(e("input",{"onUpdate:modelValue":h[9]||(h[9]=T=>W.value.phone_number=T),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[X,W.value.phone_number]])]),e("div",null,[h[44]||(h[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),R(e("select",{"onUpdate:modelValue":h[10]||(h[10]=T=>W.value.payment_service=T),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},h[43]||(h[43]=[e("option",{value:"",disabled:""},"SÃ©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[Ae,W.value.payment_service]])]),e("button",{type:"submit",disabled:v.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[v.value?(t(),s("i",wu)):j("",!0),h[45]||(h[45]=A(" CrÃ©er "))],8,_u)],32)])])):j("",!0)]),_:1}),P.value?(t(),fe(hi,{key:2,show:P.value,wallets:N.value,onClose:h[11]||(h[11]=T=>P.value=!1),onRefreshWallets:L},null,8,["show","wallets"])):j("",!0),oe.value?(t(),fe(Ri,{key:3,show:oe.value,wallets:N.value,offers:n.value,onClose:h[12]||(h[12]=T=>oe.value=!1),onRefreshOffers:f},null,8,["show","wallets","offers"])):j("",!0),e("div",ku,[e("button",{onClick:h[13]||(h[13]=T=>{Q(),m.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},h[47]||(h[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:z,class:G(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":a.value}])},[e("i",{class:G(["fas fa-sync-alt text-xl",{"fa-spin":a.value}])},null,2),h[48]||(h[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:h[14]||(h[14]=T=>{Q(),P.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},h[49]||(h[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:H,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[50]||(h[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:h[15]||(h[15]=T=>{Q(),oe.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},h[51]||(h[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),vp=ne($u,[["__scopeId","data-v-c3c0370a"]]),Cu={class:"overflow-y-scroll bg-gray-100"},Au={class:"container mx-auto px-4 sm:px-6 py-8"},Pu={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},ju={class:"flex flex-col sm:flex-row items-center gap-6"},Su={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Mu=["src"],Vu={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Eu={class:"flex-1"},zu={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Uu={class:"text-sm text-[var(--espace-gris)] mb-1"},Lu={class:"text-sm text-[var(--espace-gris)] mb-1"},Tu={class:"text-sm text-[var(--espace-gris)]"},Iu={key:0,class:"text-sm text-[var(--espace-gris)]"},Fu={class:"mt-2 flex space-x-2 flex-col"},Ru={class:"text-sm text-[var(--espace-gris)]"},qu={class:"text-xs text-[var(--espace-gris)]"},Ou={class:"mt-4 flex flex-col sm:flex-row gap-4"},Nu={class:"mt-4 flex flex-wrap gap-4"},Du={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Wu={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},Hu={key:1,class:"text-base text-[var(--espace-gris)] italic"},Ju={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bu={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},Gu={class:"flex items-center space-x-2"},Ku={key:3},Xu={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},Qu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Zu={key:5,class:"text-base text-[var(--espace-gris)] italic"},Yu={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},ed={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},td={class:"text-sm text-[var(--espace-gris)]"},sd={class:"text-sm text-[var(--espace-gris)]"},od=le({__name:"CommercantDetails",setup(C){const r=Se(),p=ie(),g=pe(),d=b(!1),n=b(null),o=b(null),i=b(0),m=b(0),l=b(!1),v=async()=>{d.value=!0;try{const w=await F.get(`/commercant/${r.params.commercantId}`);n.value=w.data.commercant,i.value=w.data.average_rating||0,m.value=w.data.vote_count||0,n.value.produits||console.warn("Aucun produit trouvÃ© dans la rÃ©ponse de l'API pour ce commerÃ§ant.")}catch{g.error("Erreur lors du chargement des dÃ©tails du commerÃ§ant.")}finally{d.value=!1}},_=async()=>{var w,a,u,y;if(o.value===null||o.value<1||o.value>5){g.error("Veuillez sÃ©lectionner une note entre 1 et 5.");return}try{const k=await F.post(`/commercant/${r.params.commercantId}/rate`,{rating:o.value});i.value=k.data.average_rating||0,g.success("Merci pour votre note !"),o.value=null,l.value=!1,m.value=k.data.vote_count||m.value+1}catch(k){((a=(w=k.response)==null?void 0:w.data)==null?void 0:a.message)=="Unauthenticated."&&p.push("login"),g.error(((y=(u=k.response)==null?void 0:u.data)==null?void 0:y.message)||"Erreur lors de la notation.")}},S=me(()=>{var w;return((w=n.value)==null?void 0:w.produits)||[]}),$=()=>{l.value=!0};return be(async()=>{v()}),(w,a)=>{const u=he("router-link");return t(),s(B,null,[O(ze,{isLoading:d.value},null,8,["isLoading"]),e("div",Cu,[O(it),e("div",Au,[n.value?(t(),s("div",Pu,[e("div",ju,[e("div",Su,[n.value.photo_url?(t(),s("img",{key:0,src:n.value.photo_url,alt:"Photo du commerÃ§ant",class:"w-full h-full object-cover"},null,8,Mu)):(t(),s("i",Vu))]),e("div",Eu,[e("h1",zu," CommerÃ§ant : "+x(n.value.nom),1),e("p",Uu,[a[2]||(a[2]=e("strong",null,"Ville :",-1)),A(" "+x(n.value.ville),1)]),e("p",Lu,[a[3]||(a[3]=e("strong",null,"Inscrit depuis :",-1)),A(" "+x(new Date(n.value.created_at).toLocaleDateString()),1)]),e("p",Tu,[a[4]||(a[4]=e("strong",null,"Contact :",-1)),A(" "+x(n.value.email||"Non disponible"),1)]),n.value.telephone?(t(),s("p",Iu,[a[5]||(a[5]=e("strong",null,"TÃ©lÃ©phone :",-1)),A(" "+x(n.value.telephone),1)])):j("",!0),e("div",Fu,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:$},[(t(),s(B,null,Z(5,y=>e("span",{key:y,class:"relative text-yellow-400 w-5 h-5"},[a[6]||(a[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:$e({width:y<=Math.floor(i.value)?"100%":y===Math.ceil(i.value)&&i.value%1!==0?`${i.value%1*100}%`:"0%"})},null,4)])),64)),e("p",Ru,x(Number(i.value).toFixed(1))+"/5 ",1)]),e("span",qu,"("+x(m.value)+" votes)",1)])])]),e("div",Ou,[O(u,{to:`/chat/${n.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:K(()=>a[7]||(a[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),A(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),O(u,{to:`/public-profile/${n.value.user_id||n.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:K(()=>a[8]||(a[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),A(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",Nu,[e("span",Du,"Produits : "+x(S.value.length),1),n.value.revenus?(t(),s("span",Wu,"Revenus : "+x(n.value.revenus)+" FCFA",1)):j("",!0)])])):d.value?j("",!0):(t(),s("div",Hu,"CommerÃ§ant non trouvÃ©.")),l.value?(t(),s("div",Ju,[e("div",Bu,[a[9]||(a[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce CommerÃ§ant",-1)),e("div",Gu,[R(e("input",{"onUpdate:modelValue":a[0]||(a[0]=y=>o.value=y),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[X,o.value,void 0,{number:!0}]]),e("button",{onClick:_,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:a[1]||(a[1]=y=>l.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):j("",!0),d.value?(t(),s("div",Ku)):S.value.length>0?(t(),s("div",Xu,[a[10]||(a[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du CommerÃ§ant",-1)),e("div",Qu,[(t(!0),s(B,null,Z(S.value,y=>(t(),fe(Re,{key:y.id,produit:y},null,8,["produit"]))),128))])])):n.value&&S.value.length===0?(t(),s("div",Zu,"Aucun produit disponible pour ce commerÃ§ant.")):j("",!0),n.value&&n.value.statistiques?(t(),s("div",Yu,[a[13]||(a[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",ed,[e("p",td,[a[11]||(a[11]=e("strong",null,"Vues totales :",-1)),A(" "+x(n.value.statistiques.total_views),1)]),e("p",sd,[a[12]||(a[12]=e("strong",null,"Produits populaires :",-1)),A(" "+x(n.value.statistiques.popular_products),1)])])])):j("",!0)])])],64)}}}),mp=ne(od,[["__scopeId","data-v-28e3885d"]]),ad={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},rd={class:"container mx-auto max-w-2xl"},ld={class:"bg-white rounded-lg shadow-md p-6"},nd={key:0,class:"text-red-500 text-xs"},id={key:0,class:"text-red-500 text-xs"},ud={key:0,class:"text-red-500 text-xs"},dd={key:0,class:"text-red-500 text-xs"},cd={key:0,class:"text-red-500 text-xs"},pd=["disabled"],vd={key:0},md={key:1},fd=le({__name:"CommercantCreate",setup(C){const r=ie(),p=pe(),g=b({nom:"",ville:"",email:"",telephone:"",photo:null}),d=b(!1),n=b({}),o=l=>{const v=l.target;v.files&&v.files[0]&&(g.value.photo=v.files[0])},i=async(l,v)=>{console.log(l,v);try{await Ne.send("service_06884pt","template_5x962ru",{to_name:l,code:v}),p.success("Code de vÃ©rification envoyÃ©.")}catch{p.error("Erreur lors de l'envoi de l'email.")}},m=async()=>{var l,v,_,S;d.value=!0,n.value={};try{const $=new FormData;$.append("nom",g.value.nom),$.append("ville",g.value.ville),$.append("email",g.value.email),$.append("telephone",g.value.telephone),g.value.photo&&$.append("photo",g.value.photo);const w=await F.post("/commercants",$,{headers:{"Content-Type":"multipart/form-data"}});await i(w.data.commercant.email,w.data.verification_code),p.success("CommerÃ§ant crÃ©Ã© avec succÃ¨s !"),r.push("/profil")}catch($){((v=(l=$.response)==null?void 0:l.data)==null?void 0:v.message)=="Unauthenticated."&&r.push("login"),(S=(_=$.response)==null?void 0:_.data)!=null&&S.errors?n.value=$.response.data.errors:p.error("Erreur lors de la crÃ©ation du commerÃ§ant"),console.error($)}finally{d.value=!1}};return(l,v)=>(t(),s("div",ad,[e("div",rd,[v[11]||(v[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),A(" CrÃ©er un CommerÃ§ant ")],-1)),e("div",ld,[e("form",{onSubmit:de(m,["prevent"]),class:"space-y-6"},[e("div",null,[v[4]||(v[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),R(e("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>g.value.nom=_),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerÃ§ant",required:""},null,512),[[X,g.value.nom]]),n.value.nom?(t(),s("span",nd,x(n.value.nom),1)):j("",!0)]),e("div",null,[v[5]||(v[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),R(e("input",{"onUpdate:modelValue":v[1]||(v[1]=_=>g.value.ville=_),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[X,g.value.ville]]),n.value.ville?(t(),s("span",id,x(n.value.ville),1)):j("",!0)]),e("div",null,[v[6]||(v[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{"onUpdate:modelValue":v[2]||(v[2]=_=>g.value.email=_),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[X,g.value.email]]),n.value.email?(t(),s("span",ud,x(n.value.email),1)):j("",!0)]),e("div",null,[v[7]||(v[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"TÃ©lÃ©phone",-1)),R(e("input",{"onUpdate:modelValue":v[3]||(v[3]=_=>g.value.telephone=_),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[X,g.value.telephone]]),n.value.telephone?(t(),s("span",dd,x(n.value.telephone),1)):j("",!0)]),e("div",null,[v[8]||(v[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:o,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),n.value.photo?(t(),s("span",cd,x(n.value.photo),1)):j("",!0)]),e("div",null,[e("button",{type:"submit",disabled:d.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[d.value?(t(),s("span",vd,v[9]||(v[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),A(" CrÃ©ation en cours... ")]))):(t(),s("span",md,v[10]||(v[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),A(" CrÃ©er le commerÃ§ant ")])))],8,pd)])],32)])])]))}}),fp=ne(fd,[["__scopeId","data-v-98113384"]]),gd={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},bd={class:"container mx-auto max-w-4xl pb-8"},xd={class:"text-md font-semibold text-white flex items-center"},hd={class:"ml-2 text-sm text-white/80"},yd={class:"text-white/90 text-sm mt-2"},_d={key:0,class:"text-white/90 text-sm mt-1"},wd={class:"list-disc list-inside ml-4"},kd=le({__name:"ParrainageInfo",setup(C){const r=ie(),p=pe(),g=b([]),d=async()=>{try{const o=await F.get("/parrainages/niveaux");g.value=o.data.niveaux}catch(o){p.error("Erreur lors de la rÃ©cupÃ©ration des niveaux de parrainage"),console.error(o)}},n=()=>{r.go(-1)};return be(()=>{d()}),(o,i)=>(t(),s("div",gd,[e("div",bd,[i[4]||(i[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),A(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:n,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},i[0]||(i[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),A(" Retour ")])),i[5]||(i[5]=je('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-21e0049a><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-21e0049a>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-21e0049a> Le systÃ¨me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Gagnez <strong data-v-21e0049a>1 jeton</strong> par commerÃ§ant parrainÃ©, plus des <strong data-v-21e0049a>bonus en jetons cumulatifs</strong> en fonction des <strong data-v-21e0049a>niveaux de parrainage</strong> dÃ©bloquÃ©s par le nombre de commerÃ§ants parrainÃ©s. Plus vous parrainez, plus vous montez de niveau et accumulez de jetons ! DÃ©couvrez les dÃ©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-21e0049a><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-21e0049a>Comment Ã§a fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-21e0049a><li data-v-21e0049a><strong data-v-21e0049a>Obtenez votre code unique :</strong> GÃ©nÃ©rez ou crÃ©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-21e0049a><strong data-v-21e0049a>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis Ã  s&#39;inscrire.</li><li data-v-21e0049a><strong data-v-21e0049a>Attirez des commerÃ§ants :</strong> Encouragez vos filleuls Ã  devenir des commerÃ§ants actifs sur la plateforme. Chaque commerÃ§ant parrainÃ© vous rapporte <strong data-v-21e0049a>1 jeton</strong>. Seuls les commerÃ§ants parrainÃ©s comptent pour dÃ©bloquer les niveaux.</li><li data-v-21e0049a><strong data-v-21e0049a>Montez de niveau :</strong> Chaque niveau nÃ©cessite un nombre spÃ©cifique de commerÃ§ants parrainÃ©s. Une fois le seuil atteint, vous dÃ©bloquez un bonus en jetons correspondant Ã  ce niveau, en plus des bonus des niveaux prÃ©cÃ©dents et des jetons individuels par commerÃ§ant.</li><li data-v-21e0049a><strong data-v-21e0049a>Suivez vos progrÃ¨s :</strong> Consultez votre niveau actuel, vos jetons gagnÃ©s (1 par commerÃ§ant + bonus de niveau), et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-21e0049a><strong data-v-21e0049a>Note importante :</strong> Vous gagnez <strong data-v-21e0049a>1 jeton</strong> par commerÃ§ant parrainÃ©, plus des bonus cumulatifs attribuÃ©s en fonction des niveaux atteints. Par exemple, si vous atteignez le niveau 2 avec 5 commerÃ§ants, vous recevez 5 jetons (1 par commerÃ§ant) plus les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),s(B,null,Z(g.value,m=>(t(),s("div",{key:m.id,class:"mb-6 p-4 border rounded-lg",style:$e({backgroundColor:m.couleur||"#f0f0f0"})},[e("h3",xd,[A(x(m.nom)+" "+x(m.emoji)+" ",1),e("span",hd,"("+x(m.filleuls_requis)+" commerÃ§ants requis)",1)]),e("p",yd,[i[1]||(i[1]=e("strong",null,"Bonus en jetons :",-1)),A(" "+x(m.jetons_bonus)+" jetons ",1)]),m.avantages.length?(t(),s("p",_d,[i[2]||(i[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",wd,[(t(!0),s(B,null,Z(m.avantages,l=>(t(),s("li",{key:l},x(l),1))),128))])])):j("",!0),i[3]||(i[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont crÃ©ditÃ©s une fois le niveau atteint et cumulÃ©s avec les niveaux prÃ©cÃ©dents. Vous gagnez Ã©galement 1 jeton par commerÃ§ant parrainÃ©. ",-1))],4))),128))])]))}}),gp=ne(kd,[["__scopeId","data-v-21e0049a"]]),$d={class:"w-full flex relative px-0"},Cd=["onClick"],Ad={class:"flex items-center"},Pd=["onClick"],jd=["src"],Sd={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Md={class:"min-w-0"},Vd={class:"font-semibold text-[var(--espace-vert)] truncate"},Ed={class:"text-xs text-[var(--espace-gris)] truncate"},zd={class:"flex items-center"},Ud={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Ld={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Td={class:"w-full grid grid-rows-[10%_86%]"},Id={class:"flex border-b"},Fd={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},Rd={class:"bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full"},qd={key:0,class:"h-full flex flex-col"},Od={class:"block text-[var(--espace-vert)]"},Nd={class:"text-gray-800"},Dd={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},Wd={key:0,class:"text-center text-[var(--espace-gris)]"},Hd={class:"px-2 md:px-4 pb-8 sm:pb-4 md:pb-0 z-100"},Jd={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},Bd={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},Gd={key:1,class:"flex items-center justify-center h-full"},Kd=le({__name:"Messages",setup(C){const r=()=>{const z=window.location.hostname;return z==="localhost"||z==="127.0.0.1"?"http://localhost:8000/storage/":"https://api.espacecameroun.com/storage/"},p=me(()=>r()),g=ie(),d=Se(),n=ge(),o=pe(),i=Te(),m=b([]),l=b([]),v=b(null),_=b(""),S=b(!0),$=b(0),w=b(!1),a=b(!1),u=b(null),y=b(null),k=b(window.innerWidth<768);let D=null;const N=()=>{Oe(()=>{u.value&&u.value.scrollTo({top:u.value.scrollHeight,behavior:"smooth"})})},E=()=>{y.value=null,localStorage.removeItem("chatProduct")},W=async()=>{var z,c;try{const M=await F.get("/conversations");m.value=M.data.conversations}catch(M){((c=(z=M.response)==null?void 0:z.data)==null?void 0:c.message)==="Unauthenticated."&&g.push("login"),o.error("Erreur lors de la rÃ©cupÃ©ration des conversations"),console.error(M)}},P=async(z,c=!0)=>{var M,V,f,U,ee,ae,re;if(!a.value){a.value=!0;try{c&&($.value=0,l.value=[]),S.value=!1;const te=await F.get(`/chat/${z}?offset=${$.value}`),q=te.data.messages,h=((M=u.value)==null?void 0:M.scrollHeight)||0,se=((V=u.value)==null?void 0:V.scrollTop)||0;l.value=[...q,...l.value],w.value=te.data.hasMore;const T=localStorage.getItem("chatProduct"),ue=m.value.find(Pe=>Pe.user_id===z);let we="",Ce="/default-avatar.png";ue?(we=ue.is_commercant?ue.name:((f=te.data.user)==null?void 0:f.nom)||"",Ce=ue.profile_photo||"/default-avatar.png"):T?(we=JSON.parse(T).commercant_name||((U=te.data.user)==null?void 0:U.nom)||"",Ce=(ue==null?void 0:ue.profile_photo)||"/default-avatar.png"):we=((ee=te.data.user)==null?void 0:ee.nom)||"",v.value={user_id:z,name:we,is_commercant:(ue==null?void 0:ue.is_commercant)||!1,profile_photo:Ce},T&&(y.value=JSON.parse(T)),await J(z),Oe(()=>{if(u.value&&!c){const Pe=u.value.scrollHeight;u.value.scrollTop=se+(Pe-h)}else N()})}catch(te){((re=(ae=te.response)==null?void 0:ae.data)==null?void 0:re.message)==="Unauthenticated."&&g.push("login"),o.error("Erreur lors du chargement des messages"),console.error(te)}finally{a.value=!1}}},oe=z=>{g.push({name:"messages",params:{receiverId:z}}),k.value&&(S.value=!1)},ce=async()=>{var M,V,f,U,ee,ae,re,te,q,h,se,T;if(!_.value.trim()||!v.value){o.error("Veuillez sÃ©lectionner une conversation et Ã©crire un message");return}const z=_.value.trim(),c={id:-Date.now(),sender_id:(M=n.user)==null?void 0:M.id,receiver_id:v.value.user_id,content:z,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((V=y.value)==null?void 0:V.id)||null,sender:{id:((f=n.user)==null?void 0:f.id)??0,nom:((U=n.user)==null?void 0:U.nom)??"",email:((ee=n.user)==null?void 0:ee.email)??"",telephone:((ae=n.user)==null?void 0:ae.telephone)??"",ville:((re=n.user)==null?void 0:re.ville)??"",premium:((te=n.user)==null?void 0:te.premium)??!1,parrain_id:((q=n.user)==null?void 0:q.parrain_id)??0},receiver:{id:v.value.user_id,nom:v.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:y.value||null};l.value.push(c),_.value="",N();try{const ue=await F.post(`/chat/${v.value.user_id}`,{content:z,product_id:(h=y.value)==null?void 0:h.id});y.value&&E()}catch(ue){((T=(se=ue.response)==null?void 0:se.data)==null?void 0:T.message)==="Unauthenticated."&&g.push("login"),o.error("Ã‰chec d'envoi"),console.error(ue),l.value=l.value.filter(we=>we.id!==c.id)}},Q=()=>{!u.value||!w.value||a.value||u.value.scrollTop<=100&&($.value+=30,P(v.value.user_id,!1))},L=()=>{k.value=window.innerWidth<768,S.value=window.innerWidth>=768},J=async z=>{var c,M;try{const V=await F.put("/messages/mark-all-as-read");i.saveUnreadMessagesToLocalStorage(V.data.unread_messages)}catch(V){((M=(c=V.response)==null?void 0:c.data)==null?void 0:M.message)==="Unauthenticated."&&g.push("login"),console.error("Erreur lors du marquage des messages comme lus:",V),o.error("Erreur lors de la mise Ã  jour des messages lus")}},H=()=>{S.value=!S.value},Y=(z,c)=>{const M=c?`/commercants/${z}`:`/users/${z}`;g.push(M)},ve=()=>{var z;if(!((z=n.user)!=null&&z.id)){console.error("Utilisateur non authentifiÃ©");return}D&&(D.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),D=window.Echo.private("chat").listen(".App\\Events\\MessageSent",c=>{var M,V;if(((M=v.value)==null?void 0:M.user_id)===c.message.receiver_id||((V=v.value)==null?void 0:V.user_id)===c.message.sender_id){const f={id:c.message.id,sender_id:c.message.sender_id,receiver_id:c.message.receiver_id,content:c.message.content,created_at:c.message.created_at,updated_at:c.message.updated_at,is_read:c.message.is_read,product_id:c.message.product_id||null,sender:c.message.sender,receiver:c.message.receiver,product:c.message.product||null};l.value.push(f),N(),i.saveUnreadMessagesToLocalStorage(c.unread_messages)}}).error(c=>{}),D.params={channelId:"chat"}};return be(()=>{var z;W(),d.params.receiverId&&P(parseInt(d.params.receiverId)),(z=n.user)!=null&&z.id&&ve(),window.addEventListener("resize",L),xe(()=>u.value,c=>{c&&c.addEventListener("scroll",Q)})}),Ve(()=>{D&&(D.stopListening(".App\\Events\\MessageSent"),window.Echo.leave("private-chat")),window.removeEventListener("resize",L),u.value&&u.value.removeEventListener("scroll",Q)}),xe(()=>d.params.receiverId,async z=>{z&&await P(parseInt(z))}),xe(()=>{var z;return(z=n.user)==null?void 0:z.id},z=>{z&&ve()}),(z,c)=>{var V,f;const M=he("router-link");return t(),s("div",$d,[O(_e,{name:"slide-fade"},{default:K(()=>[S.value||!k.value?(t(),s("div",{key:0,class:G(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",k.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[c[1]||(c[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),s(B,null,Z(m.value,U=>(t(),s("div",{key:U.user_id,onClick:ee=>oe(U.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",Ad,[e("div",{onClick:de(ee=>Y(U.user_id,U.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[U.profile_photo?(t(),s("img",{key:0,src:p.value+U.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,jd)):(t(),s("i",Sd))],8,Pd),e("div",Md,[e("p",Vd,x(U.name),1),e("p",Ed,x(U.last_message),1)])]),e("div",zd,[U.unread_count>0?(t(),s("div",Ud,x(U.unread_count),1)):j("",!0),e("div",Ld,x(new Date(U.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,Cd))),128))],2)):j("",!0)]),_:1}),e("div",Td,[e("div",Id,[!S.value&&k.value&&v.value?(t(),s("button",{key:0,onClick:H,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},c[2]||(c[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):j("",!0),v.value?(t(),s("h2",Fd,x(v.value.name),1)):j("",!0)]),e("div",Rd,[v.value?(t(),s("div",qd,[e("div",{class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 z-50 messages-container",ref_key:"messagesContainer",ref:u},[(t(!0),s(B,null,Z(l.value,U=>{var ee,ae,re,te;return t(),s("div",{key:U.id,class:G(["p-3 rounded-lg break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":U.sender_id===((ee=I(n).user)==null?void 0:ee.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":U.sender_id!==((ae=I(n).user)==null?void 0:ae.id)}])},[e("strong",Od,x((re=U.sender)==null?void 0:re.nom)+" :",1),e("p",Nd,[(te=U.product)!=null&&te.id?(t(),fe(M,{key:0,to:{name:"produit",params:{id:U.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:K(()=>[A(" [Produit "+x(U.product.nom)+"] ",1)]),_:2},1032,["to"])):j("",!0),A(" "+x(U.content),1)]),e("p",Dd,x(new Date(U.created_at).toLocaleTimeString()),1)],2)}),128)),a.value?(t(),s("div",Wd,"Chargement...")):j("",!0)],512),e("div",Hd,[e("div",Jd,[(V=y.value)!=null&&V.id?(t(),s("span",Bd,[A(" Produit "+x((f=y.value)==null?void 0:f.nom)+" ",1),e("button",{onClick:E,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," Ã— ")])):j("",!0),R(e("input",{"onUpdate:modelValue":c[0]||(c[0]=U=>_.value=U),onKeyup:Ze(ce,["enter"]),type:"text",placeholder:"Ã‰crivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w-[200px]"},null,544),[[X,_.value]]),e("button",{onClick:ce,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},c[3]||(c[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),s("div",Gd,c[4]||(c[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"SÃ©lectionnez une conversation pour commencer.",-1)])))])])])}}}),bp=ne(Kd,[["__scopeId","data-v-e04fc4c7"]]),Xd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},Qd={key:0,class:"overflow-y-scroll space-y-4"},Zd={class:"flex justify-between items-center"},Yd={class:"text-lg font-semibold"},ec={class:"text-gray-600"},tc={class:"text-gray-600"},sc={class:"text-gray-600"},oc={class:"text-gray-600"},ac={class:"text-gray-600"},rc={key:0,class:"text-gray-600"},lc={class:"text-right"},nc=["onClick"],ic={key:1,class:"text-gray-500"},uc={class:"mt-6 flex gap-4"},dc={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},cc=le({__name:"JetonHistory",setup(C){const r=ie(),g=ge().user,d=b([]),n=b(!1),o=pe(),i=async()=>{try{const v=await F.get(`/jeton-transactions/${g==null?void 0:g.id}`);d.value=v.data}catch(v){console.error("Erreur lors du chargement des transactions:",v)}},m=v=>new Date(v).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=async v=>{var _,S,$,w;if(confirm(`Refaire l'achat de ${v.nombre_jetons} jetons avec le mÃªme service (${v.methode_paiement}) ?`)){n.value=!0;try{const a=await F.post("/acheter-jetons",{nombre_jetons:v.nombre_jetons,payment_service:v.methode_paiement,phone_number:v.phone_number});o.success(a.data.message),i()}catch(a){((S=(_=a.response)==null?void 0:_.data)==null?void 0:S.message)=="Unauthenticated."&&r.push("login"),o.error(((w=($=a.response)==null?void 0:$.data)==null?void 0:w.message)||"Erreur lors de l'achat."),console.error(a)}finally{n.value=!1}}};return be(()=>{g&&i()}),(v,_)=>{const S=he("router-link");return t(),s("div",Xd,[_[4]||(_[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),d.value.length>0?(t(),s("div",Qd,[(t(!0),s(B,null,Z(d.value,$=>(t(),s("div",{key:$.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",Zd,[e("div",null,[e("p",Yd,"Achat de "+x($.nombre_jetons)+" jetons",1),e("p",ec,"Montant: "+x($.montant)+" FCFA",1),e("p",tc,"MÃ©thode: "+x($.methode_paiement),1),e("p",sc,"NumÃ©ro: "+x($.phone_number),1),e("p",oc,"Statut: "+x($.statut),1),e("p",ac,"Date: "+x(m($.date_transaction)),1),$.transaction_id_mesomb?(t(),s("p",rc," ID Transaction: "+x($.transaction_id_mesomb),1)):j("",!0)]),e("div",lc,[e("button",{onClick:w=>l($),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},_[0]||(_[0]=[e("i",{class:"fas fa-redo"},null,-1),A(" Refaire ")]),8,nc)])])]))),128))])):(t(),s("p",ic,"Aucune transaction trouvÃ©e.")),e("div",uc,[O(S,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:K(()=>_[1]||(_[1]=[A(" Acheter des Jetons ")])),_:1,__:[1]}),O(S,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:K(()=>_[2]||(_[2]=[A(" Booster un Produit ")])),_:1,__:[2]})]),n.value?(t(),s("div",dc,_[3]||(_[3]=[je('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-5312e1a5><p class="text-lg text-[var(--espace-vert)]" data-v-5312e1a5>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-5312e1a5><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-5312e1a5></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-5312e1a5></path></svg></div>',1)]))):j("",!0)])}}}),xp=ne(cc,[["__scopeId","data-v-5312e1a5"]]),pc={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},vc={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},mc={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},fc={class:"relative"},gc=["src"],bc={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},xc={class:"flex-1"},hc={class:"text-gray-600"},yc={key:0,class:"text-sm text-gray-500"},_c={class:"text-gray-600"},wc={class:"text-gray-600"},kc=le({__name:"ProfilePublic",setup(C){const r=Se(),p=ie(),g=pe(),d=b(null),n=async()=>{var i,m;try{const l=await F.get(`/profile/public/${r.params.id}`);d.value=l.data}catch(l){((m=(i=l.response)==null?void 0:i.data)==null?void 0:m.message)=="Unauthenticated."&&p.push("login"),g.error("Erreur lors de la rÃ©cupÃ©ration du profil."),console.error(l)}},o=()=>{var i;(i=d.value)!=null&&i.id?p.push({name:"messages",params:{receiverId:d.value.id}}):g.error("Impossible d'accÃ©der au chat. Profil invalide.")};return be(()=>{n()}),(i,m)=>{var l,v,_,S,$,w,a,u,y,k,D,N,E,W,P,oe,ce,Q,L,J,H,Y;return t(),s("div",pc,[e("div",vc,[e("div",mc,[e("div",fc,[(l=d.value)!=null&&l.photo?(t(),s("img",{key:0,src:`http://localhost:8000/storage/${(v=d.value)==null?void 0:v.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,gc)):(t(),s("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:$e({background:`${((w=($=(S=(_=d.value)==null?void 0:_.niveaux_users)==null?void 0:S.at(-1))==null?void 0:$.parrainage_niveau)==null?void 0:w.couleur)||"#0af"}`})},m[0]||(m[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(a=d.value)!=null&&a.premium?(t(),s("i",bc)):j("",!0)]),e("div",xc,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:$e({color:`${((D=(k=(y=(u=d.value)==null?void 0:u.niveaux_users)==null?void 0:y.at(-1))==null?void 0:k.parrainage_niveau)==null?void 0:D.couleur)||"#0af"}`})},[A(x((N=d.value)==null?void 0:N.nom)+" ",1),(E=d.value)!=null&&E.premium?(t(),s("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:$e({background:`${((ce=(oe=(P=(W=d.value)==null?void 0:W.niveaux_users)==null?void 0:P.at(-1))==null?void 0:oe.parrainage_niveau)==null?void 0:ce.couleur)||"#0af"}`})}," Premium ",4)):j("",!0)],4),e("p",hc,"Statut : "+x((Q=d.value)!=null&&Q.commercant?"CommerÃ§ant":"Utilisateur"),1),(L=d.value)!=null&&L.subscription_ends_at?(t(),s("p",yc," Abonnement Premium jusqu'au "+x(new Date((J=d.value)==null?void 0:J.subscription_ends_at).toLocaleDateString()),1)):j("",!0),e("p",_c,"Ville : "+x((H=d.value)==null?void 0:H.ville),1),e("p",wc,"TÃ©lÃ©phone : "+x((Y=d.value)==null?void 0:Y.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:o,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},m[1]||(m[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),A(" Discuter ")]))])]),m[2]||(m[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),hp=ne(kc,[["__scopeId","data-v-e1d303b7"]]),$c={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},Cc={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Ac={class:"space-y-4"},Pc={class:"text-gray-700"},jc={class:"text-gray-700"},Sc={class:"text-gray-700"},Mc={class:"text-gray-700"},Vc={class:"text-gray-700"},Ec={class:"bg-white p-6 rounded-lg shadow-md mb-6"},zc=["disabled"],Uc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Lc={key:0,class:"mt-4 text-green-600 text-center"},Tc=le({__name:"Doc",setup(C){ie();const r=b(!1),p=b(!1),g=b({name:"",email:"",message:""}),d=async()=>{r.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g.value)})).ok)p.value=!0,g.value={name:"",email:"",message:""},setTimeout(()=>{p.value=!1},5e3);else throw new Error("Ã‰chec de lâ€™envoi")}catch(n){console.error("Erreur lors de la soumission:",n)}finally{r.value=!1}};return(n,o)=>{const i=he("router-link");return t(),s("div",$c,[o[33]||(o[33]=je('<div class="text-center mb-8" data-v-e1156810><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-e1156810>ğŸ“˜ Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-e1156810>Votre espace pour faciliter le commerce au Cameroun</p><p class="text-lg font-semibold text-[var(--espace-or)] mt-1" data-v-e1156810>Commerce facile, opportunitÃ©s infinies.</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-e1156810><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-e1156810>Ã€ Propos dâ€™Espace Cameroun</h2><p class="text-gray-700" data-v-e1156810> Espace Cameroun est une plateforme de marketplace conÃ§ue pour connecter commerÃ§ants, acheteurs et revendeurs. Son objectif principal est de crÃ©er un espace numÃ©rique oÃ¹ les transactions commerciales peuvent se dÃ©rouler facilement et en toute sÃ©curitÃ©. Notre mission est de faciliter lâ€™activitÃ© commerciale au Cameroun en offrant des outils simples et accessibles Ã  tous. </p></section>',2)),e("section",Cc,[o[27]||(o[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"FonctionnalitÃ©s ClÃ©s",-1)),e("div",Ac,[e("div",null,[o[6]||(o[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",Pc,[o[4]||(o[4]=A(" Communiquez directement avec vos partenaires commerciaux pour nÃ©gocier ou confirmer des transactions via la section ")),O(i,{to:"/messages",class:"text-blue-500 underline"},{default:K(()=>o[3]||(o[3]=[A("Chat")])),_:1,__:[3]}),o[5]||(o[5]=A(". "))])]),o[23]||(o[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," CrÃ©ez et gÃ©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute sÃ©curitÃ©. ")],-1)),e("div",null,[o[10]||(o[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",jc,[o[8]||(o[8]=A(" Participez au marchÃ© des jetons via ")),O(i,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:K(()=>o[7]||(o[7]=[A("MarchÃ© des Jetons")])),_:1,__:[7]}),o[9]||(o[9]=A(" pour vendre vos jetons ou en acheter, gÃ©nÃ©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[o[14]||(o[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Sc,[o[12]||(o[12]=A(" Devenez commerÃ§ant en crÃ©ant un compte via ")),O(i,{to:"/profil",class:"text-blue-500 underline"},{default:K(()=>o[11]||(o[11]=[A("Profil")])),_:1,__:[11]}),o[13]||(o[13]=A(", puis publiez vos produits (ex. tÃ©lÃ©phones, vÃªtements) ou services (ex. rÃ©parations, cours) en remplissant les dÃ©tails (nom, prix, description, photos), sÃ©lectionnant un portefeuille, et soumettant votre annonce. "))])]),o[24]||(o[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagnÃ©s pour booster vos produits ou services, augmentant leur visibilitÃ© auprÃ¨s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[o[18]||(o[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Mc,[o[16]||(o[16]=A(" Travaillez avec dâ€™autres commerÃ§ants pour proposer des produits ou services en collaboration via ")),O(i,{to:"/collaborations",class:"text-blue-500 underline"},{default:K(()=>o[15]||(o[15]=[A("Collaborations")])),_:1,__:[15]}),o[17]||(o[17]=A(". "))])]),e("div",null,[o[22]||(o[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"SystÃ¨me de Parrainage",-1)),e("p",Vc,[o[20]||(o[20]=A(" Invitez dâ€™autres utilisateurs Ã  crÃ©er un compte commerÃ§ant via ")),O(i,{to:"/parrainage",class:"text-blue-500 underline"},{default:K(()=>o[19]||(o[19]=[A("Ã‰quipe")])),_:1,__:[19]}),o[21]||(o[21]=A(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commerÃ§ants parrainÃ©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les Ã©changer sur le marchÃ© des jetons. "))])]),o[25]||(o[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez Ã  un abonnement premium pour accÃ©der Ã  des privilÃ¨ges exclusifs, comme une visibilitÃ© accrue, des fonctionnalitÃ©s avancÃ©es, et des avantages spÃ©ciaux (dÃ©tails Ã  venir). ")],-1)),o[26]||(o[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," DÃ©couvrez dâ€™autres fonctionnalitÃ©s au fil de votre utilisation pour optimiser votre expÃ©rience commerciale. ")],-1))])]),e("section",Ec,[o[31]||(o[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),o[32]||(o[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester Ã  lâ€™Ã©coute pour les mises Ã  jour et les nouvelles fonctionnalitÃ©s Ã  venir. ",-1)),e("form",{onSubmit:de(d,["prevent"]),class:"space-y-4"},[e("div",null,[o[28]||(o[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":o[0]||(o[0]=m=>g.value.name=m),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[X,g.value.name]])]),e("div",null,[o[29]||(o[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":o[1]||(o[1]=m=>g.value.email=m),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[X,g.value.email]])]),e("div",null,[o[30]||(o[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),R(e("textarea",{id:"message",name:"message","onUpdate:modelValue":o[2]||(o[2]=m=>g.value.message=m),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[X,g.value.message]])]),e("button",{type:"submit",disabled:r.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":r.value}])},[r.value?(t(),s("span",Uc)):j("",!0),e("span",null,x(r.value?"Envoi...":"Envoyer"),1)],10,zc)],32),p.value?(t(),s("p",Lc,"Merci ! Votre message a Ã©tÃ© envoyÃ© avec succÃ¨s. ")):j("",!0)]),o[34]||(o[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines Ã‰tapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour amÃ©liorer Espace Cameroun. Restez connectÃ©s pour dÃ©couvrir de nouvelles fonctionnalitÃ©s et opportunitÃ©s commerciales dans un avenir proche. ")],-1))])}}}),yp=ne(Tc,[["__scopeId","data-v-e1156810"]]),Ic={class:"overflow-y-scroll bg-gray-50 flex flex-col"},Fc={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},Rc={class:"flex items-center mb-4"},qc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},Oc={class:"ml-4 text-lg font-semibold text-gray-800"},Nc={key:0,class:"text-gray-700 mb-2 leading-relaxed"},Dc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},Wc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},Hc=["disabled"],Jc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Bc={key:0,class:"mt-4 text-green-600 text-center"},Gc=le({__name:"Politique",setup(C){new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});const r=b([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons Ã  protÃ©ger vos informations personnelles et Ã  respecter votre vie privÃ©e."},{id:"collecte",title:"DonnÃ©es collectÃ©es",icon:"fas fa-database",list:["Nom, email, tÃ©lÃ©phone","Produits publiÃ©s","Messages Ã©changÃ©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donnÃ©es",icon:"fas fa-cogs",list:["Gestion des comptes","AmÃ©lioration du service","SÃ©curitÃ© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donnÃ©es. Elles ne sont partagÃ©es quâ€™avec nos prestataires ou si la loi lâ€™exige."},{id:"securite",title:"SÃ©curitÃ©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des accÃ¨s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["AccÃ¨s et rectification","Suppression du compte","Opposition et portabilitÃ©"]}]),p=b(!1),g=b(!1),d=b({name:"",email:"",message:""}),n=async()=>{p.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d.value)})).ok)g.value=!0,d.value={name:"",email:"",message:""},setTimeout(()=>{g.value=!1},5e3);else throw new Error("Ã‰chec de lâ€™envoi")}catch(o){console.error("Erreur envoi :",o)}finally{p.value=!1}};return(o,i)=>(t(),s("div",Ic,[i[8]||(i[8]=je('<section class="bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white pt-6 pb-8 shadow-lg" data-v-0622a650><div class="max-w-4xl mx-auto text-center px-6" data-v-0622a650><h1 class="text-4xl sm:text-5xl font-bold mb-4" data-v-0622a650>Politique de ConfidentialitÃ©</h1><p class="text-lg text-green-100 max-w-2xl mx-auto" data-v-0622a650> DÃ©couvrez comment <strong data-v-0622a650>Espace Cameroun</strong> protÃ¨ge vos donnÃ©es et respecte votre vie privÃ©e. </p><p class="text-lg font-semibold text-[var(--espace-or)] mt-2" data-v-0622a650>Commerce facile, opportunitÃ©s infinies. </p></div></section>',1)),e("section",Fc,[O(De,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:K(()=>[(t(!0),s(B,null,Z(r.value,m=>(t(),s("div",{key:m.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",Rc,[e("div",qc,[e("i",{class:G([m.icon,"text-xl"])},null,2)]),e("h2",Oc,x(m.title),1)]),m.text?(t(),s("p",Nc,x(m.text),1)):j("",!0),m.list?(t(),s("ul",Dc,[(t(!0),s(B,null,Z(m.list,l=>(t(),s("li",{key:l},x(l),1))),128))])):j("",!0)]))),128))]),_:1})]),e("section",Wc,[i[6]||(i[6]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," ğŸ’Œ Une question sur vos donnÃ©es ? ",-1)),i[7]||(i[7]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous rÃ©pondrons dans les plus brefs dÃ©lais. ",-1)),e("form",{onSubmit:de(n,["prevent"]),class:"space-y-4"},[e("div",null,[i[3]||(i[3]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),R(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":i[0]||(i[0]=m=>d.value.name=m),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[X,d.value.name]])]),e("div",null,[i[4]||(i[4]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),R(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":i[1]||(i[1]=m=>d.value.email=m),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[X,d.value.email]])]),e("div",null,[i[5]||(i[5]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),R(e("textarea",{id:"message",name:"message","onUpdate:modelValue":i[2]||(i[2]=m=>d.value.message=m),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[X,d.value.message]])]),e("button",{type:"submit",disabled:p.value,class:G(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":p.value}])},[p.value?(t(),s("span",Jc)):j("",!0),e("span",null,x(p.value?"Envoi...":"Envoyer"),1)],10,Hc)],32),g.value?(t(),s("p",Bc," âœ… Merci ! Votre message a Ã©tÃ© envoyÃ© avec succÃ¨s. ")):j("",!0)])]))}}),_p=ne(Gc,[["__scopeId","data-v-0622a650"]]),Kc={class:"flex items-center justify-center h-screen"},Xc=le({__name:"GoogleCallback",setup(C){const r=ie(),p=pe(),g=ge();return be(async()=>{try{const d=new URLSearchParams(window.location.search),n=d.get("token"),o=d.get("user"),i=d.get("error");if(i)throw new Error(decodeURIComponent(i));if(!n||!o)throw new Error("Token ou donnÃ©es utilisateur manquants");g.token=n,g.user=JSON.parse(decodeURIComponent(o)),localStorage.setItem("token",n),F.defaults.headers.common.Authorization=`Bearer ${n}`,p.success("Bienvenue sur Espace Cameroun !"),r.push({name:"home"})}catch(d){p.error(d.message||"Erreur lors de la connexion avec Google"),console.error(d),r.push("/login")}}),(d,n)=>(t(),s("div",Kc,n[0]||(n[0]=[e("div",{class:"text-center"},[e("i",{class:"fas fa-spinner fa-spin text-3xl text-[var(--espace-vert)]"}),e("p",{class:"mt-4 text-[var(--espace-gris)]"},"Redirection en cours...")],-1)])))}}),Qc=ne(Xc,[["__scopeId","data-v-70486c5b"]]),wp=Object.freeze(Object.defineProperty({__proto__:null,default:Qc},Symbol.toStringTag,{value:"Module"}));export{_o as A,ap as C,yp as D,sp as F,wp as G,tp as H,xp as J,op as L,bp as M,lp as P,rp as R,ip as a,mp as b,fp as c,dp as d,np as e,cp as f,gp as g,up as h,pp as i,hp as j,vp as k,_p as l,F as m};
