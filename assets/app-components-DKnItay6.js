import{r as v,u as ue,d as re,a as me,w as ge,o as fe,b as ve,c as o,e as $,f as I,g as t,h as e,i as U,j as G,k as h,t as c,l as ce,m as Ae,n as Pe,p as pe,F as W,q as Y,s as J,T as be,v as ie,x as ye,y as O,z as Q,A as _e,B as Be,C as Se,D as He,E as Ye,G as Ue,H as Ge,I as Xe}from"./vue-DmT2Hbhs.js";import{d as Oe}from"./pinia-CmXqGNiS.js";import{a as Te}from"./axios-Dq7h7Pqt.js";const Ke="/assets/logoOrangeweb-C9Cko1mf.webp",et=()=>{const F=window.location.hostname;return F==="localhost"||F==="127.0.0.1"?"http://localhost:8000/api/v1":"https://espacecameroun.devfack.com/api/v1"};Te.defaults.withCredentials=!0;Te.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Te.defaults.withXSRFToken=!0;const R=Te.create({withCredentials:!0,baseURL:et(),headers:{Accept:"application/json","Content-Type":"application/json"}}),xe=Oe("auth",{state:()=>({user:null,token:localStorage.getItem("token")||null}),actions:{async login(F){const l=await R.post("/login",F);this.user=l.data.user,this.token=l.data.token,localStorage.setItem("token",this.token??""),R.defaults.headers.common.Authorization=`Bearer ${this.token}`},async register(F){const l=await R.post("/register",F);this.user=l.data.user,this.token=l.data.token,localStorage.setItem("token",this.token??""),R.defaults.headers.common.Authorization=`Bearer ${this.token}`},async checkAuth(){if(!this.token)return!1;try{R.defaults.headers.common.Authorization=`Bearer ${this.token}`;const F=await R.get("/user");return this.user=F.data.user,!0}catch{return this.user=null,this.token=null,localStorage.removeItem("token"),!1}},async logout(){try{this.token&&await R.post("/logout")}catch{}this.user=null,this.token=null,localStorage.removeItem("token"),delete R.defaults.headers.common.Authorization}}}),Fe=Oe("userState",()=>{const F=v(0),l=v(0),_=ue(),f=()=>{const a=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");F.value=a.length;const m=localStorage.getItem("unread_messages");l.value=m?parseInt(m,10):0},r=a=>{localStorage.setItem("pending_collaborations",JSON.stringify(a)),F.value=a.length},i=a=>{localStorage.setItem("unread_messages",a.toString()),l.value=a},s=async a=>{var V;const m=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");m.push({produit_id:a.produit_id,prix_revente:a.prix_revente,status:"pending",created_at:new Date().toISOString()}),r(m);try{return await R.post("/collaborations",{produit_id:a.produit_id,prix_revente:a.prix_revente}),await x(),_.success("Demande de collaboration envoy√©e !"),!0}catch(k){const b=m.filter(n=>!(n.produit_id===a.produit_id&&n.prix_revente===a.prix_revente));return r(b),_.error(((V=k.response)==null?void 0:V.data.message)||"Erreur lors de la demande de collaboration"),!1}},x=async()=>{try{const a=await R.get("/user/badges");F.value=a.data.collaborations_pending,i(a.data.unread_messages||0)}catch(a){console.error("Erreur lors de la synchronisation des badges:",a)}};return{collaborationsPending:F,unreadMessages:l,initializeState:f,addCollaboration:s,syncCollaborationsWithBackend:x,clearState:()=>{localStorage.removeItem("pending_collaborations"),localStorage.removeItem("unread_messages"),F.value=0,l.value=0},saveCollaborationsToLocalStorage:r,saveUnreadMessagesToLocalStorage:i}}),Me=Oe("product",{state:()=>({product:{},products:[],isLoading:!1,hasMore:!0,page:1,sort:"random",userId:null,relatedProperties:[]}),getters:{user:F=>xe().user},actions:{async fetchProducts(F={},l=!1){var _,f;if(!(this.isLoading||!l&&!this.hasMore)){this.isLoading=!0,l&&(this.products=[],this.page=1,this.hasMore=!0);try{const r=await R.get("/produits",{params:{...F,page:this.page,sort:this.sort}});if(console.log(r.data),F.per_page==="all")this.products=l?r.data:[...this.products,...r.data];else{const i=r.data.data;this.products=l?i:[...this.products,...i],this.hasMore=r.data.current_page<r.data.last_page,this.page=r.data.current_page+1}}catch(r){throw((f=(_=r.response)==null?void 0:_.data)==null?void 0:f.message)||"Erreur lors du chargement des produits"}finally{this.isLoading=!1}}},async toggleFavorite(F){const l=xe();if(!l.user&&(await l.checkAuth(),!l.user)){console.warn("Utilisateur non connect√©, redirection ou action n√©cessaire");return}const _=this.products.find(r=>r.id===F);let f=!1;_&&(_.is_favorited_by=!_.is_favorited_by,_.counts.favorites_count=_.is_favorited_by?_.counts.favorites_count+1:_.counts.favorites_count-1,f=!0),this.product&&this.product.id===F&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count+1:this.product.counts.favorites_count-1,f=!0);try{const r=await R.post(`/produits/${F}/favorite`),i=r.data.produit;if(f){const s=this.products.findIndex(x=>x.id===F);s!==-1&&(this.products[s]={...this.products[s],...i}),this.product&&this.product.id===F&&(this.product={...this.product,...i})}return r.data.message}catch(r){if(console.log(r),f){const i=this.products.find(s=>s.id===F);i&&(i.is_favorited_by=!i.is_favorited_by,i.counts.favorites_count=i.is_favorited_by?i.counts.favorites_count-1:i.counts.favorites_count+1),this.product&&this.product.id===F&&(this.product.is_favorited_by=!this.product.is_favorited_by,this.product.counts.favorites_count=this.product.is_favorited_by?this.product.counts.favorites_count-1:this.product.counts.favorites_count+1)}}},async viewProduct(F){var l,_;try{const f=await R.get(`/produits/${F}`);this.product=f.data.produit;const r=this.products.findIndex(i=>i.id===F);r!==-1?this.products[r]={...this.products[r],...this.product}:this.products.push(this.product)}catch(f){throw((_=(l=f.response)==null?void 0:l.data)==null?void 0:_.message)||"Erreur lors du chargement du produit"}},setSort(F){this.sort=F,this.page=1,this.products=[],this.hasMore=!0,this.fetchProducts({},!0)},setUserId(F){this.userId=F}}}),tt={key:0,class:"fixed top-16 right-4 z-50 flex items-center gap-2 rounded-full px-4 py-2"},st={class:"text-sm font-semibold text-[var(--espace-vert)]"},ot={class:"text-gray-800"},at=re({__name:"SoldeUser",setup(F){me();const l=xe(),_=v(0),f=async()=>{if(l.user)try{_.value=l.user.jetons}catch(r){console.error("Erreur lors de la r√©cup√©ration des jetons:",r)}};return ge(()=>l.user,()=>{f()}),fe(()=>{f()}),(r,i)=>{const s=ve("router-link");return I(l).user?(t(),o("div",tt,[i[1]||(i[1]=e("i",{class:"fas fa-coins text-[var(--espace-or)] text-lg"},null,-1)),e("span",st,[U(s,{to:"/jeton-history"},{default:G(()=>[i[0]||(i[0]=h(" Jetons : ")),e("span",ot,c(_.value),1)]),_:1,__:[0]})])])):$("",!0)}}}),le=(F,l)=>{const _=F.__vccOpts||F;for(const[f,r]of l)_[f]=r;return _},Qe=le(at,[["__scopeId","data-v-a9413d7d"]]),rt={class:"relative bg-[var(--espace-vert)] w-full h-full"},lt={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] top-0 left-0 z-50 shadow-md h-full"},nt={class:"px-2 w-full sm:px-3 py-2 flex justify-between items-center gap-4 mb-4"},it={class:"flex items-center gap-1 sm:gap-3"},ut={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},dt=["aria-label"],ct={class:"flex items-center gap-2"},pt=["src"],vt={key:1,class:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-[var(--espace-gris)]"},mt={class:"fixed bottom-33 right-6 z-50 bg-blue-300 w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-400 active:scale-95 transition-all shadow-lg"},ft=re({__name:"HeaderBar",setup(F){const l=()=>{const d=window.location.hostname;return d==="localhost"||d==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},_=ce(()=>l()),f=xe(),r=Fe();me();const i=ce(()=>f.user);Ae();const s=v(!1),x=v(!1);v(""),Me();const p=v(!1),a=v(null),m=v(!1),V=ce(()=>[...i.value?[{to:"/",label:"Accueil",icon:"fa-home",badge:0},{to:"/messages",label:"Chat",icon:"fa-comment-dots",badge:r.unreadMessages},...i.value.commercant?[{to:"/commercant/produits",label:"Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:r.collaborationsPending},{to:"/parrainage",label:"equipe",icon:"fa-users",badge:0},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),k=async()=>{if(i.value)try{await r.syncCollaborationsWithBackend()}catch(d){console.error("Erreur lors du chargement des badges:",d)}},b=async()=>{if(!i.value&&f.token)try{await f.checkAuth()}catch(d){console.error("Erreur lors de la r√©cup√©ration de l'utilisateur:",d),f.logout()}i.value&&await k()};ge(()=>r.collaborationsPending,d=>{d>-1&&(s.value=!0,setTimeout(()=>s.value=!1,300))}),ge(()=>r.unreadMessages,d=>{d>-1&&(x.value=!0,setTimeout(()=>x.value=!1,300))});const n=d=>{if(m.value){m.value=!1;return}a.value&&!a.value.contains(d.target)&&(p.value=!1)};return fe(async()=>{var d;await b(),document.addEventListener("click",n),(d=f.user)!=null&&d.id&&window.Echo.channel(`chat.${f.user.id}`).listen("MessageSent",g=>{var S;((S=f.user)==null?void 0:S.id)===g.receiver_id&&r.saveUnreadMessagesToLocalStorage(g.unread_messages)})}),Pe(()=>{var d;document.removeEventListener("click",n),(d=f.user)!=null&&d.id&&window.Echo.leave(`chat.${f.user.id}`)}),(d,g)=>{const S=ve("RouterLink"),j=ve("router-link");return t(),o("div",rt,[e("header",lt,[e("div",nt,[e("div",it,[U(S,{to:"/","aria-label":"Retour √† l'accueil"},{default:G(()=>g[0]||(g[0]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ke,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[0]}),g[1]||(g[1]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"}," Espace Cameroun ",-1))]),e("nav",ut,[(t(!0),o(W,null,Y(V.value,M=>(t(),pe(S,{key:M.to,to:M.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:G(()=>[e("i",{class:J(["fas",M.icon])},null,2),h(" "+c(M.label)+" ",1),M!=null&&M.badge&&M.badge>-1?(t(),o("span",{key:0,class:J(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":M.to==="/collaborations"&&s.value||M.to==="/messages"&&x.value}]),"aria-label":M.to==="/collaborations"?"Collaborations en attente":M.to==="/messages"?"Messages non lus":""},c(M.badge),11,dt)):$("",!0)]),_:2},1032,["to"]))),128))]),U(Qe),e("div",ct,[i.value?(t(),pe(S,{key:0,to:"/messages",class:"relative flex items-center justify-center","aria-label":"Messages"},{default:G(()=>[g[2]||(g[2]=e("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},[e("i",{class:"fas fa-comment-dots text-2xl text-white"})],-1)),I(r).unreadMessages>-1?(t(),o("span",{key:0,class:J(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":x.value}]),"aria-label":"Messages non lus"},c(I(r).unreadMessages),3)):$("",!0)]),_:1,__:[2]})):$("",!0),i.value?(t(),pe(S,{key:1,to:"/profil",class:"relative flex items-center justify-center","aria-label":"Profil"},{default:G(()=>{var M;return[(M=i.value)!=null&&M.photo?(t(),o("img",{key:0,src:_.value+i.value.photo,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,pt)):(t(),o("div",vt,g[3]||(g[3]=[e("i",{class:"fas fa-user-circle text-2xl text-gray-500"},null,-1)])))]}),_:1})):$("",!0)]),i.value?(t(),pe(j,{key:0,to:"/jetonMarket","aria-label":"Aller au march√©",class:"fixed bottom-17 z-10 right-5 w-12 h-12 rounded-full flex items-center justify-center bg-[var(--espace-vert)] text-yellow-300 shadow-lg hover:scale-110 active:scale-95 transition-all ring-2 ring-yellow-400/60"},{default:G(()=>g[4]||(g[4]=[e("i",{class:"fas fa-coins text-xl"},null,-1)])),_:1,__:[4]})):$("",!0),e("div",mt,[U(j,{to:"/doc",class:"text-[var(--espace-vert)] text-3xl hover:text-[var(--espace-or)] transition-transform transform hover:scale-110"},{default:G(()=>g[5]||(g[5]=[h(" ? ")])),_:1,__:[5]})])])])])}}}),fc=le(ft,[["__scopeId","data-v-4292dde3"]]),gt={class:"relative"},xt={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},bt={class:"flex justify-around items-center py-2"},ht=["aria-label"],yt=re({__name:"FooterBar",setup(F){const l=xe(),_=Fe();me();const f=v(!1),r=v(!1),i=ce(()=>[...l.user?[{to:"/",label:"Accueil",icon:"fa-home"},...l.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:_.collaborationsPending}]:[],{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users"},{to:"/parametres",label:"Parametres",icon:"fa-cog"}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt"},{to:"/register",label:"Inscription",icon:"fa-user-plus"}]]);return ge(()=>_.collaborationsPending,s=>{s>0&&(f.value=!0,setTimeout(()=>f.value=!1,300))}),ge(()=>_.unreadMessages,s=>{s>0&&(r.value=!0,setTimeout(()=>r.value=!1,300))}),(s,x)=>{const p=ve("RouterLink");return t(),o("div",gt,[U(be,{name:"slide-up"},{default:G(()=>[e("nav",xt,[e("div",bt,[(t(!0),o(W,null,Y(i.value,a=>(t(),pe(p,{key:a.to,to:a.to,"aria-label":a.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:G(()=>[e("i",{class:J(["fas text-lg",a.icon])},null,2),a!=null&&a.badge&&a.badge>-1?(t(),o("span",{key:0,class:J(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":a.to==="/collaborations"&&f.value||a.to==="/messages"&&r.value}]),"aria-label":a.to==="/collaborations"?"Collaborations en attente":a.to==="/messages"?"Messages non lus":""},c(a.badge),11,ht)):$("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),gc=le(yt,[["__scopeId","data-v-8779b672"]]),_t={class:"mb-4"},wt={class:"block text-sm sm:text-base font-medium mb-1 text-[var(--espace-gris)]"},kt={class:"relative"},$t={class:"absolute inset-y-0 left-3 flex items-center text-[var(--espace-or)]"},Ct=["type","value","required","placeholder"],At={key:0,class:"text-red-500 text-sm mt-1"},he=re({__name:"Form",props:{label:String,icon:String,type:{type:String,default:"text"},modelValue:[String,Number],required:Boolean,placeholder:String,error:String},emits:["update:modelValue"],setup(F){return(l,_)=>(t(),o("div",_t,[e("label",wt,c(F.label),1),e("div",kt,[e("span",$t,[e("i",{class:J(`fas ${F.icon}`)},null,2)]),e("input",{type:F.type,value:F.modelValue,onInput:_[0]||(_[0]=f=>l.$emit("update:modelValue",f.target.value)),required:F.required,placeholder:F.placeholder,class:J(["w-full pl-10 pr-4 py-3 rounded-xl border text-sm sm:text-base transition","focus:outline-none focus:ring-2",F.error?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-[var(--espace-or)]"])},null,42,Ct)]),F.error?(t(),o("p",At,c(F.error),1)):$("",!0)]))}}),Pt={class:"overflow-y-scroll flex items-center justify-center px-4 py-4"},jt={class:"w-full max-w-lg bg-gray-30 rounded-2xl shadow-xl p-6 sm:p-10"},St=["disabled"],Mt={key:0,class:"fas fa-spinner fa-spin mr-2"},Vt={key:1,class:"fas fa-sign-in-alt mr-2"},Et={class:"text-center text-sm text-gray-600 mt-6"},zt=re({__name:"Login",setup(F){const l=v({login:"",mot_de_passe:""}),_=v({}),f=me(),r=ue(),i=xe(),s=v(!1),x=async()=>{var p;try{s.value=!0,await i.login({login:l.value.login,mot_de_passe:l.value.mot_de_passe}),r.success("Connexion r√©ussie !"),f.push({name:"home"})}catch(a){console.error("Erreur lors de la connexion:",a);const m=a.message||"Erreur lors de la connexion. Veuillez v√©rifier vos informations.";r.error(m),((p=a.response)==null?void 0:p.status)===422&&(_.value=a.response.data.errors||{})}finally{s.value=!1}};return(p,a)=>{const m=ve("router-link");return t(),o("div",Pt,[e("div",jt,[a[4]||(a[4]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-sign-in-alt mr-2 text-[var(--espace-or)]"}),h(" Connexion ")],-1)),a[5]||(a[5]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[h(" Connectez-vous √† "),e("strong",null,"Espace Cameroun"),h(" pour acc√©der √† vos achats et votre espace commer√ßant. ")],-1)),e("form",{onSubmit:ie(x,["prevent"]),class:"space-y-5"},[U(he,{label:"Email ou T√©l√©phone",icon:"fa-envelope",modelValue:l.value.login,"onUpdate:modelValue":a[0]||(a[0]=V=>l.value.login=V),type:"text",required:"",error:_.value.login},null,8,["modelValue","error"]),U(he,{label:"Mot de passe",icon:"fa-lock",modelValue:l.value.mot_de_passe,"onUpdate:modelValue":a[1]||(a[1]=V=>l.value.mot_de_passe=V),type:"password",required:"",error:_.value.mot_de_passe},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:s.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[s.value?(t(),o("i",Mt)):(t(),o("i",Vt)),e("span",null,c(s.value?"Connexion...":"Se connecter"),1)],8,St)],32),e("p",Et,[a[3]||(a[3]=h(" Pas de compte ? ")),U(m,{to:"/register",class:"text-[var(--espace-vert)] font-medium hover:text-[var(--espace-or)] hover:underline"},{default:G(()=>a[2]||(a[2]=[h(" Inscrivez-vous ici ")])),_:1,__:[2]})])])])}}}),xc=le(zt,[["__scopeId","data-v-cc090487"]]),It="/assets/logo-ba4eAQQi.png",Ft={key:0,class:"fixed inset-0 bg-[var(--espace-white)] bg-opacity-50 flex items-center justify-center z-50","aria-label":"Chargement en cours",role:"status"},Tt=re({__name:"Loader",props:{isLoading:{type:Boolean}},setup(F){return(l,_)=>(t(),pe(be,{name:"fade"},{default:G(()=>[l.isLoading?(t(),o("div",Ft,_[0]||(_[0]=[e("div",{class:"relative p-6"},[e("img",{src:It,alt:"Logo Espace Cameroun",class:"h-12 w-12 object-contain animate-spin-pulse"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-[var(--espace-or)] border-t-transparent animate-spin"})],-1)]))):$("",!0)]),_:1}))}}),je=le(Tt,[["__scopeId","data-v-f60cc94a"]]),Lt={class:"h-full bg-gray-100 pt-5 px-4 sm:px-2"},qt={class:"h-full w-full overflow-y-scroll"},Ut={key:0},Ot={key:1,class:"grid grid-cols-1 pt-4 pb-2 lg:pb-12 md:grid-cols-3 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Nt={class:"relative w-full h-40 overflow-hidden rounded-t-lg mb-2"},Rt={key:0,class:"absolute z-12 top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Dt=["src"],Wt=["onClick"],Jt=["onClick"],Bt={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Ht={class:"p-2"},Gt={class:"text-lg font-semibold flex justify-between text-[var(--espace-vert)]"},Xt=["onClick"],Kt={class:"text-sm text-[var(--espace-gris)] line-clamp-2"},Qt={class:"text-md font-bold text-[var(--espace-or)] mt-2"},Zt={class:"text-sm text-[var(--espace-gris)]"},Yt={class:"text-sm text-[var(--espace-gris)] mt-2"},es={class:"ml-4"},ts={key:2,class:"text-center text-[var(--espace-gris)]"},ss={class:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-md mx-4 shadow-lg"},os={class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},as={class:"mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200"},rs={key:0,class:"grid grid-cols-3 gap-2 mb-2"},ls=["src"],ns=["onClick"],is=["value"],us={key:0,class:"flex items-center gap-2"},ds={class:"flex gap-4 pt-2"},cs=["disabled"],ps={key:0,class:"fas fa-spinner fa-spin mr-2"},vs=re({__name:"CommercantProduits",setup(F){const l=Me(),_=xe(),f=me(),r=ue(),i=v(!1),s=v(!1),x=v([]),p=v([]),a=v(!1),m=v(!1),V=v(null),k=v({}),b=v({nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0}),n=v([]),d=v([]),g=v(null),S=ce(()=>[...n.value,...d.value.map(w=>URL.createObjectURL(w))]),j=async()=>{i.value=!0;try{const w=await R.get("/commercant/produits");x.value=w.data.produits.map(u=>({...u,photo_url:u.photos&&u.photos.length>0?u.photos[0]:"https://via.placeholder.com/150"})),x.value.forEach(u=>{k.value[u.id]||(k.value[u.id]=0)})}catch{r.error("Erreur lors du chargement des produits")}finally{i.value=!1}},M=async()=>{i.value=!0;try{const w=await R.get("/categories");p.value=w.data.categories}catch{r.error("Erreur lors du chargement des cat√©gories")}finally{i.value=!1}},C=()=>{b.value={nom:"",description:"",prix:0,stock:0,category_id:"",collaboratif:!1,marge_min:0},n.value=[],d.value=[],a.value=!0},D=w=>{V.value=w,b.value={nom:w.nom,description:w.description||"",prix:w.prix,stock:w.quantite,category_id:w.category_id,collaboratif:!!w.collaboratif,marge_min:w.marge_min||0},n.value=w.photos?[...w.photos]:[],d.value=[],k.value[w.id]||(k.value[w.id]=0),m.value=!0},Z=w=>{const u=w.target;if(u.files){const te=Array.from(u.files);d.value.push(...te),g.value&&(g.value.value="")}},q=w=>{if(w<n.value.length)n.value.splice(w,1);else{const u=w-n.value.length;d.value.splice(u,1)}},se=async()=>{var u,te;s.value=!0;const w=new FormData;w.append("nom",b.value.nom),w.append("description",b.value.description),w.append("prix",b.value.prix.toString()),w.append("stock",b.value.stock.toString()),w.append("category_id",b.value.category_id),w.append("collaboratif",b.value.collaboratif?"1":"0"),w.append("marge_min",b.value.marge_min.toString()),n.value.forEach(P=>w.append("old_photos[]",P)),d.value.forEach(P=>w.append("photos[]",P));try{if(a.value)await R.post("/commercant/produits",w,{headers:{"Content-Type":"multipart/form-data"}}),r.success("Produit ajout√© avec succ√®s");else{const P=await R.post(`/commercant/produits/${(u=V.value)==null?void 0:u.id}`,w,{headers:{"Content-Type":"multipart/form-data"}});console.log(P.data),r.success("Produit modifi√© avec succ√®s")}await j(),l.fetchProducts(),ne()}catch(P){r.error(((te=P.response)==null?void 0:te.data.message)||"Erreur lors de la sauvegarde du produit")}finally{s.value=!1}},ne=()=>{a.value=!1,m.value=!1,V.value=null,n.value=[],d.value=[]},B=ce(()=>w=>k.value[w]||0),z=w=>{var P;const u=x.value.find(E=>E.id===w),te=(P=u==null?void 0:u.photos)!=null&&P.length?u.photos.length-1:0;k.value[w]=Math.min((k.value[w]||0)+1,te)},H=w=>{k.value[w]=Math.max((k.value[w]||0)-1,0)};return fe(()=>{var w;if(!((w=_.user)!=null&&w.commercant)){r.error("Acc√®s r√©serv√© aux commer√ßants"),f.push("/");return}j(),M()}),(w,u)=>{const te=ve("router-link");return t(),o(W,null,[U(je,{isLoading:i.value},null,8,["isLoading"]),e("div",Lt,[e("div",qt,[e("div",{class:"flex justify-between items-center"},[u[9]||(u[9]=e("h1",{class:"text-1xl md:text-2xl font-bold text-[var(--espace-vert)] text-md mb-2 font-poppins"},[e("i",{class:"fas fa-box-open mr-1 text-[var(--espace-or)] text-md!important"}),h(" Mes Produits ")],-1)),e("button",{onClick:C,class:"mb-2 md:text-xl text-[var(--espace-vert)] font-semibold px-2 py-1 rounded hover:bg-[var(--espace-vert)] hover:text-white transition inline-flex items-center"},u[8]||(u[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Ajouter un produit ")]))]),i.value?(t(),o("div",Ut,u[10]||(u[10]=[e("div",{class:"flex items-center justify-center py-10"},[e("i",{class:"fas fa-spinner animate-spin text-2xl text-[var(--espace-vert)]"})],-1)]))):x.value.length?(t(),o("div",Ot,[(t(!0),o(W,null,Y(x.value,P=>(t(),o("div",{key:P.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[e("div",Nt,[P.collaboratif?(t(),o("span",Rt," Collaboratif ")):$("",!0),U(te,{to:`/produits/${P.id}`,class:"block relative"},{default:G(()=>[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${B.value(P.id)*100}%)`})},[(t(!0),o(W,null,Y(P.photos,(E,K)=>(t(),o("img",{key:K,src:E,class:"h-40 object-contain flex-shrink-0 mx-auto w-full",alt:"Photo du produit"},null,8,Dt))),128))],4)]),_:2},1032,["to"]),P.photos&&P.photos.length>1?(t(),o("button",{key:1,onClick:E=>H(P.id),class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},u[11]||(u[11]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Wt)):$("",!0),P.photos&&P.photos.length>1?(t(),o("button",{key:2,onClick:E=>z(P.id),class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block"},u[12]||(u[12]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Jt)):$("",!0),P.photos&&P.photos.length>1?(t(),o("div",Bt,[(t(!0),o(W,null,Y(P.photos,(E,K)=>(t(),o("span",{key:K,class:J(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":K===B.value(P.id)}])},null,2))),128))])):$("",!0)]),e("div",Ht,[e("h2",Gt,[U(te,{to:`/produits/${P.id}`,class:"block relative"},{default:G(()=>[h(c(P.nom),1)]),_:2},1032,["to"]),e("button",{onClick:E=>D(P),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] p-1 rounded-full hover:bg-gray-100 transition"},u[13]||(u[13]=[e("i",{class:"fas fa-pencil text-sm"},null,-1)]),8,Xt)]),e("p",Kt,c(P.description||"Aucune"),1),e("p",Qt,c(P.prix)+" FCFA",1),e("p",Zt,"Stock: "+c(P.quantite),1),e("div",Yt,[e("span",null,[u[14]||(u[14]=e("i",{class:"fas fa-eye mr-1"},null,-1)),h(" "+c(P.raw_views_count||0)+" vues",1)]),e("span",es,[u[15]||(u[15]=e("i",{class:"fas fa-heart mr-1"},null,-1)),h(" "+c(P.favorites_count||0)+" favoris",1)])])])]))),128))])):(t(),o("p",ts,"Aucun produit pour le moment."))]),U(be,{name:"fade"},{default:G(()=>{var P;return[a.value||m.value?(t(),o("div",{key:0,class:"overflow-y-scroll fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ie(ne,["self"])},[e("div",ss,[e("h2",os,c(a.value?"Ajouter un produit":"Modifier le produit"),1),e("form",{onSubmit:ie(se,["prevent"]),class:"space-y-4 pt-12"},[e("div",null,[u[19]||(u[19]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Photos du produit",-1)),e("div",as,[S.value.length?(t(),o("div",rs,[(t(!0),o(W,null,Y(S.value,(E,K)=>(t(),o("div",{key:K,class:"relative w-full h-20"},[e("img",{src:E,class:"w-full h-full object-cover rounded-lg",alt:"Pr√©visualisation"},null,8,ls),e("button",{onClick:ie(L=>q(K),["prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},u[16]||(u[16]=[e("i",{class:"fas fa-times"},null,-1)]),8,ns)]))),128))])):$("",!0),e("input",{ref_key:"fileInput",ref:g,type:"file",multiple:"",onChange:Z,class:"hidden",accept:"image/*"},null,544),S.value.length?(t(),o("button",{key:2,type:"button",onClick:u[1]||(u[1]=E=>{var K;return(K=g.value)==null?void 0:K.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},u[18]||(u[18]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Ajouter une autre photo ")]))):(t(),o("button",{key:1,type:"button",onClick:u[0]||(u[0]=E=>{var K;return(K=g.value)==null?void 0:K.click()}),class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center"},u[17]||(u[17]=[e("i",{class:"fas fa-camera mr-2"},null,-1),h(" Ajouter une photo ")])))])]),e("div",null,[u[20]||(u[20]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{"onUpdate:modelValue":u[2]||(u[2]=E=>b.value.nom=E),type:"text",required:"",class:"input-style"},null,512),[[Q,b.value.nom]])]),e("div",null,[u[21]||(u[21]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Description",-1)),O(e("textarea",{"onUpdate:modelValue":u[3]||(u[3]=E=>b.value.description=E),rows:"3",class:"input-style"},null,512),[[Q,b.value.description]])]),e("div",null,[u[22]||(u[22]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Prix (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":u[4]||(u[4]=E=>b.value.prix=E),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Q,b.value.prix,void 0,{number:!0}]])]),e("div",null,[u[23]||(u[23]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Stock",-1)),O(e("input",{"onUpdate:modelValue":u[5]||(u[5]=E=>b.value.stock=E),type:"number",min:"0",required:"",class:"input-style"},null,512),[[Q,b.value.stock,void 0,{number:!0}]])]),e("div",null,[u[25]||(u[25]=e("label",{class:"text-sm text-[var(--espace-vert)]"},"Cat√©gorie",-1)),O(e("select",{"onUpdate:modelValue":u[6]||(u[6]=E=>b.value.category_id=E),required:"",class:"input-style"},[u[24]||(u[24]=e("option",{value:""},"S√©lectionner une cat√©gorie",-1)),(t(!0),o(W,null,Y(p.value,E=>(t(),o("option",{key:E.id,value:E.id},c(E.nom),9,is))),128))],512),[[_e,b.value.category_id]])]),a.value||!((P=V.value)!=null&&P.collaboratif)?(t(),o("div",us,[O(e("input",{id:"collaboratif",type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=E=>b.value.collaboratif=E)},null,512),[[Be,b.value.collaboratif]]),u[26]||(u[26]=e("label",{for:"collaboratif",class:"text-sm text-[var(--espace-vert)]"},"Collaboratif",-1))])):$("",!0),e("div",ds,[e("button",{type:"submit",disabled:s.value,class:J(["flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded transition-colors",s.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-white"])},[s.value?(t(),o("i",ps)):$("",!0),h(" "+c(a.value?"Ajouter":"Modifier"),1)],10,cs),e("button",{type:"button",onClick:ne,class:"flex-1 bg-[var(--espace-gris)] text-white font-semibold px-4 py-2 rounded hover:bg-gray-700 transition"}," Annuler ")])],32)])])):$("",!0)]}),_:1})])],64)}}}),bc=le(vs,[["__scopeId","data-v-241c1641"]]),ms={class:"overflow-y-scroll bg-white flex justify-center px-4 pt-8"},fs={class:"flex flex-col w-full max-w-lg rounded-2xl sm:p-10"},gs=["disabled"],xs={class:"text-center text-sm text-gray-600 mt-6"},bs=re({__name:"Register",setup(F){const l=v({nom:"",telephone:"",email:"",ville:"",mot_de_passe:"",parrain_code:""}),_=v({}),f=me(),r=Ae(),i=ue(),s=xe();fe(()=>{const a=r.params.code;a&&(l.value.parrain_code=a)});const x=v(!1),p=async()=>{var a,m,V;try{x.value=!0,await s.register(l.value),i.success("Inscription r√©ussie !"),f.push({name:"home"})}catch(k){console.error("Erreur lors de l'inscription:",k);const b=((m=(a=k.response)==null?void 0:a.data)==null?void 0:m.message)||"Erreur lors de l'inscription. Veuillez v√©rifier vos informations.";i.error(b),((V=k.response)==null?void 0:V.status)===422&&(_.value=k.response.data.errors)}finally{x.value=!1}};return(a,m)=>{const V=ve("router-link");return t(),o("div",ms,[e("div",fs,[m[8]||(m[8]=e("h1",{class:"text-3xl sm:text-4xl font-bold text-center text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-user-plus mr-2 text-[var(--espace-or)]"}),h(" Cr√©ez votre compte ")],-1)),m[9]||(m[9]=e("p",{class:"text-center text-sm sm:text-base text-gray-600 mb-6"},[h(" Rejoignez "),e("strong",null,"Espace Cameroun"),h(" et profitez d‚Äôune exp√©rience d‚Äôachat unique. Vos informations resteront confidentielles. ")],-1)),e("form",{onSubmit:ie(p,["prevent"]),class:"space-y-5"},[U(he,{label:"Nom",icon:"fa-user",modelValue:l.value.nom,"onUpdate:modelValue":m[0]||(m[0]=k=>l.value.nom=k),type:"text",required:"",error:_.value.nom},null,8,["modelValue","error"]),U(he,{label:"T√©l√©phone",icon:"fa-phone",modelValue:l.value.telephone,"onUpdate:modelValue":m[1]||(m[1]=k=>l.value.telephone=k),type:"tel",required:"",error:_.value.telephone},null,8,["modelValue","error"]),U(he,{label:"Email (optionnel)",icon:"fa-envelope",modelValue:l.value.email,"onUpdate:modelValue":m[2]||(m[2]=k=>l.value.email=k),type:"email",error:_.value.email},null,8,["modelValue","error"]),U(he,{label:"Ville",icon:"fa-city",modelValue:l.value.ville,"onUpdate:modelValue":m[3]||(m[3]=k=>l.value.ville=k),type:"text",required:"",error:_.value.ville},null,8,["modelValue","error"]),U(he,{label:"Mot de passe",icon:"fa-lock",modelValue:l.value.mot_de_passe,"onUpdate:modelValue":m[4]||(m[4]=k=>l.value.mot_de_passe=k),type:"password",required:"",error:_.value.mot_de_passe},null,8,["modelValue","error"]),U(he,{label:"Code de parrainage (optionnel)",icon:"fa-users",modelValue:l.value.parrain_code,"onUpdate:modelValue":m[5]||(m[5]=k=>l.value.parrain_code=k),type:"text",error:_.value.parrain_code},null,8,["modelValue","error"]),e("button",{type:"submit",disabled:x.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold p-3 rounded-xl hover:bg-[var(--espace-vert)] hover:text-white transition flex items-center justify-center shadow-md disabled:opacity-60 disabled:cursor-not-allowed"},[e("i",{class:J([x.value?"fas fa-spinner fa-spin":"fas fa-user-plus","mr-2"])},null,2),e("span",null,c(x.value?"Inscription...":"S'inscrire"),1)],8,gs)],32),e("p",xs,[m[7]||(m[7]=h(" Vous avez d√©j√† un compte ? ")),U(V,{to:"/login",class:"text-[var(--espace-vert)] font-medium hover:underline"},{default:G(()=>m[6]||(m[6]=[h(" Connectez-vous ici ")])),_:1,__:[6]})]),m[10]||(m[10]=e("p",{class:"text-center text-xs text-gray-400 mt-2 pb-24"},[h(" En vous inscrivant, vous acceptez notre "),e("a",{href:"/politique",class:"hover:underline text-[var(--espace-vert)]"},"politique de confidentialit√©"),h(". ")],-1))])])}}}),hc=le(bs,[["__scopeId","data-v-845ed51e"]]),hs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 px-4"},ys={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-y-auto animate-fade-in max-h-[90vh]"},_s={class:"p-6"},ws={key:0,class:"grid md:grid-cols-3 gap-6"},ks={key:1,class:"flex flex-col md:flex-row max-w-3xl mx-auto p-8 bg-white rounded-xl shadow-lg"},$s={class:"md:w-1/3 mb-6 md:mb-0 pr-6 border-r border-gray-200"},Cs={class:"font-extrabold text-lg mb-2"},As={class:"mb-2 text-sm opacity-90"},Ps={class:"text-3xl font-extrabold"},js={class:"flex flex-col text-sm font-medium text-gray-700"},Ss={key:0,class:"text-xs text-red-600 mt-1"},Ms={class:"flex gap-4"},Vs=["value"],Es=["src"],zs={key:0,class:"text-xs text-red-600 mt-1 block"},Is=["disabled"],Fs={class:"text-xs text-gray-400 mt-4 text-center"},Ts=re({__name:"SubscriptionModal",props:{isOpen:{type:Boolean}},emits:["close","upgraded"],setup(F,{emit:l}){const _=l,f=ue(),r=v(""),i=v(""),s=v(""),x=v(!1),p=v(!1),a=v(!1),m=b=>{r.value=b,x.value=!1,p.value=!1,i.value="",s.value=""},V=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],k=async()=>{if(x.value=!s.value,p.value=!i.value,x.value||p.value){f.error("Veuillez remplir tous les champs correctement.");return}a.value=!0;try{const b=await R.post("/upgrade-to-premium",{subscription_type:r.value,payment_service:i.value,phone_number:s.value});a.value=!1,f.success(b.data.message),_("upgraded"),_("close")}catch(b){b.response&&b.response.data?(b.response.data,f.error("Paiement √©chou√© :Verifiez vos informations et r√©essayer")):f.error("Verifiez vos informations et r√©essayer."),console.error(b)}finally{a.value=!1}};return(b,n)=>{const d=ve("router-link");return b.isOpen?(t(),o("div",hs,[e("div",ys,[n[18]||(n[18]=e("div",{class:"bg-gradient-to-r from-[var(--espace-vert)] to-[var(--espace-or)] p-6 text-center"},[e("h2",{class:"text-3xl font-bold text-white"},"üöÄ Passez √† Premium"),e("p",{class:"text-white/90 mt-1"}," Comparez et choisissez le plan qui boostera votre business ")],-1)),e("div",_s,[r.value?(t(),o("div",ks,[e("div",$s,[n[12]||(n[12]=e("h3",{class:"text-xl font-bold mb-4"},"Votre abonnement",-1)),e("div",{class:J([{"bg-green-600 text-white":r.value==="monthly","bg-yellow-400 text-gray-900":r.value==="yearly"},"rounded-lg p-4"])},[e("h4",Cs,c(r.value==="monthly"?"Premium Mensuel":"Premium Annuel"),1),e("p",As,c(r.value==="monthly"?"Acc√®s complet √† toutes les fonctionnalit√©s.":"Payez moins, profitez plus avec 16% d‚Äô√©conomie !"),1),e("div",Ps,c(r.value==="monthly"?"5 000 FCFA":"50 000 FCFA"),1)],2)]),e("form",{onSubmit:ie(k,["prevent"]),class:"md:w-2/3 flex flex-col gap-6",novalidate:""},[n[16]||(n[16]=e("h3",{class:"text-xl font-bold mb-2"},"D√©tails du paiement",-1)),e("label",js,[n[13]||(n[13]=h(" Num√©ro de t√©l√©phone ")),O(e("input",{"onUpdate:modelValue":n[4]||(n[4]=g=>s.value=g),type:"tel",placeholder:"Ex: 696428651",class:J(["mt-1 rounded-lg border border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",{"border-red-500":x.value}]),onInput:n[5]||(n[5]=g=>x.value=!s.value),required:""},null,34),[[Q,s.value]]),x.value?(t(),o("span",Ss,"Veuillez entrer un num√©ro valide.")):$("",!0)]),n[17]||(n[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Service de paiement ",-1)),e("div",Ms,[(t(),o(W,null,Y(V,g=>e("label",{key:g.value,class:J(["flex items-center gap-2 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":i.value===g.value,"border-gray-300 bg-white":i.value!==g.value,"border-red-500":p.value&&!i.value}])},[O(e("input",{type:"radio",value:g.value,"onUpdate:modelValue":n[6]||(n[6]=S=>i.value=S),class:"hidden"},null,8,Vs),[[He,i.value]]),e("img",{src:g.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Es),e("span",{class:J([{"text-[var(--espace-vert)]":i.value===g.value,"text-gray-700":i.value!==g.value},"font-semibold select-none"])},c(g.label),3)],2)),64))]),p.value&&!i.value?(t(),o("span",zs," Veuillez s√©lectionner un service. ")):$("",!0),e("button",{type:"submit",disabled:a.value||!s.value||!i.value,class:"w-full py-3 rounded-lg bg-[var(--espace-vert)] text-white font-bold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[a.value?(t(),o(W,{key:0},[n[14]||(n[14]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1)),n[15]||(n[15]=h(" Veuillez patienter... "))],64)):(t(),o(W,{key:1},[h(" Payer & Souscrire ")],64))],8,Is),e("button",{type:"button",onClick:n[7]||(n[7]=g=>r.value=""),class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] transition"}," ‚Üê Retour aux plans "),e("p",Fs," üîí Paiement s√©curis√© via "+c(i.value||"votre service"),1)],32)])):(t(),o("div",ws,[n[11]||(n[11]=Se('<div class="border border-gray-200 bg-gray-50 rounded-xl p-6 flex flex-col justify-between" data-v-4592d418><div data-v-4592d418><h3 class="text-xl font-bold text-gray-800" data-v-4592d418>Gratuit (Base)</h3><p class="text-sm text-gray-500 mb-4" data-v-4592d418>Pour d√©buter sans frais</p><ul class="space-y-2 text-sm" data-v-4592d418><li class="flex items-center gap-2 text-gray-700" data-v-4592d418><span data-v-4592d418>‚úî</span> 10 produits max </li><li class="flex items-center gap-2 text-gray-700" data-v-4592d418><span data-v-4592d418>‚úî</span> 5 collaborations max </li><li class="flex items-center gap-2 text-gray-400" data-v-4592d418><span data-v-4592d418>‚ùå</span> Pas de statistiques d√©taill√©es </li><li class="flex items-center gap-2 text-gray-400" data-v-4592d418><span data-v-4592d418>‚ùå</span> Pas de badge Premium </li><li class="flex items-center gap-2 text-gray-400" data-v-4592d418><span data-v-4592d418>‚ùå</span> Position prioritaire </li></ul></div><button disabled class="mt-6 w-full py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold cursor-not-allowed" data-v-4592d418> Actuel </button></div>',1)),e("div",{class:"relative bg-gradient-to-br from-[var(--espace-vert)] to-green-500 rounded-xl text-white p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 scale-103 transition cursor-pointer",onClick:n[1]||(n[1]=g=>m("monthly"))},[n[8]||(n[8]=Se('<span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow" data-v-4592d418>‚≠ê Populaire</span><div data-v-4592d418><h3 class="text-xl font-bold" data-v-4592d418>Premium - Mensuel</h3><p class="text-sm opacity-90 mb-4" data-v-4592d418> Acc√®s complet √† toutes les fonctionnalit√©s </p><div class="text-3xl font-extrabold mb-2" data-v-4592d418>5000 FCFA / mois </div><ul class="space-y-2 text-sm" data-v-4592d418><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:n[0]||(n[0]=ie(g=>m("monthly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-vert)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),e("div",{class:"relative bg-gradient-to-br from-yellow-400 to-[var(--espace-or)] rounded-xl text-gray-900 p-6 flex flex-col justify-between shadow-lg transform hover:scale-105 transition cursor-pointer",onClick:n[3]||(n[3]=g=>m("yearly"))},[n[9]||(n[9]=Se('<span class="absolute top-1 right-3 bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow" data-v-4592d418>-16% √âconomie</span><div data-v-4592d418><h3 class="text-xl font-bold" data-v-4592d418>Premium - Annuel</h3><p class="text-sm opacity-90 mb-4" data-v-4592d418>Payez moins, profitez plus</p><div class="text-3xl font-extrabold mb-2" data-v-4592d418>50 000 FCFA / an</div><ul class="space-y-2 text-sm" data-v-4592d418><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Produits illimit√©s</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Collaborations illimit√©es</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> 20 jetons gratuits/mois </li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Statistiques d√©taill√©es</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Badge ‚ÄúPremium‚Äù</li><li class="flex items-center gap-2" data-v-4592d418><span data-v-4592d418>‚úî</span> Position prioritaire</li></ul></div>',2)),e("button",{onClick:n[2]||(n[2]=ie(g=>m("yearly"),["stop"])),class:"mt-6 w-full py-2 rounded-lg bg-white text-[var(--espace-or)] font-bold hover:bg-gray-100 transition"}," Choisir ce plan ")]),U(d,{to:"home",class:"w-full text-center text-gray-500 hover:text-[var(--espace-vert)] text-bold transition"},{default:G(()=>n[10]||(n[10]=[h(" ‚Üê Retour ")])),_:1,__:[10]})]))])])])):$("",!0)}}}),Ls=le(Ts,[["__scopeId","data-v-4592d418"]]),qs={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Us={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 space-y-6 animate-fade-in max-h-[90vh] overflow-auto"},Os={class:"flex justify-center gap-3 mb-4"},Ns=["onClick"],Rs={key:0,class:"text-xs text-red-600 mt-1"},Ds={class:"flex gap-4"},Ws=["value"],Js=["src"],Bs={key:1,class:"text-xs text-red-600 mt-1"},Hs={class:"text-center text-lg font-bold mt-6"},Gs={class:"text-[var(--espace-vert)]"},Xs=["disabled"],Ks={key:0},Qs={key:1},Zs={key:2,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ys={class:"w-full mt-2 text-center text-gray-500 hover:text-[var(--espace-vert)] transition"},eo=re({__name:"AchatJetonModal",props:{isOpen:{type:Boolean}},emits:["close","purchased"],setup(F,{emit:l}){const _=l,f=ue(),r=v(10),i=v(""),s=v(""),x=v(r.value*25),p=v(!1),a=v(!1),m=v(!1),V=[{value:"ORANGE",label:"Orange Money",logo:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX/eQD/////dgD/dAD/bgD/cwD/cAD/cQD/lVH/kEf/7OP/rH//llT/9vH/t47/awD/sIb/+ff/ijf/6Nv/4ND/3cr/pXD/8+z/kkz/2MT/nmP/vpv/r4L/z7X/5df/qHb/xab/fhn/yq7/jUD/mlz/fRL/hS3/ZAD/omv/zrT/gST/izr/hTD/waD/vJY57ZCcAAAH70lEQVR4nO2a6XKjOhCF0QIaOxjF8b7hFSfjOHn/x7ss2tgyMHeqJuM6358EEEJHarVaLXseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMeBKrL/zK2/2qI/zC38kbOkSRhe81vXMEz+cqv+IOyJKOQ7IROe3uIxIcsHGsXkfr+S6fF+pS9kQa6psiT9O3gghdk8JDNOvVThYXwSnr8h0WMpTCGzwMsUnj4I9+RouH5YhT8TMhch2b49rMLd6yR+XRE+f1yFfE8SspL7x1UoOBmSpXhkheJEFpJ1U0j/odCHTDOF72QlUpmRnyr81YrPAum9DM5HzkW1JCvIb1MhvZvzjIr0heR2ZJILVquUMmaKSeHzpjJFHdw8MyGnW8IPuDjeEqeCJDF/aJKVPn4pjwZeNB0XkdDw9EOW2nGLnjOit3SFletVWmyrn/syPMT6vd1eiFKzJTvv51lRJsPTMCuzWO15VWP2MF6MFvHPeZC+Ty9hysUdEMpvn6p1i9WWCa8/4rYiLou9tB+gA3V3GvBl3k7yVLSS8WhUeo+c9JilM2Q1yRo15Gm3PC1skfGl3EK+dh5+cHZWTeCmRPA+LX+ENhnCl8hPUmVyNLUYhbPXg/qvUBiE49p7JFTtp6G6wflyUS7y5Erklb71VVQ9NArlgVRZB/0E8mmtipSlX1W4Mo3JFfJ6v2Rc1Gz6oa6vp1oRx+kFk8qzyaGisLF1z9zrQbbxaGKgncSg9ihTyD+aXyNJWWEDzvjUmz8ul5Gzxirmfk1Hu8CfbQ2pjmFJIYvs5WS1W1lL3IlfKSRnNYjCqWQ4LBVRCp0Ss4/Pgx2MW+d1jV3cauPYmVpT/oVCOlBfW+wFD0QgB8bp8LrC3VsS0L253KgRSPSN8TxdLaTrc5RCU2LqceELftNWPe1sp9LUOt5my5IcWMMJaYPC8WQ6XWcJErnONB30ysJMY3JH7ypceUFWSJz1jVnhKcROXY8K78gcoy0UCm1gM6kMSmqJ546DyN50lQvqqzrMBIt5VeHkyZM8CIrK08XCnfJmPu9ZWeFal5G6hBogpku86NZyYwhKob60nv2m7uw6LovWUyWmT+zkPlYUbsuhgOdTZ8IH+rWnssLEvCO03x/lzWdbPcamm2yH5wqZNuyfVo5pcUcz9XWNH7YOetQ3I1ZS+NFWKWUi4K8tCqUpZrxTodB0ydoanNR+IFco9Pq0tj3rb9S9bmZK16annbumm/L5YhU2hrbU5/K8PU2tl2hX+FxSKHUJx97M1MwVcl0plVwj5+rec6fIxnTI0B2ecl9bhWFdoS/fN9X1tKtC7ZqcAM0WyRtkLGzsou6dOk1E02WleWtbJ75WGHibSkTWQyHV61TsKtRGlSlMt0VfsOoUugXaHjelGME4/uNXChltDhY6KjRuZOo01YSzucKQfEHcydVwvbpEJaM21vFO2xXyee2j/RTqq5JCPbCZQutZm5j0U1ietmYZOrcrLMWl8WF+f+2rUM92dzCoa6V/RKH2Ep8lK6W6lnurQidgjPd+uvWmxjX2HUPXyxnTza1Uyx09R3XmnXypWZIOJU9z1a3Lr5oU0ru+OVqqMKC3Qi1m7Cj09ZYsV6i/vJB+nW7bYBv3uY7JWkfrahHotXgR6C/1VWimHHFMw9SbD2xSr6Mvdg/k1mGiq2GrQjNTrzbY66nQtt+JWMoxDdcluu+VqjTPManj313bemjaP7Tt763QqNnZuNSM61CfCtoqbff2kcj1V2LbEN9s5ObluNQqNHPIse7eCgMb4euKpdkGFzGNDrli18TYro9GMxHtPshu9Eje/EaF+hTWumxuur+rQnuUOyxSjFTqEEtPEOPP1tbXZ5vIj6BzFsMJjD5l6vKZLwdmm19Efo1WaiN2tVd0MmJdFdrJTBbrLKYOnbRUsYSY9Zq8KGNhPB/58baz83GyeaPD/LKOnNyQUtM0V804T9J+8YWcO/Fpd4VunrAxT2P9Ldl46dab87n2ESM38/4lCWkjEu0Kzb6GjDbbaFdKnHZWaKPDOioMcHOJi+nMGeRuYWn+lbbQaKpTI00K3VRble4KS2kw9ais0PNaPjLusX7w5sYOtb9qXlF4w7apt0IveK6+rPtbK2zZQY17rZB831CFXQaaFZqMkGH36yxGTWHt23v9MTOG7Fo5G8mYeP1CAHGv5taJ46pa9hbsVhrF2Vlq599Hoeff3LT3G3f3h+r7QfVcoIcjNZXItfud0cZ3lht6XgxzFuU8DZVPJj0bJTx9RkYZ40o20appUuhRfj8UbnT4yRitK0xHIPlwenM2rx3QdYFxb3+apjLiVXSW5eWU6iRQ7eSUi8HlskykWn9VMXU0IwtKCaCGe8VJo3dL3/adLEbZVfo8eYs2h000f5HB7+grPi+C/CTW72PitdPa/4kZ5loWhqXLrq8Oov8pslSrE2WaAOTwOye93w7GuRc+n2K7t7DZhbfftsVvBNvrQO1FDRgzJxukx/ng98U5vIm8PKm9NrFpt2Tot4c7wfZ4OHHX19/f1H8r2nPa0UP4Ga896j/0+iHCt0YsG36wQvaPIzALM2o/6TiwR1goHAR/22mPM4oPF/4oU9CBCc6Tl/P9GDT8avBx+Jd++AkAAJ73H6GobYBzD++QAAAAAElFTkSuQmCC",import.meta.url).href},{value:"MTN",label:"MTN Mobile Money",logo:new URL("/assets/mtn-BYIQIUOR.jpg",import.meta.url).href}],k=[10,20,50,100],b=ce(()=>r.value>=10&&i.value.trim().length===9&&/^6\d{8}$/.test(i.value)&&s.value!==""),n=()=>{x.value=r.value*25},d=M=>{r.value=M,n()},g=()=>{n()},S=()=>{m.value=!(i.value.trim().length===9&&/^6\d{8}$/.test(i.value))},j=async()=>{if(a.value=!s.value,!b.value){f.error("Veuillez remplir tous les champs correctement.");return}p.value=!0;try{const M=await R.post("/acheter-jetons",{nombre_jetons:r.value,payment_service:s.value,phone_number:i.value});f.success(M.data.message),_("purchased",r.value),_("close")}catch(M){if(M.response&&M.response.data){const C=M.response.data;f.error(`Erreur: ${C.error_message||"Achat √©chou√©"}. D√©tails: ${C.details||"Aucun d√©tail."}`)}else f.error("Erreur lors de l'achat. Veuillez r√©essayer.");console.error(M)}finally{p.value=!1}};return ge(i,()=>{S()}),(M,C)=>{const D=ve("router-link");return t(),o("div",qs,[e("div",Us,[C[7]||(C[7]=e("h2",{class:"text-3xl font-extrabold text-[var(--espace-vert)] text-center"}," üé´ Acheter des Jetons ",-1)),C[8]||(C[8]=e("p",{class:"text-center text-gray-600 text-sm mb-6"},"1 jeton = 25 FCFA",-1)),e("div",Os,[(t(),o(W,null,Y(k,Z=>e("button",{key:Z,type:"button",onClick:q=>d(Z),class:J(["rounded-full px-4 py-2 border font-semibold transition",r.value===Z?"bg-[var(--espace-vert)] text-white border-[var(--espace-vert)]":"bg-white text-gray-700 border-gray-300 hover:bg-[var(--espace-vert)] hover:text-white"])},c(Z),11,Ns)),64))]),C[9]||(C[9]=e("label",{class:"block text-gray-700 font-semibold mb-1",for:"jetonQuantity"},[h(" Nombre de jetons "),e("span",{class:"text-sm text-gray-500"},"(min 10)")],-1)),O(e("input",{id:"jetonQuantity","onUpdate:modelValue":C[0]||(C[0]=Z=>r.value=Z),type:"number",min:"10",placeholder:"Ex: 10",onInput:g,class:"w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition"},null,544),[[Q,r.value,void 0,{number:!0}]]),C[10]||(C[10]=e("label",{class:"block text-gray-700 font-semibold mb-1 mt-4",for:"phoneNumber"},[h(" Num√©ro de t√©l√©phone "),e("span",{class:"text-sm text-red-500"},"*")],-1)),O(e("input",{id:"phoneNumber","onUpdate:modelValue":C[1]||(C[1]=Z=>i.value=Z),type:"tel",placeholder:"Ex: 696428651",onInput:S,class:J(["w-full rounded-lg border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)] transition",m.value?"border-red-500":"border-gray-300"])},null,34),[[Q,i.value]]),m.value?(t(),o("p",Rs," Veuillez entrer un num√©ro valide (9 chiffres, commen√ßant par 6). ")):$("",!0),C[11]||(C[11]=e("label",{class:"block text-gray-700 font-semibold mb-2 mt-4",for:"paymentService"}," Service de paiement ",-1)),e("div",Ds,[(t(),o(W,null,Y(V,Z=>e("label",{key:Z.value,class:J(["flex items-center gap-3 cursor-pointer rounded-lg border p-3 flex-1 transition hover:border-[var(--espace-vert)]",{"border-[var(--espace-vert)] bg-[var(--espace-vert)]/10":s.value===Z.value,"border-gray-300 bg-white":s.value!==Z.value}])},[O(e("input",{type:"radio",value:Z.value,"onUpdate:modelValue":C[2]||(C[2]=q=>s.value=q),class:"hidden"},null,8,Ws),[[He,s.value]]),e("img",{src:Z.logo,alt:"",class:"h-8 w-8 object-contain"},null,8,Js),e("span",{class:J({"text-[var(--espace-vert)] font-bold":s.value===Z.value,"text-gray-700":s.value!==Z.value})},c(Z.label),3)],2)),64))]),a.value&&!s.value?(t(),o("p",Bs," Veuillez s√©lectionner un service. ")):$("",!0),e("div",Hs,[C[4]||(C[4]=h(" Montant total : ")),e("span",Gs,c(x.value)+" FCFA",1)]),e("button",{onClick:j,disabled:!b.value||p.value,class:"w-full mt-4 bg-[var(--espace-vert)] text-white py-3 rounded-lg font-semibold hover:bg-[var(--espace-or)] transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3"},[p.value?(t(),o("span",Qs,"veuillez patientez")):(t(),o("span",Ks,"Acheter")),p.value?(t(),o("svg",Zs,C[5]||(C[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):$("",!0)],8,Xs),e("button",Ys,[U(D,{to:"/jeton-history",onClick:C[3]||(C[3]=Z=>_("close"))},{default:G(()=>C[6]||(C[6]=[h("Annuler")])),_:1,__:[6]})])])])}}}),to=le(eo,[["__scopeId","data-v-dd242c69"]]),so={class:"space-y-6 pb-16"},oo={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},ao={key:0,class:"space-y-2 text-[var(--espace-gris)]"},ro={class:"flex gap-2"},lo=["disabled"],no={key:0,class:"fas fa-spinner fa-spin mr-2"},io={key:0,class:"bg-white rounded-lg shadow-md p-4 sm:p-6 space-y-4"},uo={key:0,class:"space-y-2 text-[var(--espace-gris)]"},co={key:0,class:"w-24 h-24"},po=["src"],vo={key:0,class:"mt-2 w-24 h-24"},mo=["src"],fo={class:"flex gap-2"},go=["disabled"],xo={key:0,class:"fas fa-spinner fa-spin mr-2"},bo=re({__name:"userProfile",props:{user:Object},setup(F){var b,n,d,g,S,j,M,C,D,Z,q,se,ne,B,z,H;const l=xe(),_=ue(),f=v(!1),r=v(l.user),i=v(!1),s=v(!1),x=v({nom:((b=r.value)==null?void 0:b.nom)||"",telephone:((n=r.value)==null?void 0:n.telephone)||"",email:((d=r.value)==null?void 0:d.email)||"",ville:((g=r.value)==null?void 0:g.ville)||""}),p=v(!1),a=v({nom:((j=(S=r.value)==null?void 0:S.commercant)==null?void 0:j.nom)||"",description:((C=(M=r.value)==null?void 0:M.commercant)==null?void 0:C.description)||"",email:((Z=(D=r.value)==null?void 0:D.commercant)==null?void 0:Z.email)||"",telephone:((se=(q=r.value)==null?void 0:q.commercant)==null?void 0:se.telephone)||"",ville:((B=(ne=r.value)==null?void 0:ne.commercant)==null?void 0:B.ville)||"",logo:null,logoPreview:(H=(z=r.value)==null?void 0:z.commercant)!=null&&H.logo?`http://localhost:8000/storage/${r.value.commercant.logo}`:null}),m=w=>{var te;const u=(te=w.target.files)==null?void 0:te[0];if(u){if(!u.type.startsWith("image/")){_.error("Veuillez s√©lectionner une image.");return}if(u.size>2*1024*1024){_.error("Image trop volumineuse (max 2Mo).");return}a.value.logo=u,a.value.logoPreview=URL.createObjectURL(u)}},V=async()=>{var w;i.value=!0;try{const u=await R.post("/updateProfile",x.value);r.value&&(r.value.nom=u.data.user.nom||"",r.value.telephone=u.data.user.telephone||"",r.value.email=u.data.user.email||"",r.value.ville=u.data.user.ville||""),l.user=u.data.user,f.value=!1,_.success("Profil mis √† jour avec succ√®s.")}catch(u){_.error(((w=u.response)==null?void 0:w.data.message)||"Erreur lors de la mise √† jour.")}finally{i.value=!1}},k=async()=>{var w,u,te;s.value=!0;try{const P=new FormData;P.append("nom",a.value.nom),P.append("description",a.value.description),P.append("email",a.value.email),P.append("telephone",a.value.telephone),P.append("ville",a.value.ville),a.value.logo&&P.append("logo",a.value.logo);const E=await R.post("/commercant/update",P,{headers:{"Content-Type":"multipart/form-data"}});(w=r.value)!=null&&w.commercant&&(r.value.commercant.nom=E.data.commercant.nom,r.value.commercant.description=E.data.commercant.description,r.value.commercant.email=E.data.commercant.email,r.value.commercant.telephone=E.data.commercant.telephone,r.value.commercant.ville=E.data.commercant.ville,r.value.commercant.logo=E.data.commercant.logo),l.user=r.value,a.value.logoPreview=E.data.commercant.logo?`http://localhost:8000/storage/${E.data.commercant.logo}`:null,p.value=!1,_.success("Commerce mis √† jour avec succ√®s.")}catch(P){_.error(((te=(u=P.response)==null?void 0:u.data)==null?void 0:te.message)||"Erreur lors de la mise √† jour du commerce.")}finally{s.value=!1}};return ge(()=>l.user,w=>{var u,te,P,E,K,L;r.value=w||null,x.value={nom:(w==null?void 0:w.nom)||"",telephone:(w==null?void 0:w.telephone)||"",email:(w==null?void 0:w.email)||"",ville:(w==null?void 0:w.ville)||""},a.value={nom:((u=w==null?void 0:w.commercant)==null?void 0:u.nom)||"",description:((te=w==null?void 0:w.commercant)==null?void 0:te.description)||"",email:((P=w==null?void 0:w.commercant)==null?void 0:P.email)||"",telephone:((E=w==null?void 0:w.commercant)==null?void 0:E.telephone)||"",ville:((K=w==null?void 0:w.commercant)==null?void 0:K.ville)||"",logo:null,logoPreview:(L=w==null?void 0:w.commercant)!=null&&L.logo?`http://localhost:8000/storage/${w.commercant.logo}`:null}},{immediate:!0}),(w,u)=>{var te,P,E,K,L,A;return t(),o("div",so,[e("section",oo,[u[23]||(u[23]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations personnelles",-1)),f.value?(t(),o("form",{key:1,onSubmit:ie(V,["prevent"]),class:"space-y-4"},[e("div",null,[u[18]||(u[18]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom"},"Nom",-1)),O(e("input",{"onUpdate:modelValue":u[1]||(u[1]=T=>x.value.nom=T),id:"nom",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre nom"},null,512),[[Q,x.value.nom]])]),e("div",null,[u[19]||(u[19]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone"},"T√©l√©phone",-1)),O(e("input",{"onUpdate:modelValue":u[2]||(u[2]=T=>x.value.telephone=T),id:"telephone",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre t√©l√©phone"},null,512),[[Q,x.value.telephone]])]),e("div",null,[u[20]||(u[20]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email"},"Email",-1)),O(e("input",{"onUpdate:modelValue":u[3]||(u[3]=T=>x.value.email=T),id:"email",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre email (optionnel)"},null,512),[[Q,x.value.email]])]),e("div",null,[u[21]||(u[21]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville"},"Ville",-1)),O(e("input",{"onUpdate:modelValue":u[4]||(u[4]=T=>x.value.ville=T),id:"ville",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Votre ville"},null,512),[[Q,x.value.ville]])]),e("div",ro,[e("button",{type:"submit",disabled:i.value,class:J(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",i.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[i.value?(t(),o("i",no)):$("",!0),u[22]||(u[22]=h(" Enregistrer "))],10,lo),e("button",{onClick:u[5]||(u[5]=T=>f.value=!1),class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),o("div",ao,[e("p",null,[u[13]||(u[13]=e("strong",null,"Nom :",-1)),h(" "+c((te=r.value)==null?void 0:te.nom),1)]),e("p",null,[u[14]||(u[14]=e("strong",null,"T√©l√©phone :",-1)),h(" "+c((P=r.value)==null?void 0:P.telephone),1)]),e("p",null,[u[15]||(u[15]=e("strong",null,"Email :",-1)),h(" "+c(((E=r.value)==null?void 0:E.email)||"Non d√©fini"),1)]),e("p",null,[u[16]||(u[16]=e("strong",null,"Ville :",-1)),h(" "+c((K=r.value)==null?void 0:K.ville),1)]),e("p",null,[u[17]||(u[17]=e("strong",null,"Statut Premium :",-1)),h(" "+c((L=r.value)!=null&&L.premium?"Actif":"Inactif"),1)]),e("button",{onClick:u[0]||(u[0]=T=>f.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Modifier le profil"}," Modifier ")]))]),(A=r.value)!=null&&A.commercant?(t(),o("section",io,[u[36]||(u[36]=e("h2",{class:"text-lg sm:text-xl font-semibold text-[var(--espace-vert)]"},"Informations du Commerce",-1)),p.value?(t(),o("form",{key:1,onSubmit:ie(k,["prevent"]),class:"space-y-4"},[e("div",null,[u[29]||(u[29]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"nom_commerce"},"Nom du commerce",-1)),O(e("input",{"onUpdate:modelValue":u[7]||(u[7]=T=>a.value.nom=T),id:"nom_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commerce"},null,512),[[Q,a.value.nom]])]),e("div",null,[u[30]||(u[30]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"description_commerce"},"Description",-1)),O(e("textarea",{"onUpdate:modelValue":u[8]||(u[8]=T=>a.value.description=T),id:"description_commerce",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Description du commerce",rows:"3"},null,512),[[Q,a.value.description]])]),e("div",null,[u[31]||(u[31]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"email_commerce"},"Email",-1)),O(e("input",{"onUpdate:modelValue":u[9]||(u[9]=T=>a.value.email=T),id:"email_commerce",type:"email",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Email du commerce (optionnel)"},null,512),[[Q,a.value.email]])]),e("div",null,[u[32]||(u[32]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"telephone_commerce"},"T√©l√©phone",-1)),O(e("input",{"onUpdate:modelValue":u[10]||(u[10]=T=>a.value.telephone=T),id:"telephone_commerce",type:"tel",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"T√©l√©phone du commerce"},null,512),[[Q,a.value.telephone]])]),e("div",null,[u[33]||(u[33]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"ville_commerce"},"Ville",-1)),O(e("input",{"onUpdate:modelValue":u[11]||(u[11]=T=>a.value.ville=T),id:"ville_commerce",type:"text",required:"",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville du commerce"},null,512),[[Q,a.value.ville]])]),e("div",null,[u[34]||(u[34]=e("label",{class:"block text-[var(--espace-gris)] text-sm font-medium",for:"logo_commerce"},"Logo",-1)),e("input",{id:"logo_commerce",type:"file",accept:"image/*",onChange:m,class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},null,32),a.value.logoPreview?(t(),o("div",vo,[e("img",{src:a.value.logoPreview,alt:"Aper√ßu logo",class:"w-full h-full object-cover rounded-md shadow"},null,8,mo)])):$("",!0)]),e("div",fo,[e("button",{type:"submit",disabled:s.value,class:J(["w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md transition-colors",s.value?"opacity-50 cursor-not-allowed":"hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)]"]),"aria-label":"Enregistrer les modifications"},[s.value?(t(),o("i",xo)):$("",!0),u[35]||(u[35]=h(" Enregistrer "))],10,go),e("button",{onClick:u[12]||(u[12]=T=>p.value=!1),type:"button",class:"w-full sm:w-auto bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors","aria-label":"Annuler"}," Annuler ")])],32)):(t(),o("div",uo,[r.value.commercant.logo?(t(),o("div",co,[e("img",{src:`http://localhost:8000/storage/${r.value.commercant.logo}`,alt:"Logo du commerce",class:"w-full h-full object-cover rounded-md shadow"},null,8,po)])):$("",!0),e("p",null,[u[24]||(u[24]=e("strong",null,"Nom du commerce :",-1)),h(" "+c(r.value.commercant.nom),1)]),e("p",null,[u[25]||(u[25]=e("strong",null,"Description :",-1)),h(" "+c(r.value.commercant.description||"Non d√©finie"),1)]),e("p",null,[u[26]||(u[26]=e("strong",null,"Email :",-1)),h(" "+c(r.value.commercant.email||"Non d√©fini"),1)]),e("p",null,[u[27]||(u[27]=e("strong",null,"T√©l√©phone :",-1)),h(" "+c(r.value.commercant.telephone),1)]),e("p",null,[u[28]||(u[28]=e("strong",null,"Ville :",-1)),h(" "+c(r.value.commercant.ville),1)]),e("button",{onClick:u[6]||(u[6]=T=>p.value=!0),class:"mt-2 w-full sm:w-auto bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Modifier ")]))])):$("",!0)])}}}),ho=le(bo,[["__scopeId","data-v-cea2bd5a"]]),yo=re({__name:"MerchantProfile",props:{user:Object},setup(F){const l=ue(),_=v(null),f=v([]);return fe(async()=>{try{const r=await R.get("/commercant/profil");_.value=r.data.commercant,f.value=r.data.produits||[]}catch(r){l.error("Erreur lors du chargement des donn√©es du commer√ßant: "+(r.message||r))}}),(r,i)=>null}}),_o=le(yo,[["__scopeId","data-v-ce205108"]]),wo={class:"overflow-y-scroll min-h-screen relative bg-gray-100 py-8 sm:px-6"},ko={class:"flex flex-col sm:flex-row items-center justify-between mb-8 gap-4"},$o={class:"flex flex-col space-x-4 relative w-full gap-1 px-3"},Co={class:"flex items-center space-x-4 relative w-full gap-1 px-3"},Ao={class:"relative"},Po=["src"],jo={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-lg p-1 rounded-full",style:{}},So={key:3,class:"absolute top-full left-0 transform -ranslate-x-1/2 mt-2 w-42 bg-white border rounded-md shadow z-10"},Mo={class:"space-y-1"},Vo={key:0,class:"text-sm text-gray-500"},Eo={key:0,class:"ml-4 flex items-center gap-2"},zo=["src"],Io=["disabled"],Fo={class:"flex flex-col sm:flex-row gap-2 items-center"},To={class:"container mx-auto max-w-4xl"},Lo={key:2,class:"fixed inset-0 bg-black bg-opacity-0 flex items-center justify-center z-50"},qo={class:"bg-white rounded-lg p-4 relative w-full max-w-md"},Uo=re({__name:"Profile",setup(F){const l=()=>{const H=window.location.hostname;return H==="localhost"||H==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},_=ce(()=>l()),f=me(),r=ue(),i=xe(),s=v(i.user),x=v(!1),p=v(!1),a=v(null),m=v(null),V=v(!1),k=v(!1),b=v(!1),n=ce(()=>k.value?_o:ho),d=v(null),g=v(null),S=v(!1);let j=null;const M=()=>{var H;(H=d.value)==null||H.click(),x.value=!1},C=H=>{const w=H.target;if(w.files&&w.files[0]){const u=w.files[0];if(!u.type.startsWith("image/")){r.error("Veuillez s√©lectionner une image.");return}if(u.size>2*1024*1024){r.error("Image trop volumineuse (max 2Mo).");return}m.value=u,a.value=URL.createObjectURL(u)}},D=async()=>{try{j=await navigator.mediaDevices.getUserMedia({video:!0}),S.value=!0,x.value=!1,setTimeout(()=>{g.value&&(g.value.srcObject=j)},100)}catch(H){r.error("Impossible d'acc√©der √† la cam√©ra."),console.error(H)}},Z=()=>{if(!g.value)return;const H=g.value,w=document.createElement("canvas");w.width=H.videoWidth,w.height=H.videoHeight;const u=w.getContext("2d");u&&(u.drawImage(H,0,0,w.width,w.height),w.toBlob(te=>{te&&(m.value=new File([te],"photo.jpg",{type:"image/jpeg"}),a.value=URL.createObjectURL(m.value),q())},"image/jpeg"))},q=()=>{j&&(j.getTracks().forEach(H=>H.stop()),j=null),S.value=!1},se=()=>{m.value=null,a.value=null},ne=async()=>{var H,w;if(m.value){p.value=!0;try{const u=new FormData;u.append("photo",m.value);const te=await R.post("/profile/photo",u,{headers:{"Content-Type":"multipart/form-data"}});te.data.photo&&(s.value&&(s.value.photo=te.data.photo,i.user=s.value),r.success("Photo mise √† jour."),se())}catch(u){r.error(((w=(H=u.response)==null?void 0:H.data)==null?void 0:w.message)||"Erreur lors de l'envoi.")}finally{p.value=!1}}},B=async()=>{V.value=!1},z=H=>{r.success(`Vous avez achet√© ${H} jetons !`)};return ge(()=>i.user,H=>{s.value=H||null},{immediate:!0}),fe(()=>{}),Pe(()=>{a.value&&URL.revokeObjectURL(a.value),j&&j.getTracks().forEach(H=>H.stop())}),(H,w)=>{var u,te,P,E,K,L,A,T,ee,oe,de,X,y,ae,N,we,ke,$e,Ve,Ee,ze;return t(),o("div",wo,[e("div",ko,[e("div",$o,[e("div",Co,[e("div",Ao,[(u=s.value)!=null&&u.photo?(t(),o("img",{key:0,src:_.value+((te=s.value)==null?void 0:te.photo),alt:"Photo de profil",class:"w-16 h-16 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Po)):(t(),o("div",{key:1,class:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:ye({background:`${((L=(K=(E=(P=s.value)==null?void 0:P.niveaux_users)==null?void 0:E.at(-1))==null?void 0:K.parrainage_niveau)==null?void 0:L.couleur)||"#0af"}`})},w[5]||(w[5]=[e("i",{class:"fas fa-user-circle text-4xl"},null,-1)]),4)),(A=s.value)!=null&&A.premium?(t(),o("i",jo)):$("",!0),e("button",{onClick:w[0]||(w[0]=Ce=>x.value=!x.value),class:"absolute bottom-0 right-0 w-6 h-6 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full flex items-center justify-center hover:bg-[var(--espace-vert)] hover:text-white",style:{}},w[6]||(w[6]=[e("i",{class:"fas fa-pencil-alt text-xs"},null,-1)])),x.value?(t(),o("div",So,[e("button",{onClick:D,class:"w-full text-left px-4 py-2 hover:bg-gray-100"}," Cam√©ra "),e("button",{onClick:M,class:"w-full text-left px-4 py-2 hover:bg-gray-200"}," Galerie ")])):$("",!0)]),e("input",{ref_key:"galleryInput",ref:d,type:"file",accept:"image/*",class:"hidden",onChange:C},null,544),e("div",Mo,[e("h1",{class:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-blue-500",style:ye({color:`${((de=(oe=(ee=(T=s.value)==null?void 0:T.niveaux_users)==null?void 0:ee.at(-1))==null?void 0:oe.parrainage_niveau)==null?void 0:de.couleur)||"#0af"}`})},[h(c((X=s.value)==null?void 0:X.nom)+" ",1),(y=s.value)!=null&&y.premium?(t(),o("span",{key:0,class:"text-black text-xs px-3 py-1 rounded-full uppercase font-bold",style:ye({background:`${((ke=(we=(N=(ae=s.value)==null?void 0:ae.niveaux_users)==null?void 0:N.at(-1))==null?void 0:we.parrainage_niveau)==null?void 0:ke.couleur)||"#0af"}`})}," Premium ",4)):$("",!0)],4),($e=s.value)!=null&&$e.subscription_ends_at?(t(),o("span",Vo," Jusqu'au "+c(new Date((Ve=s.value)==null?void 0:Ve.subscription_ends_at).toLocaleDateString()),1)):$("",!0)])]),a.value?(t(),o("div",Eo,[e("img",{src:a.value,alt:"Preview",class:"w-12 h-12 rounded-full object-cover"},null,8,zo),e("button",{onClick:ne,disabled:p.value,class:J(["bg-[var(--espace-vert)] text-white px-3 py-1 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]",{"opacity-50 cursor-not-allowed":p.value}])},c(p.value?"Upload...":"Confirmer"),11,Io),e("button",{onClick:se,class:"text-red-500 hover:text-red-700"}," Annuler ")])):$("",!0)]),e("div",Fo,[(Ee=s.value)!=null&&Ee.commercant?$("",!0):(t(),o("button",{key:0,onClick:w[1]||(w[1]=Ce=>I(f).push("/commercant/create")),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-vert)] hover:text-white"}," Devenir commer√ßant ")),(ze=s.value)!=null&&ze.premium?$("",!0):(t(),o("button",{key:1,onClick:w[2]||(w[2]=Ce=>V.value=!0),class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"}," Passer Premium "))])]),e("div",To,[(t(),pe(Ye(n.value)))]),V.value?(t(),pe(Ls,{key:0,"is-open":V.value,onClose:w[3]||(w[3]=Ce=>V.value=!1),onUpgraded:B},null,8,["is-open"])):$("",!0),b.value?(t(),pe(to,{key:1,"is-open":b.value,onClose:w[4]||(w[4]=Ce=>b.value=!1),onPurchased:z},null,8,["is-open"])):$("",!0),S.value?(t(),o("div",Lo,[e("div",qo,[e("video",{ref_key:"videoRef",ref:g,autoplay:"",playsinline:"",class:"rounded w-full"},null,512),e("div",{class:"mt-2 flex justify-between"},[e("button",{onClick:Z,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," Capturer "),e("button",{onClick:q,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Annuler ")])])])):$("",!0)])}}}),yc=le(Uo,[["__scopeId","data-v-fa7eaf4b"]]),Oo={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6 flex flex-col lg:flex-row gap-4"},No={class:"hidden lg:block w-full max-w-xs bg-[var(--espace-blanc)] rounded-lg shadow-md p-4"},Ro={class:"space-y-2"},Do=["onClick"],Wo={class:"font-poppins"},Jo={class:"flex-1 bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Bo={class:"lg:hidden mb-4"},Ho={class:"flex overflow-x-auto space-x-2 border-b border-[var(--espace-gris)]"},Go=["onClick"],Xo={key:0,class:"space-y-6"},Ko={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qo={class:"bg-gray-50 p-4 rounded-lg shadow-sm"},Zo={class:"flex items-center gap-4 mb-4"},Yo=["src"],ea={class:"text-[var(--espace-vert)] font-semibold"},ta={class:"text-sm text-[var(--espace-gris)]"},sa={class:"text-sm text-[var(--espace-gris)]"},oa={class:"text-sm text-[var(--espace-gris)]"},aa={key:0,class:"space-y-6"},ra={key:0,class:"space-y-6"},la={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},na={class:"text-base font-medium font-poppins"},ia={class:"text-sm text-[var(--espace-gris)]"},ua=re({__name:"Parametres",setup(F){const l=v(!1),_=xe(),f=me(),r=ue(),i=_.user,s=v("profile"),x=v({id:(i==null?void 0:i.id)??0,nom:(i==null?void 0:i.nom)??"",email:(i==null?void 0:i.email)??"",telephone:(i==null?void 0:i.telephone)??"",ville:(i==null?void 0:i.ville)??""});_.user={..._.user,...x.value};const p=v({current_password:"",new_password:"",confirm_new_password:""});v({});const a=v(""),m=ce(()=>[...i!=null&&i.commercant?[{to:"/commercant/produits",label:"Espace Commer√ßant",icon:"fa-store-alt",description:"G√©rez votre boutique et vos produits"}]:[],{to:"/parrainages",label:"Parrainage",icon:"fa-users",description:"Invitez des amis et gagnez des r√©compenses"},{to:"/profile",label:"Abonnements",icon:"fa-star",description:"G√©rez vos abonnements premium"},{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",description:"G√©rez vos collaborations sur des produits"}]),V=async()=>{var d,g;l.value=!0;try{await R.post("/updateProfile",x.value),localStorage.setItem("user",JSON.stringify(_.user)),r.success("Profil mis √† jour avec succ√®s",{timeout:3e3})}catch(S){r.error(((g=(d=S.response)==null?void 0:d.data)==null?void 0:g.message)||"Erreur lors de la mise √† jour du profil")}finally{l.value=!1}},k=async()=>{var d,g;l.value=!0;try{if(p.value.new_password!==p.value.confirm_new_password){r.error("Les mots de passe ne correspondent pas");return}await R.post("/updatePassword",p.value),r.success("Mot de passe mis √† jour avec succ√®s",{timeout:3e3}),p.value={current_password:"",new_password:"",confirm_new_password:""},a.value=""}catch(S){r.error(((g=(d=S.response)==null?void 0:d.data)==null?void 0:g.message)||"Erreur lors de la mise √† jour du mot de passe")}finally{l.value=!1}},b=()=>{_.logout(),f.push({name:"login"})},n=()=>{const d=p.value.new_password;d.length===0?a.value="":d.length<8||!/[A-Za-z]/.test(d)||!/[0-9]/.test(d)?a.value="weak":/[!@#$%^&*]/.test(d)?a.value="strong":a.value="medium"};return ge(()=>p.value.new_password,n),(d,g)=>{const S=ve("RouterLink");return t(),o(W,null,[U(je,{isLoading:l.value},null,8,["isLoading"]),e("div",Oo,[e("aside",No,[g[7]||(g[7]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4 font-poppins"},"Param√®tres",-1)),e("nav",Ro,[(t(),o(W,null,Y([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"links",label:"Autres options",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],j=>e("button",{key:j.id,onClick:M=>j.id==="logout"?b():s.value=j.id,class:J(["w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-300",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":s.value===j.id,"text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":s.value!==j.id}])},[e("i",{class:J(["fas",j.icon])},null,2),e("span",Wo,c(j.label),1)],10,Do)),64))])]),e("main",Jo,[e("div",Bo,[e("div",Ho,[(t(),o(W,null,Y([{id:"profile",label:"Profil",icon:"fa-user"},{id:"security",label:"S√©curit√©",icon:"fa-lock"},{id:"notifications",label:"Notifications",icon:"fa-bell"},{id:"links",label:"Autres",icon:"fa-cog"},{id:"logout",label:"D√©connexion",icon:"fa-sign-out-alt"}],j=>e("button",{key:j.id,onClick:M=>j.id==="logout"?b():s.value=j.id,class:J(["flex items-center gap-2 px-4 py-2 text-sm font-medium font-poppins transition-colors duration-300",{"border-b-2 border-[var(--espace-or)] text-[var(--espace-vert)]":s.value===j.id,"text-[var(--espace-gris)] hover:text-[var(--espace-vert)]":s.value!==j.id}])},[e("i",{class:J(["fas",j.icon])},null,2),h(" "+c(j.label),1)],10,Go)),64))])]),U(be,{name:"slide"},{default:G(()=>{var j,M;return[s.value==="profile"?(t(),o("section",Xo,[g[10]||(g[10]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Profil",-1)),e("div",Ko,[e("form",{onSubmit:ie(V,["prevent"]),class:"space-y-4"},[U(he,{label:"Nom",icon:"fa-user",modelValue:x.value.nom,"onUpdate:modelValue":g[0]||(g[0]=C=>x.value.nom=C),type:"text",required:"",placeholder:"Votre nom"},null,8,["modelValue"]),U(he,{label:"Email",icon:"fa-envelope",modelValue:x.value.email,"onUpdate:modelValue":g[1]||(g[1]=C=>x.value.email=C),type:"email",placeholder:"Votre email"},null,8,["modelValue"]),U(he,{label:"T√©l√©phone",icon:"fa-phone",modelValue:x.value.telephone,"onUpdate:modelValue":g[2]||(g[2]=C=>x.value.telephone=C),type:"tel",required:"",placeholder:"Votre num√©ro de t√©l√©phone"},null,8,["modelValue"]),U(he,{label:"Ville",icon:"fa-city",modelValue:x.value.ville,"onUpdate:modelValue":g[3]||(g[3]=C=>x.value.ville=C),type:"text",required:"",placeholder:"Votre ville"},null,8,["modelValue"]),g[8]||(g[8]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Mettre √† jour ",-1))],32),e("div",Qo,[g[9]||(g[9]=e("h3",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2 font-poppins"},"Aper√ßu",-1)),e("div",Zo,[e("img",{src:((M=(j=I(i))==null?void 0:j.commercant)==null?void 0:M.logo)||"https://via.placeholder.com/50",alt:"Photo de profil",class:"w-12 h-12 rounded-full object-cover"},null,8,Yo),e("div",null,[e("p",ea,c(x.value.nom||"Nonni"),1),e("p",ta,c(x.value.email||"Non d√©fini"),1)])]),e("p",sa,"T√©l√©phone: "+c(x.value.telephone||"Nonni"),1),e("p",oa,"Ville: "+c(x.value.ville||"Non d√©fini"),1)])])])):$("",!0)]}),_:1}),U(be,{name:"slide"},{default:G(()=>[s.value==="security"?(t(),o("section",aa,[g[12]||(g[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"S√©curit√©",-1)),e("form",{onSubmit:ie(k,["prevent"]),class:"space-y-4"},[U(he,{label:"Mot de passe actuel",icon:"fa-lock",modelValue:p.value.current_password,"onUpdate:modelValue":g[4]||(g[4]=j=>p.value.current_password=j),type:"password",required:"",placeholder:"Mot de passe actuel"},null,8,["modelValue"]),U(he,{label:"Nouveau mot de passe",icon:"fa-lock",modelValue:p.value.new_password,"onUpdate:modelValue":g[5]||(g[5]=j=>p.value.new_password=j),type:"password",required:"",placeholder:"Nouveau mot de passe",onInput:n},null,8,["modelValue"]),a.value?(t(),o("div",{key:0,class:J(["text-sm",{"text-red-500":a.value==="weak","text-yellow-500":a.value==="medium","text-green-500":a.value==="strong"}])}," Force du mot de passe : "+c(a.value==="weak"?"Faible":a.value==="medium"?"Moyen":"Fort"),3)):$("",!0),U(he,{label:"Confirmer le nouveau mot de passe",icon:"fa-lock",modelValue:p.value.confirm_new_password,"onUpdate:modelValue":g[6]||(g[6]=j=>p.value.confirm_new_password=j),type:"password",required:"",placeholder:"Confirmer le mot de passe"},null,8,["modelValue"]),g[11]||(g[11]=e("button",{type:"submit",class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"}," Changer le mot de passe ",-1))],32)])):$("",!0)]),_:1}),U(be,{name:"slide"},{default:G(()=>[s.value==="links"?(t(),o("section",ra,[g[13]||(g[13]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] font-poppins"},"Autres options",-1)),e("div",la,[(t(!0),o(W,null,Y(m.value,j=>(t(),pe(S,{key:j.to,to:j.to,class:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-transform hover:scale-105"},{default:G(()=>[e("i",{class:J(["fas",j.icon])},null,2),e("div",null,[e("h3",na,c(j.label),1),e("p",ia,c(j.description),1)])]),_:2},1032,["to"]))),128))])])):$("",!0)]),_:1})])])],64)}}}),_c=le(ua,[["__scopeId","data-v-4610c24c"]]),da={class:"bg-[var(--espace-blanc)] border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-all duration-200"},ca={class:"relative w-full h-32 overflow-hidden rounded-lg mb-2"},pa=["src","alt"],va={key:0,class:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1"},ma={key:0,class:"absolute top-2 left-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},fa={key:1,class:"absolute top-2 right-2 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},ga={class:"text-sm font-semibold text-[var(--espace-vert)] font-poppins truncate"},xa={class:"text-xs text-[var(--espace-gris)] truncate"},ba={class:"text-sm font-medium text-[var(--espace-or)]"},ha={class:"flex items-center justify-between mt-2 text-xs text-[var(--espace-gris)]"},ya={class:"flex items-center gap-1"},_a={class:"flex items-center gap-1"},wa=["aria-label"],ka=re({__name:"ProductCard",props:{produit:{}},emits:["toggle-favorite","handleToggleFavorite"],setup(F,{emit:l}){const _=F,f=l,r=ue(),i=Me(),s=a=>{if(a==null||isNaN(a)||a===0)return"0";const m=Math.abs(a);return m<1e3?a.toString():m<1e4?(a/1e3).toFixed(1).replace(/\.0$/,"")+"k":m<1e6?Math.floor(a/1e3)+"k":m<1e9?(a/1e6).toFixed(1).replace(/\.0$/,"")+"M":(a/1e9).toFixed(1).replace(/\.0$/,"")+"B"},x=v(0),p=async()=>{var a,m;try{await i.toggleFavorite(_.produit.id),f("toggle-favorite",_.produit.id)}catch(V){r.error(((m=(a=V.response)==null?void 0:a.data)==null?void 0:m.message)||"Erreur lors de la mise √† jour des favori.")}};return(a,m)=>{var k,b;const V=ve("router-link");return t(),o("div",da,[U(V,{to:`/produits/${a.produit.id}`,class:"block relative"},{default:G(()=>[e("div",ca,[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${x.value*100}%)`})},[(t(!0),o(W,null,Y(a.produit.photos||[a.produit.photo_url||"https://via.placeholder.com/150"],(n,d)=>(t(),o("img",{key:d,src:n,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${a.produit.nom} - ${d+1}`},null,8,pa))),128))],4),a.produit.photos&&a.produit.photos.length>1?(t(),o("div",va,[(t(!0),o(W,null,Y(a.produit.photos,(n,d)=>(t(),o("span",{key:d,class:J(["w-1.5 h-1.5 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":d===x.value}])},null,2))),128))])):$("",!0)]),a.produit.collaboratif?(t(),o("span",ma," Collaboratif ")):$("",!0),a.produit.boosted_until&&new Date(a.produit.boosted_until)>new Date?(t(),o("span",fa," Boost√© ")):$("",!0),e("h3",ga,c(a.produit.nom),1),e("p",xa,c(a.produit.description||"Aucune description"),1),e("p",ba,c(a.produit.prix)+" XAF",1)]),_:1},8,["to"]),e("div",ha,[e("div",ya,[m[0]||(m[0]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,c(s((k=a.produit.counts)==null?void 0:k.views_count)),1)]),e("div",_a,[e("button",{onClick:p,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition active:scale-95 focus:outline-none","aria-label":a.produit.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:J(["fas fa-bookmark text-sm",{"text-[var(--espace-or)]":a.produit.is_favorited_by}])},null,2)],8,wa),e("span",null,c(s((b=a.produit.counts)==null?void 0:b.favorites_count)),1)])])])}}}),Le=le(ka,[["__scopeId","data-v-cd62888d"]]),$a={class:"pt-4 bg-[var(--espace-blanc)] max-h-full relative"},Ca={class:"relative overflow-y-scroll mx-auto px-4 sm:px-6 py-4 max-h-full"},Aa={class:"fixed flex items-center overflow-x-auto space-x-2 mb-3 snap-x snap-mandatory z-5"},Pa=["onClick","aria-label","aria-current"],ja=["aria-label","aria-expanded"],Sa={key:0,class:"absolute -top-1 -right-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] text-[10px] rounded-full h-5 w-5 flex items-center justify-center"},Ma={key:0,class:"bg-[var(--espace-blanc)] rounded-xl shadow-md p-4 mb-4 fixed top-0 left-0 right-0 z-50 sm:static sm:flex sm:items-center sm:gap-3 sm:flex-wrap"},Va={class:"flex-1 min-w-[120px]"},Ea={class:"flex-1 min-w-[120px]"},za=["value"],Ia={class:"flex-1 min-w-[100px]"},Fa={class:"flex-1 min-w-[100px]"},Ta={class:"flex-1 min-w-[120px]"},La=["value"],qa={class:"flex-1 min-w-[100px]"},Ua=["aria-busy"],Oa={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Na=re({__name:"Home",setup(F){const l=Me(),_=xe(),f=v([]),r=ue(),i=v(!1),s=v({search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""}),x=v(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),p=v(null),a=v(null),m=async()=>{try{const j=await R.get("/categories");f.value=j.data.categories}catch(j){console.error("Erreur lors du chargement des cat√©gories:",j),r.error("Erreur lors du chargement des cat√©gories.")}},V=()=>{if(s.value.prix_min&&s.value.prix_max&&parseFloat(s.value.prix_min)>parseFloat(s.value.prix_max)){r.error("Le prix minimum doit √™tre inf√©rieur au prix maximum.");return}l.fetchProducts(s.value,!0),i.value=!1},k=()=>{s.value={search:"",category:"",prix_min:"",prix_max:"",ville:"",collaboratif:""},i.value=!1},b=j=>{l.setSort(j)},n=()=>Object.values(s.value).filter(j=>j!=="").length,d=j=>{S(j)},g=j=>{S(j)},S=async j=>{var q,se,ne;const M=(q=_.user)==null?void 0:q.id,C=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),D=new Date().toISOString().split("T")[0],Z=localStorage.getItem("lastResetDate");if((!Z||Z!==D)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",D)),!await C[j])try{setTimeout(async()=>{const B=await R.post("/record_view",{product_id:j,user_id:M??null})},1e3),C[j]=!0,localStorage.setItem("viewedProducts",JSON.stringify(C))}catch(B){console.error("Erreur lors de l'enregistrement de la vue:",B),r.error(((ne=(se=B.response)==null?void 0:se.data)==null?void 0:ne.message)||"Erreur lors de l'enregistrement de la vue.")}};return fe(async()=>{try{await l.fetchProducts(),await m()}catch(j){console.error("Erreur lors du chargement des produits ou cat√©gories:",j),r.error("Erreur lors du chargement des produits. Veuillez r√©essayer.")}p.value=new IntersectionObserver(j=>{j[0].isIntersecting&&!l.isLoading&&l.hasMore&&l.fetchProducts(s.value)},{threshold:.1}),a.value&&p.value.observe(a.value)}),Pe(()=>{p.value&&a.value&&p.value.unobserve(a.value)}),(j,M)=>(t(),o("div",$a,[U(je,{isLoading:I(l).isLoading},null,8,["isLoading"]),e("div",Ca,[e("div",Aa,[(t(),o(W,null,Y([{id:"popular",label:"Populaire",icon:"fa-fire"},{id:"favorites",label:"Favoris",icon:"fa-heart"}],C=>e("button",{key:C.id,onClick:D=>b(C.id),class:J(["flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium font-poppins snap-center shrink-0 transition-all duration-200",{"bg-[var(--espace-vert)] text-[var(--espace-blanc)]":I(l).sort===C.id,"bg-gray-100 text-[var(--espace-vert)] hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]":I(l).sort!==C.id}]),"aria-label":`Trier par ${C.label}`,"aria-current":I(l).sort===C.id?"true":void 0},[e("i",{class:J(["fas",C.icon])},null,2),h(" "+c(C.label),1)],10,Pa)),64)),e("button",{onClick:M[0]||(M[0]=C=>i.value=!i.value),class:"relative flex items-center justify-center w-10 h-10 bg-[var(--espace-o)] text-[var(--espace-vert)] rounded-full hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition active:scale-95","aria-label":i.value?"Masquer les filtres":"Afficher les filtres","aria-expanded":i.value},[M[7]||(M[7]=e("i",{class:"fas fa-filter text-sm"},null,-1)),n()>0?(t(),o("span",Sa,c(n()),1)):$("",!0)],8,ja)]),U(be,{name:"slide-up"},{default:G(()=>[i.value?(t(),o("div",Ma,[e("form",{onSubmit:ie(V,["prevent"]),class:"grid grid-cols-2 gap-3 sm:flex sm:flex-row sm:gap-3"},[e("div",Va,[O(e("input",{"onUpdate:modelValue":M[1]||(M[1]=C=>s.value.search=C),id:"search",type:"text",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Rechercher...","aria-label":"Rechercher un produit"},null,512),[[Q,s.value.search]])]),e("div",Ea,[O(e("select",{"onUpdate:modelValue":M[2]||(M[2]=C=>s.value.category=C),id:"category",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[M[8]||(M[8]=e("option",{value:""},"Toutes les Cat√©gories",-1)),(t(!0),o(W,null,Y(f.value,C=>(t(),o("option",{key:C.id,value:C.id},c(C.nom),9,za))),128))],512),[[_e,s.value.category]])]),e("div",Ia,[O(e("input",{"onUpdate:modelValue":M[3]||(M[3]=C=>s.value.prix_min=C),id:"prix_min",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix min","aria-label":"Prix minimum"},null,512),[[Q,s.value.prix_min]])]),e("div",Fa,[O(e("input",{"onUpdate:modelValue":M[4]||(M[4]=C=>s.value.prix_max=C),id:"prix_max",type:"number",min:"0",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]",placeholder:"Prix max","aria-label":"Prix maximum"},null,512),[[Q,s.value.prix_max]])]),e("div",Ta,[O(e("select",{"onUpdate:modelValue":M[5]||(M[5]=C=>s.value.ville=C),id:"ville",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},[M[9]||(M[9]=e("option",{value:""},"Tous les villes",-1)),(t(!0),o(W,null,Y(x.value,C=>(t(),o("option",{key:C,value:C},c(C),9,La))),128))],512),[[_e,s.value.ville]])]),e("div",qa,[O(e("select",{"onUpdate:modelValue":M[6]||(M[6]=C=>s.value.collaboratif=C),id:"collaboratif",class:"w-full h-10 pl-3 pr-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition bg-[var(--espace-blanc)]"},M[10]||(M[10]=[e("option",{value:""},"Collaboratif",-1),e("option",{value:"true"},"Oui",-1),e("option",{value:"false"},"Non",-1)]),512),[[_e,s.value.collaboratif]])]),e("div",{class:"flex gap-2 col-span-2 sm:col-span-1"},[M[12]||(M[12]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"Appliquer les filtres"},[e("i",{class:"fas fa-check text-sm"})],-1)),e("button",{onClick:k,type:"button",class:"w-10 h-10 bg-[var(--espace-gris)] text-[var(--espace-blanc)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center active:scale-95","aria-label":"R√©initialiser les filtres"},M[11]||(M[11]=[e("i",{class:"fas fa-times text-sm"},null,-1)]))])],32)])):$("",!0)]),_:1}),U(Ue,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 pt-12"},{default:G(()=>[(t(!0),o(W,null,Y(I(l).products,C=>(t(),pe(Le,{key:C.id,produit:C,onMouseover:D=>d(C.id),onTouchstart:D=>g(C.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:a,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":I(l).isLoading},[I(l).hasMore?$("",!0):(t(),o("p",Oa," Aucun produit suppl√©mentaire "))],8,Ua)])]))}}),wc=le(Na,[["__scopeId","data-v-85da194b"]]),Ra={class:"relative h-full overflow-y-scroll bg-[var(--espace-blanc)] pt-16 pb-0 px-4 sm:px-6"},Da={class:"container mx-auto max-w-5xl"},Wa={key:0,class:"text-center text-[var(--espace-gris)]"},Ja={key:1,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 sm:p-6"},Ba={class:"flex flex-col lg:flex-row gap-4 sm:gap-6"},Ha={class:"w-full lg:w-1/2 relative"},Ga={class:"relative w-full h-64 sm:h-80 lg:h-96 overflow-hidden rounded-lg"},Xa=["src","alt"],Ka={key:2,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},Qa={key:0,class:"absolute top-3 left-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit boost√©"},Za={key:1,class:"absolute top-3 right-3 bg-[var(--espace-or)] text-[var(--espace-vert)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Produit collaboratif"},Ya={key:2,class:"absolute bottom-3 left-3 bg-[var(--espace-bleu)] text-[var(--espace-blanc)] text-[10px] font-semibold px-2 py-1 rounded-full font-poppins","aria-label":"Commer√ßant Pro"},er={class:"w-full lg:w-1/2"},tr={class:"text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"},sr={class:"text-sm text-[var(--espace-gris)] mb-3"},or={class:"text-lg sm:text-xl font-semibold text-[var(--espace-or)] mb-3"},ar={class:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 text-xs text-[var(--espace-gris)]"},rr={class:"flex items-center gap-3"},lr={class:"flex items-center gap-1"},nr={class:"flex items-center gap-1"},ir=["aria-label"],ur={class:"border-t pt-3 mt-3"},dr={class:"text-xs text-[var(--espace-gris)] mb-1"},cr={key:0,class:"ml-1 text-[var(--espace-or)]","aria-label":"Commer√ßant v√©rifi√©",title:"Commer√ßant v√©rifi√©"},pr={class:"text-xs text-[var(--espace-gris)] mb-1"},vr={class:"text-xs text-[var(--espace-gris)] mb-1"},mr={class:"text-xs text-[var(--espace-gris)] mb-2"},fr={class:"flex flex-col sm:flex-row gap-3 mt-4"},gr=["disabled","aria-label"],xr={key:2,class:"text-center text-[var(--espace-gris)] text-sm font-poppins"},br={class:"bg-[var(--espace-blanc)] rounded-lg p-4 sm:p-6 w-full max-w-md mx-4 shadow-lg"},hr={class:"text-base sm:text-lg font-semibold text-[var(--espace-vert)] mb-3 font-poppins"},yr={class:"text-xs text-[var(--espace-gris)] mb-3"},_r=["aria-label"],wr={key:0,class:"text-xs text-[var(--espace-gris)] mt-1"},kr={class:"bg-[var(--espace-blanc)] rounded-lg p-6 w-full max-w-md mx-4 shadow-lg border border-[var(--espace-or)]"},$r={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Cr={class:"text-xs text-[var(--espace-gris)] mt-1 text-center"},Ar={class:"text-sm text-[var(--espace-gris)]"},Pr={class:"text-[var(--espace-or)]"},jr={class:"flex gap-4"},Sr={key:0,class:"mt-6"},Mr=["aria-busy"],Vr={key:0,class:"text-[var(--espace-gris)] text-xs font-poppins"},Er=re({__name:"Produit",setup(F){const l=Me(),_=Ae(),f=me(),r=xe(),i=Fe(),s=ue();v([]);const x=v(!1),p=v(null),a=v(null),m=v(null),V=v(!1),k=v(1),b=v(0),n=v(5),d=[100,500,1e3,5e3,1e4],g=[5,15,25,50,75],S=L=>{if(L==null||isNaN(L)||L===0)return"0";const A=Math.abs(L);return A<1e3?L.toString():A<1e4?(L/1e3).toFixed(1).replace(/\.0$/,"")+"k":A<1e6?Math.floor(L/1e3)+"k":A<1e9?(L/1e6).toFixed(1).replace(/\.0$/,"")+"M":(L/1e9).toFixed(1).replace(/\.0$/,"")+"B"},j=async()=>{try{l.isLoading=!0,await l.viewProduct(_.params.id),l.isLoading=!1,l.product.photos&&!l.product.photo_url&&(l.product.photo_url=l.product.photos[0]),await l.fetchProducts({category:l.product.category_id,per_page:8},!0)}catch(L){s.error(L||"Erreur lors du chargement du produit"),f.push({name:"home"})}finally{l.isLoading=!1}},M=()=>{var T,ee;if(!r.user){s.error("Veuillez vous connecter pour contacter le commer√ßant"),f.push({name:"login"});return}const L=(T=l.product.commercant)==null?void 0:T.telephone,A=encodeURIComponent(`Bonjour ${(ee=l.product.commercant)==null?void 0:ee.nom}, je suis int√©ress√© par ${l.product.nom}. Pouvez-vous me contacter ?`);window.open(`https://wa.me/${L}?text=${A}`,"_blank")},C=()=>{var L;if(!r.user){s.error("Veuillez vous connecter pour collaborer"),f.push({name:"login"});return}if(((L=r.user.commercant)==null?void 0:L.id)===l.product.commercant_id){s.error("Vous ne pouvez pas collaborer sur votre propre produit");return}if(!l.product.collaboratif){s.error("Ce produit n‚Äôest pas ouvert √† la collaboration");return}p.value=l.product.prix+(l.product.marge_min||500),x.value=!0},D=async()=>{if(!p.value||p.value<l.product.prix+(l.product.marge_min||0)){s.error(`Le prix de revente doit √™tre sup√©rieur ou √©gal √† ${l.product.prix+(l.product.marge_min||0)} XAF`);return}await i.addCollaboration({produit_id:l.product.id,prix_revente:p.value})&&(s.success("Demande de collaboration envoy√©e",{timeout:3e3}),x.value=!1,p.value=null)},Z=()=>{x.value=!1,p.value=null},q=()=>{f.push({path:`/commercant/produits/${l.product.id}/edit`})},se=async()=>{var L,A,T;if(!r.user||((L=r.user.commercant)==null?void 0:L.id)!==l.product.commercant_id){s.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}if(r.user.jetons<n.value){s.error(`Pas assez de Jetons. Il vous faut ${n.value} Jetons pour ce boost.`);return}try{const ee=await R.post(`/produits/${l.product.id}/boost`,{duration_days:k.value,target_views:d[b.value]});r.user.jetons-=n.value,l.product.boosted_until=ee.data.data.end_date,s.success(ee.data.message||"Produit boost√© avec succ√®s !"),V.value=!1}catch(ee){s.error(((T=(A=ee.response)==null?void 0:A.data)==null?void 0:T.message)||"Erreur lors du boostage du produit")}},ne=()=>{var L;if(!r.user||((L=r.user.commercant)==null?void 0:L.id)!==l.product.commercant_id){s.error("Seul le commer√ßant propri√©taire peut booster ce produit");return}V.value=!0,B()},B=()=>{const L=k.value*5,A=g[b.value];n.value=Math.max(5,L+A)};ge([k,b],()=>{B()});const z=L=>{w(L)},H=L=>{w(L)},w=async L=>{var de,X,y;const A=(de=r.user)==null?void 0:de.id;if(!A){s.error("Connexion requise pour enregistrer la vue.");return}const T=JSON.parse(localStorage.getItem("viewedProducts")||"{}"),ee=new Date().toISOString().split("T")[0],oe=localStorage.getItem("lastResetDate");if((!oe||oe!==ee)&&(localStorage.removeItem("viewedProducts"),localStorage.setItem("lastResetDate",ee)),!T[L])try{setTimeout(async()=>{const ae=await R.post("/record_view",{product_id:L,user_id:A})},1e3),T[L]=!0,localStorage.setItem("viewedProducts",JSON.stringify(T))}catch(ae){console.error("Erreur lors de l'enregistrement de la vue:",ae),s.error(((y=(X=ae.response)==null?void 0:X.data)==null?void 0:y.message)||"Erreur lors de l'enregistrement de la vue.")}},u=async()=>{var L,A;try{await l.toggleFavorite(l.product.id)}catch(T){s.error(((A=(L=T.response)==null?void 0:L.data)==null?void 0:A.message)||"Erreur lors de la mise √† jour des favoris.")}},te=(L,A,T)=>{var oe;if(!r.user){s.error("Veuillez vous connecter pour d√©marrer une conversation"),f.push({name:"login"});return}const ee={id:L,name:A,commercant_id:l.product.commercant_id,name_user:((oe=r.user)==null?void 0:oe.nom)||"Inconnu"};localStorage.setItem("chatProduct",JSON.stringify(ee)),f.push(`/messages/${T}`)},P=v(0),E=()=>{var A;const L=(((A=l.product.photos)==null?void 0:A.length)||1)-1;P.value=Math.min(P.value+1,L)},K=()=>{P.value=Math.max(P.value-1,0)};return fe(()=>{j(),i.initializeState(),a.value=new IntersectionObserver(L=>{L[0].isIntersecting&&!l.isLoading&&l.hasMore&&l.fetchProducts({category:l.product.category_id,per_page:8},!1)},{threshold:.1}),m.value&&a.value.observe(m.value)}),Pe(()=>{a.value&&m.value&&a.value.unobserve(m.value)}),ge(()=>_.params.id,L=>{L&&(j(),P.value=0)}),ge(l.product,L=>{L&&(l.page=1,l.fetchProducts({category:L.category_id,per_page:4},!0),P.value=0)}),(L,A)=>{const T=ve("router-link");return t(),o(W,null,[U(je,{isLoading:I(l).isLoading},null,8,["isLoading"]),e("div",Ra,[e("div",Da,[I(l).isLoading?(t(),o("div",Wa)):I(l).product?(t(),o("div",Ja,[U(be,{name:"slide-up"},{default:G(()=>{var ee,oe,de,X,y,ae,N,we,ke,$e,Ve,Ee,ze,Ce,Ne,Re,De,We,Je;return[e("div",Ba,[e("div",Ha,[e("div",Ga,[e("div",{class:"flex w-full h-full slider-container",style:ye({transform:`translateX(-${P.value*100}%)`})},[(t(!0),o(W,null,Y(I(l).product.photos||[I(l).product.photo_url||"https://via.placeholder.com/300"],(qe,Ie)=>(t(),o("img",{key:Ie,src:qe,class:"w-full h-full object-contain flex-shrink-0 mx-auto",alt:`Image de ${I(l).product.nom} - ${Ie+1}`},null,8,Xa))),128))],4),I(l).product.photos&&I(l).product.photos.length>1?(t(),o("button",{key:0,onClick:K,class:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image pr√©c√©dente"},A[6]||(A[6]=[e("i",{class:"fas fa-chevron-left"},null,-1)]))):$("",!0),I(l).product.photos&&I(l).product.photos.length>1?(t(),o("button",{key:1,onClick:E,class:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-75 hidden md:block","aria-label":"Image suivante"},A[7]||(A[7]=[e("i",{class:"fas fa-chevron-right"},null,-1)]))):$("",!0),I(l).product.photos&&I(l).product.photos.length>1?(t(),o("div",Ka,[(t(!0),o(W,null,Y(I(l).product.photos,(qe,Ie)=>(t(),o("span",{key:Ie,class:J(["w-2 h-2 rounded-full bg-gray-400",{"bg-[var(--espace-or)]":Ie===P.value}])},null,2))),128))])):$("",!0)]),I(l).product.boosted_until&&new Date(I(l).product.boosted_until)>new Date?(t(),o("span",Qa," Boost√© ")):$("",!0),I(l).product.collaboratif?(t(),o("span",Za," Collaboratif ")):$("",!0),(ee=I(r).user)!=null&&ee.premium?(t(),o("span",Ya," Premium ")):$("",!0)]),e("div",er,[e("h1",tr,c(I(l).product.nom),1),e("p",sr,c(I(l).product.description||"Aucune description disponible"),1),e("p",or,c(I(l).product.prix)+" XAF ",1),e("div",ar,[e("p",null,[A[8]||(A[8]=e("strong",null,"Cat√©gorie :",-1)),h(" "+c(((oe=I(l).product.category)==null?void 0:oe.nom)||"Non sp√©cifi√©e"),1)]),e("p",null,[A[9]||(A[9]=e("strong",null,"Quantit√© :",-1)),h(" "+c(I(l).product.quantite),1)]),e("p",null,[A[10]||(A[10]=e("strong",null,"Ville :",-1)),h(" "+c(I(l).product.ville||"Non sp√©cifi√©e"),1)]),e("p",null,[A[11]||(A[11]=e("strong",null,"Ajout√© le :",-1)),h(" "+c(new Date(I(l).product.created_at).toLocaleDateString("fr-FR")),1)]),e("div",rr,[e("div",lr,[A[12]||(A[12]=e("i",{class:"fas fa-eye text-[10px]"},null,-1)),e("span",null,c(S((de=I(l).product.counts)==null?void 0:de.views_count))+" vues",1)]),e("div",nr,[e("i",{class:J(["fas fa-heart text-[10px]",{"text-[var(--espace-or)]":I(l).product.is_favorited_by}])},null,2),e("span",null,c(S((X=I(l).product.counts)==null?void 0:X.favorites_count))+" favoris",1)])])]),e("button",{onClick:u,class:"w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm mb-3","aria-label":I(l).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"},[e("i",{class:J(["fas fa-heart mr-2 text-sm",{"text-[var(--espace-or)]":I(l).product.is_favorited_by}])},null,2),h(" "+c(I(l).product.is_favorited_by?"Retirer des favoris":"Ajouter aux favoris"),1)],8,ir),e("div",ur,[A[17]||(A[17]=e("h2",{class:"text-base font-semibold text-[var(--espace-vert)] mb-2 font-poppins"}," √Ä propos du commer√ßant ",-1)),e("p",dr,[e("strong",null,c((y=I(l).product.commercant)==null?void 0:y.nom),1),(ae=I(l).product.commercant)!=null&&ae.verified?(t(),o("span",cr,A[13]||(A[13]=[e("i",{class:"fas fa-check-circle text-[10px]"},null,-1)]))):$("",!0)]),e("p",pr,c(((N=I(l).product.commercant)==null?void 0:N.description)||"Aucune description disponible"),1),e("p",vr,[A[14]||(A[14]=e("strong",null,"Ville :",-1)),h(" "+c(((we=I(l).product.commercant)==null?void 0:we.ville)||"Nonsp√©cifi√©e"),1)]),e("p",mr,[A[15]||(A[15]=e("strong",null,"Note :",-1)),h(" "+c(Number((ke=I(l).product.commercant)==null?void 0:ke.rating).toFixed(1)||"Non √©valu√©")+" / 5 ",1)]),U(T,{to:`/commercants/${I(l).product.commercant_id}`,class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline text-xs font-poppins","aria-label":"Voir le profil du commer√ßant"},{default:G(()=>A[16]||(A[16]=[h(" Voir le profil du commer√ßant ")])),_:1,__:[16]},8,["to"])]),e("div",fr,[((Ve=($e=I(r).user)==null?void 0:$e.commercant)==null?void 0:Ve.id)!==I(l).product.commercant_id?(t(),o("button",{key:0,onClick:M,class:"flex-1 bg-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] text-white transition-all duration-200 active:scale-95 text-sm","aria-label":"Contacter le commer√ßant"},A[18]||(A[18]=[e("i",{class:"fas fa-phone mr-2 text-sm"},null,-1),h(" Contacter le commer√ßant ")]))):$("",!0),I(l).product.collaboratif&&((ze=(Ee=I(r).user)==null?void 0:Ee.commercant)==null?void 0:ze.id)!==I(l).product.commercant_id?(t(),o("button",{key:1,onClick:C,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Collaborer sur ce produit"},A[19]||(A[19]=[e("i",{class:"fas fa-handshake mr-2 text-sm"},null,-1),h(" Collaborer ")]))):$("",!0),((Ne=(Ce=I(r).user)==null?void 0:Ce.commercant)==null?void 0:Ne.id)===I(l).product.commercant_id?(t(),o("button",{key:2,onClick:q,class:"flex-1 bg-[var(--espace-vert)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition-all duration-200 active:scale-95 text-sm","aria-label":"Modifier le produit"},A[20]||(A[20]=[e("i",{class:"fas fa-edit mr-2 text-sm"},null,-1),h(" Modifier le produit ")]))):$("",!0),((De=(Re=I(r).user)==null?void 0:Re.commercant)==null?void 0:De.id)===I(l).product.commercant_id?(t(),o("button",{key:3,onClick:ne,class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] flex items-center justify-center gap-1 font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm",disabled:!!I(l).product.boosted_until&&new Date(I(l).product.boosted_until)>new Date,"aria-label":I(l).product.boosted_until&&new Date(I(l).product.boosted_until)>new Date?"Boost d√©j√† actif":"Personnaliser le boost"},A[21]||(A[21]=[e("span",{class:"md:flex"},"Boost",-1),e("i",{class:"fas fa-rocket mr-2 text-sm"},null,-1)]),8,gr)):$("",!0),((Je=(We=I(r).user)==null?void 0:We.commercant)==null?void 0:Je.id)!==I(l).product.commercant_id?(t(),o("button",{key:4,onClick:A[0]||(A[0]=qe=>te(I(l).product.id,I(l).product.nom,I(l).product.commercant.user.id)),class:"flex-1 bg-green-500 text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-green-600 transition-all duration-200 active:scale-95 text-sm","aria-label":"Envoyer un message "},A[22]||(A[22]=[e("i",{class:"fas fa-comment mr-2 text-sm"},null,-1),h(" Envoyerun message ")]))):$("",!0)])])])]}),_:1})])):(t(),o("div",xr," Produit non trouv√©. ")),U(be,{name:"fade"},{default:G(()=>[x.value?(t(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ie(Z,["self"]),role:"dialog","aria-modal":"true","aria-label":"Proposer un prix de revente"},[e("div",br,[e("h2",hr," Collaborer sur "+c(I(l).product.nom),1),e("p",yr," Proposez un prix de revente (minimum : "+c(I(l).product.prix+(I(l).product.marge_min||0))+" XAF) ",1),e("form",{onSubmit:ie(D,["prevent"]),class:"space-y-3"},[e("div",null,[A[23]||(A[23]=e("label",{for:"prix_revente",class:"text-xs text-[var(--espace-vert)] font-medium"},"Prix de revente (XAF)",-1)),O(e("input",{id:"prix_revente","onUpdate:modelValue":A[1]||(A[1]=ee=>p.value=ee),type:"number",min:"0",class:"w-full h-10 p-2 text-xs border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--espace-or)] transition","aria-label":`Prix de revente pour ${I(l).product.nom}`,required:""},null,8,_r),[[Q,p.value,void 0,{number:!0}]]),p.value?(t(),o("p",wr," Marge potentielle : "+c(p.value-I(l).product.prix)+" XAF ",1)):$("",!0)]),e("div",{class:"flex gap-3"},[A[24]||(A[24]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-4 py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-xs","aria-label":"Envoyer la demande de collaboration"}," Envoyer ",-1)),e("button",{type:"button",onClick:Z,class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold px-4 py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):$("",!0)]),_:1}),U(be,{name:"fade"},{default:G(()=>[V.value?(t(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:A[5]||(A[5]=ie(ee=>V.value=!1,["self"])),role:"dialog","aria-modal":"true","aria-label":"Personnaliser le boost du produit"},[e("div",kr,[A[30]||(A[30]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4 font-poppins"}," Personnaliser le Boost ",-1)),e("form",{onSubmit:ie(se,["prevent"]),class:"space-y-6"},[e("div",null,[A[25]||(A[25]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Dur√©e (jours)",-1)),O(e("input",{type:"range","onUpdate:modelValue":A[2]||(A[2]=ee=>k.value=ee),min:"1",max:"20",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:B},null,544),[[Q,k.value,void 0,{number:!0}]]),e("p",$r,c(k.value)+" jours ",1)]),e("div",null,[A[26]||(A[26]=e("label",{class:"text-sm text-[var(--espace-vert)] font-medium mb-2 block"},"Objectif de vues",-1)),O(e("input",{type:"range","onUpdate:modelValue":A[3]||(A[3]=ee=>b.value=ee),min:"0",max:"4",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[var(--espace-or)]",onInput:B},null,544),[[Q,b.value,void 0,{number:!0}]]),e("p",Cr,c(d[b.value])+" vues ",1)]),e("p",Ar,[A[27]||(A[27]=h("Co√ªt estim√© : ")),e("strong",Pr,c(n.value),1),A[28]||(A[28]=h(" Jetons"))]),e("div",jr,[A[29]||(A[29]=e("button",{type:"submit",class:"flex-1 bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold py-2 rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-all duration-200 active:scale-95 text-sm"}," Confirmer ",-1)),e("button",{type:"button",onClick:A[4]||(A[4]=ee=>V.value=!1),class:"flex-1 bg-[var(--espace-gris)] text-[var(--espace-blanc)] font-semibold py-2 rounded-lg hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm","aria-label":"Annuler"}," Annuler ")])],32)])])):$("",!0)]),_:1})]),I(l).products?(t(),o("div",Sr,[A[31]||(A[31]=e("h2",{class:"text-lg sm:text-xl font-bold text-[var(--espace-vert)] mb-3 font-poppins"}," Produits similaires ",-1)),U(Ue,{name:"fade",tag:"div",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},{default:G(()=>[(t(!0),o(W,null,Y(I(l).products,ee=>(t(),pe(Le,{key:ee.id,produit:ee,onMouseover:oe=>z(ee.id),onTouchstart:oe=>H(ee.id)},null,8,["produit","onMouseover","onTouchstart"]))),128))]),_:1}),e("div",{ref_key:"loadMoreTrigger",ref:m,class:"h-10 flex items-center justify-center","aria-live":"polite","aria-busy":I(l).isLoading},[I(l).hasMore?$("",!0):(t(),o("p",Vr," Aucun produit suppl√©mentaire "))],8,Mr)])):$("",!0)])],64)}}}),kc=le(Er,[["__scopeId","data-v-ac16fcba"]]),zr={class:"relative bg-green-500"},Ir={class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)] fixed top-0 left-0 w-full z-50 shadow-md"},Fr={class:"container mx-auto px-2 sm:px-3 py-2 flex justify-between items-center gap-4"},Tr={class:"flex items-center gap-1 sm:gap-3"},Lr={class:"hidden lg:flex items-center space-x-4 sm:space-x-6 font-poppins text-sm sm:text-base"},qr=["aria-label"],Ur={class:"flex items-center gap-2"},Or=["src"],Nr={key:1,class:"w-10 h-10 rounded-full flex items-center justify-center text-[var(--espace-gris)]"},Rr={class:"relative w-full max-w-md bg-[var(--espace-blanc)] rounded-lg p-4 shadow-lg"},Dr={class:"lg:hidden fixed bottom-0 left-0 w-full bg-[var(--espace-vert)] text-[var(--espace-blanc)] shadow-md z-40"},Wr={class:"flex justify-around items-center py-2"},Jr=["aria-label"],Br=re({__name:"AppHeader",setup(F){var M;const l=xe(),_=Fe(),f=me(),r=l.user;Ae();const i=v(!1),s=v(!1),x=v(!1),p=v(""),a=Me(),m=v(!1),V=v(null),k=v(!1),b=ce(()=>[{to:"/",label:"Accueil",icon:"fa-home",badge:0},...l.user?[{to:"/profil",label:"Profil",icon:"fa-user-circle",badge:0},...l.user.commercant?[{to:"/commercant/produits",label:"Mes Produits",icon:"fa-box-open",badge:0}]:[],{to:"/collaborations",label:"Collaborations",icon:"fa-handshake",badge:_.collaborationsPending},{to:"/parrainage",label:"Mon Parrainage",icon:"fa-users",badge:0}]:[{to:"/login",label:"Connexion",icon:"fa-sign-in-alt",badge:0},{to:"/register",label:"Inscription",icon:"fa-user-plus",badge:0}]]),n=async()=>{if(l.user)try{const C=await R.get("/user/badges");_.saveCollaborationsToLocalStorage(C.data.collaborations_pending.map(D=>({produit_id:D.produit_id,prix_revente:D.prix_revente,status:D.status,created_at:D.created_at})))}catch(C){console.error("Erreur lors du chargement des badges:",C)}};ge(()=>l.user,C=>{C&&(n(),_.initializeState())},{immediate:!0}),ge(()=>_.collaborationsPending,()=>{_.collaborationsPending>0&&(s.value=!0,setTimeout(()=>s.value=!1,300))});const d=async()=>{if(p.value.trim())try{await a.fetchProducts({search:p.value.trim()},!0),p.value="",m.value=!1}catch(C){console.error("Erreur lors de la recherche:",C)}},g=C=>{if(k.value){k.value=!1;return}V.value&&!V.value.contains(C.target)&&(m.value=!1)},S=async()=>{m.value=!m.value,m.value&&(k.value=!0,await Xe())},j=()=>{f.push("/messages")};return(M=l.user)!=null&&M.id&&window.Echo.channel(`chat.${l.user.id}`).listen("MessageSent",C=>{var D;((D=l.user)==null?void 0:D.id)===C.receiver_id&&_.saveUnreadMessagesToLocalStorage(C.unread_messages)}),fe(()=>{l.user&&(n(),_.initializeState()),document.addEventListener("click",g)}),Pe(()=>{document.removeEventListener("click",g)}),(C,D)=>{const Z=ve("RouterLink");return t(),o("div",zr,[e("header",Ir,[e("div",Fr,[e("div",Tr,[U(Z,{to:"/","aria-label":"Retour √† l'accueil"},{default:G(()=>D[2]||(D[2]=[e("div",{class:"rounded-full pb-1 pt-1"},[e("img",{src:Ke,alt:"Logo Espace Cameroun",class:"h-10 w-10 object-contain transition-transform duration-300 hover:scale-105 shadow-sm hover:shadow-md"})],-1)])),_:1,__:[2]}),D[3]||(D[3]=e("h1",{class:"text-lg sm:text-xl font-bold font-poppins text-[var(--espace-blanc)]"},null,-1))]),e("nav",Lr,[(t(!0),o(W,null,Y(b.value,q=>(t(),pe(Z,{key:q.to,to:q.to,class:"hover:text-[var(--espace-or)] flex items-center gap-1 sm:gap-2 transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:G(()=>[e("i",{class:J(["fas",q.icon])},null,2),h(" "+c(q.label)+" ",1),q.badge>0?(t(),o("span",{key:0,class:J(["cart-badge bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/panier"&&i.value||q.to==="/collaborations"&&s.value||q.to==="/commandes"&&x.value}]),"aria-label":q.to==="/panier"?"Nombre d'articles dans le panier":q.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},c(q.badge),11,qr)):$("",!0)]),_:2},1032,["to"]))),128))]),U(Qe),e("div",Ur,[e("button",{onClick:S,class:"text-[var(--espace-blanc)] hover:text-[var(--espace-or)] transition-colors duration-300","aria-label":"Ouvrir la recherche"},D[4]||(D[4]=[e("i",{class:"fas fa-search text-2xl"},null,-1)])),e("button",{onClick:j,class:"text-[var(--espace-white)] px-1 rounded hover:bg-white transition"},D[5]||(D[5]=[e("i",{class:"fas fa-comment-dots text-2xl"},null,-1)])),(t(!0),o(W,null,Y(b.value.filter(q=>I(l).user?q.to==="/profil":["/login","/register"].includes(q.to)),q=>(t(),pe(Z,{key:q.to,to:q.to,class:"relative flex items-center justify-center","aria-label":q.label},{default:G(()=>{var se;return[(se=I(r))!=null&&se.photo?(t(),o("img",{key:0,src:`http://localhost:8000/storage/${I(r).photo}`,alt:"Photo de profil",class:"w-10 h-10 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Or)):(t(),o("div",Nr,[e("i",{class:J([`fas ${q.icon}`,"text-2xl text-gray-100"])},null,2)])),q.badge>0&&q.to==="/collaborations"?(t(),o("span",{key:2,class:J(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/collaborations"&&s.value}]),"aria-label":"Collaborations en attente"},c(q.badge),3)):$("",!0)]}),_:2},1032,["to","aria-label"]))),128))])]),m.value?(t(),o("div",{key:0,ref_key:"searchOverlayRef",ref:V,class:"fixed bg-[var(--espace-vert)] bg-opacity-50 flex items-center top-10 w-full justify-center z-50 p-4"},[e("div",Rr,[O(e("input",{"onUpdate:modelValue":D[0]||(D[0]=q=>p.value=q),type:"text",placeholder:"Rechercher un produit...",class:"w-full px-4 py-2 rounded-full text-[var(--espace-vert)] focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] text-base",onKeyup:Ge(d,["enter"])},null,544),[[Q,p.value]]),e("button",{onClick:d,class:"absolute right-6 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]"},D[6]||(D[6]=[e("i",{class:"fas fa-search text-lg"},null,-1)])),e("button",{onClick:D[1]||(D[1]=q=>m.value=!1),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[var(--espace-vert)] hover:text-[var(--espace-or)]","aria-label":"Fermer la recherche"},D[7]||(D[7]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])],512)):$("",!0)]),U(be,{name:"slide-up"},{default:G(()=>[e("nav",Dr,[e("div",Wr,[(t(!0),o(W,null,Y(b.value,q=>(t(),pe(Z,{key:q.to,to:q.to,"aria-label":q.label,class:"relative flex items-center justify-center w-10 h-10 hover:text-[var(--espace-or)] transition-colors duration-300","active-class":"text-[var(--espace-or)]"},{default:G(()=>[e("i",{class:J(["fas text-lg",q.icon])},null,2),q.badge>0?(t(),o("span",{key:0,class:J(["cart-badge absolute top-0 right-0 bg-[var(--espace-or)] text-[var(--espace-vert)] text-xs rounded-full h-5 w-5 flex items-center justify-center",{"animate-scale":q.to==="/panier"&&i.value||q.to==="/collaborations"&&s.value||q.to==="/commandes"&&x.value}]),"aria-label":q.to==="/panier"?"Nombre d'articles dans le panier":q.to==="/collaborations"?"Collaborations en attente":"Commandes en attente"},c(q.badge),11,Jr)):$("",!0)]),_:2},1032,["to","aria-label"]))),128))])])]),_:1})])}}}),Ze=le(Br,[["__scopeId","data-v-7f7cf147"]]),Hr={class:"min-h-screen bg-gray-100",style:{background:"url(/src/assets/images/bginsc.jpg) center/cover"}},Gr={class:"container mx-auto px-4 sm:px-6 py-6"},Xr={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},Kr={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qr={key:0,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Zr={key:1,class:"text-sm sm:text-base text-[var(--espace-gris)]"},Yr={key:2,class:"text-sm text-[var(--espace-gris)] italic"},el={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},tl=["value"],sl={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 mb-6 border border-gray-100"},ol=["value"],al={class:"flex items-center gap-2 text-sm col-span-2 sm:col-span-1"},rl=["value"],ll={class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-5 border border-gray-100"},nl={key:0,class:"flex items-center gap-3 text-[var(--espace-vert)]"},il={key:1,class:"text-base text-[var(--espace-gris)] italic"},ul={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},dl=["onClick"],cl=re({__name:"CommercantDashboard",setup(F){const l=ue(),_=v([]),f=v([]),r=v(null),i=v(!1),s=v({nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}),x=v({nom:"",description:"",ville:""}),p=v(["Douala","Yaound√©","Bamenda","Buea","Garoua"]),a=async()=>{i.value=!0;try{const[b,n,d]=await Promise.all([R.get("/commercant/produits"),R.get("/categories"),R.get("/commercant/profil")]);i.value=!1,_.value=b.data.produits.map(g=>{var S;return{...g,commercant_id:((S=r.value)==null?void 0:S.id)||""}}),f.value=n.data.categories,r.value=d.data.commercant,x.value={nom:r.value.nom,description:r.value.description||"",ville:r.value.ville||""}}catch{l.error("Erreur lors du chargement des donn√©es."),i.value=!1}},m=async()=>{try{const b=await R.post("/commercant/produits",s.value);l.success("Produit ajout√© avec succ√®s."),a(),s.value={nom:"",description:"",prix:"",photo_url:"",category_id:"",collaboratif:!1,marge_min:"",stock:"",ville:""}}catch{l.error("Erreur lors de l‚Äôajout du produit.")}},V=async b=>{if(confirm("Voulez-vous supprimer ce produit ?"))try{await R.delete(`/commercant/produits/${b}`),l.success("Produit supprim√© avec succ√®s."),a()}catch{l.error("Erreur lors de la suppression du produit.")}},k=async()=>{try{await R.put("/commercant/profil",x.value),l.success("Profil mis √† jour avec succ√®s."),a()}catch{l.error("Erreur lors de la mise √† jour du profil.")}};return fe(()=>{a()}),(b,n)=>(t(),o("div",Hr,[U(Ze),e("div",Gr,[n[26]||(n[26]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] flex items-center gap-3 mb-6"},[e("i",{class:"fas fa-store text-xl"}),h(" Espace Commer√ßant ")],-1)),e("div",Xr,[n[14]||(n[14]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-3"},"Statistiques",-1)),e("div",Kr,[r.value?(t(),o("p",Qr,[n[12]||(n[12]=e("span",{class:"font-medium"},"Revenus :",-1)),h(" "+c(r.value.revenus)+" FCFA ",1)])):$("",!0),r.value?(t(),o("p",Zr,[n[13]||(n[13]=e("span",{class:"font-medium"},"Produits vendus :",-1)),h(" "+c(r.value.produits_vendus),1)])):(t(),o("p",Yr,"Chargement..."))])]),e("div",el,[n[17]||(n[17]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Profil Commer√ßant",-1)),e("form",{onSubmit:ie(k,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[O(e("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>x.value.nom=d),type:"text",placeholder:"Nom du commer√ßant",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Q,x.value.nom]]),O(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=d=>x.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Q,x.value.description]]),O(e("select",{"onUpdate:modelValue":n[2]||(n[2]=d=>x.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2 sm:col-span-1"},[n[15]||(n[15]=e("option",{value:""},"Ville",-1)),(t(!0),o(W,null,Y(p.value,d=>(t(),o("option",{key:d,value:d},c(d),9,tl))),128))],512),[[_e,x.value.ville]]),n[16]||(n[16]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-check"})],-1))],32)]),e("div",sl,[n[22]||(n[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Ajouter un produit",-1)),e("form",{onSubmit:ie(m,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[O(e("input",{"onUpdate:modelValue":n[3]||(n[3]=d=>s.value.nom=d),type:"text",placeholder:"Nom du produit",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Q,s.value.nom]]),O(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=d=>s.value.description=d),placeholder:"Description",class:"h-24 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition col-span-2"},null,512),[[Q,s.value.description]]),O(e("input",{"onUpdate:modelValue":n[5]||(n[5]=d=>s.value.prix=d),type:"number",placeholder:"Prix",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Q,s.value.prix]]),O(e("input",{"onUpdate:modelValue":n[6]||(n[6]=d=>s.value.photo_url=d),type:"text",placeholder:"URL de la photo",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Q,s.value.photo_url]]),O(e("select",{"onUpdate:modelValue":n[7]||(n[7]=d=>s.value.category_id=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[n[18]||(n[18]=e("option",{value:""},"Cat√©gorie",-1)),(t(!0),o(W,null,Y(f.value,d=>(t(),o("option",{key:d.id,value:d.id},c(d.nom),9,ol))),128))],512),[[_e,s.value.category_id]]),e("label",al,[O(e("input",{"onUpdate:modelValue":n[8]||(n[8]=d=>s.value.collaboratif=d),type:"checkbox"},null,512),[[Be,s.value.collaboratif]]),n[19]||(n[19]=h(" Collaboratif "))]),O(e("input",{"onUpdate:modelValue":n[9]||(n[9]=d=>s.value.marge_min=d),type:"number",placeholder:"Marge minimum",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition"},null,512),[[Q,s.value.marge_min]]),O(e("input",{"onUpdate:modelValue":n[10]||(n[10]=d=>s.value.stock=d),type:"number",placeholder:"Stock",min:"0",class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},null,512),[[Q,s.value.stock]]),O(e("select",{"onUpdate:modelValue":n[11]||(n[11]=d=>s.value.ville=d),class:"h-10 p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--espace-or)] transition",required:""},[n[20]||(n[20]=e("option",{value:""},"Ville",-1)),(t(!0),o(W,null,Y(p.value,d=>(t(),o("option",{key:d,value:d},c(d),9,rl))),128))],512),[[_e,s.value.ville]]),n[21]||(n[21]=e("button",{type:"submit",class:"w-10 h-10 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition flex items-center justify-center col-span-2 sm:col-span-1"},[e("i",{class:"fas fa-plus"})],-1))],32)]),e("div",ll,[n[25]||(n[25]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Produits",-1)),i.value?(t(),o("div",nl,n[23]||(n[23]=[e("i",{class:"fas fa-spinner animate-spin text-xl"},null,-1),e("span",{class:"text-base font-poppins"},"Chargement...",-1)]))):_.value.length===0?(t(),o("div",il," Aucun produit disponible. ")):(t(),o("div",ul,[(t(!0),o(W,null,Y(_.value,d=>(t(),o("div",{key:d.id,class:"relative"},[U(Le,{produit:d},null,8,["produit"]),e("button",{onClick:g=>V(d.id),class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition flex items-center justify-center","aria-label":"Supprimer le produit"},n[24]||(n[24]=[e("i",{class:"fas fa-trash text-sm"},null,-1)]),8,dl)]))),128))]))])])]))}}),$c=le(cl,[["__scopeId","data-v-98a2ca3d"]]),pl={class:"overflow-y-scroll bg-gray-100 pt-2 pb-12 px-4 sm:px-6"},vl={class:"container mx-auto max-w-4xl"},ml={class:"bg-white rounded-lg shadow-md p-6 mb-6"},fl={key:0,class:"ml-2"},gl={class:"w-full bg-gray-200 rounded-full h-4"},xl={class:"text-[var(--espace-gris)] text-xs mt-2"},bl={key:0,class:"text-[var(--espace-gris)] text-xs mt-1"},hl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},yl={key:0,class:"mb-4"},_l={class:"text-sm text-[var(--espace-gris)]"},wl={class:"font-bold text-[var(--espace-or)]"},kl={class:"text-sm text-[var(--espace-gris)] truncate"},$l=["href"],Cl={key:1,class:"mb-4"},Al=["placeholder"],Pl={class:"flex flex-col sm:flex-row gap-2"},jl=["disabled"],Sl={key:0},Ml={key:1},Vl=["disabled"],El={key:0},zl={key:1},Il={key:2,class:"mt-4 flex flex-col sm:flex-row gap-2"},Fl={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Tl={class:"mb-4"},Ll={key:0,class:"overflow-x-auto"},ql={class:"w-full text-sm text-left text-[var(--espace-gris)]"},Ul=["onClick"],Ol={class:"px-4 py-2"},Nl={class:"px-4 py-2"},Rl={key:1,class:"text-center text-[var(--espace-gris)] py-4"},Dl={class:"bg-white rounded-lg shadow-md p-6 text-center"},Wl={class:"text-2xl sm:text-3xl font-bold text-[var(--espace-or)]"},Jl={class:"text-[var(--espace-gris)] mt-2"},Bl=re({__name:"Parrainage",setup(F){const l=xe(),_=me(),f=ue(),r=()=>{const B=window.location.hostname;return B==="localhost"||B==="127.0.0.1"?"http://localhost:4000/register":"https://espacecameroun.devfack.com/register"},i=v(""),s=v(""),x=v([]),p=v(0),a=v(""),m=v(""),V=v(!1),k=v(!1),b=v({}),n=v(null),d=v(0),g=v(0),S=v(0),j=v("all"),M=ce(()=>{var B;return((B=b.value)==null?void 0:B.couleur)||"#6b7280"}),C=ce(()=>j.value==="commercants"?x.value.filter(B=>B.est_commercant):j.value==="nonCommercants"?x.value.filter(B=>!B.est_commercant):x.value),D=async()=>{if(!l.user){f.error("Veuillez vous connecter pour acc√©der √† cette page"),_.push("/login");return}try{const z=(await R.get("/parrainages/dashboard")).data;i.value=z.code||"",s.value=i.value?`${r()}/${i.value}`:"",x.value=z.parrainages||[],p.value=z.total_gains||0,b.value=z.niveau_actuel,n.value=z.niveau_suivant,d.value=z.progression,g.value=z.total_parrainages||0,S.value=z.total_parrainages_commercants||0}catch(B){f.error("Erreur lors de la r√©cup√©ration des donn√©es de parrainage"),console.error(B)}},Z=async()=>{if(!l.user){f.error("Veuillez vous connecter");return}V.value=!0;try{const B=await R.post("/parrainages/generateCode");a.value=B.data.suggested_code,m.value=a.value,f.success("Nouveau code sugg√©r√© avec succ√®s !"),i.value&&(s.value=`${r()}/${i.value}`)}catch(B){f.error("Erreur lors de la g√©n√©ration du code"),console.error(B)}finally{V.value=!1}},q=async()=>{var B,z;if(!l.user){f.error("Veuillez vous connecter");return}if(!m.value.trim()){f.error("Veuillez entrer un code valide");return}k.value=!0;try{const H=await R.post("/parrainages/createCode",{code:m.value.trim()});i.value=H.data.code,s.value=H.data.link||`${r()}/${H.data.code}`,f.success(H.data.message||"Code cr√©√© avec succ√®s !"),await D()}catch(H){f.error(((z=(B=H.response)==null?void 0:B.data)==null?void 0:z.message)||"Erreur lors de la cr√©ation du code"),console.error(H)}finally{k.value=!1}},se=B=>{if(!s.value){f.error("Aucun lien disponible pour le partage");return}let z="";const H=encodeURIComponent(`Rejoins-moi sur Espace Cameroun avec mon lien : ${s.value}`);switch(B){case"whatsapp":z=`https://api.whatsapp.com/send?text=${H}`;break;case"facebook":z=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s.value)}`;break;default:f.error("Plateforme non prise en charge");return}window.open(z,"_blank")},ne=B=>{B.est_commercant?_.push(`/commercants/${B.id}`):_.push({name:"public-profile",params:{id:B.id}})};return fe(()=>{D()}),(B,z)=>{var H,w,u,te,P;return t(),o("div",pl,[e("div",vl,[e("div",ml,[e("h2",{class:"text-lg font-semibold mb-4",style:ye({color:M.value})},"Niveaux de Parrainage",4),e("p",{class:"text-[var(--espace-gris)] text-sm mb-2 flex justify-between",style:ye({color:M.value})},[e("div",null,[z[5]||(z[5]=h(" niveau : ")),e("strong",null,[h(c(b.value?b.value.nom:"Pas de niveau")+" "+c((H=b.value)==null?void 0:H.emoji)+" ",1),e("div",null," ("+c(S.value)+"/"+c(n.value?n.value.filleuls_requis:(w=b.value)==null?void 0:w.filleuls_requis)+" commer√ßants) ",1)])]),((u=n.value)==null?void 0:u.jetons_bonus)>0?(t(),o("span",fl,"+"+c((te=n.value)==null?void 0:te.jetons_bonus)+" jetons ",1)):$("",!0)],4),e("div",gl,[e("div",{class:"h-4 rounded-full bg-[var(--espace-or)] transition-all duration-300",style:ye({width:`${d.value}%`,background:`${M.value}`})},null,4)]),e("p",xl," Prochain niveau : "+c(n.value?n.value.nom:"L√©gende üèÜ")+" √† "+c(n.value?n.value.filleuls_requis:"1000+")+" commer√ßants ",1),(P=b.value.avantages)!=null&&P.length?(t(),o("p",bl," Avantages : "+c(b.value.avantages.join(", ")),1)):$("",!0),e("button",{onClick:z[0]||(z[0]=E=>I(_).push("/parrainage/info")),class:"mt-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},z[6]||(z[6]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),h(" En savoir plus ")]))]),z[24]||(z[24]=e("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6"},[e("p",{class:"text-[var(--espace-gris)] text-sm sm:text-base"}," Invitez des amis avec votre lien ou code unique et gagnez des r√©compenses ! Atteignez des niveaux sup√©rieurs pour d√©bloquer des jetons et des avantages. ")],-1)),e("div",hl,[z[15]||(z[15]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Votre Code de Parrainage",-1)),i.value?(t(),o("div",yl,[e("p",_l,[z[7]||(z[7]=h(" Code : ")),e("span",wl,c(i.value),1)]),e("p",kl,[z[8]||(z[8]=h(" Lien : ")),e("a",{href:s.value,target:"_blank",class:"text-blue-500 underline hover:text-blue-700"},c(s.value),9,$l)])])):(t(),o("div",Cl,[O(e("input",{"onUpdate:modelValue":z[1]||(z[1]=E=>m.value=E),type:"text",placeholder:a.value||"Entrez ou g√©n√©rez un code (ex: DOM2025)",class:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",maxlength:"10"},null,8,Al),[[Q,m.value]]),e("div",Pl,[e("button",{onClick:Z,disabled:V.value,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition flex-1 disabled:opacity-50"},[V.value?(t(),o("span",Sl,z[9]||(z[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" G√©n√©ration... ")]))):(t(),o("span",Ml,z[10]||(z[10]=[e("i",{class:"fas fa-magic mr-2"},null,-1),h(" G√©n√©rer un code ")])))],8,jl),e("button",{onClick:q,disabled:k.value||!m.value.trim(),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1 disabled:opacity-50"},[k.value?(t(),o("span",El,z[11]||(z[11]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" Cr√©ation... ")]))):(t(),o("span",zl,z[12]||(z[12]=[e("i",{class:"fas fa-check mr-2"},null,-1),h(" Cr√©er le code ")])))],8,Vl)])])),i.value?(t(),o("div",Il,[e("button",{onClick:z[2]||(z[2]=E=>se("whatsapp")),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition flex-1"},z[13]||(z[13]=[e("i",{class:"fab fa-whatsapp mr-2"},null,-1),h(" Partager sur WhatsApp ")])),e("button",{onClick:z[3]||(z[3]=E=>se("facebook")),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition flex-1"},z[14]||(z[14]=[e("i",{class:"fab fa-facebook-f mr-2"},null,-1),h(" Partager sur Facebook ")]))])):$("",!0)]),e("div",Fl,[z[18]||(z[18]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Mes Utilisateurs Parrain√©s",-1)),e("div",Tl,[O(e("select",{"onUpdate:modelValue":z[4]||(z[4]=E=>j.value=E),class:"w-full sm:w-1/3 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]"},z[16]||(z[16]=[e("option",{value:"all"},"Tous",-1),e("option",{value:"commercants"},"Commer√ßants",-1),e("option",{value:"nonCommercants"},"Non Commer√ßants",-1)]),512),[[_e,j.value]])]),C.value.length?(t(),o("div",Ll,[e("table",ql,[z[17]||(z[17]=e("thead",{class:"bg-[var(--espace-vert)] text-[var(--espace-blanc)]"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nom"),e("th",{class:"px-4 py-2"},"Date d'inscription"),e("th",{class:"px-4 py-2"},"Est commer√ßant")])],-1)),e("tbody",null,[(t(!0),o(W,null,Y(C.value,E=>(t(),o("tr",{key:E.id,class:"border-b hover:bg-gray-50"},[e("td",{class:"px-4 py-2 cursor-pointer text-blue-500 hover:underline",onClick:K=>ne(E)},c(E.filleul_nom||"Anonyme"),9,Ul),e("td",Ol,c(new Date(E.date_inscription).toLocaleDateString("fr-FR")),1),e("td",Nl,c(E.est_commercant?"Oui":"Non"),1)]))),128))])])])):(t(),o("p",Rl," Aucun utilisateur parrain√© correspondant au filtre. Commencez √† inviter d√®s maintenant ! "))]),e("div",Dl,[z[22]||(z[22]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-2"},"Vos Gains",-1)),e("p",Wl,c(p.value)+" jetons ",1),e("p",Jl,[z[19]||(z[19]=h(" üéâ Vous avez invit√© ")),e("strong",null,c(g.value),1),z[20]||(z[20]=h(" utilisateurs, dont ")),e("strong",null,c(S.value),1),z[21]||(z[21]=h(" sont commer√ßants ! "))]),z[23]||(z[23]=e("p",{class:"text-[var(--espace-gris)] mt-2"}," D√©bloquez plus de jetons et d'avantages en atteignant les niveaux sup√©rieurs. ",-1))])])])}}}),Cc=le(Bl,[["__scopeId","data-v-0fd3a558"]]),Hl={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Gl={class:"container mx-auto max-w-4xl"},Xl={class:"flex border-b border-gray-300 mb-6"},Kl={key:0},Ql={key:0,class:"grid grid-cols-1 gap-4"},Zl={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Yl=["onClick"],en={class:"text-sm text-[var(--espace-gris)]"},tn={class:"text-sm text-[var(--espace-gris)]"},sn=["onClick"],on={class:"flex flex gap-2"},an=["onClick"],rn=["onClick"],ln=["onClick"],nn={key:1,class:"text-center text-[var(--espace-gris)]"},un={key:1},dn={key:0,class:"grid grid-cols-1 gap-4"},cn={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},pn=["onClick"],vn={class:"text-sm text-[var(--espace-gris)]"},mn={class:"text-sm text-[var(--espace-gris)]"},fn=["onClick"],gn=["onClick"],xn={key:1,class:"text-center text-[var(--espace-gris)]"},bn=re({__name:"Collaborations",setup(F){const l=V=>{localStorage.setItem("pending_collaborations",JSON.stringify(V))},_=ue(),f=me(),r=v({sent_collaborations:[],received_collaborations:[]}),i=v(!0),s=v("received"),x=async()=>{try{const V=await R.get("/collaborations");r.value=V.data;const k=JSON.parse(localStorage.getItem("pending_collaborations")||"[]");if(k.length>0){const b=new Set(r.value.sent_collaborations.map(d=>d.produit_id)),n=k.filter(d=>!b.has(d.produit_id));n.length!==k.length&&l(n)}}catch{_.error("Erreur lors du chargement des collaborations")}finally{i.value=!1}},p=V=>{f.push({path:`/produits/${V}`})},a=V=>{var b,n,d;const k=((b=V.commercant)==null?void 0:b.id)||((d=(n=V.produit)==null?void 0:n.commercant)==null?void 0:d.id);k?f.push({path:`/commercants/${k}`}):_.error("Profil du commer√ßant non disponible")},m=async(V,k)=>{var b;try{const n=await R.post(`/collaborations/${V}`,{statut:k});_.success(n.data.message),await x()}catch(n){_.error(`Erreur lors de la mise √† jour de la collaboration${(b=n.response)==null?void 0:b.data.message}`)}};return fe(()=>{i.value=!0,x()}),(V,k)=>{var b,n,d,g;return t(),o(W,null,[U(je,{isLoading:i.value},null,8,["isLoading"]),e("div",Hl,[e("div",Gl,[k[4]||(k[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6"},[e("i",{class:"fas fa-handshake mr-2 text-[var(--espace-or)]"}),h(" Mes Collaborations ")],-1)),e("div",Xl,[e("button",{class:J(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":s.value==="received","text-[var(--espace-gris)]":s.value!=="received"}]),onClick:k[0]||(k[0]=S=>s.value="received")}," Collaborations re√ßues ",2),e("button",{class:J(["px-4 py-2 font-semibold",{"text-[var(--espace-vert)] border-b-2 border-[var(--espace-vert)]":s.value==="sent","text-[var(--espace-gris)]":s.value!=="sent"}]),onClick:k[1]||(k[1]=S=>s.value="sent")}," Collaborations envoy√©es ",2)]),s.value==="received"?(t(),o("div",Kl,[(n=(b=r.value)==null?void 0:b.received_collaborations)!=null&&n.length?(t(),o("div",Ql,[(t(!0),o(W,null,Y(r.value.received_collaborations,S=>(t(),o("div",{key:S.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",Zl,[e("div",null,[e("h2",{onClick:j=>p(S.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},c(S.produit.nom),9,Yl),e("p",en," Prix de revente propos√© : "+c(S.prix_revente)+" FCFA ",1),e("p",tn,[k[2]||(k[2]=h(" Statut : ")),e("span",{class:J({"text-green-600":S.statut==="valider","text-yellow-600":S.statut==="en_attente","text-red-600":S.statut==="refuser"})},c(S.statut==="en_attente"?"En attente":S.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:j=>a(S),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,sn)]),e("div",on,[S.statut==="en_attente"?(t(),o("button",{key:0,onClick:j=>m(S.id,"valider"),class:"bg-green-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-green-700 transition text-xs sm:text-sm"}," Valider ",8,an)):$("",!0),S.statut==="en_attente"?(t(),o("button",{key:1,onClick:j=>m(S.id,"refuser"),class:"bg-red-600 text-white font-semibold px-3 py-1.5 rounded hover:bg-red-700 transition text-xs sm:text-sm"}," Rejeter ",8,rn)):$("",!0),e("button",{onClick:j=>p(S.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,ln)])])]))),128))])):(t(),o("p",nn," Aucune collaboration re√ßue pour le moment. "))])):$("",!0),s.value==="sent"?(t(),o("div",un,[(g=(d=r.value)==null?void 0:d.sent_collaborations)!=null&&g.length?(t(),o("div",dn,[(t(!0),o(W,null,Y(r.value.sent_collaborations,S=>(t(),o("div",{key:S.id,class:"bg-[var(--espace-blanc)] rounded-lg shadow-md p-4 hover:shadow-lg transition"},[e("div",cn,[e("div",null,[e("h2",{onClick:j=>p(S.produit_id),class:"text-lg font-semibold text-[var(--espace-vert)] hover:text-[var(--espace-or)] hover:underline cursor-pointer"},c(S.produit.nom),9,pn),e("p",vn," Prix de revente propos√© : "+c(S.prix_revente)+" FCFA ",1),e("p",mn,[k[3]||(k[3]=h(" Statut : ")),e("span",{class:J({"text-green-600":S.statut==="valider","text-yellow-600":S.statut==="en_attente","text-red-600":S.statut==="refuser"})},c(S.statut==="en_attente"?"En attente":S.statut==="valider"?"Valider":"Refus√©e"),3)]),e("button",{onClick:j=>a(S),class:"mt-2 text-sm text-[var(--espace-or)] hover:underline"}," Voir le profil du commer√ßant ",8,fn)]),e("button",{onClick:j=>p(S.produit_id),class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-semibold px-3 py-1.5 rounded hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition sm:text-sm text-xs"}," Voir le produit ",8,gn)])]))),128))])):(t(),o("p",xn," Aucune collaboration envoy√©e pour le moment. "))])):$("",!0)])])],64)}}}),Ac=le(bn,[["__scopeId","data-v-b592e1c5"]]),hn={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},yn={class:"overflow-y-scroll h-full pb-16 bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl relative border border-gray-200"},_n={key:0,class:"mb-8"},wn={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},kn=["disabled"],$n={key:0,class:"fas fa-spinner fa-spin mr-2"},Cn={key:1,class:"space-y-4 mb-6"},An={class:"flex items-center gap-3"},Pn={class:"text-[var(--espace-vert)] font-medium"},jn={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},Sn={class:"flex items-center gap-2"},Mn=["onClick"],Vn=["onClick"],En={key:2,class:"text-center text-gray-500"},zn=re({__name:"WalletManager",props:{show:{type:Boolean},wallets:{}},emits:["close","refresh-wallets"],setup(F,{emit:l}){const _=l,f=ue(),r=v(!1),i=v(!1),s=v({id:null,phone_number:"",payment_service:""}),x=()=>{i.value=!0,s.value={id:null,phone_number:"",payment_service:""}},p=k=>{i.value=!0,s.value={id:k.id,phone_number:k.phone_number,payment_service:k.payment_service}},a=()=>{i.value=!1,s.value={id:null,phone_number:"",payment_service:""}},m=async()=>{var b,n;if(!/^6[0-9]{8}$/.test(s.value.phone_number)){f.error("Le num√©ro de t√©l√©phone doit commencer par 6 et contenir 9 chiffres.");return}r.value=!0;try{s.value.id?(await R.put(`/wallets/${s.value.id}`,s.value),f.success("Portefeuille mis √† jour avec succ√®s !")):(await R.post("/wallets",s.value),f.success("Portefeuille cr√©√© avec succ√®s !")),_("refresh-wallets"),a()}catch(d){f.error(((n=(b=d.response)==null?void 0:b.data)==null?void 0:n.message)||"Erreur lors de la sauvegarde du portefeuille"),console.error("Erreur:",d)}finally{r.value=!1}},V=async k=>{var b,n;if(confirm("√ätes-vous s√ªr de vouloir supprimer ce portefeuille ?")){r.value=!0;try{await R.delete(`/wallets/${k}`),f.success("Portefeuille supprim√© avec succ√®s !"),_("refresh-wallets")}catch(d){f.error(((n=(b=d.response)==null?void 0:b.data)==null?void 0:n.message)||"Erreur lors de la suppression du portefeuille"),console.error("Erreur:",d)}finally{r.value=!1}}};return(k,b)=>k.show?(t(),o("div",hn,[e("div",yn,[e("button",{onClick:b[0]||(b[0]=n=>k.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),b[9]||(b[9]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ G√©rer Mes Portefeuilles",-1)),i.value?(t(),o("div",_n,[e("form",{onSubmit:ie(m,["prevent"]),class:J(["space-y-5",{"bg-green-50 p-4 rounded-lg":!s.value.id,"bg-yellow-50 p-4 rounded-lg":s.value.id}])},[e("h3",wn,c(s.value.id?"Modifier le Portefeuille":"Cr√©er un Nouveau Portefeuille"),1),e("div",null,[b[3]||(b[3]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),O(e("input",{"onUpdate:modelValue":b[1]||(b[1]=n=>s.value.phone_number=n),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Q,s.value.phone_number]])]),e("div",null,[b[5]||(b[5]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),O(e("select",{"onUpdate:modelValue":b[2]||(b[2]=n=>s.value.payment_service=n),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},b[4]||(b[4]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[_e,s.value.payment_service]])]),e("button",{type:"submit",disabled:r.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[r.value?(t(),o("i",$n)):$("",!0),h(" "+c(s.value.id?"Mettre √† jour":"Cr√©er"),1)],8,kn),e("button",{onClick:a,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):$("",!0),k.wallets&&k.wallets.length>0?(t(),o("div",Cn,[(t(!0),o(W,null,Y(k.wallets,n=>(t(),o("div",{key:n.id||n.phone_number,class:J(["p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3",{"bg-orange-50":n.payment_service==="ORANGE","bg-purple-50":n.payment_service==="MTN"}])},[e("div",An,[e("span",Pn,c(n.phone_number)+" ("+c(n.payment_service)+") ",1),n.is_active!==!1?(t(),o("span",jn,"Actif")):$("",!0)]),e("div",Sn,[e("button",{onClick:d=>p(n),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},b[6]||(b[6]=[e("i",{class:"fas fa-edit"},null,-1),h(" Modifier ")]),8,Mn),e("button",{onClick:d=>V(n.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},b[7]||(b[7]=[e("i",{class:"fas fa-trash"},null,-1),h(" Supprimer ")]),8,Vn)])],2))),128))])):(t(),o("p",En,"Aucun portefeuille cr√©√©.")),i.value?$("",!0):(t(),o("button",{key:3,onClick:x,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition mt-4"},b[8]||(b[8]=[e("i",{class:"fas fa-plus"},null,-1),h(" Ajouter un portefeuille ")])))])])):$("",!0)}}),In=le(zn,[["__scopeId","data-v-7c50b5d1"]]),Fn={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm p-4"},Tn={class:"h-full overflow-y-scroll pb-16 relative bg-white p-6 md:p-8 rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-200 flex flex-col h-full"},Ln={class:"flex-1 overflow-y-auto pr-2 space-y-4 mb-4"},qn={key:0,class:"space-y-4"},Un={class:"flex flex-col"},On={class:"text-[var(--espace-vert)] font-medium"},Nn={class:"text-xs text-gray-500"},Rn={class:"text-gray-700 text-sm sm:text-base"},Dn={class:"flex items-center gap-2"},Wn=["onClick"],Jn=["onClick"],Bn={key:1,class:"text-center text-gray-500"},Hn={key:0,class:"border-t pt-4 mt-2 bg-gray-50 rounded-lg"},Gn={class:"text-lg font-semibold text-[var(--espace-vert)] text-center"},Xn=["value"],Kn=["disabled"],Qn={key:0,class:"fas fa-spinner fa-spin mr-2"},Zn={key:1,class:"border-t pt-4 mt-2"},Yn=re({__name:"OfferManager",props:{show:{type:Boolean},offers:{},wallets:{}},emits:["close","refresh-offers"],setup(F,{emit:l}){const _=F,f=l,r=ue(),i=v(!1),s=v([..._.offers]);ge(()=>_.offers,n=>{s.value=[...n]},{deep:!0});const x=v(!1),p=v({id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}),a=()=>{x.value=!0,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},m=n=>{x.value=!0,p.value={id:n.id,nombre_jetons:n.nombre_jetons,prix_unitaire:n.prix_unitaire,description:n.description||"",wallet_id:n.wallet_id}},V=()=>{x.value=!1,p.value={id:null,nombre_jetons:0,prix_unitaire:0,description:"",wallet_id:""}},k=async()=>{var n,d;i.value=!0;try{if(p.value.id){const g=await R.put(`/jeton_market/updateOffer/${p.value.id}`,p.value);r.success("Offre mise √† jour avec succ√®s !");const S=s.value.findIndex(j=>j.id===p.value.id);S!==-1&&(s.value[S]={...s.value[S],...p.value})}else{const g=await R.post("/jeton_market/offer",p.value);r.success("Offre cr√©√©e avec succ√®s !"),s.value.push(g.data)}f("refresh-offers"),V()}catch(g){r.error(((d=(n=g.response)==null?void 0:n.data)==null?void 0:d.message)||"Erreur lors de la sauvegarde de l'offre"),console.error("Erreur:",g)}finally{i.value=!1}},b=async n=>{var d,g;if(confirm("√ätes-vous s√ªr de vouloir supprimer cette offre ?")){i.value=!0;try{await R.delete(`/jeton_market/deleteOffer/${n}`),r.success("Offre supprim√©e avec succ√®s !"),s.value=s.value.filter(S=>S.id!==n),f("refresh-offers")}catch(S){r.error(((g=(d=S.response)==null?void 0:d.data)==null?void 0:g.message)||"Erreur lors de la suppression de l'offre"),console.error("Erreur:",S)}finally{i.value=!1}}};return(n,d)=>n.show?(t(),o("div",Fn,[e("div",Tn,[e("button",{onClick:d[0]||(d[0]=g=>n.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),d[12]||(d[12]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìã Mes Offres",-1)),e("div",Ln,[s.value.length>0?(t(),o("div",qn,[(t(!0),o(W,null,Y(s.value,g=>{var S,j;return t(),o("div",{key:g.id,class:"p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 bg-gray-50 shadow-sm hover:shadow-md transition"},[e("div",Un,[e("span",On,c(g.nombre_jetons)+" jetons ‚Ä¢ "+c(g.total_prix)+" FCFA ",1),e("span",Nn,"PU : "+c(g.prix_unitaire)+" FCFA",1),e("p",Rn,[d[4]||(d[4]=e("strong",null,"üí≥ ",-1)),h(" "+c((S=g.wallet)==null?void 0:S.phone_number)+" ("+c((j=g.wallet)==null?void 0:j.payment_service)+") ",1)])]),e("div",Dn,[e("button",{onClick:M=>m(g),class:"flex items-center gap-1 text-blue-500 bg-blue-100 px-2 py-1 rounded hover:bg-blue-200 transition"},d[5]||(d[5]=[e("i",{class:"fas fa-edit"},null,-1),h(" Modifier ")]),8,Wn),e("button",{onClick:M=>b(g.id),class:"flex items-center gap-1 text-red-500 bg-red-100 px-2 py-1 rounded hover:bg-red-200 transition"},d[6]||(d[6]=[e("i",{class:"fas fa-trash"},null,-1),h(" Supprimer ")]),8,Jn)])])}),128))])):(t(),o("p",Bn,"Aucune offre cr√©√©e."))]),x.value?(t(),o("div",Hn,[e("form",{onSubmit:ie(k,["prevent"]),class:J(["space-y-4",{"bg-green-50 p-4 rounded-lg":!p.value.id,"bg-yellow-50 p-4 rounded-lg":p.value.id}])},[e("h3",Gn,c(p.value.id?"Modifier l'offre":"Cr√©er une nouvelle offre"),1),e("div",null,[d[7]||(d[7]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),O(e("input",{"onUpdate:modelValue":d[1]||(d[1]=g=>p.value.nombre_jetons=g),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Q,p.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[d[8]||(d[8]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":d[2]||(d[2]=g=>p.value.prix_unitaire=g),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Q,p.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[d[10]||(d[10]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille",-1)),O(e("select",{"onUpdate:modelValue":d[3]||(d[3]=g=>p.value.wallet_id=g),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[d[9]||(d[9]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),o(W,null,Y(n.wallets,g=>(t(),o("option",{key:g.id,value:g.id},c(g.phone_number)+" ("+c(g.payment_service)+") ",9,Xn))),128))],512),[[_e,p.value.wallet_id]])]),e("button",{type:"submit",disabled:i.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[i.value?(t(),o("i",Qn)):$("",!0),h(" "+c(p.value.id?"Mettre √† jour":"Cr√©er"),1)],8,Kn),e("button",{onClick:V,type:"button",class:"w-full mt-2 text-gray-500 hover:underline"},"Annuler")],34)])):(t(),o("div",Zn,[e("button",{onClick:a,type:"button",class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},d[11]||(d[11]=[e("i",{class:"fas fa-plus"},null,-1),h(" Nouvelle offre ")]))]))])])):$("",!0)}}),ei=le(Yn,[["__scopeId","data-v-03e4f804"]]),ti={class:"w-full pt-5 px-6 bg-gradient-to-b from-gray-50 to-gray-100 relative h-full"},si={class:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md shadow-md px-4 py-1 flex items-center justify-between"},oi={class:"flex items-center justify-between mb-4"},ai={class:"flex items-center gap-3"},ri=["src"],li={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},ni={class:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"},ii={class:"text-gray-700 text-sm sm:text-base"},ui={class:"text-gray-700 text-sm sm:text-base"},di={class:"text-xs text-gray-500 mt-3"},ci=["onClick"],pi={key:0,class:"col-span-full text-center py-4"},vi={key:1,class:"text-center text-gray-600 py-24"},mi={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},fi={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},gi=["value"],xi={class:"text-sm text-gray-500"},bi={class:"font-bold"},hi={class:"font-bold"},yi=["disabled"],_i={key:0,class:"fas fa-spinner fa-spin mr-2"},wi={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},ki={class:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md relative"},$i={class:"space-y-4"},Ci={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Ai={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Pi=["value"],ji={class:"text-sm text-[var(--espace-gris)]"},Si={class:"font-bold"},Mi=["disabled"],Vi={key:0,class:"fas fa-spinner fa-spin mr-2"},Ei={key:1,class:""},zi={key:2,class:""},Ii={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm"},Fi={class:"bg-white p-8 rounded-3xl w-full max-w-lg shadow-2xl relative border border-gray-200"},Ti=["disabled"],Li={key:0,class:"fas fa-spinner fa-spin mr-2"},qi={class:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md shadow-md px-4 py-3 flex items-center justify-around md:justify-between"},Ui=re({__name:"JetonMarket",setup(F){const l=()=>{const X=window.location.hostname;return X==="localhost"||X==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},_=ce(()=>l());me();const f=v([]),r=v([]),i=v({quantityMin:""}),s=v(!1),x=v(!1),p=v({nombre_jetons:0,prix_unitaire:0,description:"",walletId:""}),a=v(!1),m=v(1),V=v(1),k=v(!1),b=v(!0),n=v(!1),d=v(!1),g=v({walletId:""}),S=v(null),j=v(0),M=v([]),C=v(!1),D=v({id:0,phone_number:"",payment_service:""}),Z=v(!1),q=v(!1),se=ue(),ne=()=>{s.value=!1,x.value=!1,d.value=!1,C.value=!1,Z.value=!1,q.value=!1},B=async()=>{try{const X=await R.get("/wallets");M.value=X.data.data||[]}catch(X){console.error("Erreur lors du chargement des portefeuilles:",X),M.value=[]}},z=async()=>{try{const X=await R.get("/jeton_market/my-offers");r.value=X.data.data||[]}catch(X){console.error("Erreur lors du chargement des offres de l'utilisateur:",X),r.value=[]}},H=async()=>{await B(),ne(),M.value.length===0?C.value=!0:s.value=!0},w=async()=>{var X,y;a.value=!0;try{ne();const ae=await R.post("/wallets",D.value);se.success(ae.data.message||"Portefeuille cr√©√© avec succ√®s !"),C.value=!1,await B(),s.value=!0}catch(ae){se.error(((y=(X=ae.response)==null?void 0:X.data)==null?void 0:y.message)||"Erreur lors de la cr√©ation du portefeuille"),console.error("Erreur:",ae)}finally{a.value=!1,D.value={id:0,phone_number:"",payment_service:""}}},u=()=>{x.value=!1,m.value=1,f.value=[],L()},te=async()=>{n.value=!0,m.value=1,f.value=[],await L(),n.value=!1},P=ce(()=>f.value.filter(X=>!i.value.quantityMin||X.nombre_jetons>=parseInt(i.value.quantityMin,10))),E=ce(()=>p.value.nombre_jetons*p.value.prix_unitaire),K=ce(()=>E.value*.05),L=async()=>{if(!(k.value||m.value>V.value)){k.value=!0;try{const X={page:m.value,quantity_min:i.value.quantityMin||void 0},y=await R.get("/jeton_market/offers",{params:X});f.value=[...f.value,...y.data.data],V.value=y.data.last_page,m.value+=1}catch(X){console.error("Erreur lors du chargement des offres:",X)}finally{k.value=!1,b.value=!1}}},A=()=>{const X=document.querySelector(".grid");if(X){const{scrollTop:y,clientHeight:ae,scrollHeight:N}=X;y+ae>=N-300&&!k.value&&L()}},T=async()=>{var X,y,ae;if(!p.value.walletId){se.error("Veuillez s√©lectionner un portefeuille.");return}a.value=!0;try{const N=await R.post("/jeton_market/offer",{...p.value,wallet_id:p.value.walletId,total_price:E.value});s.value=!1,se.success(((X=N==null?void 0:N.data)==null?void 0:X.message)||"Offre cr√©√©e avec succ√®s !"),L()}catch(N){se.error(((ae=(y=N.response)==null?void 0:y.data)==null?void 0:ae.message)||"Erreur lors de la cr√©ation de l'offre"),console.error("Erreur lors de la cr√©ation de l'offre:",N.response)}finally{a.value=!1}},ee=(X,y,ae)=>{ne();const N=f.value.find(we=>we.id===X);N&&(S.value=X,j.value=N.total_prix,g.value.walletId="",d.value=!0)},oe=async()=>{var X,y;if(!S.value||!g.value.walletId){se.error("Veuillez s√©lectionner un portefeuille.");return}a.value=!0;try{const ae=await R.post(`/jeton_market/buy/${S.value}`,{wallet_id:g.value.walletId});d.value=!1,L(),se.success(ae.data.message||"Achat effectu√© avec succ√®s !")}catch(ae){console.error("Erreur lors de l'achat:",ae.response.data.message),se.error(((y=(X=ae.response)==null?void 0:X.data)==null?void 0:y.message)||"Erreur lors de l'achat")}finally{a.value=!1,S.value=null,j.value=0}},de=X=>{var y;return(y=X.user)!=null&&y.commercant?`/commercants/${X.user.commercant.id}`:`/profile/public/${X.user_id}`};return fe(()=>{b.value=!0,L(),B(),z(),window.addEventListener("scroll",A)}),Pe(()=>{window.removeEventListener("scroll",A)}),(X,y)=>{const ae=ve("router-link");return t(),o(W,null,[U(je,{isLoading:b.value},null,8,["isLoading"]),e("div",ti,[e("div",si,[U(ae,{to:"home",class:"flex items-center gap-2 text-[var(--espace-vert)] hover:text-[var(--espace-or)] transition rounded-xl p-1 sm:p-2"},{default:G(()=>y[16]||(y[16]=[e("i",{class:"fas fa-arrow-left text-lg sm:text-xl"},null,-1),e("span",{class:"hidden sm:inline font-semibold"},"Retour",-1)])),_:1,__:[16]}),y[17]||(y[17]=e("div",{class:"text-center"},[e("h1",{class:"text-xl font-bold text-[var(--espace-vert)]"},"üåç March√©"),e("p",{class:"text-xs text-gray-600 mt-0 sm:mt-3"},"Achetez & vendez vos jetons en toute s√©curit√© üöÄ")],-1)),y[18]||(y[18]=e("div",{class:"w-10"},null,-1))]),f.value.length>0?(t(),o("div",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6 gap-3 mt-4",onScrollPassive:A},[(t(!0),o(W,null,Y(P.value,N=>(t(),o("div",{key:N.id,class:"bg-white py-6 px-3 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:-translate-y-2 hover:border-[var(--espace-or)]"},[e("div",oi,[e("div",ai,[U(ae,{to:de(N),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden cursor-pointer"},{default:G(()=>[N.user.photo?(t(),o("img",{key:0,src:_.value+N.user.photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,ri)):(t(),o("i",li))]),_:2},1032,["to"]),U(ae,{to:de(N),class:"text-lg font-bold text-[var(--espace-vert)] truncate hover:underline"},{default:G(()=>[h(c(N.user.nom),1)]),_:2},1032,["to"])]),e("span",ni,[h(c(N.nombre_jetons)+" ",1),y[19]||(y[19]=e("i",{class:"fas fa-coins"},null,-1))])]),e("p",ii,[y[20]||(y[20]=e("strong",null,"üíµ Prix :",-1)),h(" "+c(N.prix_unitaire)+" FCFA/jeton",1)]),e("p",ui,[y[21]||(y[21]=e("strong",null,"üí∞ Total :",-1)),h(" "+c(N.total_prix)+" FCFA ",1)]),e("p",di,"üìÖ Publi√©e le "+c(new Date(N.date_creation).toLocaleDateString()),1),e("button",{onClick:we=>{var ke,$e;return ee(N.id,(ke=N.wallet)==null?void 0:ke.phone_number,($e=N.wallet)==null?void 0:$e.payment_service)},class:"mt-6 w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] px-3 py-2 sm:px-4 sm:py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition text-sm sm:text-base"}," ‚ö° Acheter ",8,ci)]))),128)),a.value?(t(),o("div",pi,y[22]||(y[22]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-[var(--espace-vert)]"},null,-1)]))):$("",!0)],32)):(t(),o("div",vi,[y[25]||(y[25]=e("i",{class:"fas fa-box-open text-6xl text-gray-400 mb-6"},null,-1)),y[26]||(y[26]=e("p",{class:"text-xl"},"Aucune offre disponible pour le moment.",-1)),e("p",{class:"mt-3"},[y[23]||(y[23]=h("Soyez le premier √† ")),e("span",{class:"font-bold text-[var(--espace-vert)] cursor-pointer underline",onClick:H},"poster une offre"),y[24]||(y[24]=h(" üéâ"))])])),U(be,{name:"fade"},{default:G(()=>[s.value?(t(),o("div",mi,[e("div",fi,[e("button",{onClick:y[0]||(y[0]=N=>s.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),y[35]||(y[35]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üìù Nouvelle Offre",-1)),e("form",{onSubmit:ie(T,["prevent"]),class:"space-y-5"},[e("div",null,[y[27]||(y[27]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Quantit√©",-1)),O(e("input",{"onUpdate:modelValue":y[1]||(y[1]=N=>p.value.nombre_jetons=N),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Q,p.value.nombre_jetons,void 0,{number:!0}]])]),e("div",null,[y[28]||(y[28]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Prix unitaire (FCFA)",-1)),O(e("input",{"onUpdate:modelValue":y[2]||(y[2]=N=>p.value.prix_unitaire=N),type:"number",min:"1",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},null,512),[[Q,p.value.prix_unitaire,void 0,{number:!0}]])]),e("div",null,[y[30]||(y[30]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Portefeuille √† utiliser",-1)),O(e("select",{"onUpdate:modelValue":y[3]||(y[3]=N=>p.value.walletId=N),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[y[29]||(y[29]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),o(W,null,Y(M.value,N=>(t(),o("option",{key:N.id,value:N.id},c(N.phone_number)+" ("+c(N.payment_service)+") ",9,gi))),128))],512),[[_e,p.value.walletId]])]),e("p",xi,[y[31]||(y[31]=h("üí∞ Total: ")),e("span",bi,c(E.value),1),y[32]||(y[32]=h(" FCFA | üè¶ Commission (5%): ")),e("span",hi,c(K.value),1),y[33]||(y[33]=h(" FCFA"))]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),o("i",_i)):$("",!0),y[34]||(y[34]=h(" Publier "))],8,yi)],32)])])):$("",!0)]),_:1}),U(be,{name:"fade"},{default:G(()=>[x.value?(t(),o("div",wi,[e("div",ki,[e("button",{onClick:y[4]||(y[4]=N=>x.value=!1),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},"‚úñ"),y[36]||(y[36]=e("h2",{class:"text-lg font-bold text-[var(--espace-vert)] mb-4"},"üéõÔ∏è Filtres",-1)),e("div",$i,[O(e("input",{"onUpdate:modelValue":y[5]||(y[5]=N=>i.value.quantityMin=N),type:"number",placeholder:"Quantit√© min",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)]"},null,512),[[Q,i.value.quantityMin,void 0,{number:!0}]])]),e("button",{onClick:u,class:"mt-6 w-full bg-[var(--espace-or)] text-[var(--espace-vert)] py-3 rounded-xl font-bold hover:bg-[var(--espace-vert)] hover:text-white transition"}," üîç Appliquer ")])])):$("",!0)]),_:1}),U(be,{name:"fade"},{default:G(()=>[d.value?(t(),o("div",Ci,[e("div",Ai,[e("button",{onClick:y[6]||(y[6]=N=>d.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),y[41]||(y[41]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üì≤ Paiement",-1)),e("form",{onSubmit:ie(oe,["prevent"]),class:"space-y-5"},[e("div",null,[y[38]||(y[38]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"S√©lectionnez votre portefeuille",-1)),O(e("select",{"onUpdate:modelValue":y[7]||(y[7]=N=>g.value.walletId=N),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},[y[37]||(y[37]=e("option",{value:"",disabled:""},"S√©lectionnez un portefeuille",-1)),(t(!0),o(W,null,Y(M.value,N=>(t(),o("option",{key:N.id,value:N.id},c(N.phone_number)+" ("+c(N.payment_service)+") ",9,Pi))),128))],512),[[_e,g.value.walletId]])]),e("p",ji,[y[39]||(y[39]=h("Montant total : ")),e("span",Si,c(j.value),1),y[40]||(y[40]=h(" FCFA"))]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),o("i",Vi)):$("",!0),a.value?(t(),o("span",Ei,"Veuillez patienter")):(t(),o("span",zi,"Confirmer le paiement"))],8,Mi)],32)])])):$("",!0)]),_:1}),U(be,{name:"fade"},{default:G(()=>[C.value?(t(),o("div",Ii,[e("div",Fi,[e("button",{onClick:y[8]||(y[8]=N=>C.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-lg"},"‚úñ"),y[46]||(y[46]=e("h2",{class:"text-2xl font-bold text-[var(--espace-vert)] mb-6 text-center"},"üí≥ Cr√©er un Portefeuille ",-1)),e("form",{onSubmit:ie(w,["prevent"]),class:"space-y-5"},[e("div",null,[y[42]||(y[42]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Num√©ro de t√©l√©phone",-1)),O(e("input",{"onUpdate:modelValue":y[9]||(y[9]=N=>D.value.phone_number=N),type:"tel",placeholder:"Ex: 670123456",required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",pattern:"6[0-9]{8}"},null,512),[[Q,D.value.phone_number]])]),e("div",null,[y[44]||(y[44]=e("label",{class:"block text-sm font-semibold text-[var(--espace-vert)]"},"Service de paiement",-1)),O(e("select",{"onUpdate:modelValue":y[10]||(y[10]=N=>D.value.payment_service=N),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none"},y[43]||(y[43]=[e("option",{value:"",disabled:""},"S√©lectionnez un service",-1),e("option",{value:"ORANGE"},"Orange Money",-1),e("option",{value:"MTN"},"MTN Mobile Money",-1)]),512),[[_e,D.value.payment_service]])]),e("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-[var(--espace-or)] to-yellow-400 text-[var(--espace-vert)] py-3 rounded-xl font-bold shadow hover:from-[var(--espace-vert)] hover:to-green-700 hover:text-white transition"},[a.value?(t(),o("i",Li)):$("",!0),y[45]||(y[45]=h(" Cr√©er "))],8,Ti)],32)])])):$("",!0)]),_:1}),Z.value?(t(),pe(In,{key:2,show:Z.value,wallets:M.value,onClose:y[11]||(y[11]=N=>Z.value=!1),onRefreshWallets:B},null,8,["show","wallets"])):$("",!0),q.value?(t(),pe(ei,{key:3,show:q.value,wallets:M.value,offers:r.value,onClose:y[12]||(y[12]=N=>q.value=!1),onRefreshOffers:L},null,8,["show","wallets","offers"])):$("",!0),e("div",qi,[e("button",{onClick:y[13]||(y[13]=N=>{ne(),x.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]"},y[47]||(y[47]=[e("i",{class:"fas fa-filter text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Filtres",-1)])),e("button",{onClick:te,class:J(["flex items-center gap-1 rounded-xl p-2 hover:bg-gray-200 transition text-[var(--espace-vert)]",{"bg-gray-400":n.value}])},[e("i",{class:J(["fas fa-sync-alt text-xl",{"fa-spin":n.value}])},null,2),y[48]||(y[48]=e("span",{class:"hidden md:inline font-semibold"},"Actualiser",-1))],2),e("button",{onClick:y[14]||(y[14]=N=>{ne(),Z.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition bg-[var(--espace-ver)] text-[var(--espace-vert)]"},y[49]||(y[49]=[e("i",{class:"fas fa-wallet text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Porte feuille",-1)])),e("button",{onClick:H,class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},y[50]||(y[50]=[e("i",{class:"fas fa-plus text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Poster",-1)])),e("button",{onClick:y[15]||(y[15]=N=>{ne(),q.value=!0}),class:"flex items-center gap-1 rounded-xl p-2 hover:bg-[var(--espace-or)] transition text-[var(--espace-vert)]"},y[51]||(y[51]=[e("i",{class:"fas fa-list text-xl"},null,-1),e("span",{class:"hidden md:inline font-semibold"},"Offres",-1)]))])])],64)}}}),Pc=le(Ui,[["__scopeId","data-v-755da7dd"]]),Oi={class:"overflow-y-scroll bg-gray-100"},Ni={class:"container mx-auto px-4 sm:px-6 py-8"},Ri={key:0,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mb-8 border border-gray-100 overflow-hidden"},Di={class:"flex flex-col sm:flex-row items-center gap-6"},Wi={class:"w-24 h-24 bg-[var(--espace-or)] rounded-full flex items-center justify-center overflow-hidden"},Ji=["src"],Bi={key:1,class:"fas fa-user text-3xl text-[var(--espace-vert)]"},Hi={class:"flex-1"},Gi={class:"text-3xl font-bold text-[var(--espace-vert)] mb-2 text-center"},Xi={class:"text-sm text-[var(--espace-gris)] mb-1"},Ki={class:"text-sm text-[var(--espace-gris)] mb-1"},Qi={class:"text-sm text-[var(--espace-gris)]"},Zi={key:0,class:"text-sm text-[var(--espace-gris)]"},Yi={class:"mt-2 flex space-x-2 flex-col"},eu={class:"text-sm text-[var(--espace-gris)]"},tu={class:"text-xs text-[var(--espace-gris)]"},su={class:"mt-4 flex flex-col sm:flex-row gap-4"},ou={class:"mt-4 flex flex-wrap gap-4"},au={class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},ru={key:0,class:"px-3 py-1 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full text-sm font-medium"},lu={key:1,class:"text-base text-[var(--espace-gris)] italic"},nu={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},iu={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},uu={class:"flex items-center space-x-2"},du={key:3},cu={key:4,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-4 border border-gray-100"},pu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},vu={key:5,class:"text-base text-[var(--espace-gris)] italic"},mu={key:6,class:"bg-[rgba(255,255,255,0.9)] rounded-xl shadow-lg p-6 mt-8 border border-gray-100"},fu={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},gu={class:"text-sm text-[var(--espace-gris)]"},xu={class:"text-sm text-[var(--espace-gris)]"},bu=re({__name:"CommercantDetails",setup(F){const l=Ae(),_=ue(),f=v(!1),r=v(null),i=v(null),s=v(0),x=v(0),p=v(!1),a=async()=>{f.value=!0;try{const b=await R.get(`/commercant/${l.params.commercantId}`);r.value=b.data.commercant,s.value=b.data.average_rating||0,x.value=b.data.vote_count||0,r.value.produits||console.warn("Aucun produit trouv√© dans la r√©ponse de l'API pour ce commer√ßant.")}catch{_.error("Erreur lors du chargement des d√©tails du commer√ßant.")}finally{f.value=!1}},m=async()=>{var b,n;if(i.value===null||i.value<1||i.value>5){_.error("Veuillez s√©lectionner une note entre 1 et 5.");return}try{const d=await R.post(`/commercant/${l.params.commercantId}/rate`,{rating:i.value});s.value=d.data.average_rating||0,_.success("Merci pour votre note !"),i.value=null,p.value=!1,x.value=d.data.vote_count||x.value+1}catch(d){_.error(((n=(b=d.response)==null?void 0:b.data)==null?void 0:n.message)||"Erreur lors de la notation.")}},V=ce(()=>{var b;return((b=r.value)==null?void 0:b.produits)||[]}),k=()=>{p.value=!0};return fe(async()=>{a()}),(b,n)=>{const d=ve("router-link");return t(),o(W,null,[U(je,{isLoading:f.value},null,8,["isLoading"]),e("div",Oi,[U(Ze),e("div",Ni,[r.value?(t(),o("div",Ri,[e("div",Di,[e("div",Wi,[r.value.photo_url?(t(),o("img",{key:0,src:r.value.photo_url,alt:"Photo du commer√ßant",class:"w-full h-full object-cover"},null,8,Ji)):(t(),o("i",Bi))]),e("div",Hi,[e("h1",Gi," Commer√ßant : "+c(r.value.nom),1),e("p",Xi,[n[2]||(n[2]=e("strong",null,"Ville :",-1)),h(" "+c(r.value.ville),1)]),e("p",Ki,[n[3]||(n[3]=e("strong",null,"Inscrit depuis :",-1)),h(" "+c(new Date(r.value.created_at).toLocaleDateString()),1)]),e("p",Qi,[n[4]||(n[4]=e("strong",null,"Contact :",-1)),h(" "+c(r.value.email||"Non disponible"),1)]),r.value.telephone?(t(),o("p",Zi,[n[5]||(n[5]=e("strong",null,"T√©l√©phone :",-1)),h(" "+c(r.value.telephone),1)])):$("",!0),e("div",Yi,[e("div",{class:"flex items-center space-x-1 cursor-pointer",onClick:k},[(t(),o(W,null,Y(5,g=>e("span",{key:g,class:"relative text-yellow-400 w-5 h-5"},[n[6]||(n[6]=e("i",{class:"far fa-star absolute left-0 top-0"},null,-1)),e("i",{class:"fas fa-star absolute left-0 top-0 overflow-hidden",style:ye({width:g<=Math.floor(s.value)?"100%":g===Math.ceil(s.value)&&s.value%1!==0?`${s.value%1*100}%`:"0%"})},null,4)])),64)),e("p",eu,c(Number(s.value).toFixed(1))+"/5 ",1)]),e("span",tu,"("+c(x.value)+" votes)",1)])])]),e("div",su,[U(d,{to:`/chat/${r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:G(()=>n[7]||(n[7]=[e("i",{class:"fas fa-comment mr-2"},null,-1),h(" Envoyer un message ")])),_:1,__:[7]},8,["to"]),U(d,{to:`/public-profile/${r.value.user_id||r.value.id}`,class:"inline-flex items-center px-4 py-2 border-2 border-[var(--espace-or)] text-[var(--espace-vert)] rounded-lg hover:bg-[var(--espace-or)] hover:text-[var(--espace-blanc)] transition-colors duration-200"},{default:G(()=>n[8]||(n[8]=[e("i",{class:"fas fa-user mr-2"},null,-1),h(" Voir Profil Public ")])),_:1,__:[8]},8,["to"])]),e("div",ou,[e("span",au,"Produits : "+c(V.value.length),1),r.value.revenus?(t(),o("span",ru,"Revenus : "+c(r.value.revenus)+" FCFA",1)):$("",!0)])])):f.value?$("",!0):(t(),o("div",lu,"Commer√ßant non trouv√©.")),p.value?(t(),o("div",nu,[e("div",iu,[n[9]||(n[9]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Noter ce Commer√ßant",-1)),e("div",uu,[O(e("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>i.value=g),type:"number",min:"1",max:"5",step:"1",class:"w-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"1-5"},null,512),[[Q,i.value,void 0,{number:!0}]]),e("button",{onClick:m,class:"bg-[var(--espace-or)] text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors"}," Soumettre "),e("button",{onClick:n[1]||(n[1]=g=>p.value=!1),class:"bg-gray-300 text-[var(--espace-vert)] font-medium px-4 py-2 rounded-md hover:bg-[var(--espace-vert)] hover:text-[var(--espace-blanc)] transition-colors ml-2"}," Annuler ")])])])):$("",!0),f.value?(t(),o("div",du)):V.value.length>0?(t(),o("div",cu,[n[10]||(n[10]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-6"},"Produits du Commer√ßant",-1)),e("div",pu,[(t(!0),o(W,null,Y(V.value,g=>(t(),pe(Le,{key:g.id,produit:g},null,8,["produit"]))),128))])])):r.value&&V.value.length===0?(t(),o("div",vu,"Aucun produit disponible pour ce commer√ßant.")):$("",!0),r.value&&r.value.statistiques?(t(),o("div",mu,[n[13]||(n[13]=e("h2",{class:"text-2xl font-semibold text-[var(--espace-vert)] mb-4"},"Statistiques",-1)),e("div",fu,[e("p",gu,[n[11]||(n[11]=e("strong",null,"Vues totales :",-1)),h(" "+c(r.value.statistiques.total_views),1)]),e("p",xu,[n[12]||(n[12]=e("strong",null,"Produits populaires :",-1)),h(" "+c(r.value.statistiques.popular_products),1)])])])):$("",!0)])])],64)}}}),jc=le(bu,[["__scopeId","data-v-9365ab0b"]]),hu={class:"overflow-y-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},yu={class:"container mx-auto max-w-2xl"},_u={class:"bg-white rounded-lg shadow-md p-6"},wu={key:0,class:"text-red-500 text-xs"},ku={key:0,class:"text-red-500 text-xs"},$u={key:0,class:"text-red-500 text-xs"},Cu={key:0,class:"text-red-500 text-xs"},Au={key:0,class:"text-red-500 text-xs"},Pu=["disabled"],ju={key:0},Su={key:1},Mu=re({__name:"CommercantCreate",setup(F){const l=me(),_=ue(),f=v({nom:"",ville:"",email:"",telephone:"",photo:null}),r=v(!1),i=v({}),s=p=>{const a=p.target;a.files&&a.files[0]&&(f.value.photo=a.files[0])},x=async()=>{var p,a;r.value=!0,i.value={};try{const m=new FormData;m.append("nom",f.value.nom),m.append("ville",f.value.ville),m.append("email",f.value.email),m.append("telephone",f.value.telephone),f.value.photo&&m.append("photo",f.value.photo);const V=await R.post("/commercants",m,{headers:{"Content-Type":"multipart/form-data"}});_.success("Commer√ßant cr√©√© avec succ√®s !"),l.push("/profil")}catch(m){(a=(p=m.response)==null?void 0:p.data)!=null&&a.errors?i.value=m.response.data.errors:_.error("Erreur lors de la cr√©ation du commer√ßant"),console.error(m)}finally{r.value=!1}};return(p,a)=>(t(),o("div",hu,[e("div",yu,[a[11]||(a[11]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-store mr-2 text-[var(--espace-or)]"}),h(" Cr√©er un Commer√ßant ")],-1)),e("div",_u,[e("form",{onSubmit:ie(x,["prevent"]),class:"space-y-6"},[e("div",null,[a[4]||(a[4]=e("label",{for:"nom",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom *",-1)),O(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>f.value.nom=m),id:"nom",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Nom du commer√ßant",required:""},null,512),[[Q,f.value.nom]]),i.value.nom?(t(),o("span",wu,c(i.value.nom),1)):$("",!0)]),e("div",null,[a[5]||(a[5]=e("label",{for:"ville",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Ville *",-1)),O(e("input",{"onUpdate:modelValue":a[1]||(a[1]=m=>f.value.ville=m),id:"ville",type:"text",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"Ville",required:""},null,512),[[Q,f.value.ville]]),i.value.ville?(t(),o("span",ku,c(i.value.ville),1)):$("",!0)]),e("div",null,[a[6]||(a[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{"onUpdate:modelValue":a[2]||(a[2]=m=>f.value.email=m),id:"email",type:"email",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"email@exemple.com"},null,512),[[Q,f.value.email]]),i.value.email?(t(),o("span",$u,c(i.value.email),1)):$("",!0)]),e("div",null,[a[7]||(a[7]=e("label",{for:"telephone",class:"block text-sm font-medium text-[var(--espace-vert)]"},"T√©l√©phone",-1)),O(e("input",{"onUpdate:modelValue":a[3]||(a[3]=m=>f.value.telephone=m),id:"telephone",type:"tel",class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",placeholder:"+237 6XX XX XX XX"},null,512),[[Q,f.value.telephone]]),i.value.telephone?(t(),o("span",Cu,c(i.value.telephone),1)):$("",!0)]),e("div",null,[a[8]||(a[8]=e("label",{for:"photo",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Photo (optionnel)",-1)),e("input",{id:"photo",type:"file",onChange:s,class:"mt-1 w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-[var(--espace-vert)]",accept:"image/*"},null,32),i.value.photo?(t(),o("span",Au,c(i.value.photo),1)):$("",!0)]),e("div",null,[e("button",{type:"submit",disabled:r.value,class:"w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded hover:bg-[var(--espace-vert)] hover:text-white transition disabled:opacity-50"},[r.value?(t(),o("span",ju,a[9]||(a[9]=[e("i",{class:"fas fa-spinner animate-spin mr-2"},null,-1),h(" Cr√©ation en cours... ")]))):(t(),o("span",Su,a[10]||(a[10]=[e("i",{class:"fas fa-plus mr-2"},null,-1),h(" Cr√©er le commer√ßant ")])))],8,Pu)])],32)])])]))}}),Sc=le(Mu,[["__scopeId","data-v-b36df8f4"]]),Vu={class:"overflow-scroll bg-gray-100 pt-16 pb-20 px-4 sm:px-6"},Eu={class:"container mx-auto max-w-4xl"},zu={class:"text-md font-semibold text-white flex items-center"},Iu={class:"ml-2 text-sm text-white/80"},Fu={class:"text-white/90 text-sm mt-2"},Tu={key:0,class:"text-white/90 text-sm mt-1"},Lu={class:"list-disc list-inside ml-4"},qu=re({__name:"ParrainageInfo",setup(F){const l=me(),_=ue(),f=v([]),r=async()=>{try{const s=await R.get("/parrainages/niveaux");f.value=s.data.niveaux}catch(s){_.error("Erreur lors de la r√©cup√©ration des niveaux de parrainage"),console.error(s)}},i=()=>{l.go(-1)};return fe(()=>{r()}),(s,x)=>(t(),o("div",Vu,[e("div",Eu,[x[4]||(x[4]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-[var(--espace-vert)] mb-6 font-poppins"},[e("i",{class:"fas fa-info-circle mr-2 text-[var(--espace-or)]"}),h(" Tout Savoir sur le Parrainage ")],-1)),e("button",{onClick:i,class:"mb-4 bg-[var(--espace-vert)] text-white px-4 py-2 rounded hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},x[0]||(x[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),h(" Retour ")])),x[5]||(x[5]=Se('<div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Qu&#39;est-ce que le Parrainage ?</h2><p class="text-[var(--espace-gris)] text-sm sm:text-base" data-v-9d89fe08> Le syst√®me de parrainage d&#39;Espace Cameroun vous permet d&#39;inviter des amis avec votre code ou lien unique. Vos gains d√©pendent des <strong data-v-9d89fe08>niveaux de parrainage</strong>, d√©bloqu√©s par le nombre de commer√ßants parrain√©s, avec des bonus en jetons cumulatifs. Plus vous parrainez, plus vous montez de niveau ! D√©couvrez les d√©tails ci-dessous. </p></div><div class="bg-white rounded-lg shadow-md p-6 mb-6" data-v-9d89fe08><h2 class="text-lg font-semibold text-[var(--espace-vert)] mb-4" data-v-9d89fe08>Comment √ßa fonctionne ?</h2><ol class="list-decimal list-inside text-[var(--espace-gris)] text-sm sm:text-base space-y-2" data-v-9d89fe08><li data-v-9d89fe08><strong data-v-9d89fe08>Obtenez votre code unique :</strong> G√©n√©rez ou cr√©ez votre code de parrainage via la page &quot;Mon Parrainage&quot;.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Partagez avec vos amis :</strong> Diffusez votre lien ou code via WhatsApp, Facebook ou d&#39;autres moyens pour inviter des amis √† s&#39;inscrire.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Attirez des commer√ßants :</strong> Encouragez vos filleuls √† devenir des commer√ßants actifs sur la plateforme. Seuls les commer√ßants parrain√©s comptent pour d√©bloquer les niveaux.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Montez de niveau :</strong> Chaque niveau n√©cessite un nombre sp√©cifique de commer√ßants parrain√©s. Une fois le seuil atteint, vous d√©bloquez un bonus en jetons correspondant √† ce niveau, en plus des bonus des niveaux pr√©c√©dents.</li><li data-v-9d89fe08><strong data-v-9d89fe08>Suivez vos progr√®s :</strong> Consultez votre niveau actuel, vos jetons bonus et vos avantages exclusifs sur la page &quot;Mon Parrainage&quot;.</li></ol><p class="text-[var(--espace-gris)] text-sm mt-4" data-v-9d89fe08><strong data-v-9d89fe08>Note importante :</strong> Les jetons bonus sont cumulatifs et attribu√©s en fonction des niveaux atteints, pas directement par parrainage individuel. Par exemple, si vous atteignez le niveau 2 avec 5 commer√ßants, vous recevez les bonus des niveaux 1 et 2. </p></div>',2)),(t(!0),o(W,null,Y(f.value,p=>(t(),o("div",{key:p.id,class:"mb-6 p-4 border rounded-lg",style:ye({backgroundColor:p.couleur||"#f0f0f0"})},[e("h3",zu,[h(c(p.nom)+" "+c(p.emoji)+" ",1),e("span",Iu,"("+c(p.filleuls_requis)+" commer√ßants requis)",1)]),e("p",Fu,[x[1]||(x[1]=e("strong",null,"Bonus en jetons :",-1)),h(" "+c(p.jetons_bonus)+" jetons ",1)]),p.avantages.length?(t(),o("p",Tu,[x[2]||(x[2]=e("strong",null,"Avantages exclusifs :",-1)),e("ul",Lu,[(t(!0),o(W,null,Y(p.avantages,a=>(t(),o("li",{key:a},c(a),1))),128))])])):$("",!0),x[3]||(x[3]=e("p",{class:"text-white/70 text-xs mt-1 italic"}," * Les jetons bonus sont cr√©dit√©s une fois le niveau atteint et cumul√©s avec les niveaux pr√©c√©dents. ",-1))],4))),128))])]))}}),Mc=le(qu,[["__scopeId","data-v-9d89fe08"]]),Uu={class:"w-full flex relative px-0"},Ou=["onClick"],Nu={class:"flex items-center"},Ru=["onClick"],Du=["src"],Wu={key:1,class:"fas fa-user-circle text-2xl text-gray-500"},Ju={class:"min-w-0"},Bu={class:"font-semibold text-[var(--espace-vert)] truncate"},Hu={class:"text-xs text-[var(--espace-gris)] truncate"},Gu={class:"flex items-center"},Xu={key:0,class:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center mr-2"},Ku={class:"text-xs text-[var(--espace-gris)] ml-2 whitespace-nowrap"},Qu={class:"w-full grid grid-rows-[10%_86%]"},Zu={class:"flex border-b"},Yu={key:1,class:"text-xl h-[10%] font-semibold text-[var(--espace-vert)] p-4"},ed={key:0,class:"h-full flex flex-col"},td={class:"block text-[var(--espace-vert)]"},sd={class:"text-gray-800"},od={class:"text-xs text-[var(--espace-gris)] text-right mr-2"},ad={key:0,class:"text-center text-[var(--espace-gris)]"},rd={class:"px-2 md:px-4 z-20"},ld={class:"bg-white shadow-lg rounded-full flex items-center flex-wrap p-2 border max-w-3xl mx-auto gap-2"},nd={key:0,class:"bg-yellow-200 text-yellow-800 text-xs px-3 py-1 rounded-full flex items-center gap-2 ml-4"},id={key:1,class:"flex items-center justify-center h-full"},ud=re({__name:"Messages",setup(F){const l=()=>{const P=window.location.hostname;return P==="localhost"||P==="127.0.0.1"?"http://localhost:8000/storage/":"https://espacecameroun.devfack.com/storage/"},_=ce(()=>l()),f=me(),r=Ae(),i=xe(),s=ue(),x=Fe(),p=v([]),a=v([]),m=v(null),V=v(""),k=v(!0),b=v(0),n=v(!1),d=v(!1),g=v(null),S=v(null),j=v(window.innerWidth<768);let M=null;const C=()=>{Xe(()=>{var P;(P=g.value)==null||P.scrollTo({top:g.value.scrollHeight,behavior:"smooth"})})},D=()=>{S.value=null,localStorage.removeItem("chatProduct")},Z=async()=>{try{const P=await R.get("/conversations");p.value=P.data.conversations}catch(P){s.error("Erreur lors de la r√©cup√©ration des conversations"),console.error(P)}},q=async(P,E=!0)=>{var K,L,A;if(!d.value){d.value=!0;try{E&&(b.value=0,a.value=[]),k.value=!1;const T=await R.get(`/chat/${P}?offset=${b.value}`);a.value=[...T.data.messages],n.value=T.data.hasMore;const ee=localStorage.getItem("chatProduct"),oe=p.value.find(y=>y.user_id===P);let de="",X="/default-avatar.png";oe?(de=oe.is_commercant?oe.name:((K=T.data.user)==null?void 0:K.nom)||"",X=oe.profile_photo||"/default-avatar.png"):ee?(de=JSON.parse(ee).commercant_name||((L=T.data.user)==null?void 0:L.nom)||"",X=(oe==null?void 0:oe.profile_photo)||"/default-avatar.png"):de=((A=T.data.user)==null?void 0:A.nom)||"",m.value={user_id:P,name:de,is_commercant:(oe==null?void 0:oe.is_commercant)||!1,profile_photo:X},ee&&(S.value=JSON.parse(ee)),await H(P),C()}catch(T){s.error("Erreur lors du chargement des messages"),console.error(T)}finally{d.value=!1}}},se=P=>{f.push({name:"messages",params:{receiverId:P}}),j.value&&(k.value=!1)},ne=async()=>{var K,L,A,T,ee,oe,de,X,y,ae;if(!V.value.trim()||!m.value){s.error("Veuillez s√©lectionner une conversation et √©crire un message");return}const P=V.value.trim(),E={id:-Date.now(),sender_id:(K=i.user)==null?void 0:K.id,receiver_id:m.value.user_id,content:P,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_read:!1,product_id:((L=S.value)==null?void 0:L.id)||null,sender:{id:((A=i.user)==null?void 0:A.id)??0,nom:((T=i.user)==null?void 0:T.nom)??"",email:((ee=i.user)==null?void 0:ee.email)??"",telephone:((oe=i.user)==null?void 0:oe.telephone)??"",ville:((de=i.user)==null?void 0:de.ville)??"",premium:((X=i.user)==null?void 0:X.premium)??!1,parrain_id:((y=i.user)==null?void 0:y.parrain_id)??0},receiver:{id:m.value.user_id,nom:m.value.name,email:null,telephone:null,ville:null,premium:!1,parrain_id:null},product:S.value||null};a.value.push(E),V.value="",C();try{const N=await R.post(`/chat/${m.value.user_id}`,{content:P,product_id:(ae=S.value)==null?void 0:ae.id});S.value&&D()}catch(N){s.error("√âchec d'envoi"),console.error(N),a.value=a.value.filter(we=>we.id!==E.id)}},B=()=>{!g.value||!n.value||d.value||g.value.scrollTop<=100&&(b.value+=30,q(m.value.user_id,!1))},z=()=>{j.value=window.innerWidth<768,k.value=window.innerWidth>=768},H=async P=>{try{const E=await R.put("/messages/mark-all-as-read");x.saveUnreadMessagesToLocalStorage(E.data.unread_messages)}catch(E){console.error("Erreur lors du marquage des messages comme lus:",E),s.error("Erreur lors de la mise √† jour des messages lus")}},w=()=>{k.value=!k.value},u=(P,E)=>{const K=E?`/commercants/${P}`:`/users/${P}`;f.push(K)},te=P=>{var E;M&&(M.stopListening("MessageSent"),window.Echo.leave(`chat.${M.params.receiverId}`)),P&&((E=i.user)!=null&&E.id)&&(M=window.Echo.channel("public-channel").listen("message.sent",K=>{var L,A;if(((L=m.value)==null?void 0:L.user_id)===P&&K.sender_id!==((A=i.user)==null?void 0:A.id)){const T={id:K.message.id,sender_id:K.sender_id,receiver_id:K.receiver_id,content:K.message.content,created_at:K.message.created_at,updated_at:K.message.updated_at,is_read:K.message.is_read,product_id:K.message.product_id||null,sender:K.sender,receiver:K.receiver,product:K.message.product||null};a.value.push(T),C(),x.saveUnreadMessagesToLocalStorage(K.unread_messages)}}),M.params={receiverId:P})};return fe(()=>{Z(),r.params.receiverId&&q(parseInt(r.params.receiverId)),window.addEventListener("resize",z)}),Pe(()=>{M&&(M.stopListening("MessageSent"),window.Echo.leave(`chat.${M.params.receiverId}`)),window.removeEventListener("resize",z)}),ge(()=>{var P;return(P=m.value)==null?void 0:P.user_id},P=>{P&&te(P)}),ge(()=>r.params.receiverId,async P=>{P&&await q(parseInt(P))}),(P,E)=>{var L,A;const K=ve("router-link");return t(),o("div",Uu,[U(be,{name:"slide-fade"},{default:G(()=>[k.value||!j.value?(t(),o("div",{key:0,class:J(["bg-white pt-8 shadow-md p-4 overflow-y-auto transition-all",j.value?"absolute top-0 left-0 h-full z-30 w-full":"w-[400px]"])},[E[1]||(E[1]=e("h2",{class:"text-lg font-semibold text-[var(--espace-vert)] mb-4"},"Conversations",-1)),(t(!0),o(W,null,Y(p.value,T=>(t(),o("div",{key:T.user_id,onClick:ee=>se(T.user_id),class:"p-2 hover:bg-gray-100 cursor-pointer rounded flex items-center justify-between transition-colors"},[e("div",Nu,[e("div",{onClick:ie(ee=>u(T.user_id,T.is_commercant),["stop"]),class:"w-10 h-10 bg-[var(--espace-or)] rounded-full mr-2 flex items-center justify-center overflow-hidden cursor-pointer"},[T.profile_photo?(t(),o("img",{key:0,src:_.value+T.profile_photo,alt:"Photo de profil",class:"w-full h-full object-cover"},null,8,Du)):(t(),o("i",Wu))],8,Ru),e("div",Ju,[e("p",Bu,c(T.name),1),e("p",Hu,c(T.last_message),1)])]),e("div",Gu,[T.unread_count>0?(t(),o("div",Xu,c(T.unread_count),1)):$("",!0),e("div",Ku,c(new Date(T.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])],8,Ou))),128))],2)):$("",!0)]),_:1}),e("div",Qu,[e("div",Zu,[!k.value&&j.value&&m.value?(t(),o("button",{key:0,onClick:w,class:"text-green-900 p-2 rounded-full hover:bg-[var(--espace-or)] transition text-start"},E[2]||(E[2]=[e("i",{class:"fas fa-arrow-left text-2xl"},null,-1)]))):$("",!0),m.value?(t(),o("h2",Yu,c(m.value.name),1)):$("",!0)]),e("div",{class:J(["bg-white shadow-md transition-all duration-300 flex flex-col flex-1 h-full overflow-hidden w-full",k.value&&!j.value?"":"rounded-r-lg"]),onScroll:B},[m.value?(t(),o("div",ed,[e("div",{ref_key:"messagesContainer",ref:g,class:"h-full flex-1 overflow-y-auto p-2 md:p-4 space-y-3 bg-gray-50 messages-container"},[(t(!0),o(W,null,Y(a.value,T=>{var ee,oe,de;return t(),o("div",{key:T.id,class:J(["p-3 rounded-full break-words",{"bg-blue-200 ml-auto max-w-[85%] md:max-w-[70%]":T.sender_id===((ee=I(i).user)==null?void 0:ee.id),"bg-gray-200 max-w-[85%] md:max-w-[70%]":T.sender_id!==((oe=I(i).user)==null?void 0:oe.id)}])},[e("strong",td,c(T.sender.nom)+" :",1),e("p",sd,[(de=T.product)!=null&&de.id?(t(),pe(K,{key:0,to:{name:"produit",params:{id:T.product.id}},class:"text-blue-500 underline hover:text-blue-700 ml-1"},{default:G(()=>[h("[Produit "+c(T.product.nom)+"]",1)]),_:2},1032,["to"])):$("",!0),h(" "+c(T.content),1)]),e("p",od,c(new Date(T.created_at).toLocaleTimeString()),1)],2)}),128)),d.value?(t(),o("div",ad,"Chargement...")):$("",!0)],512),e("div",rd,[e("div",ld,[(L=S.value)!=null&&L.id?(t(),o("span",nd,[h(" Produit "+c((A=S.value)==null?void 0:A.nom)+" ",1),e("button",{onClick:D,class:"ml-2 text-yellow-800 hover:text-red-600 font-bold",title:"Retirer le tag"}," √ó ")])):$("",!0),O(e("input",{"onUpdate:modelValue":E[0]||(E[0]=T=>V.value=T),onKeyup:Ge(ne,["enter"]),type:"text",placeholder:"√âcrivez votre message...",class:"flex-1 px-4 py-2 rounded-full focus:outline-none text-gray-700 text-sm placeholder-gray-400 min-w-[100px] md:min-w[200px]"},null,544),[[Q,V.value]]),e("button",{onClick:ne,class:"ml-2 p-3 rounded-full bg-[var(--espace-vert)] text-white hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)] transition"},E[3]||(E[3]=[e("i",{class:"fas fa-location-arrow text-lg"},null,-1)]))])])])):(t(),o("div",id,E[4]||(E[4]=[e("p",{class:"text-[var(--espace-gris)] text-lg"},"S√©lectionnez une conversation pour commencer.",-1)])))],34)])])}}}),Vc=le(ud,[["__scopeId","data-v-03341c2a"]]),dd={class:"mx-auto max-w-4xl py-5 px-4 flex flex-col gap-3"},cd={key:0,class:"overflow-y-scroll space-y-4"},pd={class:"flex justify-between items-center"},vd={class:"text-lg font-semibold"},md={class:"text-gray-600"},fd={class:"text-gray-600"},gd={class:"text-gray-600"},xd={class:"text-gray-600"},bd={class:"text-gray-600"},hd={key:0,class:"text-gray-600"},yd={class:"text-right"},_d=["onClick"],wd={key:1,class:"text-gray-500"},kd={class:"mt-6 flex gap-4"},$d={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Cd=re({__name:"JetonHistory",setup(F){const _=xe().user,f=v([]),r=v(!1),i=ue(),s=async()=>{try{const a=await R.get(`/jeton-transactions/${_==null?void 0:_.id}`);f.value=a.data}catch(a){console.error("Erreur lors du chargement des transactions:",a)}},x=a=>new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=async a=>{var m,V;if(confirm(`Refaire l'achat de ${a.nombre_jetons} jetons avec le m√™me service (${a.methode_paiement}) ?`)){r.value=!0;try{const k=await R.post("/acheter-jetons",{nombre_jetons:a.nombre_jetons,payment_service:a.methode_paiement,phone_number:a.phone_number});i.success(k.data.message),s()}catch(k){i.error(((V=(m=k.response)==null?void 0:m.data)==null?void 0:V.message)||"Erreur lors de l'achat."),console.error(k)}finally{r.value=!1}}};return fe(()=>{_&&s()}),(a,m)=>{const V=ve("router-link");return t(),o("div",dd,[m[4]||(m[4]=e("h1",{class:"text-3xl font-bold text-[var(--espace-vert)]"},"Historique des Transactions de Jetons",-1)),f.value.length>0?(t(),o("div",cd,[(t(!0),o(W,null,Y(f.value,k=>(t(),o("div",{key:k.id,class:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow"},[e("div",pd,[e("div",null,[e("p",vd,"Achat de "+c(k.nombre_jetons)+" jetons",1),e("p",md,"Montant: "+c(k.montant)+" FCFA",1),e("p",fd,"M√©thode: "+c(k.methode_paiement),1),e("p",gd,"Num√©ro: "+c(k.phone_number),1),e("p",xd,"Statut: "+c(k.statut),1),e("p",bd,"Date: "+c(x(k.date_transaction)),1),k.transaction_id_mesomb?(t(),o("p",hd," ID Transaction: "+c(k.transaction_id_mesomb),1)):$("",!0)]),e("div",yd,[e("button",{onClick:b=>p(k),class:"text-[var(--espace-vert)] hover:text-[var(--espace-or)] mr-2"},m[0]||(m[0]=[e("i",{class:"fas fa-redo"},null,-1),h(" Refaire ")]),8,_d)])])]))),128))])):(t(),o("p",wd,"Aucune transaction trouv√©e.")),e("div",kd,[U(V,{to:"/acheter-jetons",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:G(()=>m[1]||(m[1]=[h(" Acheter des Jetons ")])),_:1,__:[1]}),U(V,{to:"/commercant/produits",class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},{default:G(()=>m[2]||(m[2]=[h(" Booster un Produit ")])),_:1,__:[2]})]),r.value?(t(),o("div",$d,m[3]||(m[3]=[Se('<div class="bg-white p-6 rounded-lg shadow-lg text-center" data-v-c9b6502c><p class="text-lg text-[var(--espace-vert)]" data-v-c9b6502c>Veuillez patienter...</p><svg class="animate-spin h-8 w-8 text-[var(--espace-vert)] mx-auto mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-c9b6502c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-c9b6502c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" data-v-c9b6502c></path></svg></div>',1)]))):$("",!0)])}}}),Ec=le(Cd,[["__scopeId","data-v-c9b6502c"]]),Ad={class:"min-h-screen bg-gray-100 py-8 sm:px-6"},Pd={class:"container mx-auto max-w-3xl bg-white rounded-lg shadow-md p-6"},jd={class:"flex flex-col sm:flex-row items-center gap-6 mb-6"},Sd={class:"relative"},Md=["src"],Vd={key:2,class:"fas fa-crown text-yellow-400 absolute -top-2 -right-2 text-xl p-1 rounded-full"},Ed={class:"flex-1"},zd={class:"text-gray-600"},Id={key:0,class:"text-sm text-gray-500"},Fd={class:"text-gray-600"},Td={class:"text-gray-600"},Ld=re({__name:"ProfilePublic",setup(F){const l=Ae(),_=me(),f=ue(),r=v(null),i=async()=>{try{const x=await R.get(`/profile/public/${l.params.id}`);r.value=x.data}catch(x){f.error("Erreur lors de la r√©cup√©ration du profil."),console.error(x)}},s=()=>{var x;(x=r.value)!=null&&x.id?_.push({name:"messages",params:{receiverId:r.value.id}}):f.error("Impossible d'acc√©der au chat. Profil invalide.")};return fe(()=>{i()}),(x,p)=>{var a,m,V,k,b,n,d,g,S,j,M,C,D,Z,q,se,ne,B,z,H,w,u;return t(),o("div",Ad,[e("div",Pd,[e("div",jd,[e("div",Sd,[(a=r.value)!=null&&a.photo?(t(),o("img",{key:0,src:`http://localhost:8000/storage/${(m=r.value)==null?void 0:m.photo}`,alt:"Photo de profil",class:"w-24 h-24 rounded-full object-cover border-2 border-[var(--espace-vert)]"},null,8,Md)):(t(),o("div",{key:1,class:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",style:ye({background:`${((n=(b=(k=(V=r.value)==null?void 0:V.niveaux_users)==null?void 0:k.at(-1))==null?void 0:b.parrainage_niveau)==null?void 0:n.couleur)||"#0af"}`})},p[0]||(p[0]=[e("i",{class:"fas fa-user-circle text-5xl"},null,-1)]),4)),(d=r.value)!=null&&d.premium?(t(),o("i",Vd)):$("",!0)]),e("div",Ed,[e("h1",{class:"text-3xl font-bold flex items-center gap-2",style:ye({color:`${((M=(j=(S=(g=r.value)==null?void 0:g.niveaux_users)==null?void 0:S.at(-1))==null?void 0:j.parrainage_niveau)==null?void 0:M.couleur)||"#0af"}`})},[h(c((C=r.value)==null?void 0:C.nom)+" ",1),(D=r.value)!=null&&D.premium?(t(),o("span",{key:0,class:"text-white text-sm px-2 py-1 rounded-full uppercase font-semibold",style:ye({background:`${((ne=(se=(q=(Z=r.value)==null?void 0:Z.niveaux_users)==null?void 0:q.at(-1))==null?void 0:se.parrainage_niveau)==null?void 0:ne.couleur)||"#0af"}`})}," Premium ",4)):$("",!0)],4),e("p",zd,"Statut : "+c((B=r.value)!=null&&B.commercant?"Commer√ßant":"Utilisateur"),1),(z=r.value)!=null&&z.subscription_ends_at?(t(),o("p",Id," Abonnement Premium jusqu'au "+c(new Date((H=r.value)==null?void 0:H.subscription_ends_at).toLocaleDateString()),1)):$("",!0),e("p",Fd,"Ville : "+c((w=r.value)==null?void 0:w.ville),1),e("p",Td,"T√©l√©phone : "+c((u=r.value)==null?void 0:u.telephone),1)]),e("div",{class:"mt-6 flex justify-center"},[e("button",{onClick:s,class:"bg-[var(--espace-vert)] text-white px-4 py-2 rounded-md font-semibold hover:bg-[var(--espace-or)] hover:text-[var(--espace-vert)]"},p[1]||(p[1]=[e("i",{class:"fas fa-comments mr-2"},null,-1),h(" Discuter ")]))])]),p[2]||(p[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-gray-700"},"Ce profil affiche les informations publiques de l'utilisateur.")],-1))])])}}}),zc=le(Ld,[["__scopeId","data-v-eef19e07"]]),qd={class:"overflow-y-scroll h-full bg-gradient-to-b from-gray-50 to-gray-100 p-4"},Ud={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Od={class:"space-y-4"},Nd={class:"text-gray-700"},Rd={class:"text-gray-700"},Dd={class:"text-gray-700"},Wd={class:"text-gray-700"},Jd={class:"text-gray-700"},Bd={class:"bg-white p-6 rounded-lg shadow-md mb-6"},Hd=["disabled"],Gd={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},Xd={key:0,class:"mt-4 text-green-600 text-center"},Kd=re({__name:"Doc",setup(F){me();const l=v(!1),_=v(!1),f=v({name:"",email:"",message:""}),r=async()=>{l.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.value)})).ok)_.value=!0,f.value={name:"",email:"",message:""},setTimeout(()=>{_.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(i){console.error("Erreur lors de la soumission:",i)}finally{l.value=!1}};return(i,s)=>{const x=ve("router-link");return t(),o("div",qd,[s[33]||(s[33]=Se('<div class="text-center mb-8" data-v-4e7dc548><h1 class="text-3xl font-bold text-[var(--espace-vert)]" data-v-4e7dc548>üìò Documentation - Espace Cameroun</h1><p class="text-gray-600 mt-2" data-v-4e7dc548>Votre espace pour faciliter le commerce au Cameroun</p></div><section class="bg-white p-6 rounded-lg shadow-md mb-6" data-v-4e7dc548><h2 class="text-xl font-semibold text-[var(--espace-vert)] mb-4" data-v-4e7dc548>√Ä Propos d‚ÄôEspace Cameroun</h2><p class="text-gray-700" data-v-4e7dc548> Espace Cameroun est une plateforme de marketplace con√ßue pour connecter commer√ßants, acheteurs et revendeurs. Son objectif principal est de cr√©er un espace num√©rique o√π les transactions commerciales peuvent se d√©rouler facilement et en toute s√©curit√©. Notre mission est de faciliter l‚Äôactivit√© commerciale au Cameroun en offrant des outils simples et accessibles √† tous. </p></section>',2)),e("section",Ud,[s[27]||(s[27]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Fonctionnalit√©s Cl√©s",-1)),e("div",Od,[e("div",null,[s[6]||(s[6]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Messagerie",-1)),e("p",Nd,[s[4]||(s[4]=h(" Communiquez directement avec vos partenaires commerciaux pour n√©gocier ou confirmer des transactions via la section ")),U(x,{to:"/messages",class:"text-blue-500 underline"},{default:G(()=>s[3]||(s[3]=[h("Chat")])),_:1,__:[3]}),s[5]||(s[5]=h(". "))])]),s[23]||(s[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Gestion des Portefeuilles"),e("p",{class:"text-gray-700"}," Cr√©ez et g√©rez vos portefeuilles Orange Money ou MTN pour recevoir ou envoyer des paiements en toute s√©curit√©. ")],-1)),e("div",null,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Achat et Vente de Jetons",-1)),e("p",Rd,[s[8]||(s[8]=h(" Participez au march√© des jetons via ")),U(x,{to:"/jetonMarket",class:"text-blue-500 underline"},{default:G(()=>s[7]||(s[7]=[h("March√© des Jetons")])),_:1,__:[7]}),s[9]||(s[9]=h(" pour vendre vos jetons ou en acheter, g√©n√©rant des revenus ou des ressources pour booster vos annonces. "))])]),e("div",null,[s[14]||(s[14]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Poster des Produits ou Services",-1)),e("p",Dd,[s[12]||(s[12]=h(" Devenez commer√ßant en cr√©ant un compte via ")),U(x,{to:"/profil",class:"text-blue-500 underline"},{default:G(()=>s[11]||(s[11]=[h("Profil")])),_:1,__:[11]}),s[13]||(s[13]=h(", puis publiez vos produits (ex. t√©l√©phones, v√™tements) ou services (ex. r√©parations, cours) en remplissant les d√©tails (nom, prix, description, photos), s√©lectionnant un portefeuille, et soumettant votre annonce. "))])]),s[24]||(s[24]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Boostage des Produits et Services"),e("p",{class:"text-gray-700"}," Utilisez vos jetons gagn√©s pour booster vos produits ou services, augmentant leur visibilit√© aupr√®s des acheteurs et revendeurs sur la plateforme. ")],-1)),e("div",null,[s[18]||(s[18]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Collaborations",-1)),e("p",Wd,[s[16]||(s[16]=h(" Travaillez avec d‚Äôautres commer√ßants pour proposer des produits ou services en collaboration via ")),U(x,{to:"/collaborations",class:"text-blue-500 underline"},{default:G(()=>s[15]||(s[15]=[h("Collaborations")])),_:1,__:[15]}),s[17]||(s[17]=h(". "))])]),e("div",null,[s[22]||(s[22]=e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Syst√®me de Parrainage",-1)),e("p",Jd,[s[20]||(s[20]=h(" Invitez d‚Äôautres utilisateurs √† cr√©er un compte commer√ßant via ")),U(x,{to:"/parrainage",class:"text-blue-500 underline"},{default:G(()=>s[19]||(s[19]=[h("√âquipe")])),_:1,__:[19]}),s[21]||(s[21]=h(" et gagnez 1 jeton par parrainage. Atteignez des paliers (ex. 10 commer√ßants parrain√©s pour 10 jetons bonus) et utilisez ces jetons pour booster vos annonces ou les √©changer sur le march√© des jetons. "))])]),s[25]||(s[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Abonnement Premium"),e("p",{class:"text-gray-700"}," Souscrivez √† un abonnement premium pour acc√©der √† des privil√®ges exclusifs, comme une visibilit√© accrue, des fonctionnalit√©s avanc√©es, et des avantages sp√©ciaux (d√©tails √† venir). ")],-1)),s[26]||(s[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-[var(--espace-vert)]"},"Et Bien Plus"),e("p",{class:"text-gray-700"}," D√©couvrez d‚Äôautres fonctionnalit√©s au fil de votre utilisation pour optimiser votre exp√©rience commerciale. ")],-1))])]),e("section",Bd,[s[31]||(s[31]=e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Ressources et Support",-1)),s[32]||(s[32]=e("p",{class:"text-gray-700 mb-4"}," Pour toute question ou assistance, utilisez le formulaire ci-dessous pour nous contacter. Vous pouvez aussi rester √† l‚Äô√©coute pour les mises √† jour et les nouvelles fonctionnalit√©s √† venir. ",-1)),e("form",{onSubmit:ie(r,["prevent"]),class:"space-y-4"},[e("div",null,[s[28]||(s[28]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":s[0]||(s[0]=p=>f.value.name=p),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Q,f.value.name]])]),e("div",null,[s[29]||(s[29]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=p=>f.value.email=p),required:"",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Q,f.value.email]])]),e("div",null,[s[30]||(s[30]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),O(e("textarea",{id:"message",name:"message","onUpdate:modelValue":s[2]||(s[2]=p=>f.value.message=p),required:"",rows:"4",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message"},null,512),[[Q,f.value.message]])]),e("button",{type:"submit",disabled:l.value,class:J(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-2 rounded-lg font-bold flex items-center justify-center transition",{"opacity-50 cursor-not-allowed":l.value}])},[l.value?(t(),o("span",Gd)):$("",!0),e("span",null,c(l.value?"Envoi...":"Envoyer"),1)],10,Hd)],32),_.value?(t(),o("p",Xd,"Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):$("",!0)]),s[34]||(s[34]=e("section",{class:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{class:"text-xl font-semibold text-[var(--espace-vert)] mb-4"},"Prochaines √âtapes"),e("p",{class:"text-gray-700"}," Nous travaillons continuellement pour am√©liorer Espace Cameroun. Restez connect√©s pour d√©couvrir de nouvelles fonctionnalit√©s et opportunit√©s commerciales dans un avenir proche. ")],-1))])}}}),Ic=le(Kd,[["__scopeId","data-v-4e7dc548"]]),Qd={class:"overflow-y-scroll bg-gray-50 flex flex-col"},Zd={class:"bg-gradient-to-r from-[var(--espace-vert)] to-green-700 text-white py-16 shadow-lg"},Yd={class:"max-w-4xl mx-auto text-center px-6"},ec={class:"text-sm mt-4 italic text-green-200"},tc={class:"max-w-5xl mx-auto px-6 sm:px-8 py-12 grid gap-6"},sc={class:"flex items-center mb-4"},oc={class:"flex items-center justify-center w-12 h-12 bg-[var(--espace-or)] text-[var(--espace-vert)] rounded-full shadow"},ac={class:"ml-4 text-lg font-semibold text-gray-800"},rc={key:0,class:"text-gray-700 mb-2 leading-relaxed"},lc={key:1,class:"list-disc pl-6 space-y-1 text-gray-700"},nc={class:"bg-white max-w-3xl mx-auto px-6 py-10 rounded-2xl shadow-lg mb-12"},ic=["disabled"],uc={key:0,class:"animate-spin inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"},dc={key:0,class:"mt-4 text-green-600 text-center"},cc=re({__name:"Politique",setup(F){const l=new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),_=v([{id:"intro",title:"Introduction",icon:"fas fa-user-shield",text:"Chez Espace Cameroun, nous nous engageons √† prot√©ger vos informations personnelles et √† respecter votre vie priv√©e."},{id:"collecte",title:"Donn√©es collect√©es",icon:"fas fa-database",list:["Nom, email, t√©l√©phone","Produits publi√©s","Messages √©chang√©s","Logs techniques","Historique de jetons"]},{id:"utilisation",title:"Utilisation des donn√©es",icon:"fas fa-cogs",list:["Gestion des comptes","Am√©lioration du service","S√©curit√© et anti-fraude"]},{id:"partage",title:"Partage",icon:"fas fa-share-alt",text:"Nous ne vendons jamais vos donn√©es. Elles ne sont partag√©es qu‚Äôavec nos prestataires ou si la loi l‚Äôexige."},{id:"securite",title:"S√©curit√©",icon:"fas fa-lock",list:["HTTPS","Hachage des mots de passe","Surveillance des acc√®s"]},{id:"droits",title:"Vos droits",icon:"fas fa-user-check",list:["Acc√®s et rectification","Suppression du compte","Opposition et portabilit√©"]}]),f=v(!1),r=v(!1),i=v({name:"",email:"",message:""}),s=async()=>{f.value=!0;try{if((await fetch("https://formspree.io/f/xanwpnlk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.value)})).ok)r.value=!0,i.value={name:"",email:"",message:""},setTimeout(()=>{r.value=!1},5e3);else throw new Error("√âchec de l‚Äôenvoi")}catch(x){console.error("Erreur envoi :",x)}finally{f.value=!1}};return(x,p)=>(t(),o("div",Qd,[e("section",Zd,[e("div",Yd,[p[3]||(p[3]=e("h1",{class:"text-4xl sm:text-5xl font-bold mb-4"},"Politique de Confidentialit√©",-1)),p[4]||(p[4]=e("p",{class:"text-lg text-green-100 max-w-2xl mx-auto"},[h(" D√©couvrez comment "),e("strong",null,"Espace Cameroun"),h(" prot√®ge vos donn√©es et respecte votre vie priv√©e. ")],-1)),e("p",ec," Derni√®re mise √† jour : "+c(I(l)),1)])]),e("section",tc,[U(Ue,{name:"fade",tag:"div",class:"grid gap-6 md:grid-cols-2"},{default:G(()=>[(t(!0),o(W,null,Y(_.value,a=>(t(),o("div",{key:a.id,class:"bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col"},[e("div",sc,[e("div",oc,[e("i",{class:J([a.icon,"text-xl"])},null,2)]),e("h2",ac,c(a.title),1)]),a.text?(t(),o("p",rc,c(a.text),1)):$("",!0),a.list?(t(),o("ul",lc,[(t(!0),o(W,null,Y(a.list,m=>(t(),o("li",{key:m},c(m),1))),128))])):$("",!0)]))),128))]),_:1})]),e("section",nc,[p[8]||(p[8]=e("h3",{class:"text-2xl font-semibold text-center text-[var(--espace-vert)] mb-4"}," üíå Une question sur vos donn√©es ? ",-1)),p[9]||(p[9]=e("p",{class:"text-gray-600 text-center mb-6"}," Utilisez ce formulaire pour nous contacter directement. Nous vous r√©pondrons dans les plus brefs d√©lais. ",-1)),e("form",{onSubmit:ie(s,["prevent"]),class:"space-y-4"},[e("div",null,[p[5]||(p[5]=e("label",{for:"name",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Nom",-1)),O(e("input",{type:"text",id:"name",name:"name","onUpdate:modelValue":p[0]||(p[0]=a=>i.value.name=a),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre nom"},null,512),[[Q,i.value.name]])]),e("div",null,[p[6]||(p[6]=e("label",{for:"email",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Email",-1)),O(e("input",{type:"email",id:"email",name:"email","onUpdate:modelValue":p[1]||(p[1]=a=>i.value.email=a),required:"",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"votre@email.com"},null,512),[[Q,i.value.email]])]),e("div",null,[p[7]||(p[7]=e("label",{for:"message",class:"block text-sm font-medium text-[var(--espace-vert)]"},"Message",-1)),O(e("textarea",{id:"message",name:"message","onUpdate:modelValue":p[2]||(p[2]=a=>i.value.message=a),required:"",rows:"4",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[var(--espace-vert)] focus:outline-none",placeholder:"Votre message..."},null,512),[[Q,i.value.message]])]),e("button",{type:"submit",disabled:f.value,class:J(["w-full bg-[var(--espace-or)] text-[var(--espace-vert)] px-4 py-3 rounded-lg font-bold flex items-center justify-center transition hover:bg-yellow-400",{"opacity-50 cursor-not-allowed":f.value}])},[f.value?(t(),o("span",uc)):$("",!0),e("span",null,c(f.value?"Envoi...":"Envoyer"),1)],10,ic)],32),r.value?(t(),o("p",dc," ‚úÖ Merci ! Votre message a √©t√© envoy√© avec succ√®s. ")):$("",!0)])]))}}),Fc=le(cc,[["__scopeId","data-v-e20adc0f"]]);export{to as A,bc as C,Ic as D,gc as F,fc as H,Ec as J,xc as L,Vc as M,yc as P,hc as R,wc as a,jc as b,Sc as c,$c as d,_c as e,Cc as f,Mc as g,kc as h,Ac as i,zc as j,Pc as k,Fc as l};
